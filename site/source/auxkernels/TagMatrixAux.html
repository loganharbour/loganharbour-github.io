<!DOCTYPE html><head><meta charset="UTF-8"><title>TagMatrixAux.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="29ed3f2b-545d-43ba-b7cd-1e8ebdd66430"><i class="material-icons">menu</i></a><ul class="sidenav" id="29ed3f2b-545d-43ba-b7cd-1e8ebdd66430"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">auxkernels</span><a href="#" class="breadcrumb">TagMatrixAux</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="90f1932c-d965-474d-a252-f07f40bde134" data-section-level="1" data-section-text="TagMatrixAux"><h1 id="tagmatrixaux">TagMatrixAux</h1><p>The diagonal value of the matrix (associated with a tag) is retrieved for a given node. And the diagonal value is used as the nodal value for the AuxVariable that will be written out in an exodus file for visualization.</p><p>Couple the diag of a tag matrix, and return its nodal value</p><section class="scrollspy" id="54b114cd-daf4-42eb-aba2-e72522a4bb1e" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="8f66f50c-d32d-4e41-9120-f9034e0b6408" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">v</span><span class="moose-parameter-header-description">The coupled variable whose components are coupled to AuxVariable</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The coupled variable whose components are coupled to AuxVariable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The name of the variable that this object applies to</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>AuxVariableName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the variable that this object applies to</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="41717045-8ac2-4d17-aaf0-ef03c3c8ee70" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">The list of block ids (SubdomainID) that this object will be applied</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<SubdomainName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of block ids (SubdomainID) that this object will be applied</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, PRE_DISPLACE.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL CUSTOM PRE_DISPLACE</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, PRE_DISPLACE.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">matrix_tag</span><span class="moose-parameter-header-default">TagName</span><span class="moose-parameter-header-description">Tag Name this Aux works on</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TagName</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Tag Name this Aux works on</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="c23b20cc-33a6-4ccb-8532-46b706c2af9c" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="7fbf3668-b7c0-47d4-80fc-9877aa0312a1" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#c01f8dd2-c9ea-479c-a36b-ca945e2b9db9" class="modal-trigger">test/tests/tag/2d_diffusion_dg_tag.i</a></li><li><a href="#4f12c6ec-b2ac-420e-b737-c0dfe6d4a2d4" class="modal-trigger">test/tests/tag/tag_neumann.i</a></li><li><a href="#ae24f7e9-7914-4d40-96df-45459a0a7399" class="modal-trigger">test/tests/tag/tag_nodal_kernels.i</a></li><li><a href="#d28b1a65-9cbb-4673-97f5-4016490fb3e0" class="modal-trigger">test/tests/tag/tag_interface_kernels.i</a></li><li><a href="#2d43695d-c859-4e80-bc3c-dfe588c051ce" class="modal-trigger">test/tests/tag/2d_diffusion_tag_matrix.i</a></li><li><a href="#e3714b29-cdb2-4fcf-a422-e448d6a55e27" class="modal-trigger">test/tests/tag/2d_diffusion_matrix_tag_test.i</a></li><li><a href="#99dbcd00-38fb-4345-b68c-de6a4574b1f5" class="modal-trigger">test/tests/tag/tag_dirac_kernels.i</a></li></ul><div class="modal moose-modal" id="c01f8dd2-c9ea-479c-a36b-ca945e2b9db9"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_dg_tag.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 4
  ny = 4
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  elem_type = QUAD4
[]

[Variables]
  [./u]
    order = FIRST
    family = MONOMIAL

    [./InitialCondition]
      type = ConstantIC
      value = 1
    [../]
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = MONOMIAL
  [../]

  [./tag_variable2]
    order = FIRST
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Functions]
  [./forcing_fn]
    type = ParsedFunction
    value = 2*pow(e,-x-(y*y))*(1-2*y*y)
  [../]

  [./exact_fn]
    type = ParsedGradFunction
    value = pow(e,-x-(y*y))
    grad_x = -pow(e,-x-(y*y))
    grad_y = -2*y*pow(e,-x-(y*y))
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./abs]
    type = Reaction
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./forcing]
    type = BodyForce
    variable = u
    function = forcing_fn
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[DGKernels]
  [./dg_diff]
    type = DGDiffusion
    variable = u
    epsilon = -1
    sigma = 6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./all]
    type = DGFunctionDiffusionDirichletBC
    variable = u
    boundary = &#x27;0 1 2 3&#x27;
    function = exact_fn
    epsilon = -1
    sigma = 6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
  nl_rel_tol = 1e-10
[]

[Postprocessors]
  [./h]
    type = AverageElementSize
  [../]

  [./dofs]
    type = NumDOFs
  [../]

  [./l2_err]
    type = ElementL2Error
    variable = u
    function = exact_fn
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4f12c6ec-b2ac-420e-b737-c0dfe6d4a2d4"><div class="modal-content"><h4>test/tests/tag/tag_neumann.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  construct_side_list_from_node_list = true
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./right]
    type = NeumannBC
    variable = u
    boundary = right
    value = 2
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ae24f7e9-7914-4d40-96df-45459a0a7399"><div class="modal-content"><h4>test/tests/tag/tag_nodal_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
  [./nodal_ode]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./time]
    type = TimeDerivative
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[NodalKernels]
  [./td]
    type = TimeDerivativeNodalKernel
    variable = nodal_ode
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./constant_rate]
    type = ConstantRate
    variable = nodal_ode
    rate = 1.0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 10
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;time nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = nodal_ode
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  nl_rel_tol = 1e-08
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d28b1a65-9cbb-4673-97f5-4016490fb3e0"><div class="modal-content"><h4>test/tests/tag/tag_interface_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 2
    xmax = 2
    ny = 2
    ymax = 2
    nz = 2
    zmax = 2
  []
  [./subdomain1]
    input = gen
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 1&#x27;
    block_id = 1
  [../]
  [./break_boundary]
    input = subdomain1
    type = BreakBoundaryOnSubdomainGenerator
  [../]
  [./interface]
    type = SideSetsBetweenSubdomainsGenerator
    input = break_boundary
    primary_block = &#x27;0&#x27;
    paired_block = &#x27;1&#x27;
    new_boundary = &#x27;primary0_interface&#x27;
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
    block = 0
  [../]

  [./v]
    order = FIRST
    family = LAGRANGE
    block = 1
  [../]
[]

[Kernels]
  [./diff_u]
    type = CoeffParamDiffusion
    variable = u
    D = 4
    block = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./diff_v]
    type = CoeffParamDiffusion
    variable = v
    D = 2
    block = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./source_u]
    type = BodyForce
    variable = u
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[InterfaceKernels]
  [./interface]
    type = PenaltyInterfaceDiffusion
    variable = u
    neighbor_var = v
    boundary = primary0_interface
    penalty = 1e6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./u]
    type = VacuumBC
    variable = u
    boundary = &#x27;left_to_0 bottom_to_0 back_to_0 right top front&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./v]
    type = VacuumBC
    variable = v
    boundary = &#x27;left_to_1 bottom_to_1 back_to_1&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
    block = 0
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
    block = 1
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    block = 0
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = v
    block = 1
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Postprocessors]
  [./u_int]
    type = ElementIntegralVariablePostprocessor
    variable = u
    block = 0
  [../]
  [./v_int]
    type = ElementIntegralVariablePostprocessor
    variable = v
    block = 1
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2d43695d-c859-4e80-bc3c-dfe588c051ce"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_tag_matrix.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    nx = 2
    ny = 2
    dim = 2
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
  [../]
[]

[AuxKernels]
  [./TagMatrixAux1]
    type = TagMatrixAux
    variable = tag_variable1
    v = u
    matrix_tag = mat_tag1
  [../]

  [./TagMatrixAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
    extra_matrix_tags = mat_tag1
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
    extra_matrix_tags = mat_tag2
  [../]
[]

[Problem]
  type = FEProblem
  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  file_base = tag_matrix_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e3714b29-cdb2-4fcf-a422-e448d6a55e27"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_matrix_tag_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    nx = 2
    ny = 2
    dim = 2
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./tag_variable]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]

  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
  [../]

  [./diff1]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag2&#x27;
    vector_tags = vec_tag1
  [../]

  [./diff2]
    type = Diffusion
    variable = u
    vector_tags = vec_tag1
  [../]

  [./diff3]
    type = Diffusion
    variable = u
    vector_tags = vec_tag1
  [../]
[]

[AuxKernels]
  [./TagMatrixAux]
    type = TagMatrixAux
    variable = tag_variable
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
    extra_matrix_tags = mat_tag1
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
    extra_matrix_tags = mat_tag1
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  file_base = matrix_tag_test_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="99dbcd00-38fb-4345-b68c-de6a4574b1f5"><div class="modal-content"><h4>test/tests/tag/tag_dirac_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  nx = 2
  ny = 2
  elem_type = QUAD4
  uniform_refine = 4
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]

  [./v]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./ddt_u]
    type = TimeDerivative
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./diff_u]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./ddt_v]
    type = TimeDerivative
    variable = v
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./diff_v]
    type = Diffusion
    variable = v
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[DiracKernels]
  [./nonlinear_source]
    type = NonlinearSource
    variable = u
    coupled_var = v
    scale_factor = 1000
    point = &#x27;0.2 0.3 0&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./left_u]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./right_u]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./left_v]
    type = DirichletBC
    variable = v
    boundary = 3
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./right_v]
    type = DirichletBC
    variable = v
    boundary = 1
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[Preconditioning]
  [./precond]
    type = SMP
    full = true
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;time nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27; # NEWTON provides a more stringent test of off-diagonal Jacobians
  num_steps = 5
  dt = 1
  dtmin = 1
  l_max_its = 100
  nl_max_its = 6
  nl_abs_tol = 1.e-13
[]

[Postprocessors]
  [./point_value]
    type = PointValue
    variable = u
    point = &#x27;0.2 0.3 0&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="17e5d8a4-c3cd-4b58-aeab-d196e3722205" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#54b114cd-daf4-42eb-aba2-e72522a4bb1e" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#7fbf3668-b7c0-47d4-80fc-9877aa0312a1" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#17e5d8a4-c3cd-4b58-aeab-d196e3722205" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>