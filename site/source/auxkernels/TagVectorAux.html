<!DOCTYPE html><head><meta charset="UTF-8"><title>TagVectorAux.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="16e3445a-f1d9-41b8-a32e-0da8f35ff46f"><i class="material-icons">menu</i></a><ul class="sidenav" id="16e3445a-f1d9-41b8-a32e-0da8f35ff46f"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">auxkernels</span><a href="#" class="breadcrumb">TagVectorAux</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="7e164abc-183c-4a4a-a25c-71fae099f3b5" data-section-level="1" data-section-text="TagVectorAux"><h1 id="tagvectoraux">TagVectorAux</h1><p>The value of a tagged vector for a given node and a given variable is coupled to the current AuxVariable. TagVectorAux return the coupled nodal value. AuxVariable then is written out in an exodus file. </p><p>Couple a tag vector, and return its nodal value</p><section class="scrollspy" id="a4cf6bf6-34c5-45c1-adbb-0bbc498a5868" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="037f5dd9-d7b1-47ae-aa67-3f74014e4f63" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">v</span><span class="moose-parameter-header-description">The coupled variable whose components are coupled to AuxVariable</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The coupled variable whose components are coupled to AuxVariable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The name of the variable that this object applies to</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>AuxVariableName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the variable that this object applies to</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">vector_tag</span><span class="moose-parameter-header-description">Tag Name this Aux works on</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Tag Name this Aux works on</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="e6d858c0-2f6b-4543-b361-5bedad5b3612" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">The list of block ids (SubdomainID) that this object will be applied</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<SubdomainName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of block ids (SubdomainID) that this object will be applied</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, PRE_DISPLACE.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL CUSTOM PRE_DISPLACE</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM, PRE_DISPLACE.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="8278319d-839f-40d4-8feb-526ac5e91877" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="2e135680-fe31-424e-999d-46ac73d1e53c" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#c71d5a98-adfc-4085-88f8-655c598bd275" class="modal-trigger">test/tests/tag/2d_diffusion_dg_tag.i</a></li><li><a href="#870a5a40-3f58-4e9d-911b-589fb89ae698" class="modal-trigger">modules/tensor_mechanics/test/tests/plane_stress/weak_plane_stress_finite_tension_pull.i</a></li><li><a href="#4a5bfef6-0328-4c02-9dd6-501c5dd23611" class="modal-trigger">test/tests/tag/tag_interface_kernels.i</a></li><li><a href="#d52630e4-0361-4088-9823-c69f14e57488" class="modal-trigger">test/tests/tag/2d_diffusion_tag_vector.i</a></li><li><a href="#35bd5706-33b6-4d01-85ab-e8ca77a1da1e" class="modal-trigger">modules/tensor_mechanics/test/tests/plane_stress/3D_finite_tension_pull.i</a></li><li><a href="#e67b5d62-ac92-4f54-a199-440cabd05440" class="modal-trigger">test/tests/tag/tag_dirac_kernels.i</a></li><li><a href="#4a99f6b3-e500-45fa-b5fb-18c8bd570302" class="modal-trigger">test/tests/tag/eigen_tag.i</a></li><li><a href="#208c6342-9ea7-4b4d-af1c-c983b07c1753" class="modal-trigger">test/tests/tag/tag_nodal_kernels.i</a></li><li><a href="#9a8101c5-4983-4f89-ba19-60e02412a3ad" class="modal-trigger">modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction_cylinder.i</a></li><li><a href="#868bc37d-d49c-4ac6-8053-538518a48711" class="modal-trigger">modules/heat_conduction/test/tests/convective_flux_function/convective_flux_function.i</a></li><li><a href="#3bc33608-3dd7-4a1d-b342-419ba3198b55" class="modal-trigger">test/tests/tag/2d_diffusion_vector_tag_test.i</a></li><li><a href="#b2e346ee-eb94-4c6d-9607-c38800f708b7" class="modal-trigger">modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction_3D.i</a></li><li><a href="#2500faf1-470f-4fdb-bb0a-488914d53ef6" class="modal-trigger">modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</a></li><li><a href="#37282446-ae86-4ff2-ab44-73b18f4c35bd" class="modal-trigger">test/tests/tag/tag_neumann.i</a></li><li><a href="#f023ff8e-3384-43ab-aa59-859181f7b1d6" class="modal-trigger">modules/tensor_mechanics/test/tests/generalized_plane_strain/generalized_plane_strain_ref_resid.i</a></li></ul><div class="modal moose-modal" id="c71d5a98-adfc-4085-88f8-655c598bd275"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_dg_tag.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 4
  ny = 4
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  elem_type = QUAD4
[]

[Variables]
  [./u]
    order = FIRST
    family = MONOMIAL

    [./InitialCondition]
      type = ConstantIC
      value = 1
    [../]
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = MONOMIAL
  [../]

  [./tag_variable2]
    order = FIRST
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Functions]
  [./forcing_fn]
    type = ParsedFunction
    value = 2*pow(e,-x-(y*y))*(1-2*y*y)
  [../]

  [./exact_fn]
    type = ParsedGradFunction
    value = pow(e,-x-(y*y))
    grad_x = -pow(e,-x-(y*y))
    grad_y = -2*y*pow(e,-x-(y*y))
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./abs]
    type = Reaction
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./forcing]
    type = BodyForce
    variable = u
    function = forcing_fn
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[DGKernels]
  [./dg_diff]
    type = DGDiffusion
    variable = u
    epsilon = -1
    sigma = 6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./all]
    type = DGFunctionDiffusionDirichletBC
    variable = u
    boundary = &#x27;0 1 2 3&#x27;
    function = exact_fn
    epsilon = -1
    sigma = 6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
  nl_rel_tol = 1e-10
[]

[Postprocessors]
  [./h]
    type = AverageElementSize
  [../]

  [./dofs]
    type = NumDOFs
  [../]

  [./l2_err]
    type = ElementL2Error
    variable = u
    function = exact_fn
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="870a5a40-3f58-4e9d-911b-589fb89ae698"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/plane_stress/weak_plane_stress_finite_tension_pull.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
  out_of_plane_strain = strain_zz
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 1
    ny = 1
  []
[]

[Variables]
  [disp_x]
  []
  [disp_y]
  []
  [strain_zz]
  []
[]

[AuxVariables]
  [react_x]
  []
[]

[Postprocessors]
  [react_x]
    type = NodalSum
    variable = &#x27;react_x&#x27;
    boundary = &#x27;right&#x27;
  []
  [stress_xx]
    type = ElementalVariableValue
    variable = &#x27;stress_xx&#x27;
    elementid = 0
  []
  [strain_zz]
    type = ElementalVariableValue
    variable = &#x27;strain_zz&#x27;
    elementid = 0
  []
[]

[Modules/TensorMechanics/Master]
  [plane_stress]
    strain = FINITE
    planar_formulation = WEAK_PLANE_STRESS
    extra_vector_tags = &#x27;ref&#x27;
    generate_output = &#x27;stress_xx stress_xy stress_yy stress_zz strain_xx strain_xy strain_yy&#x27;
  []
[]

[AuxKernels]
  [react_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;react_x&#x27;
  []
[]

[BCs]
  [leftx]
    type = DirichletBC
    boundary = left
    variable = disp_x
    value = 0.0
  []
  [bottomy]
    type = DirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  []
  [rightx]
    type = FunctionDirichletBC
    boundary = right
    variable = disp_x
    function = &#x27;t&#x27;
  []
[]

[Materials]
  [elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    poissons_ratio = 0.3
    youngs_modulus = 1e6
  []
  [stress]
    type = ComputeFiniteStrainElasticStress
  []
[]

[Executioner]
  type = Transient

  solve_type = PJFNK
  line_search = none

  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-10

  # time control
  start_time = 0.0
  dt = 0.01
  dtmin = 0.01
  end_time = 0.2
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a5bfef6-0328-4c02-9dd6-501c5dd23611"><div class="modal-content"><h4>test/tests/tag/tag_interface_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 2
    xmax = 2
    ny = 2
    ymax = 2
    nz = 2
    zmax = 2
  []
  [./subdomain1]
    input = gen
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 1 1&#x27;
    block_id = 1
  [../]
  [./break_boundary]
    input = subdomain1
    type = BreakBoundaryOnSubdomainGenerator
  [../]
  [./interface]
    type = SideSetsBetweenSubdomainsGenerator
    input = break_boundary
    primary_block = &#x27;0&#x27;
    paired_block = &#x27;1&#x27;
    new_boundary = &#x27;primary0_interface&#x27;
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
    block = 0
  [../]

  [./v]
    order = FIRST
    family = LAGRANGE
    block = 1
  [../]
[]

[Kernels]
  [./diff_u]
    type = CoeffParamDiffusion
    variable = u
    D = 4
    block = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./diff_v]
    type = CoeffParamDiffusion
    variable = v
    D = 2
    block = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./source_u]
    type = BodyForce
    variable = u
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[InterfaceKernels]
  [./interface]
    type = PenaltyInterfaceDiffusion
    variable = u
    neighbor_var = v
    boundary = primary0_interface
    penalty = 1e6
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./u]
    type = VacuumBC
    variable = u
    boundary = &#x27;left_to_0 bottom_to_0 back_to_0 right top front&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./v]
    type = VacuumBC
    variable = v
    boundary = &#x27;left_to_1 bottom_to_1 back_to_1&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
    block = 0
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
    block = 1
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    block = 0
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = v
    block = 1
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Postprocessors]
  [./u_int]
    type = ElementIntegralVariablePostprocessor
    variable = u
    block = 0
  [../]
  [./v_int]
    type = ElementIntegralVariablePostprocessor
    variable = v
    block = 1
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d52630e4-0361-4088-9823-c69f14e57488"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_tag_vector.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    nx = 2
    ny = 2
    dim = 2
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag1
  [../]

  [./TagVectorAux2]
    type = TagVectorAux
    variable = tag_variable2
    v = u
    vector_tag = vec_tag2
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
    extra_vector_tags = vec_tag1
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
    extra_vector_tags = vec_tag2
  [../]
[]

[Problem]
  type = FEProblem
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  file_base = tag_vector_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="35bd5706-33b6-4d01-85ab-e8ca77a1da1e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/plane_stress/3D_finite_tension_pull.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 1
    ny = 1
    nz = 1
  []
[]

[AuxVariables]
  [react_x]
  []
[]

[Postprocessors]
  [react_x]
    type = NodalSum
    variable = &#x27;react_x&#x27;
    boundary = &#x27;right&#x27;
  []
  [stress_xx]
    type = ElementalVariableValue
    variable = &#x27;stress_xx&#x27;
    elementid = 0
  []
  [strain_zz]
    type = ElementalVariableValue
    variable = &#x27;strain_zz&#x27;
    elementid = 0
  []
[]

[Modules/TensorMechanics/Master]
  [plane_stress]
    strain = FINITE
    extra_vector_tags = &#x27;ref&#x27;
    generate_output = &#x27;stress_xx stress_xy stress_yy stress_zz strain_xx strain_xy strain_yy strain_zz&#x27;
    add_variables = true
  []
[]

[AuxKernels]
  [react_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;react_x&#x27;
  []
[]

[BCs]
  [leftx]
    type = DirichletBC
    boundary = left
    variable = disp_x
    value = 0.0
  []
  [bottomy]
    type = DirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  []
  [backz]
    type = DirichletBC
    boundary = back
    variable = disp_z
    value = 0.0
  []
  [rightx]
    type = FunctionDirichletBC
    boundary = right
    variable = disp_x
    function = &#x27;t&#x27;
  []
[]

[Materials]
  [elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    poissons_ratio = 0.3
    youngs_modulus = 1e6
  []
  [stress]
    type = ComputeFiniteStrainElasticStress
  []
[]

[Executioner]
  type = Transient

  solve_type = PJFNK
  line_search = none

  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-10

  # time control
  start_time = 0.0
  dt = 0.01
  dtmin = 0.01
  end_time = 0.2
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e67b5d62-ac92-4f54-a199-440cabd05440"><div class="modal-content"><h4>test/tests/tag/tag_dirac_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  nx = 2
  ny = 2
  elem_type = QUAD4
  uniform_refine = 4
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]

  [./v]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./ddt_u]
    type = TimeDerivative
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./diff_u]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./ddt_v]
    type = TimeDerivative
    variable = v
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./diff_v]
    type = Diffusion
    variable = v
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[DiracKernels]
  [./nonlinear_source]
    type = NonlinearSource
    variable = u
    coupled_var = v
    scale_factor = 1000
    point = &#x27;0.2 0.3 0&#x27;
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./left_u]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./right_u]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./left_v]
    type = DirichletBC
    variable = v
    boundary = 3
    value = 1
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]

  [./right_v]
    type = DirichletBC
    variable = v
    boundary = 1
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[Preconditioning]
  [./precond]
    type = SMP
    full = true
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;time nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27; # NEWTON provides a more stringent test of off-diagonal Jacobians
  num_steps = 5
  dt = 1
  dtmin = 1
  l_max_its = 100
  nl_max_its = 6
  nl_abs_tol = 1.e-13
[]

[Postprocessors]
  [./point_value]
    type = PointValue
    variable = u
    point = &#x27;0.2 0.3 0&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a99f6b3-e500-45fa-b5fb-18c8bd570302"><div class="modal-content"><h4>test/tests/tag/eigen_tag.i</h4><pre class="moose-pre"><code class="language-text">[Mesh/gmg]
  type = GeneratedMeshGenerator
  dim = 2
  nx = 5
  ny = 5
[]

[Variables/u]
[]

[AuxVariables]
  [vec_tag_diff]
    order = FIRST
    family = LAGRANGE
  []
  [vec_tag_rhs]
    order = FIRST
    family = LAGRANGE
  []
  [mat_tag_diff]
    order = FIRST
    family = LAGRANGE
  []
  [mat_tag_rhs]
    order = FIRST
    family = LAGRANGE
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
    extra_vector_tags = &#x27;tag_diff&#x27;
    extra_matrix_tags = &#x27;tag_diff&#x27;
  []
  [rhs]
    type = CoefReaction
    variable = u
    extra_vector_tags = &#x27;eigen tag_rhs&#x27;
    extra_matrix_tags = &#x27;tag_rhs&#x27;
  []
[]

[AuxKernels]
  [vec_tag_diff]
    type = TagVectorAux
    variable = vec_tag_diff
    v = u
    vector_tag = tag_diff
  []
  [vec_tag_rhs]
    type = TagVectorAux
    variable = vec_tag_rhs
    v = u
    vector_tag = tag_rhs
  []

  [mat_tag_diff]
    type = TagVectorAux
    variable = mat_tag_diff
    v = u
    vector_tag = tag_diff
  []
  [mat_tag_rhs]
    type = TagVectorAux
    variable = mat_tag_diff
    v = u
    vector_tag = tag_rhs
  []
[]

[BCs/homogeneous]
  type = DirichletBC
  boundary = &#x27;top right bottom left&#x27;
  variable = u
  value = 0
[]

[Problem]
  extra_tag_vectors = &#x27;tag_diff tag_rhs&#x27;
  extra_tag_matrices = &#x27;tag_diff tag_rhs&#x27;
[]


[Executioner]
  type = Eigenvalue
  solve_type = NEWTON
  eigen_problem_type = GEN_NON_HERMITIAN
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="208c6342-9ea7-4b4d-af1c-c983b07c1753"><div class="modal-content"><h4>test/tests/tag/tag_nodal_kernels.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
  [./nodal_ode]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./time]
    type = TimeDerivative
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[NodalKernels]
  [./td]
    type = TimeDerivativeNodalKernel
    variable = nodal_ode
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./constant_rate]
    type = ConstantRate
    variable = nodal_ode
    rate = 1.0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 10
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;time nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = nodal_ode
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  nl_rel_tol = 1e-08
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9a8101c5-4983-4f89-ba19-60e02412a3ad"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction_cylinder.i</h4><pre class="moose-pre"><code class="language-text"># This test uses the DisplacementAboutAxis boundary condition to twist the top
# of a cylinder while the bottom face of the cylinder remains fixed.  The
# TorqueReaction postprocessor is used to calculate the applied torque acting
# on the cylinder at the top face.  This test can be extended, with a new mesh,
# to model a crack in the center of the cylinder face under type III loading.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = cylinder.e
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
  [saved_z]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_z&#x27;
    variable = &#x27;saved_z&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = FINITE
    generate_output = &#x27;stress_xx&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./bottom_z]
    type = DirichletBC
    variable = disp_z
    boundary = 1
    value = 0.0
  [../]
  [./top_x]
    type = DisplacementAboutAxis
    boundary = 2
    function = &#x27;0.1*t&#x27;
    angle_units = degrees
    axis_origin = &#x27;10. 10. 10.&#x27;
    axis_direction = &#x27;0 -1.0 1.0&#x27;
    component = 0
    variable = disp_x
  [../]
  [./top_y]
    type = DisplacementAboutAxis
    boundary = 2
    function = &#x27;0.1*t&#x27;
    angle_units = degrees
    axis_origin = &#x27;10. 10. 10.&#x27;
    axis_direction = &#x27;0 -1.0 1.0&#x27;
    component = 1
    variable = disp_y
  [../]
  [./top_z]
    type = DisplacementAboutAxis
    boundary = 2
    function = &#x27;0.1*t&#x27;
    angle_units = degrees
    axis_origin = &#x27;10. 10. 10.&#x27;
    axis_direction = &#x27;0 -1.0 1.0&#x27;
    component = 2
    variable = disp_z
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeFiniteStrainElasticStress
  [../]
[]

[Executioner]

  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp_ew&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 50
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-11
  l_tol = 1e-10

  start_time = 0.0
  dt = 0.25

  end_time = 0.5
[]

[Postprocessors]
  [./torque]
    type = TorqueReaction
    boundary = 2
    reaction_force_variables = &#x27;saved_x saved_y saved_z&#x27;
    axis_origin = &#x27;10. 10. 10.&#x27;
    direction_vector = &#x27;0 -1.0 1.0&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="868bc37d-d49c-4ac6-8053-538518a48711"><div class="modal-content"><h4>modules/heat_conduction/test/tests/convective_flux_function/convective_flux_function.i</h4><pre class="moose-pre"><code class="language-text"># This is a test of the ConvectiveFluxFunction BC.
# There is a single 1x1 element with a prescribed temperature
# on the left side and a convective flux BC on the right side.
# The temperature on the left is 100, and the far-field temp is 200.
# The conductance of the body (conductivity * length) is 10
#
# If the conductance in the BC is also 10, the temperature on the
# right side of the solid element should be 150 because half of the
# temperature drop should occur over the body and half in the BC.
#
# The integrated flux is deltaT * conductance, or -50 * 10 = -500.
# The negative sign indicates that heat is going into the body.
#
# The conductance is defined multiple ways using this input, and
# as long as it evaluates to 10, the result described above will
# be obtained.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;bcs&#x27;
[]

[Variables]
  [temp]
    initial_condition = 100.0
  []
[]

[AuxVariables]
  [flux]
  []
[]

[AuxKernels]
  [flux]
    type = TagVectorAux
    variable = flux
    v = temp
    vector_tag = &#x27;bcs&#x27;
    execute_on = timestep_end
  []
[]

[Kernels]
  [heat_conduction]
    type = HeatConduction
    variable = temp
  []
[]

[Materials]
  [thermal]
    type = HeatConductionMaterial
    thermal_conductivity = 10.0
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 100.0
  []
  [right]
    type = ConvectiveFluxFunction
    variable = temp
    boundary = right
    T_infinity = 200.0
    coefficient = 10.0 #This will behave as described in the header of this file if this evaluates to 10
    extra_vector_tags = &#x27;bcs&#x27;
  []
[]

[Postprocessors]
  [integrated_flux]
    type = NodalSum
    variable = flux
    boundary = right
  []
[]

[Executioner]
  type = Transient
  start_time = 0.0
  end_time = 1.0
  dt = 1.0
  nl_rel_tol=1e-12
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3bc33608-3dd7-4a1d-b342-419ba3198b55"><div class="modal-content"><h4>test/tests/tag/2d_diffusion_vector_tag_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    nx = 2
    ny = 2
    dim = 2
  [../]
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1.0
  [../]
[]

[AuxVariables]

  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]

  [./reaction1]
    type = Reaction
    variable = u
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./reaction2]
    type = Reaction
    variable = u
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]

  [./reaction3]
    type = Reaction
    variable = u
  [../]

  [./reaction4]
    type = Reaction
    variable = u
  [../]

[]

[AuxKernels]

  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag1
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagVectorAux
    variable = tag_variable2
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]
[]

[BCs]
  active = &#x27;left right&#x27;

  [./left]
    type = DirichletBC
    variable = u
    preset = false
    boundary = 3
    value = 10
    extra_vector_tags = vec_tag1
  [../]

  [./right]
    type = DirichletBC
    variable = u
    preset = false
    boundary = 1
    value = 100
    extra_vector_tags = vec_tag2
  [../]

  [./right1]
    type = DirichletBC
    variable = u
    preset = false
    boundary = 1
    value = 100
  [../]

  [./right2]
    type = DirichletBC
    variable = u
    preset = false
    boundary = 1
    value = 100
  [../]
[]

[Problem]
  type = TagTestProblem
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
  test_tag_vectors =  &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  file_base = vector_tag_test_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b2e346ee-eb94-4c6d-9607-c38800f708b7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction_3D.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a single element cube mesh.
# Equal displacements in the x and the z are applied along the cube top to
# create a shear force along the (1, 0, 1) direction.  The rotation origin is
# set to the middle of the bottom face of the cube (0.5, 0, 0.5), and the axis of
# rotation direction vector  used to compute the torque reaction is set to (-1, 0, 1).
# Torque is calculated for the four nodes on the top of the cube. The projection
# of the node coordinates is zero for nodes 3 and 6, +1 for node 7, and -1 for
# node 2 from the selection of the direction vector and the rotation axis origin.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
  [saved_z]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_z&#x27;
    variable = &#x27;saved_z&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy stress_zz&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./bottom_x]
    type = DirichletBC
    variable = disp_x
    boundary = bottom
    value = 0.0
  [../]
  [./bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./bottom_z]
    type = DirichletBC
    variable = disp_z
    boundary = bottom
    value = 0.0
  [../]
  [./top_shear_z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = top
    function = &#x27;0.01*t&#x27;
  [../]
  [./top_shear_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = top
    function = &#x27;0.01*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp_ew&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-14
  nl_rel_tol = 1e-12
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = top
    reaction_force_variables = &#x27;saved_x saved_y saved_z&#x27;
    axis_origin = &#x27;0.5 0. 0.5&#x27;
    direction_vector = &#x27;-1. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2500faf1-470f-4fdb-bb0a-488914d53ef6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/torque_reaction/torque_reaction.i</h4><pre class="moose-pre"><code class="language-text"># Scalar torque reaction

# This test computes the sum of the torques acting on a ten element 2D bar mesh
# and is intended to replicate the classical wrench problem from statics.
# A displacement in the y along the right face is applied to the bar end to create
# a shear force along the bar end. The rotation origin default (the global origin)
# and the axis of rotation direction vector used to compute the torque reaction
# is set to (0, 0, 1) out of the plane.
# Torque is calculated for the two nodes on the left of the bar. For the bottom
# node on the right, the torque/ moment lever is the x coordinate value, and for
# the top node on the right the torque lever is the hypotenuse of the x and y
# coordinates.  The expected sum of the torque reaction is just over 37.

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 1
[]

[Problem]
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
[]

[AuxKernels]
  [saved_x]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    variable = &#x27;saved_x&#x27;
  []
  [saved_y]
    type = TagVectorAux
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_y&#x27;
    variable = &#x27;saved_y&#x27;
  []
[]

[Modules/TensorMechanics/Master]
  [master]
    strain = SMALL
    generate_output = &#x27;stress_xx stress_yy&#x27;
    add_variables = true
    extra_vector_tags = &#x27;ref&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = left
    value = 0.0
  [../]
  [./right_shear_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = right
    function = &#x27;0.001*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 207000
    poissons_ratio = 0.3
  [../]
  [./elastic_stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Executioner]
  type = Transient

  line_search = &#x27;none&#x27;

  l_max_its = 30
  nl_max_its = 20
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-10
  l_tol = 1e-8

  start_time = 0.0
  dt = 0.5

  end_time = 1
  num_steps = 2
[]

[Postprocessors]
  [./_dt]
    type = TimestepSize
  [../]
  [./torque]
    type = TorqueReaction
    boundary = right
    reaction_force_variables = &#x27;saved_x saved_y&#x27;
    direction_vector = &#x27;0. 0. 1.&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="37282446-ae86-4ff2-ab44-73b18f4c35bd"><div class="modal-content"><h4>test/tests/tag/tag_neumann.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  construct_side_list_from_node_list = true
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
[]

[AuxVariables]
  [./tag_variable1]
    order = FIRST
    family = LAGRANGE
  [../]

  [./tag_variable2]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./TagVectorAux1]
    type = TagVectorAux
    variable = tag_variable1
    v = u
    vector_tag = vec_tag2
    execute_on = timestep_end
  [../]

  [./TagVectorAux2]
    type = TagMatrixAux
    variable = tag_variable2
    v = u
    matrix_tag = mat_tag2
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
    extra_matrix_tags = &#x27;mat_tag1 mat_tag2&#x27;
    extra_vector_tags = &#x27;vec_tag1&#x27;
  [../]
  [./right]
    type = NeumannBC
    variable = u
    boundary = right
    value = 2
    extra_vector_tags = &#x27;vec_tag1 vec_tag2&#x27;
  [../]
[]

[Problem]
  type = TagTestProblem
  test_tag_vectors =  &#x27;nontime residual vec_tag1 vec_tag2&#x27;
  test_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;

  extra_tag_matrices = &#x27;mat_tag1 mat_tag2&#x27;
  extra_tag_vectors  = &#x27;vec_tag1 vec_tag2&#x27;
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f023ff8e-3384-43ab-aa59-859181f7b1d6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/generalized_plane_strain/generalized_plane_strain_ref_resid.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 2
    ny = 2
  [../]
[]

[Problem]
  type = ReferenceResidualProblem
  reference_vector = &#x27;ref&#x27;
  extra_tag_vectors = &#x27;ref&#x27;
  group_variables = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./scalar_strain_zz]
    order = FIRST
    family = SCALAR
  [../]
[]

[AuxVariables]
  [./temp]
    order = FIRST
    family = LAGRANGE
  [../]
  [./saved_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./saved_y]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Postprocessors]
  [./react_z]
    type = MaterialTensorIntegral
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    add_variables = true
    displacements = &#x27;disp_x disp_y&#x27;
    generate_output = &#x27;stress_xx stress_xy stress_yy stress_zz strain_xx strain_xy strain_yy strain_zz&#x27;
    planar_formulation = GENERALIZED_PLANE_STRAIN
    eigenstrain_names = eigenstrain
    scalar_out_of_plane_strain = scalar_strain_zz
    temperature = temp
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./tempfuncaux]
    type = FunctionAux
    variable = temp
    function = tempfunc
    use_displaced_mesh = false
  [../]
  [./saved_x]
    type = TagVectorAux
    variable = &#x27;saved_x&#x27;
    vector_tag = &#x27;ref&#x27;
    v = &#x27;disp_x&#x27;
    execute_on = timestep_end
  [../]
  [./saved_y]
    type = TagVectorAux
    variable = &#x27;saved_y&#x27;
    vector_tag = &#x27;ref&#x27;
    execute_on = timestep_end
    v = &#x27;disp_y&#x27;
  [../]
[]

[Functions]
  [./tempfunc]
    type = ParsedFunction
    value = &#x27;(1-x)*t&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = DirichletBC
    boundary = 0
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    boundary = 0
    variable = disp_y
    value = 0.0
  [../]
[]

[Materials]
  [./elastic_tensor]
    type = ComputeIsotropicElasticityTensor
    poissons_ratio = 0.3
    youngs_modulus = 1e6
  [../]
  [./thermal_strain]
    type = ComputeThermalExpansionEigenstrain
    temperature = temp
    thermal_expansion_coeff = 0.02
    stress_free_temperature = 0.5
    eigenstrain_name = eigenstrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = PJFNK
  line_search = none

# controls for linear iterations
  l_max_its = 100
  l_tol = 1e-4

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-10
  nl_abs_tol = 1e-5

# time control
  start_time = 0.0
  dt = 1.0
  dtmin = 1.0
  end_time = 2.0
  num_steps = 5000
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="9e8c46ec-a47c-4036-8383-6250d8d0134a" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#a4cf6bf6-34c5-45c1-adbb-0bbc498a5868" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#2e135680-fe31-424e-999d-46ac73d1e53c" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#9e8c46ec-a47c-4036-8383-6250d8d0134a" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>