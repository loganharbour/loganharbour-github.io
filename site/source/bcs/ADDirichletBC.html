<!DOCTYPE html><head><meta charset="UTF-8"><title>ADDirichletBC.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="daf7a614-7ccc-4e8b-958b-7c86ad3f1104"><i class="material-icons">menu</i></a><ul class="sidenav" id="daf7a614-7ccc-4e8b-958b-7c86ad3f1104"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">bcs</span><a href="#" class="breadcrumb">ADDirichletBC</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="f85c6736-1497-4e4d-a001-aa1e0232bdd1" data-section-level="1" data-section-text="ADDirichletBC"><h1 id="addirichletbc">ADDirichletBC</h1><p>Imposes the essential boundary condition <span tex="u=g" bookmark="moose-equation-9e601b49-f087-4034-9308-4bac1f1826ea" recursive="True" class="moose-katex-inline-equation" id="moose-equation-9e601b49-f087-4034-9308-4bac1f1826ea"><script>var element = document.getElementById("moose-equation-9e601b49-f087-4034-9308-4bac1f1826ea");katex.render("u=g", element, {displayMode:false,throwOnError:false});</script></span>, where <span tex="g" bookmark="moose-equation-caec4db2-5218-4674-9008-10843c3c6ef8" recursive="True" class="moose-katex-inline-equation" id="moose-equation-caec4db2-5218-4674-9008-10843c3c6ef8"><script>var element = document.getElementById("moose-equation-caec4db2-5218-4674-9008-10843c3c6ef8");katex.render("g", element, {displayMode:false,throwOnError:false});</script></span> is a constant, controllable value.</p><section class="scrollspy" id="4ada6852-2b8e-4b00-a3e4-82771227f392" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p><code>ADDirichletBC</code> is the simplest type of <code>NodalBC</code>, and is used for imposing so-called &quot;essential&quot; boundary conditions on systems of partial differential equations (PDEs).  Such boundary conditions force a particular set of degrees of freedom (DOFs) defined by the <code>boundary</code> parameter to take on a single, controllable value. This class is appropriate to use for PDEs of the form</p><p><span class="moose-katex-block-equation"><span tex="\begin{aligned}   -\nabla^2 u &= f && \quad \in \Omega \\   u &= g && \quad \in \partial \Omega_D \\   \frac{\partial u}{\partial n} &= h && \quad \in \partial \Omega_N, \end{aligned}" bookmark="moose-equation-0aeda7c0-8176-42de-b271-4d8f5f566c74" recursive="True" class="moose-katex-equation table-cell" id="moose-equation-0aeda7c0-8176-42de-b271-4d8f5f566c74"></span><script>var element = document.getElementById("moose-equation-0aeda7c0-8176-42de-b271-4d8f5f566c74");katex.render("\\begin{aligned}   -\\nabla^2 u &= f && \\quad \\in \\Omega \\\\   u &= g && \\quad \\in \\partial \\Omega_D \\\\   \\frac{\\partial u}{\\partial n} &= h && \\quad \\in \\partial \\Omega_N, \\end{aligned}", element, {displayMode:true,throwOnError:false});</script></span></p><p>where <span tex="\Omega \subset \mathbb{R}^n" bookmark="moose-equation-994582d0-64e0-49ae-89ad-b938cf8ae398" recursive="True" class="moose-katex-inline-equation" id="moose-equation-994582d0-64e0-49ae-89ad-b938cf8ae398"><script>var element = document.getElementById("moose-equation-994582d0-64e0-49ae-89ad-b938cf8ae398");katex.render("\\Omega \\subset \\mathbb{R}^n", element, {displayMode:false,throwOnError:false});</script></span> is the domain, and <span tex="\partial \Omega = \partial \Omega_D \cup \partial \Omega_N" bookmark="moose-equation-01057d88-dbd6-468f-b2b1-caa142596e2f" recursive="True" class="moose-katex-inline-equation" id="moose-equation-01057d88-dbd6-468f-b2b1-caa142596e2f"><script>var element = document.getElementById("moose-equation-01057d88-dbd6-468f-b2b1-caa142596e2f");katex.render("\\partial \\Omega = \\partial \\Omega_D \\cup \\partial \\Omega_N", element, {displayMode:false,throwOnError:false});</script></span> is its boundary. In this case, a <code>ADDirichletBC</code> object is used to impose the condition (2) on the subset of the boundary denoted by <span tex="\partial \Omega_D" bookmark="moose-equation-4843158e-8514-459b-a2d7-96cce2c66543" recursive="True" class="moose-katex-inline-equation" id="moose-equation-4843158e-8514-459b-a2d7-96cce2c66543"><script>var element = document.getElementById("moose-equation-4843158e-8514-459b-a2d7-96cce2c66543");katex.render("\\partial \\Omega_D", element, {displayMode:false,throwOnError:false});</script></span>. In this case, the <code>value</code> corresponds to the constant <span tex="g" bookmark="moose-equation-63a09443-b46c-4557-a7f9-77224f29bcce" recursive="True" class="moose-katex-inline-equation" id="moose-equation-63a09443-b46c-4557-a7f9-77224f29bcce"><script>var element = document.getElementById("moose-equation-63a09443-b46c-4557-a7f9-77224f29bcce");katex.render("g", element, {displayMode:false,throwOnError:false});</script></span>, and the user must define one or more sidesets corresponding to the boundary subset <span tex="\partial \Omega_D" bookmark="moose-equation-42392bc4-c405-48c9-9a4e-efbb76562a60" recursive="True" class="moose-katex-inline-equation" id="moose-equation-42392bc4-c405-48c9-9a4e-efbb76562a60"><script>var element = document.getElementById("moose-equation-42392bc4-c405-48c9-9a4e-efbb76562a60");katex.render("\\partial \\Omega_D", element, {displayMode:false,throwOnError:false});</script></span>.</p><p>Note that <code>ADDirichletBC</code> computes its Jacobian using automatic differentiation.</p></section><section class="scrollspy" id="a784a3cd-d11e-486d-8504-30a7f0cd314f" data-section-level="2" data-section-text="Preset boundary conditions"><h2 id="preset-boundary-conditions">Preset boundary conditions</h2><p>With the parameter <code>preset = true</code>, the value of the boundary condition is applied before the solve begins. With <code>preset = false</code>, the boundary condition is only enforced as the solve progresses. In most situations, presetting the boundary condition is better.</p><p>The default behavior of the <code>preset</code> parameter is determined by the flag <code>use_legacy_dirichlet_bc</code> in the application. Change this flag to false to switch your application to the preferred behavior (setting <code>preset = true</code> as the default).</p></section><section class="scrollspy" id="d0c1d4f0-4192-41b8-8556-3cd75e64da86" data-section-level="2" data-section-text="Example Input Syntax"><h2 id="example-input-syntax">Example Input Syntax</h2><pre class="moose-pre"><code class="language-text">[BCs]
  active = &#x27;left right&#x27;

  # We will use preset BCs
  [./left]
    type = ADDirichletBC
    variable = u
    boundary = 3
    value = 0
  [../]

  [./right]
    type = ADDirichletBC
    variable = u
    boundary = 1
    value = 1
  [../]
[]
</code></pre><a href="#129117e3-49a4-44ff-a858-e272a4613b7a" class="modal-trigger">(test/tests/bcs/ad_bc_preset_nodal/bc_preset_nodal.i)</a><div class="modal moose-modal" id="129117e3-49a4-44ff-a858-e272a4613b7a"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/bcs/ad_bc_preset_nodal/bc_preset_nodal.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  nz = 0
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[Variables]
  active = &#x27;u&#x27;

  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  active = &#x27;diff&#x27;

  [./diff]
    type = ADDiffusion
    variable = u
  [../]
[]

[BCs]
  active = &#x27;left right&#x27;

  # We will use preset BCs
  [./left]
    type = ADDirichletBC
    variable = u
    boundary = 3
    value = 0
  [../]

  [./right]
    type = ADDirichletBC
    variable = u
    boundary = 1
    value = 1
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  file_base = bc_preset_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="a5e29ecd-63a9-4a6c-a8fc-13f83438a915" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="bb14aa94-3e87-4878-a210-7e54bd0b5076" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">value</span><span class="moose-parameter-header-description">Value of the BC</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Value of the BC</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The name of the variable that this boundary condition applies to</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>NonlinearVariableName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the variable that this boundary condition applies to</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="435e9ba5-c131-4577-b831-c18cf1d64ad1" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">diag_save_in</span><span class="moose-parameter-header-description">The name of auxiliary variables to save this BC's diagonal jacobian contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<AuxVariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of auxiliary variables to save this BC's diagonal jacobian contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">displacements</span><span class="moose-parameter-header-description">The displacements</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The displacements</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">preset</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not to preset the BC (apply the value before the solve begins). Note that the default value of this parameter is handled by the use_legacy_dirichlet_bc parameter on the MooseApp.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to preset the BC (apply the value before the solve begins). Note that the default value of this parameter is handled by the use_legacy_dirichlet_bc parameter on the MooseApp.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">save_in</span><span class="moose-parameter-header-description">The name of auxiliary variables to save this BC's residual contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<AuxVariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of auxiliary variables to save this BC's residual contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_x_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the x-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the x-component of the variable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_y_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the y-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the y-component of the variable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_z_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the z-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the z-component of the variable</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="42c7b1ef-9066-4aa0-af56-54eca96c8e00" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">implicit</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines whether this object is calculated using an implicit or explicit form</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether this object is calculated using an implicit or explicit form</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="6d23e4d5-a9d7-4981-b088-3f5b1e007f81" data-section-level="3" data-section-text="Tagging Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">extra_matrix_tags</span><span class="moose-parameter-header-description">The extra tags for the matrices this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<TagName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The extra tags for the matrices this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_vector_tags</span><span class="moose-parameter-header-description">The extra tags for the vectors this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<TagName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The extra tags for the vectors this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">matrix_tags</span><span class="moose-parameter-header-default">system time</span><span class="moose-parameter-header-description">The tag for the matrices this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>system time</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>nontime system time</p><p class="moose-parameter-description"><span>Description:</span>The tag for the matrices this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">vector_tags</span><span class="moose-parameter-header-default">residual</span><span class="moose-parameter-header-description">The tag for the vectors this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>residual</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>nontime time residual</p><p class="moose-parameter-description"><span>Description:</span>The tag for the vectors this Kernel should fill</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Tagging Parameters</h3></summary></details></section></section><section class="scrollspy" id="7933e62e-a83a-4f50-b274-74c0a44c3320" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#3da08b78-4e20-4ea6-9a22-600c200887ca" class="modal-trigger">test/tests/controls/time_periods/bcs/adbcs.i</a></li><li><a href="#ec5bbaaf-7288-4316-b17b-16286992cb72" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking.i</a></li><li><a href="#2403891c-6f03-446c-a519-e6e61472568d" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/creep.i</a></li><li><a href="#923a0761-d765-43bc-b837-ea74b0169759" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential_deprecated.i</a></li><li><a href="#b8de5c68-ea3a-4f68-be77-f46672c6f5e5" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_1D_spherical/smallStrain_1DSphere.i</a></li><li><a href="#fa5fadc7-6fcb-44c6-827b-b04d3c44525e" class="modal-trigger">modules/stochastic_tools/examples/parameter_study/diffusion.i</a></li><li><a href="#f82cffb2-173e-4699-b075-b338fe019cb6" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_power.i</a></li><li><a href="#8b1a7e32-f191-458b-a562-a2396d788160" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</a></li><li><a href="#933c7a9a-6744-479a-8b50-855b222ca87c" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/lambda_shear_modulus_test.i</a></li><li><a href="#0be603f8-509c-47f5-85e1-ac0883f6f24d" class="modal-trigger">modules/tensor_mechanics/test/tests/rom_stress_update/verification.i</a></li><li><a href="#974bdfc5-b8ad-4774-a2e5-91bf51565610" class="modal-trigger">modules/tensor_mechanics/test/tests/rom_stress_update/lower_limit.i</a></li><li><a href="#d3bac0d1-838f-4007-bd9b-5f448ad356bf" class="modal-trigger">modules/tensor_mechanics/test/tests/rom_stress_update/2drz.i</a></li><li><a href="#f637611f-6b0a-4268-9e44-6f1059f5ebda" class="modal-trigger">modules/xfem/test/tests/moving_interface/ad_phase_transition.i</a></li><li><a href="#76ebe41e-bd5d-4cbc-b42e-d5c9cb7ae4c6" class="modal-trigger">modules/stochastic_tools/examples/sobol/diffusion.i</a></li><li><a href="#59593a5f-1481-4be4-832a-c2c86a13058c" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz.i</a></li><li><a href="#2284a83b-2c98-402d-b510-bbf864c92a68" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_centerline_VLC.i</a></li><li><a href="#2fa3621d-6633-456a-8f5e-553937487594" class="modal-trigger">test/tests/bcs/ad_bc_preset_nodal/bc_preset_nodal.i</a></li><li><a href="#1e5a185f-af3e-4062-a7e0-892d9f29355f" class="modal-trigger">modules/combined/test/tests/ad_power_law_creep/power_law_creep_restart2.i</a></li><li><a href="#96193b16-3ca6-4d3f-97d1-bd60f6823ef4" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_plane_stress.i</a></li><li><a href="#f18e07eb-4266-41d1-9ea3-d62674de3908" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/3D-RZ_finiteStrain_test.i</a></li><li><a href="#9c4cf4fc-aa7e-42ca-b4e9-fe0245a4eee5" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_linear_elasticity/applied_strain.i</a></li><li><a href="#87fe0fc6-10ac-415d-8e64-5b56c73a6497" class="modal-trigger">modules/xfem/test/tests/moving_interface/moving_ad_bimaterial.i</a></li><li><a href="#9fdf5a3e-690c-40bc-b04b-c764a8e95636" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/gtn_single.i</a></li><li><a href="#e9bc94b7-a572-4d36-9858-c3e83055a66a" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_dual.i</a></li><li><a href="#f32a9d64-c10c-446c-a7bf-d858a79faecf" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/exact.i</a></li><li><a href="#71110315-3391-4cb7-9550-12b0d0bd3bd3" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_function.i</a></li><li><a href="#d738b52d-b1c4-4dd2-beaa-7d39fdf947ad" class="modal-trigger">modules/combined/test/tests/ad_power_law_creep/power_law_creep_smallstrain.i</a></li><li><a href="#81a71b55-536f-4dc8-9e51-38d6b0524da7" class="modal-trigger">modules/tensor_mechanics/test/tests/rom_stress_update/3d.i</a></li><li><a href="#184c64d3-f84c-4b80-91f1-6cd86ce86ca4" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz_exponential.i</a></li><li><a href="#2361e4b2-2849-4393-aec7-8c3a9da68e2b" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_multiple_softening.i</a></li><li><a href="#e5ce9556-f514-4615-a8de-99aaa9a9e164" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential.i</a></li><li><a href="#56a12679-1160-4379-ab0d-464ebe92315d" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rotation.i</a></li><li><a href="#2fc1878d-8f8f-4bb9-9b6d-f0429ffdc682" class="modal-trigger">modules/combined/test/tests/ad_power_law_creep/power_law_creep_restart1.i</a></li><li><a href="#ba54bbd0-26ca-4a26-ba3c-1a009372e55f" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/3d_bar.i</a></li><li><a href="#4f2e9724-9f2f-43a1-8dff-ccf12a26fbc8" class="modal-trigger">modules/heat_conduction/test/tests/ad_convective_heat_flux/flux.i</a></li><li><a href="#e5359296-7061-497d-97c4-86239d220137" class="modal-trigger">modules/xfem/test/tests/bimaterials/glued_ad_bimaterials_2d.i</a></li><li><a href="#d5817b08-6590-40a9-800b-775b86d7ed64" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_deprecated.i</a></li><li><a href="#5f9b5f9d-a70a-4dad-be77-9a2e5dcf1464" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_resid.i</a></li><li><a href="#21372d63-4c2b-419f-af43-2e72e0cd332c" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_linear_elasticity/linear_elastic_material.i</a></li><li><a href="#9aecc346-2a47-432c-9249-75ea23514409" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_linear_elasticity/extra_stresses.i</a></li><li><a href="#61763676-6281-4afe-b86b-7139f62d0813" class="modal-trigger">modules/xfem/test/tests/bimaterials/inclusion_ad_bimaterials_2d.i</a></li><li><a href="#fd2e3896-0351-4d00-abce-72a81f8286b7" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_1D_spherical/finiteStrain_1DSphere_hollow.i</a></li><li><a href="#75d858ee-26c4-4a67-a6cf-1ae8261e9d92" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/bulk_modulus_shear_modulus_test.i</a></li><li><a href="#1d968cd1-b9f8-47ef-b504-a72ab58a0db4" class="modal-trigger">modules/combined/test/tests/ad_power_law_creep/power_law_creep_simple.i</a></li><li><a href="#887994e9-b898-473d-8f9a-a3fe094ab165" class="modal-trigger">modules/combined/test/tests/ad_power_law_creep/power_law_creep.i</a></li><li><a href="#43dd44e6-b190-4f66-8981-3795ea2d5fae" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_xyz.i</a></li><li><a href="#6778e1cf-0896-440f-b21d-c9d9f27a60cf" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/negative_volume.i</a></li><li><a href="#517a1e4b-96c3-43d4-92d0-15129488803e" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single.i</a></li><li><a href="#f8f8f47d-3115-42dc-9487-2670d4fd8d44" class="modal-trigger">modules/tensor_mechanics/test/tests/strain_energy_density/ad_rate_model_weak_plane.i</a></li><li><a href="#9b022ed3-40f6-44fc-839d-a7c11a4adcab" class="modal-trigger">modules/xfem/test/tests/moving_interface/moving_ad_diffusion.i</a></li><li><a href="#3da7a97d-227d-4c54-a9a9-f4f8c7bf02cc" class="modal-trigger">modules/heat_conduction/test/tests/joule_heating/transient_ad_jouleheating.i</a></li><li><a href="#0170a32a-7b6a-464a-835d-9cdf9618f834" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/bending_jacobian.i</a></li><li><a href="#efadbe82-1da3-4a84-a575-e0a5c12b9275" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/youngs_modulus_poissons_ratio_test.i</a></li><li><a href="#d6d2d98c-5a1f-49d9-84b0-5fb385fc06d0" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_test.i</a></li><li><a href="#d952bfa2-8b95-4849-89ca-b2742ee0ce9d" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single_split.i</a></li><li><a href="#0eb55b23-8bca-4ceb-8426-08d96c7976a1" class="modal-trigger">modules/combined/test/tests/exception/ad.i</a></li></ul><div class="modal moose-modal" id="3da08b78-4e20-4ea6-9a22-600c200887ca"><div class="modal-content"><h4>test/tests/controls/time_periods/bcs/adbcs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [u]
  []
[]

[Kernels]
  [diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = ADDirichletBC
    variable = u
    boundary = right
    value = 1
  []
  [right2]
    type = ADFunctionDirichletBC
    variable = u
    boundary = right
    function = (y*(t-1))+1
  []
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]

[Controls]
  [period0]
    type = TimePeriod
    disable_objects = &#x27;BoundaryCondition::right2&#x27;
    start_time = &#x27;0&#x27;
    end_time = &#x27;0.95&#x27;
    execute_on = &#x27;initial timestep_begin&#x27;
  []

  [period2]
    type = TimePeriod
    disable_objects = &#x27;BCs/right&#x27;
    start_time = &#x27;1&#x27;
    execute_on = &#x27;initial timestep_begin&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ec5bbaaf-7288-4316-b17b-16286992cb72"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking.
# The stress increases for two steps and then drops to zero.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2403891c-6f03-446c-a519-e6e61472568d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/creep.i</h4><pre class="moose-pre"><code class="language-text"># This test is provided as a check to ensure ADComputeMultiplePorousInelasticStress

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  base_name = &#x27;total&#x27;
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  active=&#x27;elasticity_tensor porous_stress creep&#x27;
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
    base_name = &#x27;total&#x27;
  [../]
  [./porous_stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = creep
    initial_porosity = 0.1
    outputs = all
    base_name = &#x27;total&#x27;
  [../]
  [./regular_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = creep
    outputs = all
    base_name = &#x27;total&#x27;
  [../]
  [./porosity]
    type = ADGenericConstantMaterial
    prop_names = porosity
    prop_values = 0.1
    outputs = all
  [../]
  [./creep]
    type = ADPowerLawCreepStressUpdate
    activation_energy = 4e4
    temperature = 1200
    coefficient = 1e-18
    gas_constant = 1.987
    n_exponent = 3
    base_name = &#x27;creep&#x27;
    outputs = all
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = total_hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = total_vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = creep_effective_creep_strain
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="923a0761-d765-43bc-b837-ea74b0169759"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential_deprecated.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.
#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 5 6&#x27;
    y = &#x27;0 0 .00175&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 2 3&#x27;
    y = &#x27;0 0 .0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    #type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]

  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]

  [./move_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    function = disply
  [../]

  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    cracking_release = exponential
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-6

  nl_max_its = 10
  nl_rel_tol = 1e-12
  nl_abs_tol = 1.e-4

  start_time = 0.0
  dt = 0.02
  dtmin = 0.02
  num_steps = 300
[]

[Outputs]
  exodus = true
  file_base = cracking_exponential_out
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b8de5c68-ea3a-4f68-be77-f46672c6f5e5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_1D_spherical/smallStrain_1DSphere.i</h4><pre class="moose-pre"><code class="language-text"># This simulation models the mechanics solution for a solid sphere under
# pressure, applied on the outer surfaces, using 1D spherical symmetry
# assumpitions.  The inner center of the sphere, r = 0, is pinned to prevent
# movement of the sphere.
#
# From Bower (Applied Mechanics of Solids, 2008, available online at
# solidmechanics.org/text/Chapter4_1/Chapter4_1.htm), and applying the outer
# pressure and pinned displacement boundary conditions set in this simulation,
# the radial displacement is given by:
#
# u(r) = \frac{- P * (1 - 2 * v) * r}{E}
#
# where P is the applied pressure, v is Poisson&#x27;s ration, E is Young&#x27;s Modulus,
# and r is the radial position.
#
# The test assumes a radius of 4, zero displacement at r = 0mm, and an applied
# outer pressure of 1MPa.  Under these conditions in a solid sphere, the radial
# stress is constant and has a value of -1 MPa.
[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 4
  nx = 4
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Problem]
  coord_type = RSPHERICAL
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    add_variables = true
    save_in = residual_r
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_rr]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./residual_r]
  [../]
[]

[Postprocessors]
  [./stress_rr]
    type = ElementAverageValue
    variable = stress_rr
  [../]
  [./residual_r]
    type = NodalSum
    variable = residual_r
    boundary = right
  [../]
[]

[AuxKernels]
  [./stress_rr]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_rr
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./innerDisp]
    type = ADDirichletBC
    boundary = left
    variable = disp_r
    value = 0.0
  [../]
  [./outerPressure]
    type = ADPressure
    boundary = right
    variable = disp_r
    component = 0
    constant = 1
  [../]
[]

[Materials]
  [./Elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    poissons_ratio = 0.345
    youngs_modulus = 1e4
  [../]
  [./stress]
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = PJFNK
  line_search = none

# controls for linear iterations
  l_max_its = 100
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-10
  nl_abs_tol = 1e-5

# time control
  start_time = 0.0
  dt = 0.25
  dtmin = 0.0001
  end_time = 1.0
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fa5fadc7-6fcb-44c6-827b-b04d3c44525e"><div class="modal-content"><h4>modules/stochastic_tools/examples/parameter_study/diffusion.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables/T]
[]

[Kernels]
  [time]
    type = ADTimeDerivative
    variable = T
  []
  [diff]
    type = ADMatDiffusion
    variable = T
    diffusivity = diffusivity
  []
  [source]
    type = ADBodyForce
    variable = T
    value = 1
    function = 1
  []
[]

[BCs]
  [left]
    type = ADDirichletBC
    variable = T
    boundary = left
    value = -10
  []
  [right]
    type = ADNeumannBC
    variable = T
    boundary = right
    value = -100
  []
[]

[Materials/constant]
  type = ADGenericConstantMaterial
  prop_names = &#x27;diffusivity&#x27;
  prop_values = 1
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  num_steps = 4
  dt = 0.25
[]

[Postprocessors]
  [T_avg]
    type = AverageNodalVariableValue
    variable = T
  []
  [q_left]
    type = ADSideFluxAverage
    variable = T
    boundary = left
    diffusivity = diffusivity
  []
[]

[Controls/stochastic]
  type = SamplerReceiver
[]

[Outputs]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f82cffb2-173e-4699-b075-b338fe019cb6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_power.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple test of power law softening law for smeared cracking.
# Upon reaching the failure stress in the x direction, the
# softening model abruptly reduces the stress to a fraction
# of its original value, and re-loading occurs at a reduced
# stiffness. This is repeated multiple times.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = right
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = power_law_softening
  [../]
  [./power_law_softening]
    type = ADPowerLawSoftening
    stiffness_reduction = 0.3333
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 1.0
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8b1a7e32-f191-458b-a562-a2396d788160"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  second_order = true
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = false
[]

[AuxVariables]
  [./hydrostatic_stress]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./hydrostatic_stress]
    type = ADRankTwoScalarAux
    variable = hydrostatic_stress
    rank_two_tensor = stress
    scalar_type = Hydrostatic
  [../]
[]

[Variables]
  [./disp_x]
    order = SECOND
    scaling = 1e-10
  [../]
  [./disp_y]
    order = SECOND
    scaling = 1e-10
  [../]
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 10&#x27;
    y = &#x27;0 1e-3&#x27;
  [../]
[]

[Kernels]
  [./stress_x]
    type = ADStressDivergenceTensors
    component = 0
    variable = disp_x
  [../]
  [./stress_y]
    type = ADStressDivergenceTensors
    component = 1
    variable = disp_y
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeIncrementalSmallStrain
  [../]
  [./elastic_strain]
    type = ADComputeMultipleInelasticStress
  [../]

  [./creep_ten]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten
  [../]
  [./creep_ten2]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten2
  [../]
  [./creep_one]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_one
  [../]
  [./creep_nine]
    type = ADPowerLawCreepStressUpdate
    coefficient = 9e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_nine
  [../]
  [./creep_zero]
    type = ADPowerLawCreepStressUpdate
    coefficient = 0e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_zero
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]

  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]

  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = -pc_hypre_type
  petsc_options_value = boomeramg

  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-5

  num_steps = 5
  dt = 1e-1
[]

[Postprocessors]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
  [../]
  [./max_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="933c7a9a-6744-479a-8b50-855b222ca87c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/lambda_shear_modulus_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[AuxVariables]
  [./stress_11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./stress_11]
    type = ADRankTwoAux
    variable = stress_11
    rank_two_tensor = stress
    index_j = 1
    index_i = 1
  [../]
[]

[BCs]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./top]
    type = ADDirichletBC
    variable = disp_y
    boundary = top
    value = 0.001
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    lambda = 113636
    shear_modulus = 454545
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  l_max_its = 20
  nl_max_its = 10
  solve_type = NEWTON
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0be603f8-509c-47f5-85e1-ac0883f6f24d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/rom_stress_update/verification.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[AuxVariables]
  [./temperature]
  [../]
[]

[AuxKernels]
  [./temp_aux]
    type = FunctionAux
    variable = temperature
    function = temp_fcn
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
[]

[Functions]
  [./rhom_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 1
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./rhoi_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 2
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./vmJ2_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 3
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./evm_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 4
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./temp_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 5
    format = columns
    xy_in_file_only = false
    direction = right
  [../]

  [./rhom_soln_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 7
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./rhoi_soln_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 8
    format = columns
    xy_in_file_only = false
    direction = right
  [../]
  [./creep_rate_soln_fcn]
    type = PiecewiseConstant
    data_file = ss316_verification_data.csv
    x_index_in_file = 0
    y_index_in_file = 10
    format = columns
    xy_in_file_only = false
    direction = right
  [../]

  [./rhom_diff_fcn]
    type = ParsedFunction
    vars = &#x27;rhom_soln rhom&#x27;
    vals = &#x27;rhom_soln rhom&#x27;
    value = &#x27;abs(rhom_soln - rhom) / rhom_soln&#x27;
  [../]
  [./rhoi_diff_fcn]
    type = ParsedFunction
    vars = &#x27;rhoi_soln rhoi&#x27;
    vals = &#x27;rhoi_soln rhoi&#x27;
    value = &#x27;abs(rhoi_soln - rhoi) / rhoi_soln&#x27;
  [../]
  [./creep_rate_diff_fcn]
    type = ParsedFunction
    vars = &#x27;creep_rate_soln creep_rate&#x27;
    vals = &#x27;creep_rate_soln creep_rate&#x27;
    value = &#x27;abs(creep_rate_soln - creep_rate) / creep_rate_soln&#x27;
  [../]
[]


[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;vonmises_stress&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./symmx]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./symmy]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./symmz]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./pressure_x]
    type = ADPressure
    variable = disp_x
    component = 0
    boundary = right
    function = vmJ2_fcn
    constant = 0.5e6
  [../]
  [./pressure_y]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    function = vmJ2_fcn
    constant = -0.5e6
  [../]
  [./pressure_z]
    type = ADPressure
    variable = disp_z
    component = 2
    boundary = front
    function = vmJ2_fcn
    constant = -0.5e6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e11
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = rom_stress_prediction
  [../]
  [./rom_stress_prediction]
    type = SS316HLAROMANCEStressUpdateTest
    temperature = temperature
    effective_inelastic_strain_name = effective_creep_strain
    internal_solve_full_iteration_history = true
    outputs = all
    wall_dislocation_density_forcing_function = rhoi_fcn
    cell_dislocation_density_forcing_function = rhom_fcn
    old_creep_strain_forcing_function = evm_fcn
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options = &#x27;-snes_ksp_ew -snes_converged_reason -ksp_converged_reason&#x27;# -ksp_error_if_not_converged -snes_error_if_not_converged&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  line_search = &#x27;none&#x27;
  automatic_scaling = true
  compute_scaling_once = false

  nl_abs_tol = 1e-10

  dt = 1e-3
  end_time = 1e-2
[]

[Postprocessors]
  [./effective_strain_avg]
    type = ElementAverageValue
    variable = effective_creep_strain
    outputs = console
  [../]
  [./temperature]
    type = ElementAverageValue
    variable = temperature
    outputs = console
  [../]
  [./rhom]
    type = ElementAverageValue
    variable = cell_dislocations
  [../]
  [./rhoi]
    type = ElementAverageValue
    variable = wall_dislocations
  [../]
  [./vonmises_stress]
    type = ElementAverageValue
    variable = vonmises_stress
    outputs = console
  [../]
  [./creep_rate]
    type = ElementAverageValue
    variable = creep_rate
  [../]
  [./rhom_in]
    type = FunctionValuePostprocessor
    function = rhom_fcn
    execute_on = &#x27;TIMESTEP_END initial&#x27;
    outputs = console
  [../]
  [./rhoi_in]
    type = FunctionValuePostprocessor
    function = rhoi_fcn
    execute_on = &#x27;TIMESTEP_END initial&#x27;
    outputs = console
  [../]
  [./vmJ2_in]
    type = FunctionValuePostprocessor
    function = vmJ2_fcn
    execute_on = &#x27;TIMESTEP_END initial&#x27;
    outputs = console
  [../]
  [./rhom_soln]
    type = FunctionValuePostprocessor
    function = rhom_soln_fcn
    outputs = console
  [../]
  [./rhoi_soln]
    type = FunctionValuePostprocessor
    function = rhoi_soln_fcn
    outputs = console
  [../]
  [./creep_rate_soln]
    type = FunctionValuePostprocessor
    function = creep_rate_soln_fcn
    outputs = console
  [../]

  [./rhom_diff]
    type = FunctionValuePostprocessor
    function = rhom_diff_fcn
    outputs = console
  [../]
  [./rhoi_diff]
    type = FunctionValuePostprocessor
    function = rhoi_diff_fcn
    outputs = console
  [../]
  [./creep_rate_diff]
    type = FunctionValuePostprocessor
    function = creep_rate_diff_fcn
    outputs = console
  [../]

  [./rhom_max_diff]
    type = TimeExtremeValue
    postprocessor = rhom_diff
    outputs = console
  [../]
  [./rhoi_max_diff]
    type = TimeExtremeValue
    postprocessor = rhoi_diff
    outputs = console
  [../]
  [./creep_rate_max_diff]
    type = TimeExtremeValue
    postprocessor = creep_rate_diff
    outputs = console
  [../]
[]

[Outputs]
  csv = true
  file_base = &#x27;verification_1e-3_out&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="974bdfc5-b8ad-4774-a2e5-91bf51565610"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/rom_stress_update/lower_limit.i</h4><pre class="moose-pre"><code class="language-text">temp = 800.0160634
disp = 1.0053264195e6

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[AuxVariables]
  [./temperature]
    initial_condition = ${temp}
  [../]
[]

[Functions]
  [./temp_weight]
    type = ParsedFunction
    vars = &#x27;lower_limit avg&#x27;
    vals = &#x27;800.0160634 temp_avg&#x27;
    value = &#x27;val := 2 * avg / lower_limit - 1;
             clamped := if(val &lt;= -1, -0.99999, if(val &gt;= 1, 0.99999, val));
             plus := exp(-2 / (1 + clamped));
             minus := exp(-2 / (1 - clamped));
             plus / (plus + minus)&#x27;
  [../]
  [./stress_weight]
    type = ParsedFunction
    vars = &#x27;lower_limit avg&#x27;
    vals = &#x27;2.010652839e6 vonmises_stress&#x27;
    value = &#x27;val := 2 * avg / lower_limit - 1;
             clamped := if(val &lt;= -1, -0.99999, if(val &gt;= 1, 0.99999, val));
             plus := exp(-2 / (1 + clamped));
             minus := exp(-2 / (1 - clamped));
             plus / (plus + minus)&#x27;
  [../]
  [./creep_rate_exact]
    type = ParsedFunction
    vars = &#x27;lower_limit_strain temp_weight stress_weight&#x27;
    vals = &#x27;3.370764e-12       temp_weight stress_weight&#x27;
    value = &#x27;lower_limit_strain * temp_weight * stress_weight&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
    generate_output = vonmises_stress
  [../]
[]

[BCs]
  [./symmy]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./symmx]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./symmz]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./pressure_x]
    type = ADPressure
    variable = disp_x
    component = 0
    boundary = right
    constant = ${disp}
  [../]
  [./pressure_y]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -${disp}
  [../]
  [./pressure_z]
    type = ADPressure
    variable = disp_z
    component = 2
    boundary = front
    constant = -${disp}
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 3.30e11
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = rom_stress_prediction
  [../]
  [./rom_stress_prediction]
    type = SS316HLAROMANCEStressUpdateTest
    temperature = temperature
    initial_cell_dislocation_density = 6.0e12
    initial_wall_dislocation_density = 4.4e11
    outputs = all
    apply_strain = false
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  nl_abs_tol = 1e-12
  automatic_scaling = true
  compute_scaling_once = false

  num_steps = 1
  dt = 1e5
[]

[Postprocessors]
  [./creep_rate_exact]
    type = FunctionValuePostprocessor
    function = creep_rate_exact
  [../]
  [./creep_rate_avg]
    type = ElementAverageValue
    variable = creep_rate
  [../]
  [./creep_rate_diff]
    type = DifferencePostprocessor
    value1 = creep_rate_exact
    value2 = creep_rate_avg
  [../]
  [./temp_avg]
    type = ElementAverageValue
    variable = temperature
  [../]
  [./cell_dislocations]
    type = ElementAverageValue
    variable = cell_dislocations
  [../]
  [./wall_disloactions]
    type = ElementAverageValue
    variable = wall_dislocations
  [../]
  [./vonmises_stress]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d3bac0d1-838f-4007-bd9b-5f448ad356bf"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/rom_stress_update/2drz.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./temperature]
    initial_condition = 900.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
    generate_output = vonmises_stress
  [../]
[]

[BCs]
  [./symmy]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./symmx]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./pressure_x]
    type = ADPressure
    variable = disp_x
    component = 0
    boundary = right
    function = t
    constant = 3.1675e5
  [../]
  [./pressure_y]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    function = t
    constant = 6.336e5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 3.30e11
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = rom_stress_prediction
  [../]
  [./rom_stress_prediction]
    type = SS316HLAROMANCEStressUpdateTest
    temperature = temperature
    initial_cell_dislocation_density = 6.0e12
    initial_wall_dislocation_density = 4.4e11
    outputs = all
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  nl_abs_tol = 1e-12
  automatic_scaling = true
  compute_scaling_once = false

  num_steps = 5
  dt = 2
[]

[Postprocessors]
  [./effective_strain_avg]
    type = ElementAverageValue
    variable = effective_creep_strain
  [../]
  [./temperature]
    type = ElementAverageValue
    variable = temperature
  [../]
  [./cell_dislocations]
    type = ElementAverageValue
    variable = cell_dislocations
  [../]
  [./wall_disloactions]
    type = ElementAverageValue
    variable = wall_dislocations
  [../]
  [./vonmises_stress]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f637611f-6b0a-4268-9e44-6f1059f5ebda"><div class="modal-content"><h4>modules/xfem/test/tests/moving_interface/ad_phase_transition.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 11
  ny = 1
  xmin = 0
  xmax = 2
  ymin = 0
  ymax = 1
  elem_type = QUAD4
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./velocity]
    type = XFEMPhaseTransitionMovingInterfaceVelocity
    diffusivity_at_positive_level_set = 5
    diffusivity_at_negative_level_set = 1
    equilibrium_concentration_jump = 1
    value_at_interface_uo = value_uo
  [../]
  [./value_uo]
    type = PointValueAtXFEMInterface
    variable = &#x27;u&#x27;
    geometric_cut_userobject = &#x27;moving_line_segments&#x27;
    execute_on = &#x27;nonlinear&#x27;
    level_set_var = ls
  [../]
  [./moving_line_segments]
    type = MovingLineSegmentCutSetUserObject
    cut_data = &#x27;0.5 0 0.5 1.0 0 0&#x27;
    heal_always = true
    interface_velocity = velocity
  [../]
[]

[Variables]
  [./u]
  [../]
[]

[ICs]
  [./ic_u]
    type = FunctionIC
    variable = u
    function = &#x27;if(x&lt;0.51, 2, 1)&#x27;
  [../]
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Constraints]
  [./u_constraint]
    type = XFEMEqualValueAtInterface
    geometric_cut_userobject = &#x27;moving_line_segments&#x27;
    use_displaced_mesh = false
    variable = u
    value = 2
    alpha = 1e5
  [../]
[]

[Kernels]
  [./diff]
    type = ADMatDiffusion
    variable = u
    diffusivity = diffusion_coefficient
  [../]
  [./time]
    type = ADTimeDerivative
    variable = u
  [../]
[]

[AuxKernels]
  [./ls]
    type = LineSegmentLevelSetAux
    line_segment_cut_set_user_object = &#x27;moving_line_segments&#x27;
    variable = ls
  [../]
[]

[Materials]
  [./diffusivity_A]
    type = ADGenericConstantMaterial
    prop_names = A_diffusion_coefficient
    prop_values = 5
  [../]
  [./diffusivity_B]
    type = ADGenericConstantMaterial
    prop_names = B_diffusion_coefficient
    prop_values = 1
  [../]
  [./diff_combined]
    type = ADLevelSetBiMaterialReal
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = diffusion_coefficient
  [../]
[]

[BCs]
  [./left_u]
    type = ADDirichletBC
    variable = u
    value = 2
    boundary = 3
  [../]
  [./right_u]
    type = ADNeumannBC
    variable = u
    boundary = 1
    value = 0
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  line_search = &#x27;none&#x27;

  l_tol = 1e-8
  nl_max_its = 15
  nl_rel_tol = 1e-11
  nl_abs_tol = 1e-12

  start_time = 0.0
  dt = 0.01
  dtmin = 0.01
  num_steps = 4
  max_xfem_update = 1
[]


[Outputs]
  execute_on = timestep_end
  exodus = true
  perf_graph = true
  file_base = phase_transition_out
  [./console]
    type = Console
    output_linear = true
  [../]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="76ebe41e-bd5d-4cbc-b42e-d5c9cb7ae4c6"><div class="modal-content"><h4>modules/stochastic_tools/examples/sobol/diffusion.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables/T]
[]

[Kernels]
  [time]
    type = ADTimeDerivative
    variable = T
  []
  [diff]
    type = ADMatDiffusion
    variable = T
    diffusivity = diffusivity
  []
  [source]
    type = ADBodyForce
    variable = T
    value = 1
    function = 1
  []
[]

[BCs]
  [left]
    type = ADDirichletBC
    variable = T
    boundary = left
    value = -10
  []
  [right]
    type = ADNeumannBC
    variable = T
    boundary = right
    value = -100
  []
[]

[Materials/constant]
  type = ADGenericConstantMaterial
  prop_names = &#x27;diffusivity&#x27;
  prop_values = 1
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  num_steps = 4
  dt = 0.25
[]

[Postprocessors]
  [T_avg]
    type = AverageNodalVariableValue
    variable = T
  []
  [q_left]
    type = ADSideFluxAverage
    variable = T
    boundary = left
    diffusivity = diffusivity
  []
[]

[Controls/stochastic]
  type = SamplerReceiver
[]

[Outputs]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="59593a5f-1481-4be4-832a-c2c86a13058c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz.i</h4><pre class="moose-pre"><code class="language-text">#

[Mesh]
  file = cracking_rz_test.e
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 2
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 4.0e7
    poissons_ratio = 0.0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101               &#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-2
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2284a83b-2c98-402d-b510-bbf864c92a68"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_centerline_VLC.i</h4><pre class="moose-pre"><code class="language-text"># Simple test to check for use of AxisymmetricCenterlineAverageValue with
# volumetric_locking_correction activated in a tensor mechanics simulation

[Mesh]
  type = GeneratedMesh
  dim = 2
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
  volumetric_locking_correction = true
[]

[Problem]
  coord_type = RZ
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./temperature]
    initial_condition = 298.0
  [../]
[]

[BCs]
  [./symmetry_x]
    type = ADDirichletBC
    variable = disp_r
    value = 0
    boundary = left
  [../]
  [./roller_z]
    type = ADDirichletBC
    variable = disp_z
    value = 0
    boundary = bottom
  [../]
  [./top_load]
    type = ADFunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = top
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./_elastic_strain]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  line_search = &#x27;none&#x27;

  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-6
  l_max_its = 50

  start_time = 0.0
  end_time = 0.3
  dt = 0.1
[]

[Postprocessors]
  [./center_temperature]
    type = AxisymmetricCenterlineAverageValue
    variable = temperature
    boundary = left
  [../]
[]

[Outputs]
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2fa3621d-6633-456a-8f5e-553937487594"><div class="modal-content"><h4>test/tests/bcs/ad_bc_preset_nodal/bc_preset_nodal.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  nz = 0
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[Variables]
  active = &#x27;u&#x27;

  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  active = &#x27;diff&#x27;

  [./diff]
    type = ADDiffusion
    variable = u
  [../]
[]

[BCs]
  active = &#x27;left right&#x27;

  # We will use preset BCs
  [./left]
    type = ADDirichletBC
    variable = u
    boundary = 3
    value = 0
  [../]

  [./right]
    type = ADDirichletBC
    variable = u
    boundary = 1
    value = 1
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  file_base = bc_preset_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1e5a185f-af3e-4062-a7e0-892d9f29355f"><div class="modal-content"><h4>modules/combined/test/tests/ad_power_law_creep/power_law_creep_restart2.i</h4><pre class="moose-pre"><code class="language-text"># 1x1x1 unit cube with uniform pressure on top face

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Variables]
  [./temp]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1000.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    generate_output = &#x27;stress_yy creep_strain_xx creep_strain_yy creep_strain_zz elastic_strain_yy&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Functions]
  [./top_pull]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1&#x27;
  [../]
[]

[Kernels]
  [./heat]
    type = ADHeatConduction
    variable = temp
  [../]
  [./heat_ie]
    type = ADHeatConductionTimeDerivative
    variable = temp
  [../]
[]

[BCs]
  [./u_top_pull]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -10.0e6
    function = top_pull
  [../]
  [./u_bottom_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_yz_fix]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_xy_fix]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./temp_fix]
    type = DirichletBC
    variable = temp
    boundary = &#x27;bottom top&#x27;
    value = 1000.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2e11
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;power_law_creep&#x27;
  [../]
  [./power_law_creep]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1.0e-15
    n_exponent = 4
    activation_energy = 3.0e5
    temperature = temp
  [../]

  [./thermal]
    type = ADHeatConductionMaterial
    specific_heat = 1.0
    thermal_conductivity = 100.
  [../]
  [./density]
    type = ADDensity
    density = 1.0
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 20
  nl_max_its = 20
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.6
  end_time = 1.0
  num_steps = 12
  dt = 0.1
[]

[Outputs]
  file_base = power_law_creep_out
  exodus = true
[]

[Problem]
  restart_file_base = power_law_creep_restart1_out_cp/0006
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="96193b16-3ca6-4d3f-97d1-bd60f6823ef4"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_plane_stress.i</h4><pre class="moose-pre"><code class="language-text">################################################################################
#
# 1x1x1 cube, single element
# simulate plane stress
# pull in +y direction on right surface to produce shear strain
#
#
#
#          ____________
#         /|          /|
#        / |  5      / |                       -X  Left   1
#       /__________ /  |                       +X  Right  4
#      |   |    3  |   |                       +Y  Top    5
#      | 1 |       | 4 |                       -Y  Bottom 2
#      |   |_6_____|___|           y           +Z  Front  6
#      |  /        |  /            ^           -Z  Back   3
#      | /    2    | /             |
#      |/__________|/              |
#                                  ----&gt; x
#                                 /
#                                /
#                               z
#
#
#
#################################################################################

[Mesh]
  file = cube.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0.0026 0 -0.0026 0&#x27;
  [../]
  [./pressure]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0   0    0   0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = displ
  [../]
  [./pin_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;1  4&#x27;
    value = 0.0
  [../]
  [./pin_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
  [./front]
    type = ADPressure
    variable = disp_z
    component = 2
    boundary = 6
    function = pressure
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 200.0e3
    poissons_ratio = .3
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 120
    shear_retention_factor = 0.1
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
    residual_stress = 0.1
    beta = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.4
  dt = 0.04
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f18e07eb-4266-41d1-9ea3-d62674de3908"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/3D-RZ_finiteStrain_test.i</h4><pre class="moose-pre"><code class="language-text"># Considers the mechanics solution for a thick spherical shell that is uniformly
# pressurized on the inner and outer surfaces, using 3D geometry.
#
# From Roark (Formulas for Stress and Strain, McGraw-Hill, 1975), the radially-dependent
# circumferential stress in a uniformly pressurized thick spherical shell is given by:
#
# S(r) = [ Pi[ri^3(2r^3+ro^3)] - Po[ro^3(2r^3+ri^3)] ] / [2r^3(ro^3-ri^3)]
#
#   where:
#          Pi = inner pressure
#          Po = outer pressure
#          ri = inner radius
#          ro = outer radius
#
# The tests assume an inner and outer radii of 5 and 10, with internal and external
# pressures of 100000 and 200000 at t = 1.0, respectively. The resulting compressive
# tangential stress is largest at the inner wall and, from the above equation, has a
# value of -271429.
#
# RESULTS are below. Since stresses are average element values, values for the
# edge element and one-element-in are used to extrapolate the stress to the
# inner surface. The vesrion of the tests that are checked use the coarsest meshes.
#
#  Mesh    Radial elem   S(edge elem)  S(one elem in)  S(extrap to surf)
# 1D-SPH
# 2D-RZ        12 (x10)    -265004      -254665        -270174
#  3D          12 (6x6)    -261880      -252811        -266415
#
# 1D-SPH
# 2D-RZ        48 (x10)    -269853      -266710        -271425
#  3D          48 (10x10)  -268522      -265653        -269957
#
# The numerical solution converges to the analytical solution as the mesh is
# refined.

[Mesh]
  file = 3D_mesh.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    block = 1
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_theta]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_theta]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_theta]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_theta
    execute_on = timestep_end
  [../]
  [./strain_theta]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 2
    index_j = 2
    variable = strain_theta
    execute_on = timestep_end
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.345
    block = 1
  [../]

  [./elastic_strain]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
[]

[BCs]
# pin particle along symmetry planes
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = xzero
    value = 0.0
  [../]

  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = yzero
    value = 0.0
  [../]

  [./no_disp_z]
    type = ADDirichletBC
    variable = disp_z
    boundary = zzero
    value = 0.0
  [../]

# exterior and internal pressures
  [./exterior_pressure_x]
    type = ADPressure
    variable = disp_x
    boundary = outer
    component = 0
    function = &#x27;200000*t&#x27;
  [../]

 [./exterior_pressure_y]
    type = ADPressure
    variable = disp_y
    boundary = outer
    component = 1
    function = &#x27;200000*t&#x27;
  [../]

[./exterior_pressure_z]
    type = ADPressure
    variable = disp_z
    boundary = outer
    component = 2
    function = &#x27;200000*t&#x27;
  [../]

  [./interior_pressure_x]
    type = ADPressure
    variable = disp_x
    boundary = inner
    component = 0
    function = &#x27;100000*t&#x27;
  [../]

  [./interior_pressure_y]
    type = ADPressure
    variable = disp_y
    boundary = inner
    component = 1
    function = &#x27;100000*t&#x27;
  [../]

  [./interior_pressure_z]
    type = ADPressure
    variable = disp_z
    boundary = inner
    component = 2
    function = &#x27;100000*t&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;  201               hypre    boomeramg      10&#x27;

  line_search = &#x27;none&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 5e-9
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-3
  l_max_its = 50

  start_time = 0.0
  end_time = 0.2
  dt = 0.1

[]

[Postprocessors]
  [./strainTheta]
    type = ElementAverageValue
    variable = strain_theta
  [../]
  [./stressTheta]
    type = ElementAverageValue
    variable = stress_theta
  [../]
  [./stressTheta_pt]
    type = PointValue
    point = &#x27;5.0 0.0 0.0&#x27;
    #bottom inside edge for comparison to theory; use csv = true
    variable = stress_theta
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9c4cf4fc-aa7e-42ca-b4e9-fe0245a4eee5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_linear_elasticity/applied_strain.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  xmax = 2
  ymax = 2
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  eigenstrain_names = eigenstrain
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy&#x27;
  use_automatic_differentiation = true
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
  [./eigenstrain]
    type = ADComputeEigenstrain
    eigen_base = &#x27;0.1 0.05 0 0 0 0.01&#x27;
    prefactor = -1
    eigenstrain_name = eigenstrain
  [../]
[]

[BCs]
  [./bottom_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
  [./left_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = 0
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="87fe0fc6-10ac-415d-8e64-5b56c73a6497"><div class="modal-content"><h4>modules/xfem/test/tests/moving_interface/moving_ad_bimaterial.i</h4><pre class="moose-pre"><code class="language-text"># This test is for two layer materials with different youngs modulus with AD
# The global stress is determined by switching the stress based on level set values
# The material interface is marked by a level set function
# The two layer materials are glued together
# This case is also meant to test for a bug in moving interfaces on displaced meshes
# It should fail during the healing step of the 2nd timestep if the bug is present.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
    heal_always = true
  [../]
[]

[Mesh]
  displacements = &#x27;disp_x disp_y&#x27;
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmin = 0.0
    xmax = 5.
    ymin = 0.0
    ymax = 5.
    elem_type = QUAD4
  []
  [./left_bottom]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_bottom&#x27;
    coord = &#x27;0.0 0.0&#x27;
    input = generated_mesh
  [../]
  [./left_top]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_top&#x27;
    coord = &#x27;0.0 5.&#x27;
    input = left_bottom
  [../]
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;y-3.153 + t&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = 0.03*t
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e7
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
  [./combined_elasticity_tensor]
    type = ADLevelSetBiMaterialRankFour
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = elasticity_tensor
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

  line_search = &#x27;bt&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50

# time control
  start_time = 0.0
  dt = 0.15
  num_steps = 3

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  execute_on = timestep_end
  csv = true
  file_base = moving_bimaterial_out
  perf_graph = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9fdf5a3e-690c-40bc-b04b-c764a8e95636"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/gtn_single.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of an individual GTN viscoplasticity model

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  base_name = &#x27;total&#x27;
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
    base_name = &#x27;total&#x27;
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = gtn
    initial_porosity = 0.1
    outputs = all
    base_name = &#x27;total&#x27;
  [../]

  [./gtn]
    type = ADViscoplasticityStressUpdate
    total_strain_base_name = &#x27;total&#x27;
    coefficient = &#x27;coef&#x27;
    power = 3
    viscoplasticity_model = GTN
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;1e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = total_hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = total_vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e9bc94b7-a572-4d36-9858-c3e83055a66a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_dual.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of combining two LPS viscoplasticity models with different stress
# exponents.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Variables]
  [./temp]
    initial_condition = 1000
  [../]
[]

[Kernels]
  [./dt]
    type = ADTimeDerivative
    variable = temp
  [../]
  [./diff]
    type = ADDiffusion
    variable = temp
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
  [./tot_effective_viscoplasticity]
    type = ParsedFunction
    vals = &#x27;lps_1_eff_creep_strain lps_3_eff_creep_strain&#x27;
    vars = &#x27;lps_1_eff_creep_strain lps_3_eff_creep_strain&#x27;
    value = &#x27;lps_1_eff_creep_strain+lps_3_eff_creep_strain&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = &#x27;one two&#x27;
    initial_porosity = 0.1
    outputs = all
  [../]

  [./one]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef_3&#x27;
    power = 3
    base_name = &#x27;lps_1&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./two]
    type = ADViscoplasticityStressUpdate
    coefficient = 1e-10
    power = 1
    base_name = &#x27;lps_3&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef_3
    # Example of creep power law
    args = temp
    function = &#x27;0.5e-18 * exp(-4e4 / 1.987 / temp)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
  [./temp_ramp]
    type = ADFunctionDirichletBC
    boundary = right
    function = &#x27;1000 + 400 * t / 0.12&#x27;
    variable = temp
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./lps_1_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_1_effective_viscoplasticity
  [../]
  [./lps_3_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_3_effective_viscoplasticity
  [../]
  [./lps_1_gauge_stress]
    type = ElementAverageValue
    variable = lps_1_gauge_stress
  [../]
  [./lps_3_gauge_stress]
    type = ElementAverageValue
    variable = lps_3_gauge_stress
  [../]
  [./eff_creep_strain_tot]
    type = FunctionValuePostprocessor
    function = tot_effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f32a9d64-c10c-446c-a7bf-d858a79faecf"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/exact.i</h4><pre class="moose-pre"><code class="language-text"># This test provides comparison to calculated values from Leblond:1994kl

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  pore_shape_model = spherical
[]

[Mesh]
  [./msh]
    type = CartesianMeshGenerator
    dim = 3
    dx = 0.01
    dy = 0.01
    dz = 0.01
    iz = 1
    ix = 1
    iy = 1
  [../]
  [./extra_nodeset]
    type = ExtraNodesetGenerator
    input = msh
    new_boundary = &#x27;origin&#x27;
    coord = &#x27;0 0 0&#x27;
  []
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./Q_gtn]
    type = ParsedFunction
    vars = &#x27;avg_vonmises gtn_gauge_stress&#x27;
    vals = &#x27;avg_vonmises gtn_gauge_stress&#x27;
    value = &#x27;avg_vonmises/gtn_gauge_stress&#x27;
  [../]
  [./M_gtn]
    type = ParsedFunction
    vars = &#x27;avg_hydro gtn_gauge_stress&#x27;
    vals = &#x27;avg_hydro gtn_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / gtn_gauge_stress&#x27;
  [../]
  [./Q_ten]
    type = ParsedFunction
    vars = &#x27;avg_vonmises ten_gauge_stress&#x27;
    vals = &#x27;avg_vonmises ten_gauge_stress&#x27;
    value = &#x27;avg_vonmises/ten_gauge_stress&#x27;
  [../]
  [./M_ten]
    type = ParsedFunction
    vars = &#x27;avg_hydro ten_gauge_stress&#x27;
    vals = &#x27;avg_hydro ten_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / ten_gauge_stress&#x27;
  [../]
  [./Q_five]
    type = ParsedFunction
    vars = &#x27;avg_vonmises five_gauge_stress&#x27;
    vals = &#x27;avg_vonmises five_gauge_stress&#x27;
    value = &#x27;avg_vonmises/five_gauge_stress&#x27;
  [../]
  [./M_five]
    type = ParsedFunction
    vars = &#x27;avg_hydro five_gauge_stress&#x27;
    vals = &#x27;avg_hydro five_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / five_gauge_stress&#x27;
  [../]
  [./Q_three]
    type = ParsedFunction
    vars = &#x27;avg_vonmises three_gauge_stress&#x27;
    vals = &#x27;avg_vonmises three_gauge_stress&#x27;
    value = &#x27;avg_vonmises / three_gauge_stress&#x27;
  [../]
  [./M_three]
    type = ParsedFunction
    vars = &#x27;avg_hydro three_gauge_stress&#x27;
    vals = &#x27;avg_hydro three_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / three_gauge_stress&#x27;
  [../]
  [./Q_two]
    type = ParsedFunction
    vars = &#x27;avg_vonmises two_gauge_stress&#x27;
    vals = &#x27;avg_vonmises two_gauge_stress&#x27;
    value = &#x27;avg_vonmises/two_gauge_stress&#x27;
  [../]
  [./M_two]
    type = ParsedFunction
    vars = &#x27;avg_hydro two_gauge_stress&#x27;
    vals = &#x27;avg_hydro two_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / two_gauge_stress&#x27;
  [../]
  [./Q_onepointfive]
    type = ParsedFunction
    vars = &#x27;avg_vonmises onepointfive_gauge_stress&#x27;
    vals = &#x27;avg_vonmises onepointfive_gauge_stress&#x27;
    value = &#x27;avg_vonmises / onepointfive_gauge_stress&#x27;
  [../]
  [./M_onepointfive]
    type = ParsedFunction
    vars = &#x27;avg_hydro onepointfive_gauge_stress&#x27;
    vals = &#x27;avg_hydro onepointfive_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / onepointfive_gauge_stress&#x27;
  [../]
  [./Q_one]
    type = ParsedFunction
    vars = &#x27;avg_vonmises one_gauge_stress&#x27;
    vals = &#x27;avg_vonmises one_gauge_stress&#x27;
    value = &#x27;avg_vonmises / one_gauge_stress&#x27;
  [../]
  [./M_one]
    type = ParsedFunction
    vars = &#x27;avg_hydro one_gauge_stress&#x27;
    vals = &#x27;avg_hydro one_gauge_stress&#x27;
    value = &#x27;abs(avg_hydro) / one_gauge_stress&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = &#x27;gtn lps_ten lps_five lps_three lps_two lps_onepointfive lps_one&#x27;
    initial_porosity = 1e-3
    outputs = all
    extra_stress_names = extra_stress
  [../]

  [./gtn]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 1 # arbitrary
    viscoplasticity_model = GTN
    base_name = gtn
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_ten]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 10
    base_name = ten
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_five]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 5
    base_name = five
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_three]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 3
    base_name = three
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_two]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 2
    base_name = two
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_onepointfive]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 1.5
    base_name = onepointfive
    outputs = all
    relative_tolerance = 1e-30
  [../]
  [./lps_one]
    type = ADViscoplasticityStressUpdate
    coefficient = 0
    power = 1
    base_name = one
    outputs = all
    relative_tolerance = 1e-30
  [../]

  [./const_stress]
    type = ComputeExtraStressConstant
    extra_stress_tensor = &#x27;1 1 1 1 1 1 1 1 1&#x27;
    outputs = all
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./no_disp_z]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./Pressure]
    [./bcs]
      boundary = &#x27;top right front&#x27;
      function = &#x27;10^(t/4.5)&#x27;
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  num_steps = 10
  nl_abs_tol = 1e-8
[]

[Postprocessors]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./gtn_gauge_stress]
    type = ElementAverageValue
    variable = gtn_gauge_stress
    outputs = none
  [../]
  [./0Q_gtn]
    type = FunctionValuePostprocessor
    function = Q_gtn
  [../]
  [./0M_gtn]
    type = FunctionValuePostprocessor
    function = M_gtn
  [../]
  [./ten_gauge_stress]
    type = ElementAverageValue
    variable = ten_gauge_stress
    outputs = none
  [../]
  [./1Q_ten]
    type = FunctionValuePostprocessor
    function = Q_ten
  [../]
  [./1M_ten]
    type = FunctionValuePostprocessor
    function = M_ten
  [../]
  [./five_gauge_stress]
    type = ElementAverageValue
    variable = five_gauge_stress
    outputs = none
  [../]
  [./2Q_five]
    type = FunctionValuePostprocessor
    function = Q_five
  [../]
  [./2M_five]
    type = FunctionValuePostprocessor
    function = M_five
  [../]
  [./three_gauge_stress]
    type = ElementAverageValue
    variable = three_gauge_stress
    outputs = none
  [../]
  [./3Q_three]
    type = FunctionValuePostprocessor
    function = Q_three
  [../]
  [./3M_three]
    type = FunctionValuePostprocessor
    function = M_three
  [../]
  [./two_gauge_stress]
    type = ElementAverageValue
    variable = two_gauge_stress
    outputs = none
  [../]
  [./4Q_two]
    type = FunctionValuePostprocessor
    function = Q_two
  [../]
  [./4M_two]
    type = FunctionValuePostprocessor
    function = M_two
  [../]
  [./onepointfive_gauge_stress]
    type = ElementAverageValue
    variable = onepointfive_gauge_stress
    outputs = none
  [../]
  [./5Q_onepointfive]
    type = FunctionValuePostprocessor
    function = Q_onepointfive
  [../]
  [./5M_onepointfive]
    type = FunctionValuePostprocessor
    function = M_onepointfive
  [../]
  [./one_gauge_stress]
    type = ElementAverageValue
    variable = one_gauge_stress
    outputs = none
  [../]
  [./6Q_one]
    type = FunctionValuePostprocessor
    function = Q_one
  [../]
  [./6M_one]
    type = FunctionValuePostprocessor
    function = M_one
  [../]
[]

[Outputs]
  csv = true
  file_base = exact_spherical_out
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="71110315-3391-4cb7-9550-12b0d0bd3bd3"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_function.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking. This tests the option to prescribe the
# cracking strength using an AuxVariable. In this case, an elemental
# AuxVariable is used, and a function is used to prescribe its value.
# One of the elements is weaker than the others, so the crack localizes
# in that element.
#
[Mesh]
   file = plate.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./cracking_stress_fn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0.001 0 -0.001 0&#x27;
  [../]
  [./fstress]
    type = ParsedFunction
    value = &#x27;if(x &gt; 0.667, 1.1e6, 1.2e6)&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx strain_xx strain_yy strain_xy strain_yz&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./cracking_stress_fn]
    type = FunctionAux
    variable = cracking_stress_fn
    function = fstress
    execute_on = initial
  [../]
  [./crack_flags2]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags2
   component = 2
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    function = displ
  [../]

  [./pin_x]
    type = ADDirichletBC
    variable = disp_x
    boundary =  &#x27;1 2&#x27;
    value = 0
  [../]
  [./pin_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;1 4&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 200.0e7
    poissons_ratio = 0.0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = cracking_stress_fn
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
    residual_stress = 0.0
  [../]
[]

[Postprocessors]
  [./elem_stress_xx]
    type = ElementalVariableValue
    variable = stress_xx
    elementid = 2
  [../]
  [./elem_strain_xx]
    type = ElementalVariableValue
    variable = strain_xx
    elementid = 2
  [../]
  [./elem_crack_flags_x]
    type = ElementalVariableValue
    variable = crack_flags2
    elementid = 2
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101               &#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.2
  dt = 0.0025
[]

[Outputs]
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d738b52d-b1c4-4dd2-beaa-7d39fdf947ad"><div class="modal-content"><h4>modules/combined/test/tests/ad_power_law_creep/power_law_creep_smallstrain.i</h4><pre class="moose-pre"><code class="language-text"># 1x1x1 unit cube with uniform pressure on top face for the case of small strain.
#  This test does not have a solid mechanics analog because there is not an equvialent
#  small strain with rotations strain calculator material in solid mechanics

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Variables]
  [./temp]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1000.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    incremental = true
    add_variables = true
    generate_output = &#x27;stress_yy creep_strain_xx creep_strain_yy creep_strain_zz elastic_strain_yy&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Functions]
  [./top_pull]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1&#x27;
  [../]
[]

[Kernels]
  [./heat]
    type = ADHeatConduction
    variable = temp
  [../]
  [./heat_ie]
    type = ADHeatConductionTimeDerivative
    variable = temp
  [../]
[]

[BCs]
  [./u_top_pull]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -10.0e6
    function = top_pull
  [../]
  [./u_bottom_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_yz_fix]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_xy_fix]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./temp_fix]
    type = DirichletBC
    variable = temp
    boundary = &#x27;bottom top&#x27;
    value = 1000.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2e11
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;power_law_creep&#x27;
  [../]
  [./power_law_creep]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1.0e-15
    n_exponent = 4
    activation_energy = 3.0e5
    temperature = temp
  [../]

  [./thermal]
    type = ADHeatConductionMaterial
    specific_heat = 1.0
    thermal_conductivity = 100.
  [../]
  [./density]
    type = ADDensity
    density = 1.0
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp_ew&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 20
  nl_max_its = 20
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.0
  end_time = 1.0
  num_steps = 10
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="81a71b55-536f-4dc8-9e51-38d6b0524da7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/rom_stress_update/3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 2
  ny = 2
  nz = 2
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[AuxVariables]
  [./temperature]
    initial_condition = 900.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;vonmises_stress&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./symmy]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./symmx]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./symmz]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./pressure_x]
    type = ADPressure
    variable = disp_x
    component = 0
    boundary = right
    constant = 1.0e5
  [../]
  [./pressure_y]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -1.0e5
  [../]
  [./pressure_z]
    type = ADPressure
    variable = disp_z
    component = 2
    boundary = front
    constant = -1.0e5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 3.30e11
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = rom_stress_prediction
  [../]
  [./rom_stress_prediction]
    type = SS316HLAROMANCEStressUpdateTest
    temperature = temperature
    initial_cell_dislocation_density = 6.0e12
    initial_wall_dislocation_density = 4.4e11
    outputs = all
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  nl_abs_tol = 1e-12
  automatic_scaling = true
  compute_scaling_once = false

  num_steps = 5
[]

[Postprocessors]
  [./effective_strain_avg]
    type = ElementAverageValue
    variable = effective_creep_strain
  [../]
  [./temperature]
    type = ElementAverageValue
    variable = temperature
  [../]
  [./cell_dislocations]
    type = ElementAverageValue
    variable = cell_dislocations
  [../]
  [./wall_disloactions]
    type = ElementAverageValue
    variable = wall_dislocations
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="184c64d3-f84c-4b80-91f1-6cd86ce86ca4"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz_exponential.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.

[Mesh]
  file = cracking_rz_test.e
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Functions]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pully]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disply
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 3
    value = 0.0
  [../]

  [./sides]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = 0.316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 10
  nl_rel_tol = 1e-8

  nl_abs_tol = 1e-4

  start_time = 0.0
  end_time = 6.0
  dt = 0.005
  dtmin = 0.005
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2361e4b2-2849-4393-aec7-8c3a9da68e2b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_multiple_softening.i</h4><pre class="moose-pre"><code class="language-text"># Test of cracking with direction-specific release models in 3
# directions. Block is first pulled in one direction, and then
# held while it is sequentially pulled in the other two
# directions. Poisson&#x27;s ratio is zero so that the cracking in one
# direction doesn&#x27;t affect the others.

# Softening in the three directions should follow the laws for the
# prescribed models in the three directions, which are power law (x),
# exponential (y), and abrupt (z).

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 1 1 1&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 0 1 1&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 0 0 1&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = right
    function = displx
  [../]
  [./pully]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = disply
  [../]
  [./pullz]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = front
    function = displz
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = &#x27;power_law_softening exponential_softening abrupt_softening&#x27;
    prescribed_crack_directions = &#x27;x y z&#x27;
  [../]
  [./power_law_softening]
    type = ADPowerLawSoftening
    stiffness_reduction = 0.3333
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 3.0
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e5ce9556-f514-4615-a8de-99aaa9a9e164"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.
#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 5 6&#x27;
    y = &#x27;0 0 .00175&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 2 3&#x27;
    y = &#x27;0 0 .0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./move_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    function = disply
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-6

  nl_max_its = 10
  nl_rel_tol = 1e-12
  nl_abs_tol = 1.e-4

  start_time = 0.0
  dt = 0.02
  dtmin = 0.02
  num_steps = 300
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="56a12679-1160-4379-ab0d-464ebe92315d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rotation.i</h4><pre class="moose-pre"><code class="language-text"># This test is to ensure that the smeared cracking model correctly handles finite
# rotation of cracked elements.

# This consists of a single element that is first  subjected to tensile loading
# in the y-direction via a prescribed displacement. This loading is sufficiently
# high to crack the material in that direction, but not completely unload. The
# prescribed displacement is then reversed so that the element is returned to its
# original configuration.

# In the next phase of the analysis, this element is then rotated 90 degrees by
# prescribing the displacement of the bottom of the element. The prescribed
# displacement BC used to crack the element in the first phase is deactivated.

# Once the element is fully rotated, a new BC is activated on what was originally
# the top surface (but is now the surface on the right hand side) to pull in
# the x-direction.

# If everything is working correctly, the model should re-load on the original
# crack (which should be rotated along with the elemnent) up to the peak stress
# in the first phase of the analysis, and then continue the unloading process
# as the crack strains continue to increase. Throughout this analysis, there should
# only be a single crack, as manifested in the crack_flags variables.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./crack_flags1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags3]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./crack_flags1]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags1
    component = 0
  [../]
  [./crack_flags2]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags2
    component = 1
  [../]
  [./crack_flags3]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags3
    component = 2
  [../]
[]

[BCs]
  [./x_pin]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./y_pin]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./z_all]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;11 12 13 14 15 16 17 18&#x27;
    value = 0.0
  [../]
  [./x_lb]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;11 12&#x27;
    function = &#x27;if(t&lt;10,0,if(t&gt;=100,1,1-cos((t-10)*pi/180)))&#x27;
  [../]
  [./y_lb]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    function = &#x27;if(t&lt;10,0,if(t&gt;=100,1,sin((t-10)*pi/180)))&#x27;
  [../]
  [./x_lt]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;13 14&#x27;
    function = &#x27;2+(t-100)*0.01&#x27;
  [../]
  [./x_rt]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;17 18&#x27;
    function = &#x27;1+(t-100)*0.01&#x27;
  [../]
  [./top_pull]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;13 14 17 18&#x27;
    function = &#x27;if(t&lt;5,t*0.01,0.05-(t-5)*0.01)&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 100.e9
    poissons_ratio = 0.
  [../]
  [./cracking_stress]
    type = ADComputeSmearedCrackingStress
    shear_retention_factor = 0.1
    cracking_stress = 3.e9
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;
  line_search = &#x27;none&#x27;

  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 100
  nl_abs_tol = 1e-5
  nl_rel_tol = 1e-12

  start_time = 0
  end_time = 110
  dt = 1
[]

[Controls]
  [./p1]
    type = TimePeriod
    start_time = 0.0
    end_time = 10.0
    disable_objects = &#x27;BCs/x_lt BCs/x_rt&#x27;
    enable_objects = &#x27;BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
  [./p2]
    type = TimePeriod
    start_time = 10.0
    end_time = 101.0
    disable_objects = &#x27;BCs/x_lt BCs/x_rt BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
  [./p3]
    type = TimePeriod
    start_time = 101.0
    end_time = 110.0
    enable_objects = &#x27;BCs/x_lt BCs/x_rt&#x27;
    disable_objects = &#x27;BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2fc1878d-8f8f-4bb9-9b6d-f0429ffdc682"><div class="modal-content"><h4>modules/combined/test/tests/ad_power_law_creep/power_law_creep_restart1.i</h4><pre class="moose-pre"><code class="language-text"># 1x1x1 unit cube with uniform pressure on top face

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Variables]
  [./temp]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1000.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    generate_output = &#x27;stress_yy creep_strain_xx creep_strain_yy creep_strain_zz elastic_strain_yy&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Functions]
  [./top_pull]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1&#x27;
  [../]
[]

[Kernels]
  [./heat]
    type = ADHeatConduction
    variable = temp
  [../]
  [./heat_ie]
    type = ADHeatConductionTimeDerivative
    variable = temp
  [../]
[]

[BCs]
  [./u_top_pull]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -10.0e6
    function = top_pull
  [../]
  [./u_bottom_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_yz_fix]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_xy_fix]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./temp_fix]
    type = DirichletBC
    variable = temp
    boundary = &#x27;bottom top&#x27;
    value = 1000.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2e11
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;power_law_creep&#x27;
  [../]
  [./power_law_creep]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1.0e-15
    n_exponent = 4
    activation_energy = 3.0e5
    temperature = temp
  [../]

  [./thermal]
    type = ADHeatConductionMaterial
    specific_heat = 1.0
    thermal_conductivity = 100.
  [../]
  [./density]
    type = ADDensity
    density = 1.0
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 20
  nl_max_its = 20
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.0
  end_time = 1.0
  num_steps = 6
  dt = 0.1
[]

[Outputs]
  exodus = true
  csv = true
  [./out]
    type = Checkpoint
    num_files = 1
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ba54bbd0-26ca-4a26-ba3c-1a009372e55f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/3d_bar.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    xmin = 0
    xmax = 2
    ymin = 0
    ymax = 2
    zmin = 0
    zmax = 10
    nx = 10
    ny = 2
    nz = 2
    elem_type = HEX8
  []
  [corner]
    type = ExtraNodesetGenerator
    new_boundary = 101
    coord = &#x27;0 0 0&#x27;
    input = generated_mesh
  []
  [side]
    type = ExtraNodesetGenerator
    new_boundary = 102
    coord = &#x27;2 0 0&#x27;
    input = corner
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_finite_deform_jacobian = true
    volumetric_locking_correction = false
    use_automatic_differentiation = true
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric9
    C_ijkl = &#x27;1.684e5 0.176e5 0.176e5 1.684e5 0.176e5 1.684e5 0.754e5 0.754e5 0.754e5&#x27;
  [../]
[]

[BCs]
 [./fix_corner_x]
   type = ADDirichletBC
   variable = disp_x
   boundary = 101
   value = 0
 [../]
 [./fix_corner_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 101
   value = 0
 [../]
 [./fix_side_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 102
   value = 0
 [../]
 [./fix_z]
   type = ADDirichletBC
   variable = disp_z
   boundary = back
   value = 0
 [../]
 [./move_z]
   type = ADFunctionDirichletBC
   variable = disp_z
   boundary = front
   function = &#x27;t&#x27;
 [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_rel_tol = 1e-10
  nl_max_its = 10

  l_tol  = 1e-4
  l_max_its = 50

  dt = 0.2
  dtmin = 0.2

  num_steps = 2
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4f2e9724-9f2f-43a1-8dff-ccf12a26fbc8"><div class="modal-content"><h4>modules/heat_conduction/test/tests/ad_convective_heat_flux/flux.i</h4><pre class="moose-pre"><code class="language-text"># This is a test of the ConvectiveHeatFluxBC.
# There is a single 1x1 element with a prescribed temperature
# on the left side and a convective flux BC on the right side.
# The temperature on the left is 100, and the far-field temp is 200.
# The conductance of the body (conductivity * length) is 10
#
# If the conductance in the BC is also 10, the temperature on the
# right side of the solid element should be 150 because half of the
# temperature drop should occur over the body and half in the BC.
#
# The integrated flux is deltaT * conductance, or -50 * 10 = -500.
# The negative sign indicates that heat is going into the body.

[Mesh]
  type = GeneratedMesh
  dim = 2
[]

[Problem]
  extra_tag_vectors = &#x27;bcs&#x27;
[]

[Variables]
  [./temp]
    initial_condition = 100.0
  [../]
[]

[Kernels]
  [./heat_conduction]
    type = ADHeatConduction
    variable = temp
    thermal_conductivity = 10
  [../]
[]

[BCs]
  [./left]
    type = ADDirichletBC
    variable = temp
    boundary = left
    value = 100.0
  [../]
  [./right]
    type = ADConvectiveHeatFluxBC
    variable = temp
    boundary = right
    T_infinity = 200.0
    heat_transfer_coefficient = 10
  [../]
[]

[Postprocessors]
  [./right_flux]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = 10
  [../]
[]

[Executioner]
  type = Transient

  num_steps = 1.0
  nl_rel_tol = 1e-12
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e5359296-7061-497d-97c4-86239d220137"><div class="modal-content"><h4>modules/xfem/test/tests/bimaterials/glued_ad_bimaterials_2d.i</h4><pre class="moose-pre"><code class="language-text"># This test is for two layer materials with different youngs modulus using AD
# The global stress is determined by switching the stress based on level set values
# The material interface is marked by a level set function
# The two layer materials are glued together

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
  [../]
[]

[Mesh]
  displacements = &#x27;disp_x disp_y&#x27;
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmin = 0.0
    xmax = 5.
    ymin = 0.0
    ymax = 5.
    elem_type = QUAD4
  []
  [./left_bottom]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_bottom&#x27;
    coord = &#x27;0.0 0.0&#x27;
    input = gen
  [../]
  [./left_top]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_top&#x27;
    coord = &#x27;0.0 5.&#x27;
    input = left_bottom
  [../]
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;y-2.5&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = 0.03*t
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e5
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
  [./combined_elasticity_tensor]
    type = ADLevelSetBiMaterialRankFour
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = elasticity_tensor
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

  line_search = &#x27;bt&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50

# time control
  start_time = 0.0
  dt = 0.1
  num_steps = 2

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  file_base = glued_bimaterials_2d_out
  execute_on = timestep_end
  csv = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d5817b08-6590-40a9-800b-775b86d7ed64"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_deprecated.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking.
# The stress increases for two steps and then drops to zero.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
  file_base = cracking_out
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5f9b5f9d-a70a-4dad-be77-9a2e5dcf1464"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_resid.i</h4><pre class="moose-pre"><code class="language-text"># This tests the save_in_disp residual aux-variables for
# ComputeAxisymmetricRZFiniteStrain, which is generated through the use of the
# TensorMechanics MasterAction. The GeneratedMesh is 1x1, rotated via axisym to
# create a cylinder of height 1, radius 1.
#
# PostProcessor force_z plots the force on the top surface of the cylinder.
#
# Displacement of 0.1 is applied to top of cylinder while other surfaces are
# constrained. Plotting force_z vs stress_z will show a slope of 3.14159 (pi),
# consistent with formula for normal stress:
#
# Stress = force / area
#
# where area is A = pi * r^2 for a circle.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 5
  ny = 5
  xmin = 0.0
  xmax = 1.0
  ymin = 0.0
  ymax = 1.0
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Problem]
  coord_type = RZ
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    save_in = &#x27;force_r force_z&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_r]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_r]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./force_r]
    order = FIRST
    family = LAGRANGE
  [../]
  [./force_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./stress_r]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_r
    execute_on = timestep_end
  [../]
  [./strain_r]
    type = ADRankTwoAux
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
    variable = strain_r
    execute_on = timestep_end
  [../]
  [./stress_z]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_z
    execute_on = timestep_end
  [../]
  [./strain_z]
    type = ADRankTwoAux
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
    variable = strain_z
    execute_on = timestep_end
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]

  [./_elastic_strain]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[BCs]
  [./no_disp_r_left]
    type = ADDirichletBC
    variable = disp_r
    boundary = left
    value = 0.0
  [../]
  [./no_disp_r_right]
    type = ADDirichletBC
    variable = disp_r
    boundary = right
    value = 0.0
  [../]
  [./no_disp_z_bottom]
    type = ADDirichletBC
    variable = disp_z
    boundary = bottom
    value = 0.0
  [../]
  [./top]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = top
    function = &#x27;t&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;  201               hypre    boomeramg      10&#x27;

  line_search = &#x27;none&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 5e-9
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-3
  l_max_its = 50

  start_time = 0.0
  end_time = 0.1
  dt = 0.01
[]

[Postprocessors]
  [./strainR]
    type = ElementAverageValue
    variable = strain_r
  [../]
  [./stressR]
    type = ElementAverageValue
    variable = stress_r
  [../]
  [./strainZ]
    type = ElementAverageValue
    variable = strain_z
  [../]
  [./stressZ]
    type = ElementAverageValue
    variable = stress_z
  [../]
  [./force_r]
    type = NodalSum
    variable = force_r
    boundary = top
  [../]
  [./force_z]
    type = NodalSum
    variable = force_z
    boundary = top
  [../]
[]

[Outputs]
  exodus = true
  print_linear_residuals = false
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="21372d63-4c2b-419f-af43-2e72e0cd332c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_linear_elasticity/linear_elastic_material.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 50
  ymax = 50
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./diffused]
     [./InitialCondition]
      type = RandomIC
     [../]
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
  use_automatic_differentiation = true
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = diffused
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
[]

[BCs]
  [./bottom]
    type = ADDirichletBC
    variable = diffused
    boundary = &#x27;right&#x27;
    value = 1
  [../]
  [./top]
    type = ADDirichletBC
    variable = diffused
    boundary = &#x27;top&#x27;
    value = 0
  [../]
  [./disp_x_BC]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;bottom top&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;left right&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;bottom top&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;left right&#x27;
    value = 0.02
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9aecc346-2a47-432c-9249-75ea23514409"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_linear_elasticity/extra_stresses.i</h4><pre class="moose-pre"><code class="language-text"># This input file is designed to test adding extra stress to ADComputeLinearElasticStress

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 50
  ymax = 50
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    extra_stress_names = &#x27;stress_one stress_two&#x27;
  [../]
  [./stress_one]
    type = GenericConstantRankTwoTensor
    tensor_name = stress_one
    tensor_values = &#x27;0 1e3 1e3 1e3 0 1e3 1e3 1e3 0&#x27;
  [../]
  [./stress_two]
    type = GenericConstantRankTwoTensor
    tensor_name = stress_two
    tensor_values = &#x27;1e3 0 0 0 1e3 0 0 0 1e3&#x27;
  [../]
[]

[BCs]
  [./disp_x_BC]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;bottom top&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;left right&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;bottom top&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;left right&#x27;
    value = 0.02
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Postprocessors]
  [./hydrostatic]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./von_mises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="61763676-6281-4afe-b86b-7139f62d0813"><div class="modal-content"><h4>modules/xfem/test/tests/bimaterials/inclusion_ad_bimaterials_2d.i</h4><pre class="moose-pre"><code class="language-text"># This test is for a matrix-inclusion composite materials using AD
# The global stress is determined by switching the stress based on level set values
# The inclusion geometry is marked by a level set function
# The matrix and inclusion are glued together

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 11
  ny = 11
  xmin = 0.0
  xmax = 5.
  ymin = 0.0
  ymax = 5.
  elem_type = QUAD4
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;sqrt((y-2.5)*(y-2.5) + (x-2.5)*(x-2.5)) - 1.5&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = &#x27;0.03*t&#x27;
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e5
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50 #1e-7

# time control
  start_time = 0.0
  dt = 0.5
  end_time = 1.0
  num_steps = 2

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  file_base = inclusion_bimaterials_2d_out
  execute_on = timestep_end
  csv = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fd2e3896-0351-4d00-abce-72a81f8286b7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_1D_spherical/finiteStrain_1DSphere_hollow.i</h4><pre class="moose-pre"><code class="language-text"># This simulation models the mechanics solution for a hollow sphere under
# pressure, applied on the outer surfaces, using 1D spherical symmetry
# assumpitions.  The inner radius of the sphere, r = 4mm, is pinned to prevent
# rigid body movement of the sphere.
#
# From Bower (Applied Mechanics of Solids, 2008, available online at
# solidmechanics.org/text/Chapter4_1/Chapter4_1.htm), and applying the outer
# pressure and pinned displacement boundary conditions set in this simulation,
# the radial displacement is given by:
#
# u(r) = \frac{P(1 + v)(1 - 2v)b^3}{E(b^3(1 + v) + 2a^3(1-2v))} * (\frac{a^3}{r^2} - r)
#
# where P is the applied pressure, b is the outer radius, a is the inner radius,
# v is Poisson&#x27;s ration, E is Young&#x27;s Modulus, and r is the radial position.
#
# The radial stress is given by:
#
# S(r) = \frac{Pb^3}{b^3(1 + v) + 2a^3(1 - 2v)} * (\frac{2a^3}{r^3}(2v - 1) - (1 + v))
#
# The test assumes an inner radius of 4mm, and outer radius of 9 mm,
# zero displacement at r = 4mm, and an applied outer pressure of 2MPa.
# The radial stress is largest in the inner most element and, at an assumed
# mid element coordinate of 4.5mm, is equal to -2.545MPa.
[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 4
  xmax = 9
  nx = 5
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Problem]
  coord_type = RSPHERICAL
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_rr]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Postprocessors]
  [./stress_rr]
    type = ElementAverageValue
    variable = stress_rr
  [../]
[]

[AuxKernels]
  [./stress_rr]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_rr
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./innerDisp]
    type = ADDirichletBC
    boundary = left
    variable = disp_r
    value = 0.0
  [../]
  [./outerPressure]
    type = ADPressure
    boundary = right
    variable = disp_r
    component = 0
    constant = 2
  [../]
[]

[Materials]
  [./Elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    poissons_ratio = 0.345
    youngs_modulus = 1e4
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = PJFNK
  line_search = none


# controls for linear iterations
  l_max_its = 100
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-10
  nl_abs_tol = 1e-5

# time control
  start_time = 0.0
  dt = 0.25
  dtmin = 0.0001
  end_time = 1.0
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="75d858ee-26c4-4a67-a6cf-1ae8261e9d92"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/bulk_modulus_shear_modulus_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[AuxVariables]
  [./stress_11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./stress_11]
    type = ADRankTwoAux
    variable = stress_11
    rank_two_tensor = stress
    index_j = 1
    index_i = 1
  [../]
[]

[BCs]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./top]
    type = ADDirichletBC
    variable = disp_y
    boundary = top
    value = 0.001
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    bulk_modulus = 416666
    shear_modulus = 454545
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  l_max_its = 20
  nl_max_its = 10
  solve_type = NEWTON
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d968cd1-b9f8-47ef-b504-a72ab58a0db4"><div class="modal-content"><h4>modules/combined/test/tests/ad_power_law_creep/power_law_creep_simple.i</h4><pre class="moose-pre"><code class="language-text"># 1x1x1 unit cube with uniform pressure on top face

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[AuxVariables]
  [./temp]
    initial_condition = 1000.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    generate_output = &#x27;stress_yy creep_strain_xx creep_strain_yy creep_strain_zz elastic_strain_yy&#x27;
    use_automatic_differentiation = true
  [../]
[]
[BCs]
  [./u_top_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = top
    value = 1e-5
  [../]
  [./u_bottom_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_yz_fix]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_xy_fix]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2e11
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;power_law_creep&#x27;
  [../]
  [./power_law_creep]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1.0e-15
    n_exponent = 4
    activation_energy = 3.0e5
    temperature = temp
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  num_steps = 10
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="887994e9-b898-473d-8f9a-a3fe094ab165"><div class="modal-content"><h4>modules/combined/test/tests/ad_power_law_creep/power_law_creep.i</h4><pre class="moose-pre"><code class="language-text"># 1x1x1 unit cube with uniform pressure on top face

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[Variables]
  [./temp]
    initial_condition = 1000.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    generate_output = &#x27;stress_yy creep_strain_xx creep_strain_yy creep_strain_zz elastic_strain_yy&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Kernels]
  [./heat]
    type = ADHeatConduction
    variable = temp
  [../]
  [./heat_ie]
    type = ADHeatConductionTimeDerivative
    variable = temp
  [../]
[]

[BCs]
  [./u_top_pull]
    type = ADPressure
    variable = disp_y
    component = 1
    boundary = top
    constant = -10.0e6
  [../]
  [./u_bottom_fix]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_yz_fix]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_xy_fix]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./temp_fix]
    type = DirichletBC
    variable = temp
    boundary = &#x27;bottom top&#x27;
    value = 1000.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2e11
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;power_law_creep&#x27;
  [../]
  [./power_law_creep]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1.0e-15
    n_exponent = 4
    activation_energy = 3.0e5
    temperature = temp
  [../]

  [./thermal]
    type = ADHeatConductionMaterial
    specific_heat = 1.0
    thermal_conductivity = 100.
  [../]
  [./density]
    type = ADDensity
    density = 1.0
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_ksp&#x27;
  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 20
  nl_max_its = 20
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.0
  end_time = 1.0
  num_steps = 10
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="43dd44e6-b190-4f66-8981-3795ea2d5fae"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_xyz.i</h4><pre class="moose-pre"><code class="language-text">#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.00175&#x27;
  [../]
  [./velocity_y]
    type = ParsedFunction
    value = &#x27;if(t &lt; 2, 0.00175, 0)&#x27;
  [../]
  [./velocity_z]
    type = ParsedFunction
    value = 0.00175
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./fix_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./move_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]

  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./move_y]
    type = PresetVelocity
    variable = disp_y
    boundary = 5
    function = velocity_y
#    time_periods = &#x27;p2 p3&#x27;
  [../]

  [./fix_z]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
  [./move_z]
    type = PresetVelocity
    variable = disp_z
    boundary = 6
    function = velocity_z
#    time_periods = &#x27;p3&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;


  line_search = &#x27;none&#x27;


  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 100
  nl_abs_tol = 1e-4
  #nl_rel_tol = 1e-4
  nl_rel_tol = 1e-6

  start_time = 0.0
  end_time = 3.0
  dt = 0.01
[]

[Controls]
  [./p1]
    type = TimePeriod
    start_time = 0.0
    end_time = 1.0
    disable_objects = &#x27;BCs/move_y BCs/move_z&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]

  [./p2]
    type = TimePeriod
    start_time = 1.0
    end_time = 2.0
    disable_objects = &#x27;BCs/move_z&#x27;
    enable_objects = &#x27;BCs/move_y&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]

  [./p3]
    type = TimePeriod
    start_time = 2.0
    end_time = 3.0
    enable_objects = &#x27;BCs/move_y BCs/move_z&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
    set_sync_times = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6778e1cf-0896-440f-b21d-c9d9f27a60cf"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/negative_volume.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test
#
# This test is designed to compute a negative number of moles
# to trigger an error check in the CavityPressureUserObject.
# The negative number of moles is achieved by supplying an
# open volume to the InternalVolume postprocessor, which
# calculates a negative volume.

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 2
[]

[Functions]
  [./temperature]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 2&#x27;
    scale_factor = 100
  [../]
[]

[Variables]
  [./temperature]
    initial_condition = 100
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[Kernels]
  [./heat]
    type = Diffusion
    variable = temperature
    use_displaced_mesh = true
  [../]
[]

[BCs]
  [./no_x]
    type = ADDirichletBC
    variable = disp_r
    boundary = left
    value = 0.0
  [../]
  [./no_y]
    type = ADDirichletBC
    variable = disp_z
    boundary = bottom
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 2
    function = temperature
    variable = temperature
  [../]
  [./CavityPressure]
    [./pressure]
      boundary = &#x27;top bottom right&#x27;
      initial_pressure = 10e5
      R = 8.3143
      output_initial_moles = initial_moles
      temperature = aveTempInterior
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elastic_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_abs_tol = 1e-10
  l_max_its = 20
  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = &#x27;top bottom right&#x27;
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = AxisymmetricCenterlineAverageValue
    boundary = left
    variable = temperature
    execute_on = &#x27;initial linear&#x27;
  [../]
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="517a1e4b-96c3-43d4-92d0-15129488803e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of an individual LPS viscoplasticity model

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = lps
    initial_porosity = 0.1
    outputs = all
  [../]

  [./lps]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;1e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f8f8f47d-3115-42dc-9487-2670d4fd8d44"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/strain_energy_density/ad_rate_model_weak_plane.i</h4><pre class="moose-pre"><code class="language-text"># Single element test to check the strain energy density calculation

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = true
  out_of_plane_strain = strain_zz
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 2
[]

[AuxVariables]
  [./SERD]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Variables]
  [./strain_zz]
  []
[]

[Functions]
  [./rampConstantUp]
    type = PiecewiseLinear
    x = &#x27;0. 1.&#x27;
    y = &#x27;0. 1.&#x27;
    scale_factor = -100
  [../]
[]

[Modules/TensorMechanics/Master]
  [./master]
    strain = FINITE
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress strain_xx strain_yy&#x27;
    planar_formulation = WEAK_PLANE_STRESS
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./SERD]
    type = ADMaterialRealAux
    variable = SERD
    property = strain_energy_rate_density
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./no_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = 0.0
  [../]
  [./no_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0.0
  [../]
  [./Pressure]
    [./top]
      boundary = &#x27;top&#x27;
      function = rampConstantUp
    [../]
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 206800
    poissons_ratio = 0.0
  [../]
  [./radial_return_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;powerlawcrp&#x27;
  [../]
  [./powerlawcrp]
    type = ADPowerLawCreepStressUpdate
    coefficient = 3.125e-21 # 7.04e-17 #
    n_exponent = 4.0
    m_exponent = 0.0
    activation_energy = 0.0
    # max_inelastic_increment = 0.01
  [../]
  [./strain_energy_rate_density]
    type = ADStrainEnergyRateDensity
    inelastic_models = &#x27;powerlawcrp&#x27;
  [../]
[]

[Executioner]
   type = Transient

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      4&#x27;

  line_search = &#x27;none&#x27;

   l_max_its = 50
   nl_max_its = 20
   nl_abs_tol = 3e-7
   nl_rel_tol = 1e-12
   l_tol = 1e-2

   start_time = 0.0
   dt = 1

   end_time = 1
   num_steps = 1
[]

[Postprocessors]
  [./SERD]
    type = ElementAverageValue
    variable = SERD
  [../]
[]

[Outputs]
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9b022ed3-40f6-44fc-839d-a7c11a4adcab"><div class="modal-content"><h4>modules/xfem/test/tests/moving_interface/moving_ad_diffusion.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
    heal_always = true
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 5
  ny = 3
  xmin = 0.0
  xmax = 1
  ymin = 0.0
  ymax = 1
  elem_type = QUAD4
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Variables]
  [./u]
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;x-0.76+0.21*t&#x27;
  [../]
[]

[Kernels]
  [./diff]
    type = ADMatDiffusion
    variable = u
    diffusivity = diffusion_coefficient
  [../]
  [./time_deriv]
    type = ADTimeDerivative
    variable = u
  [../]
[]

[Constraints]
  [./u_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = u
    jump = 0
    use_penalty = true
    alpha = 1e5
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./right_u]
    type = ADDirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./left_u]
    type = ADDirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Materials]
  [./diffusivity_A]
    type = ADGenericConstantMaterial
    prop_names = A_diffusion_coefficient
    prop_values = 5
  [../]

  [./diffusivity_B]
    type = ADGenericConstantMaterial
    prop_names = B_diffusion_coefficient
    prop_values = 0.5
  [../]

  [./diff_combined]
    type = ADLevelSetBiMaterialReal
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = diffusion_coefficient
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

  l_max_its = 20
  l_tol = 1e-8
  nl_max_its = 15
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-50

  start_time = 0.0
  dt = 1
  end_time = 2

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  execute_on = timestep_end
  csv = true
  file_base = moving_diffusion_out
  perf_graph = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3da7a97d-227d-4c54-a9a9-f4f8c7bf02cc"><div class="modal-content"><h4>modules/heat_conduction/test/tests/joule_heating/transient_ad_jouleheating.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 5
  ymax = 5
[]

[Variables]
  [./T]
    initial_condition = 293.0 #in K
  [../]
  [./elec]
  [../]
[]

[Kernels]
  [./HeatDiff]
    type = ADHeatConduction
    variable = T
  [../]
  [./HeatTdot]
    type = ADHeatConductionTimeDerivative
    variable = T
  [../]
  [./HeatSrc]
    type = ADJouleHeatingSource
    variable = T
    elec = elec
  [../]
  [./electric]
    type = ADHeatConduction
    variable = elec
    thermal_conductivity = electrical_conductivity
  [../]
[]

[BCs]
  [./lefttemp]
    type = ADDirichletBC
    boundary = left
    variable = T
    value = 293 #in K
  [../]
  [./elec_left]
    type = ADDirichletBC
    variable = elec
    boundary = left
    value = 1 #in V
  [../]
  [./elec_right]
    type = ADDirichletBC
    variable = elec
    boundary = right
    value = 0
  [../]
[]

[Materials]
  [./k]
    type = ADGenericConstantMaterial
    prop_names = &#x27;thermal_conductivity&#x27;
    prop_values = &#x27;397.48&#x27; #copper in W/(m K)
  [../]
  [./cp]
    type = ADGenericConstantMaterial
    prop_names = &#x27;specific_heat&#x27;
    prop_values = &#x27;385.0&#x27; #copper in J/(kg K)
  [../]
  [./rho]
    type = ADGenericConstantMaterial
    prop_names = &#x27;density&#x27;
    prop_values = &#x27;8920.0&#x27; #copper in kg/(m^3)
  [../]
  [./sigma] #copper is default material
    type = ADElectricalConductivity
    temperature = T
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;hypre&#x27;
  dt = 1
  end_time = 5
  automatic_scaling = true
[]

[Outputs]
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0170a32a-7b6a-464a-835d-9cdf9618f834"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/bending_jacobian.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 10
    ymin = 0
    ymax = 2
    nx = 10
    ny = 2
    elem_type = QUAD4
  []
  [corner]
    type = ExtraNodesetGenerator
    new_boundary = 101
    coord = &#x27;0 0&#x27;
    input = generated_mesh
  []
  [side]
    type = ExtraNodesetGenerator
    new_boundary = 102
    coord = &#x27;10 0&#x27;
    input = corner
  []
  [mid]
    type = ExtraNodesetGenerator
    new_boundary = 103
    coord = &#x27;5 2&#x27;
    input = side
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_finite_deform_jacobian = true
    volumetric_locking_correction = false
    use_automatic_differentiation = true
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric9
    C_ijkl = &#x27;1.684e5 0.176e5 0.176e5 1.684e5 0.176e5 1.684e5 0.754e5 0.754e5 0.754e5&#x27;
  [../]
[]

[BCs]
 [./fix_corner_x]
   type = ADDirichletBC
   variable = disp_x
   boundary = 101
   value = 0
 [../]
 [./fix_corner_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 101
   value = 0
 [../]
 [./fix_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 102
   value = 0
 [../]
 [./move_y]
   type = ADFunctionDirichletBC
   variable = disp_y
   boundary = 103
   function = &#x27;-t&#x27;
 [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_rel_tol = 1e-10
  nl_max_its = 10

  l_tol  = 1e-4
  l_max_its = 50

  dt = 0.1
  dtmin = 0.1

  num_steps = 2
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="efadbe82-1da3-4a84-a575-e0a5c12b9275"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_isotropic_elasticity_tensor/youngs_modulus_poissons_ratio_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./stress_11]
    type = ADRankTwoAux
    variable = stress_11
    rank_two_tensor = stress
    index_j = 1
    index_i = 1
  [../]
[]

[BCs]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0
  [../]
  [./top]
    type = ADDirichletBC
    variable = disp_y
    boundary = top
    value = 0.001
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    poissons_ratio = 0.1
    youngs_modulus = 1e6
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  l_max_its = 20
  nl_max_its = 10
  solve_type = NEWTON
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d6d2d98c-5a1f-49d9-84b0-5fb385fc06d0"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_test.i</h4><pre class="moose-pre"><code class="language-text"># Considers the mechanics solution for a thick spherical shell that is uniformly
# pressurized on the inner and outer surfaces, using 2D axisymmetric geometry.
# This test uses the strain calculator ComputeAxisymmetricRZFiniteStrain,
# which is generated through the use of the TensorMechanics MasterAction.
#
# From Roark (Formulas for Stress and Strain, McGraw-Hill, 1975), the radially-dependent
# circumferential stress in a uniformly pressurized thick spherical shell is given by:
#
# S(r) = [ Pi[ri^3(2r^3+ro^3)] - Po[ro^3(2r^3+ri^3)] ] / [2r^3(ro^3-ri^3)]
#
#   where:
#          Pi = inner pressure
#          Po = outer pressure
#          ri = inner radius
#          ro = outer radius
#
# The tests assume an inner and outer radii of 5 and 10, with internal and external
# pressures of 100000 and 200000 at t = 1.0, respectively. The resulting compressive
# tangential stress is largest at the inner wall and, from the above equation, has a
# value of -271429.
#
# RESULTS are below. Since stresses are average element values, values for the
# edge element and one-element-in are used to extrapolate the stress to the
# inner surface. The vesrion of the tests that are checked use the coarsest meshes.
#
#  Mesh    Radial elem   S(edge elem)  S(one elem in)  S(extrap to surf)
# 1D-SPH
# 2D-RZ        12 (x10)    -265004      -254665        -270174
#  3D          12 (6x6)    -261880      -252811        -266415
#
# 1D-SPH
# 2D-RZ        48 (x10)    -269853      -266710        -271425
#  3D          48 (10x10)  -268522      -265653        -269957
#
# The numerical solution converges to the analytical solution as the mesh is
# refined.

[Mesh]
  file = 2D-RZ_mesh.e
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Problem]
  coord_type = RZ
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    block = 1
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_theta]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_theta]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_theta]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_theta
    execute_on = timestep_end
  [../]
  [./strain_theta]
    type = ADRankTwoAux
    rank_two_tensor = total_strain
    index_i = 2
    index_j = 2
    variable = strain_theta
    execute_on = timestep_end
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.345
    block = 1
  [../]

  [./_elastic_strain]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
[]

[BCs]
# pin particle along symmetry planes
  [./no_disp_r]
    type = ADDirichletBC
    variable = disp_r
    boundary = xzero
    value = 0.0
  [../]

  [./no_disp_z]
    type = ADDirichletBC
    variable = disp_z
    boundary = yzero
    value = 0.0
  [../]

# exterior and internal pressures
  [./exterior_pressure_r]
    type = ADPressure
    variable = disp_r
    boundary = outer
    component = 0
    function = &#x27;200000*t&#x27;
  [../]

 [./exterior_pressure_z]
    type = ADPressure
    variable = disp_z
    boundary = outer
    component = 1
    function = &#x27;200000*t&#x27;
  [../]

  [./interior_pressure_r]
    type = ADPressure
    variable = disp_r
    boundary = inner
    component = 0
    function = &#x27;100000*t&#x27;
  [../]

  [./interior_pressure_z]
    type = ADPressure
    variable = disp_z
    boundary = inner
    component = 1
    function = &#x27;100000*t&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;  201               hypre    boomeramg      10&#x27;

  line_search = &#x27;none&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 5e-9
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-3
  l_max_its = 50

  start_time = 0.0
  end_time = 0.2
  dt = 0.1
[]

[Postprocessors]
  [./strainTheta]
    type = ElementAverageValue
    variable = strain_theta
  [../]
  [./stressTheta]
    type = ElementAverageValue
    variable = stress_theta
  [../]
  [./stressTheta_pt]
    type = PointValue
    point = &#x27;5.0 0.0 0.0&#x27;
    #bottom inside edge for comparison to theory; use csv = true
    variable = stress_theta
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d952bfa2-8b95-4849-89ca-b2742ee0ce9d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single_split.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of combining two LPS viscoplasticity model.
# The answer should be close, but not exactly the same, as lps_single.i

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
  [./tot_effective_viscoplasticity]
    type = ParsedFunction
    vals = &#x27;lps_1_eff_creep_strain lps_2_eff_creep_strain&#x27;
    vars = &#x27;lps_1_eff_creep_strain lps_2_eff_creep_strain&#x27;
    value = &#x27;lps_1_eff_creep_strain+lps_2_eff_creep_strain&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = &#x27;one two&#x27;
    initial_porosity = 0.1
    outputs = all
  [../]

  [./one]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    base_name = &#x27;lps_first&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./two]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    base_name = &#x27;lps_second&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;0.5e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./lps_1_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_first_effective_viscoplasticity
    outputs = none
  [../]
  [./lps_2_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_second_effective_viscoplasticity
    outputs = none
  [../]
  [./eff_creep_strain_tot]
    type = FunctionValuePostprocessor
    function = tot_effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0eb55b23-8bca-4ceb-8426-08d96c7976a1"><div class="modal-content"><h4>modules/combined/test/tests/exception/ad.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_update_strategy = iteration
  [./gen]
    type = FileMeshGenerator
    file = mesh.e
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./temp]
    initial_condition = 501
  [../]
[]

[AuxVariables]
  [./density_aux]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./finite]
    strain = FINITE
    use_automatic_differentiation = true
  [../]
[]

[Kernels]
  [./gravity]
    type = ADGravity
    variable = disp_y
    value = -9.81
  [../]
  [./heat]
    type = ADMatDiffusion
    variable = temp
    diffusivity = 1
  [../]
  [./heat_ie]
    type = ADTimeDerivative
    variable = temp
  [../]
[]

[AuxKernels]
  [./conductance]
    type = ADMaterialRealAux
    property = density
    variable = density_aux
    boundary = inner_surface
  [../]
[]

[ThermalContact]
  [./thermal_contact]
    type = GapHeatTransfer
    variable = temp
    primary = outer_interior
    secondary = inner_surface
    emissivity_primary = 0
    emissivity_secondary = 0
    quadrature = true
  [../]
[]

[BCs]
  [./no_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;centerline&#x27;
    value = 0.0
  [../]
  [./no_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;centerline outer_exterior&#x27;
    value = 0.0
  [../]
  [./temp]
    type = FunctionDirichletBC
    boundary = outer_exterior
    variable = temp
    function = &#x27;500 + t&#x27;
  [../]
[]

[Materials]
  [./density]
    type = ADGenericConstantMaterial
    prop_names = &#x27;density&#x27;
    prop_values = &#x27;1&#x27;
  [../]

  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e11
    poissons_ratio = 0.3
  [../]

  [./inner_elastic_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = &#x27;inner_creep&#x27;
    block = inner
    outputs = all
  [../]

  [./inner_creep]
    type = ADPowerLawCreepExceptionTest
    coefficient = 10e-22
    n_exponent = 2
    activation_energy = 0
    block = inner
  [../]

  [./outer_stressstress]
    type = ADComputeFiniteStrainElasticStress
    block = outer
  [../]
[]

[Executioner]
  type = Transient
  petsc_options = &#x27; -snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  line_search = none

  nl_abs_tol = 1e-7
  l_max_its = 20

  num_steps = 1
  dt = 1
  dtmin = .1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="3e8b70b8-d51c-4b36-bcd8-1eed7c0dd7a3" data-section-level="2" data-section-text="Child Objects"><h2 id="child-objects">Child Objects</h2><ul class="moose-list-children browser-default"><li><a href="#5f4edaf1-4441-4324-a22d-38e6018ac0f8" class="modal-trigger">framework/include/bcs/ADPresetBC.h</a></li></ul><div class="modal moose-modal" id="5f4edaf1-4441-4324-a22d-38e6018ac0f8"><div class="modal-content"><h4>framework/include/bcs/ADPresetBC.h</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the MOOSE framework
// https://www.mooseframework.org
//
// All rights reserved, see COPYRIGHT for full restrictions
// https://github.com/idaholab/moose/blob/master/COPYRIGHT
//
// Licensed under LGPL 2.1, please see LICENSE for details
// https://www.gnu.org/licenses/lgpl-2.1.html

#pragma once

#include &quot;ADDirichletBC.h&quot;

/**
 * Defines a boundary condition that (pre)sets the solution at the boundary
 * to be a user specified value.
 */
class ADPresetBC : public ADDirichletBC
{
public:
  static InputParameters validParams();

  ADPresetBC(const InputParameters &amp; parameters);
};
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#4ada6852-2b8e-4b00-a3e4-82771227f392" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#a784a3cd-d11e-486d-8504-30a7f0cd314f" class="tooltipped" data-position="left" data-tooltip="Preset boundary conditions">Preset boundary conditions</a></li><li><a href="#d0c1d4f0-4192-41b8-8556-3cd75e64da86" class="tooltipped" data-position="left" data-tooltip="Example Input Syntax">Example Input Syntax</a></li><li><a href="#a5e29ecd-63a9-4a6c-a8fc-13f83438a915" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#7933e62e-a83a-4f50-b274-74c0a44c3320" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#3e8b70b8-d51c-4b36-bcd8-1eed7c0dd7a3" class="tooltipped" data-position="left" data-tooltip="Child Objects">Child Objects</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>