<!DOCTYPE html><head><meta charset="UTF-8"><title>ADFunctionDirichletBC.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="3badce3d-735c-4458-a979-7c71452cd7e6"><i class="material-icons">menu</i></a><ul class="sidenav" id="3badce3d-735c-4458-a979-7c71452cd7e6"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">bcs</span><a href="#" class="breadcrumb">ADFunctionDirichletBC</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="3f05d78e-4171-4cb2-b08d-d2ce147843c5" data-section-level="1" data-section-text="ADFunctionDirichletBC"><h1 id="adfunctiondirichletbc">ADFunctionDirichletBC</h1><p>Imposes the essential boundary condition <span tex="u=g" bookmark="moose-equation-cad74fcc-a9db-4839-90c8-568c83453dcf" recursive="True" class="moose-katex-inline-equation" id="moose-equation-cad74fcc-a9db-4839-90c8-568c83453dcf"><script>var element = document.getElementById("moose-equation-cad74fcc-a9db-4839-90c8-568c83453dcf");katex.render("u=g", element, {displayMode:false,throwOnError:false});</script></span>, where <span tex="g" bookmark="moose-equation-3ac1fa56-cbd0-415e-9b00-a19dd1ed3069" recursive="True" class="moose-katex-inline-equation" id="moose-equation-3ac1fa56-cbd0-415e-9b00-a19dd1ed3069"><script>var element = document.getElementById("moose-equation-3ac1fa56-cbd0-415e-9b00-a19dd1ed3069");katex.render("g", element, {displayMode:false,throwOnError:false});</script></span> is calculated by a function.</p><section class="scrollspy" id="df020795-6a3b-456d-8667-6836b19dc97a" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p><code>ADFunctionDirichletBC</code> is a generalization of <a href="DirichletBC.html"><code>DirichletBC</code></a> which imposes a possibly temporally- and spatially-dependent value defined by a MOOSE <a href="../../syntax/Functions/index.html"><code>Function</code></a> object on a particular set of degrees of freedom (DOFs) defined by the <code>boundary</code> parameter. That is, for a PDE of the form</p><p><span class="moose-katex-block-equation"><span tex="\begin{aligned}   -\nabla^2 u &= f && \quad \in \Omega \\   u &= g(t,\vec{x}) && \quad \in \partial \Omega_D \\   \frac{\partial u}{\partial n} &= h(t,\vec{x}) && \quad \in \partial \Omega_N \end{aligned}" bookmark="moose-equation-6f5ee063-5e67-4607-900e-ba91426982df" recursive="True" class="moose-katex-equation table-cell" id="moose-equation-6f5ee063-5e67-4607-900e-ba91426982df"></span><script>var element = document.getElementById("moose-equation-6f5ee063-5e67-4607-900e-ba91426982df");katex.render("\\begin{aligned}   -\\nabla^2 u &= f && \\quad \\in \\Omega \\\\   u &= g(t,\\vec{x}) && \\quad \\in \\partial \\Omega_D \\\\   \\frac{\\partial u}{\\partial n} &= h(t,\\vec{x}) && \\quad \\in \\partial \\Omega_N \\end{aligned}", element, {displayMode:true,throwOnError:false});</script></span></p><p>where <span tex="\Omega \subset \mathbb{R}^n" bookmark="moose-equation-4d0985de-f55c-4382-a668-49362a922ba1" recursive="True" class="moose-katex-inline-equation" id="moose-equation-4d0985de-f55c-4382-a668-49362a922ba1"><script>var element = document.getElementById("moose-equation-4d0985de-f55c-4382-a668-49362a922ba1");katex.render("\\Omega \\subset \\mathbb{R}^n", element, {displayMode:false,throwOnError:false});</script></span> is the domain, and <span tex="\partial \Omega = \partial \Omega_D \cup \partial \Omega_N" bookmark="moose-equation-d4e26d7a-d814-431f-b650-335b334f1f6b" recursive="True" class="moose-katex-inline-equation" id="moose-equation-d4e26d7a-d814-431f-b650-335b334f1f6b"><script>var element = document.getElementById("moose-equation-d4e26d7a-d814-431f-b650-335b334f1f6b");katex.render("\\partial \\Omega = \\partial \\Omega_D \\cup \\partial \\Omega_N", element, {displayMode:false,throwOnError:false});</script></span> is its boundary, a <code>ADFunctionDirichletBC</code> object can be used to impose the condition (2) if the function is well-defined for <span tex="\vec{x} \in \partial \Omega_D" bookmark="moose-equation-53d35cd2-75c7-4127-b8f7-cb1f6466886b" recursive="True" class="moose-katex-inline-equation" id="moose-equation-53d35cd2-75c7-4127-b8f7-cb1f6466886b"><script>var element = document.getElementById("moose-equation-53d35cd2-75c7-4127-b8f7-cb1f6466886b");katex.render("\\vec{x} \\in \\partial \\Omega_D", element, {displayMode:false,throwOnError:false});</script></span>. In this case, the <code>function</code> parameter corresponds to a MOOSE <code>Function</code> object which represents the mathematical function <span tex="g(t,\vec{x})" bookmark="moose-equation-7d47c134-3371-4a76-8008-48f63487010d" recursive="True" class="moose-katex-inline-equation" id="moose-equation-7d47c134-3371-4a76-8008-48f63487010d"><script>var element = document.getElementById("moose-equation-7d47c134-3371-4a76-8008-48f63487010d");katex.render("g(t,\\vec{x})", element, {displayMode:false,throwOnError:false});</script></span>, and the user must define one or more sidesets corresponding to the boundary subset <span tex="\partial \Omega_D" bookmark="moose-equation-ff86fe52-a355-40d9-98d5-2f43536212ab" recursive="True" class="moose-katex-inline-equation" id="moose-equation-ff86fe52-a355-40d9-98d5-2f43536212ab"><script>var element = document.getElementById("moose-equation-ff86fe52-a355-40d9-98d5-2f43536212ab");katex.render("\\partial \\Omega_D", element, {displayMode:false,throwOnError:false});</script></span> via the <code>boundary</code> parameter.</p><p>Note that <code>ADFunctionDirichletBC</code> computes its Jacobian using automatic differentiation.</p></section><section class="scrollspy" id="67a5d32c-00ae-4e03-9ec4-8727529794df" data-section-level="2" data-section-text="Preset boundary conditions"><h2 id="preset-boundary-conditions">Preset boundary conditions</h2><p>With the parameter <code>preset = true</code>, the value of the boundary condition is applied before the solve begins. With <code>preset = false</code>, the boundary condition is only enforced as the solve progresses. In most situations, presetting the boundary condition is better.</p><p>The default behavior of the <code>preset</code> parameter is determined by the flag <code>use_legacy_dirichlet_bc</code> in the application. Change this flag to false to switch your application to the preferred behavior (setting <code>preset = true</code> as the default).</p></section><section class="scrollspy" id="8f23ca6d-34ae-4425-87c9-5c91e315277f" data-section-level="2" data-section-text="Example Input Syntax"><h2 id="example-input-syntax">Example Input Syntax</h2><pre class="moose-pre"><code class="language-text">[BCs]
  [./left]
    type = ADFunctionDirichletBC
    variable = u
    boundary = left
    function = &#x27;1&#x27;
  [../]
  [./right]
    type = ADRobinBC
    variable = u
    boundary = right
  [../]
[]
</code></pre><a href="#df83d735-8b4a-4103-91a4-9026243bf9a9" class="modal-trigger">(test/tests/bcs/ad_bcs/ad_bc.i)</a><div class="modal moose-modal" id="df83d735-8b4a-4103-91a4-9026243bf9a9"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/bcs/ad_bcs/ad_bc.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = ADFunctionDirichletBC
    variable = u
    boundary = left
    function = &#x27;1&#x27;
  [../]
  [./right]
    type = ADRobinBC
    variable = u
    boundary = right
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="a69bf219-d1f6-414f-b8c7-a7f532789399" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="1bb982e5-c071-445f-b44f-bb2eab34c4aa" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The name of the variable that this boundary condition applies to</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>NonlinearVariableName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the variable that this boundary condition applies to</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="c24172c3-c896-4b0d-b76b-1c49431024aa" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">diag_save_in</span><span class="moose-parameter-header-description">The name of auxiliary variables to save this BC's diagonal jacobian contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<AuxVariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of auxiliary variables to save this BC's diagonal jacobian contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">displacements</span><span class="moose-parameter-header-description">The displacements</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The displacements</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">function</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The function describing the Dirichlet condition</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FunctionName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The function describing the Dirichlet condition</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">preset</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not to preset the BC (apply the value before the solve begins). Note that the default value of this parameter is handled by the use_legacy_dirichlet_bc parameter on the MooseApp.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not to preset the BC (apply the value before the solve begins). Note that the default value of this parameter is handled by the use_legacy_dirichlet_bc parameter on the MooseApp.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">save_in</span><span class="moose-parameter-header-description">The name of auxiliary variables to save this BC's residual contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<AuxVariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of auxiliary variables to save this BC's residual contributions to.  Everything about that variable must match everything about this variable (the type, what blocks it's on, etc.)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_x_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the x-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the x-component of the variable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_y_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the y-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the y-component of the variable</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">set_z_comp</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether to set the z-component of the variable</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether to set the z-component of the variable</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="73ec3be4-71fd-4f23-b5aa-5f93d9747ec1" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">implicit</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines whether this object is calculated using an implicit or explicit form</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether this object is calculated using an implicit or explicit form</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="4f6cc369-d8f0-48c4-a83d-e64afdd32ff1" data-section-level="3" data-section-text="Tagging Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">extra_matrix_tags</span><span class="moose-parameter-header-description">The extra tags for the matrices this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<TagName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The extra tags for the matrices this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">extra_vector_tags</span><span class="moose-parameter-header-description">The extra tags for the vectors this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<TagName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The extra tags for the vectors this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">matrix_tags</span><span class="moose-parameter-header-default">system time</span><span class="moose-parameter-header-description">The tag for the matrices this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>system time</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>nontime system time</p><p class="moose-parameter-description"><span>Description:</span>The tag for the matrices this Kernel should fill</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">vector_tags</span><span class="moose-parameter-header-default">residual</span><span class="moose-parameter-header-description">The tag for the vectors this Kernel should fill</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>residual</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>nontime time residual</p><p class="moose-parameter-description"><span>Description:</span>The tag for the vectors this Kernel should fill</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Tagging Parameters</h3></summary></details></section></section><section class="scrollspy" id="8f642f5c-6153-411b-85a3-267130d5e5cc" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#2201e224-55b3-4ab5-a22c-012be82201cf" class="modal-trigger">test/tests/controls/time_periods/bcs/adbcs.i</a></li><li><a href="#7ff4690b-8587-4016-b6a5-0e6c396f6e31" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking.i</a></li><li><a href="#7a29056a-7f34-4f96-969e-b611bae4bd89" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/creep.i</a></li><li><a href="#75023835-8e7f-4ad5-87d9-fe36412f11da" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential_deprecated.i</a></li><li><a href="#3e4016eb-4f95-4a09-be35-72af57c5e695" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</a></li><li><a href="#3f470213-9799-4c10-ad0c-fd3651b597d8" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</a></li><li><a href="#d0b11a67-b3e6-4e8d-aec5-fe781314018f" class="modal-trigger">modules/heat_conduction/test/tests/verify_against_analytical/ad_2d_steady_state.i</a></li><li><a href="#fc6cd2f7-70f6-4635-adce-050d28ae01e9" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_power.i</a></li><li><a href="#747a01d4-d5ff-4199-9552-18a2058f8823" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</a></li><li><a href="#4a929059-448f-465e-a6b2-ee01adf12716" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</a></li><li><a href="#4acab6cd-c366-4f23-a62d-907797f519be" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</a></li><li><a href="#3c3f6527-2d40-4a14-ace1-a9215a75d1af" class="modal-trigger">test/tests/bcs/ad_function_dirichlet_bc/test.i</a></li><li><a href="#710be2f0-0743-431d-87d6-f6b2403471a0" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/rz.i</a></li><li><a href="#fad87116-16a1-40a2-b65b-21ebd291ff8e" class="modal-trigger">test/tests/kernels/ad_mat_diffusion/ad_2d_steady_state.i</a></li><li><a href="#239b5ddc-770d-45a0-b872-075a8ff2df81" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz.i</a></li><li><a href="#a6cd06e5-5ac5-496a-90c4-0eb1bb5b04f2" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/additional_volume.i</a></li><li><a href="#16a875a6-8514-4f47-b34f-9590543a48fb" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</a></li><li><a href="#78f8d0c2-cc63-4a60-82c7-3f876fb28628" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</a></li><li><a href="#1cda820b-3411-48d8-98cc-6c5b27133387" class="modal-trigger">test/tests/kernels/ad_vector_couple/ad_vector_couple.i</a></li><li><a href="#6d5299e7-cbb9-4064-8df0-de3ce8bfe7d6" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_centerline_VLC.i</a></li><li><a href="#25191ae3-d878-465a-8442-d013bd2619cf" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_plane_stress.i</a></li><li><a href="#70766f06-76d5-4a96-806b-27bf828dc1aa" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/initial_temperature.i</a></li><li><a href="#d308fb51-d258-451c-b1ed-f48d1859127b" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</a></li><li><a href="#634209a4-7ad8-47dc-a09b-826925b2c1ab" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</a></li><li><a href="#f4747200-521d-4723-bc39-4602b9c582fd" class="modal-trigger">test/tests/kernels/ad_vector_couple/ad_vector_couple_default.i</a></li><li><a href="#7b401d36-2dda-4058-a1da-20f22ee9a4b7" class="modal-trigger">modules/xfem/test/tests/moving_interface/moving_ad_bimaterial.i</a></li><li><a href="#22079d92-ed76-42a0-b066-8c60f6b7313e" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/gtn_single.i</a></li><li><a href="#dcd91c10-b806-4b66-9640-c4b6710528dd" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_dual.i</a></li><li><a href="#16c87c7c-eea1-46af-ab86-4c4811d5dac8" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_function.i</a></li><li><a href="#dacbcf3d-28f4-4b52-be81-51e2db518c24" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/multiple_postprocessors.i</a></li><li><a href="#f096119f-1c15-4e3b-961c-9996a1164bbe" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</a></li><li><a href="#d0c16347-76a2-4c80-a067-88dc6b9e1ac2" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</a></li><li><a href="#52c93d7d-9660-400c-98bd-6e0dc27faf7b" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz_exponential.i</a></li><li><a href="#347c8bf2-65f7-413d-9919-518e1a6826bb" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_multiple_softening.i</a></li><li><a href="#c2950dff-85e4-40d0-af10-88451708b377" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential.i</a></li><li><a href="#1495b8d3-2ba2-47ae-952f-dd0494ead06d" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rotation.i</a></li><li><a href="#b26c1696-8b3d-448b-b4fe-4e389874ca0a" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/3d_bar.i</a></li><li><a href="#dc4271f2-d21c-4d70-ba71-99bb36b22a1b" class="modal-trigger">modules/xfem/test/tests/bimaterials/glued_ad_bimaterials_2d.i</a></li><li><a href="#ede3949f-5948-4b62-ad36-ad8a837c8bfb" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_deprecated.i</a></li><li><a href="#7540b5ee-5e1e-46b1-bb6b-fba2df4d1805" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_resid.i</a></li><li><a href="#58caf4e7-f4e7-4a24-961e-267a98585182" class="modal-trigger">modules/xfem/test/tests/bimaterials/inclusion_ad_bimaterials_2d.i</a></li><li><a href="#1d0bba3b-b37c-483c-8c86-1c06f3a190de" class="modal-trigger">test/tests/bcs/ad_bcs/ad_bc.i</a></li><li><a href="#21efd392-4a3b-4a8e-bfbc-2c04c8d55c8e" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_xyz.i</a></li><li><a href="#c0fdc711-c958-42fd-87f3-ba5c85090b86" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/negative_volume.i</a></li><li><a href="#571abe9e-adb6-417f-b439-a13758f3d7be" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</a></li><li><a href="#06016327-9a27-436d-899d-edcb03de2c7d" class="modal-trigger">modules/combined/test/tests/thermal_elastic/ad-thermal_elastic.i</a></li><li><a href="#5a14f8f0-27ff-461f-befa-7f721393bb13" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/bending_jacobian.i</a></li><li><a href="#c6f6e379-0e4c-4667-9616-287e3dff4e4c" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single.i</a></li><li><a href="#36d036d9-76ef-4b84-b16f-758da8f6f305" class="modal-trigger">test/tests/bcs/ad_bc_preset_nodal/bc_function_preset.i</a></li><li><a href="#b77d4524-d251-4d94-a6e6-fea51cdc3a07" class="modal-trigger">test/tests/kernels/ad_vector_couple/ad_grad_vector_couple.i</a></li><li><a href="#76c82a77-2772-4012-89a7-7f29e0b7401e" class="modal-trigger">modules/combined/test/tests/ad_cavity_pressure/3d.i</a></li><li><a href="#6b85b9b2-bd72-4c15-9cff-b57f9c7c5cd7" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</a></li><li><a href="#2065fd5c-8248-4821-99f9-eb7e2c2209e0" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single_split.i</a></li><li><a href="#032b129d-61a0-42d8-90df-776688d19f4a" class="modal-trigger">modules/combined/test/tests/thermo_mech/ad-youngs_modulus_function_temp.i</a></li></ul><div class="modal moose-modal" id="2201e224-55b3-4ab5-a22c-012be82201cf"><div class="modal-content"><h4>test/tests/controls/time_periods/bcs/adbcs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [u]
  []
[]

[Kernels]
  [diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = ADDirichletBC
    variable = u
    boundary = right
    value = 1
  []
  [right2]
    type = ADFunctionDirichletBC
    variable = u
    boundary = right
    function = (y*(t-1))+1
  []
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]

[Controls]
  [period0]
    type = TimePeriod
    disable_objects = &#x27;BoundaryCondition::right2&#x27;
    start_time = &#x27;0&#x27;
    end_time = &#x27;0.95&#x27;
    execute_on = &#x27;initial timestep_begin&#x27;
  []

  [period2]
    type = TimePeriod
    disable_objects = &#x27;BCs/right&#x27;
    start_time = &#x27;1&#x27;
    execute_on = &#x27;initial timestep_begin&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7ff4690b-8587-4016-b6a5-0e6c396f6e31"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking.
# The stress increases for two steps and then drops to zero.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7a29056a-7f34-4f96-969e-b611bae4bd89"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/creep.i</h4><pre class="moose-pre"><code class="language-text"># This test is provided as a check to ensure ADComputeMultiplePorousInelasticStress

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  base_name = &#x27;total&#x27;
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  active=&#x27;elasticity_tensor porous_stress creep&#x27;
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
    base_name = &#x27;total&#x27;
  [../]
  [./porous_stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = creep
    initial_porosity = 0.1
    outputs = all
    base_name = &#x27;total&#x27;
  [../]
  [./regular_stress]
    type = ADComputeMultipleInelasticStress
    inelastic_models = creep
    outputs = all
    base_name = &#x27;total&#x27;
  [../]
  [./porosity]
    type = ADGenericConstantMaterial
    prop_names = porosity
    prop_values = 0.1
    outputs = all
  [../]
  [./creep]
    type = ADPowerLawCreepStressUpdate
    activation_energy = 4e4
    temperature = 1200
    coefficient = 1e-18
    gas_constant = 1.987
    n_exponent = 3
    base_name = &#x27;creep&#x27;
    outputs = all
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = total_hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = total_vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = creep_effective_creep_strain
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="75023835-8e7f-4ad5-87d9-fe36412f11da"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential_deprecated.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.
#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 5 6&#x27;
    y = &#x27;0 0 .00175&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 2 3&#x27;
    y = &#x27;0 0 .0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    #type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]

  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]

  [./move_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    function = disply
  [../]

  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    cracking_release = exponential
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-6

  nl_max_its = 10
  nl_rel_tol = 1e-12
  nl_abs_tol = 1.e-4

  start_time = 0.0
  dt = 0.02
  dtmin = 0.02
  num_steps = 300
[]

[Outputs]
  exodus = true
  file_base = cracking_exponential_out
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3e4016eb-4f95-4a09-be35-72af57c5e695"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3f470213-9799-4c10-ad0c-fd3651b597d8"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d0b11a67-b3e6-4e8d-aec5-fe781314018f"><div class="modal-content"><h4>modules/heat_conduction/test/tests/verify_against_analytical/ad_2d_steady_state.i</h4><pre class="moose-pre"><code class="language-text"># This test solves a 2D steady state heat equation
# The error is found by comparing to the analytical solution

# Note that the thermal conductivity, specific heat, and density in this problem
# Are set to 1, and need to be changed to the constants of the material being
# Analyzed

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 30
  ny = 30
  xmax = 2
  ymax = 2
[]

[Variables]
  [./T]
  [../]
[]

[Kernels]
  [./HeatDiff]
    type = ADHeatConduction
    variable = T
  [../]
[]

[BCs]
  [./zero]
    type = DirichletBC
    variable = T
    boundary = &#x27;right bottom left&#x27;
    value = 0
  [../]
  [./top]
    type = ADFunctionDirichletBC
    variable = T
    boundary = top
    function = &#x27;10*sin(pi*x*0.5)&#x27;
  [../]
[]

[Materials]
  [./properties]
    type = ADGenericConstantMaterial
    prop_names = &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1 1 1&#x27;
  [../]
[]

[Postprocessors]
  [./nodal_error]
    type = NodalL2Error
    function = &#x27;10/(sinh(pi))*sin(pi*x*0.5)*sinh(pi*y*0.5)&#x27;
    variable = T
  [../]
  [./elemental_error]
    type = ElementL2Error
    function = &#x27;10/(sinh(pi))*sin(pi*x*0.5)*sinh(pi*y*0.5)&#x27;
    variable = T
  [../]
[]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fc6cd2f7-70f6-4635-adce-050d28ae01e9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_power.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple test of power law softening law for smeared cracking.
# Upon reaching the failure stress in the x direction, the
# softening model abruptly reduces the stress to a fraction
# of its original value, and re-loading occurs at a reduced
# stiffness. This is repeated multiple times.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = right
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = power_law_softening
  [../]
  [./power_law_softening]
    type = ADPowerLawSoftening
    stiffness_reduction = 0.3333
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 1.0
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="747a01d4-d5ff-4199-9552-18a2058f8823"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  second_order = true
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = false
[]

[AuxVariables]
  [./hydrostatic_stress]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./hydrostatic_stress]
    type = ADRankTwoScalarAux
    variable = hydrostatic_stress
    rank_two_tensor = stress
    scalar_type = Hydrostatic
  [../]
[]

[Variables]
  [./disp_x]
    order = SECOND
    scaling = 1e-10
  [../]
  [./disp_y]
    order = SECOND
    scaling = 1e-10
  [../]
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 10&#x27;
    y = &#x27;0 1e-3&#x27;
  [../]
[]

[Kernels]
  [./stress_x]
    type = ADStressDivergenceTensors
    component = 0
    variable = disp_x
  [../]
  [./stress_y]
    type = ADStressDivergenceTensors
    component = 1
    variable = disp_y
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeIncrementalSmallStrain
  [../]
  [./elastic_strain]
    type = ADComputeMultipleInelasticStress
  [../]

  [./creep_ten]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten
  [../]
  [./creep_ten2]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten2
  [../]
  [./creep_one]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_one
  [../]
  [./creep_nine]
    type = ADPowerLawCreepStressUpdate
    coefficient = 9e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_nine
  [../]
  [./creep_zero]
    type = ADPowerLawCreepStressUpdate
    coefficient = 0e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_zero
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]

  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]

  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = -pc_hypre_type
  petsc_options_value = boomeramg

  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-5

  num_steps = 5
  dt = 1e-1
[]

[Postprocessors]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
  [../]
  [./max_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a929059-448f-465e-a6b2-ee01adf12716"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4acab6cd-c366-4f23-a62d-907797f519be"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3c3f6527-2d40-4a14-ace1-a9215a75d1af"><div class="modal-content"><h4>test/tests/bcs/ad_function_dirichlet_bc/test.i</h4><pre class="moose-pre"><code class="language-text">###########################################################
# This is a test of Boundary Condition System. The
# FunctionDirichletBC is used to contribute the residuals
# to the boundary term operators in the weak form.
#
# @Requirement F3.40
###########################################################

[Mesh]
  [./square]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 32
    ny = 32
  [../]
[]

[Variables]
  [./u]
  [../]
[]

[Functions]
  [./ff_1]
    type = ParsedFunction
    value = alpha*alpha*pi
    vars = &#x27;alpha&#x27;
    vals = &#x27;16&#x27;
  [../]

  [./ff_2]
    type = ParsedFunction
    value = pi*sin(alpha*pi*x)
    vars = &#x27;alpha&#x27;
    vals = &#x27;16&#x27;
  [../]

  [./forcing_func]
    type = CompositeFunction
    functions = &#x27;ff_1 ff_2&#x27;
  [../]

  [./bc_func]
    type = ParsedFunction
    value = sin(alpha*pi*x)
    vars = &#x27;alpha&#x27;
    vals = &#x27;16&#x27;
  [../]
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = u
  [../]
  [./forcing]
    type = ADBodyForce
    variable = u
    function = forcing_func
  [../]
[]

[BCs]
  [./all]
    type = ADFunctionDirichletBC
    variable = u
    boundary = &#x27;left right&#x27;
    function = bc_func
  [../]
[]

[Executioner]
  type = Steady
  nl_rel_tol = 1e-12
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="710be2f0-0743-431d-87d6-f6b2403471a0"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/rz.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test
#
# This test is designed to compute an internal pressure based on
#   p = n * R * T / V
# where
#   p is the pressure
#   n is the amount of material in the volume (moles)
#   R is the universal gas constant
#   T is the temperature
#   V is the volume
#
# The mesh is composed of one block (2) with an interior cavity of volume 8.
#   Block 1 sits in the cavity and has a volume of 1.  Thus, the total
#   initial volume is 7.
# The test adjusts T in the following way:
#   T =&gt; T0 + beta * t
# with
#   beta = T0
#   T0 = 240.54443866068704
#   V0 = 7
#   n0 = f(p0)
#   p0 = 100
#   R = 8.314472 J * K^(-1) * mol^(-1)
#
# So, n0 = p0 * V0 / R / T0 = 100 * 7 / 8.314472 / 240.544439
#        = 0.35
#
# At t = 1, p = 200.

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Mesh]
  file = rz.e
[]

[Functions]
  [./temperature]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 2&#x27;
    scale_factor = 240.54443866068704
  [../]
[]

[Variables]
  [./disp_r]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 240.54443866068704
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
  [./heat]
    type = ADDiffusion
    variable = temp
    use_displaced_mesh = true
  [../]
[]

[BCs]
  [./no_x]
    type = DirichletBC
    variable = disp_r
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    preset = false
    boundary = 2
    function = temperature
    variable = temp
  [../]
  [./CavityPressure]
    [./1]
      boundary = 2
      initial_pressure = 100
      R = 8.314472
      temperature = aveTempInterior
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elastic_tensor1]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
    block = 1
  [../]
  [./strain1]
    type = ADComputeAxisymmetricRZFiniteStrain
    block = 1
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
  [./elastic_tensor2]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
    block = 2
  [../]
  [./strain2]
    type = ADComputeAxisymmetricRZFiniteStrain
    block = 2
  [../]
  [./stress2]
    type = ADComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_abs_tol = 1e-10

  l_max_its = 20

  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = 2
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = SideAverageValue
    boundary = 2
    variable = temp
    execute_on = &#x27;initial linear&#x27;
  [../]
[]

[Outputs]
  exodus = true
  [./checkpoint]
    type = Checkpoint
    num_files = 1
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fad87116-16a1-40a2-b65b-21ebd291ff8e"><div class="modal-content"><h4>test/tests/kernels/ad_mat_diffusion/ad_2d_steady_state.i</h4><pre class="moose-pre"><code class="language-text"># This test solves a 2D steady state heat equation
# The error is found by comparing to the analytical solution

# Note that the thermal conductivity, specific heat, and density in this problem
# Are set to 1, and need to be changed to the constants of the material being
# Analyzed

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 30
  ny = 30
  xmax = 2
  ymax = 2
[]

[Variables]
  [./T]
  [../]
[]

[Kernels]
  [./HeatDiff]
    type = ADMatDiffusion
    variable = T
    diffusivity = diffusivity
  [../]
[]

[BCs]
  [./zero]
    type = DirichletBC
    variable = T
    boundary = &#x27;left right bottom&#x27;
    value = 0
  [../]
  [./top]
    type = ADFunctionDirichletBC
    variable = T
    boundary = top
    function = &#x27;10*sin(pi*x*0.5)&#x27;
  [../]
[]

[Materials]
  [./k]
    type = ADGenericConstantMaterial
    prop_names = diffusivity
    prop_values = 1
  [../]
[]


[Postprocessors]
  [./nodal_error]
    type = NodalL2Error
    function = &#x27;10/(sinh(pi))*sin(pi*x*0.5)*sinh(pi*y*0.5)&#x27;
    variable = T
    outputs = console
  [../]
  [./elemental_error]
    type = ElementL2Error
    function = &#x27;10/(sinh(pi))*sin(pi*x*0.5)*sinh(pi*y*0.5)&#x27;
    variable = T
    outputs = console
  [../]
[]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="239b5ddc-770d-45a0-b872-075a8ff2df81"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz.i</h4><pre class="moose-pre"><code class="language-text">#

[Mesh]
  file = cracking_rz_test.e
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 2
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 4.0e7
    poissons_ratio = 0.0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101               &#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-2
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a6cd06e5-5ac5-496a-90c4-0eb1bb5b04f2"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/additional_volume.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test using using automatic differentiation
#
# This test is designed to compute an internal pressure based on
# p = n * R * / (V_cavity / T_cavity + V_add / T_add)
# where
#  p is the pressure
#  n is the amount of material in the volume (moles)
#  R is the universal gas constant
#  T_cavity is the temperature in the cavity
#  T_add is the temperature of the additional volume
#
# The mesh is composed of one block (1) with an interior cavity of volume 8.
#   Block 2 sits in the cavity and has a volume of 1.  Thus, the total
#   initial volume is 7. An additional volume of 2 is added.
#
# The test adjusts n, T, and V in the following way:
#   n =&gt; n0 + alpha * t
#   T =&gt; T0 + beta * t
#   V =&gt; V_cavity0 + gamma * t + V_add
# with
#   alpha = n0
#   beta = T0 / 2
#   gamma = -(0.003322259...) * V0
#   T0 = 240.54443866068704
#   V_cavity0 = 7
#   V_add = 2
#   T_add = 100
#   n0 = f(p0)
#   p0 = 100
#   R = 8.314472 J * K^(-1) * mol^(-1)
#
#  An additional volume of 2 with a temperature of 100.0 is included.
#
# So, n0 = p0 * (V_cavity / T_cavity + V_add / T_add) / R
#        = 100 * (7 / 240.544439 + 2 / 100) / 8.314472
#        = 0.59054
#
# The parameters combined at t = 1 gives p = 249.647.
#
# This test sets the initial temperature to 500, but the CavityPressure
#   is told that that initial temperature is T0.  Thus, the final solution
#   is unchanged.

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = 3d.e
[]

[GlobalParams]
  volumetric_locking_correction = true
[]

[Functions]
  [./displ_positive]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.0029069767441859684&#x27;
  [../]
  [./displ_negative]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 -0.0029069767441859684&#x27;
  [../]
  [./temp1]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1.5&#x27;
    scale_factor = 240.54443866068704
  [../]
  [./material_input_function]
    type = PiecewiseLinear
    x = &#x27;0    1&#x27;
    y = &#x27;0 0.59054&#x27;
  [../]
  [./additional_volume]
    type = ConstantFunction
    value = 2
  [../]
  [./temperature_of_additional_volume]
    type = ConstantFunction
    value = 100
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 500
  [../]
  [./material_input]
  [../]
[]

[AuxVariables]
  [./pressure_residual_x]
  [../]
  [./pressure_residual_y]
  [../]
  [./pressure_residual_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
  [./heat]
    type = ADDiffusion
    variable = temp
    use_displaced_mesh = true
  [../]
  [./material_input_dummy]
    type = ADDiffusion
    variable = material_input
    use_displaced_mesh = true
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_xx
  [../]
  [./stress_yy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_zz
  [../]
  [./stress_xy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
    variable = stress_xy
  [../]
  [./stress_yz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 2
    variable = stress_yz
  [../]
  [./stress_zx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 0
    variable = stress_zx
  [../]
[]

[BCs]
  [./no_x_exterior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;7 8&#x27;
    value = 0.0
  [../]
  [./no_y_exterior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;9 10&#x27;
    value = 0.0
  [../]
  [./no_z_exterior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./prescribed_left]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 13
    function = displ_positive
  [../]
  [./prescribed_right]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 14
    function = displ_negative
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;17 18&#x27;
    value = 0.0
  [../]
  [./no_x_interior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./no_y_interior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    value = 0.0
  [../]
  [./no_z_interior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;5 6&#x27;
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 100
    function = temp1
    variable = temp
  [../]
  [./MaterialInput]
    type = ADFunctionDirichletBC
    boundary = &#x27;100 13 14 15 16&#x27;
    function = material_input_function
    variable = material_input
  [../]
  [./CavityPressure]
    [./1]
      boundary = 100
      initial_pressure = 100
      material_input = materialInput
      R = 8.314472
      temperature = aveTempInterior
      initial_temperature = 240.54443866068704
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      save_in = &#x27;pressure_residual_x pressure_residual_y pressure_residual_z&#x27;
      additional_volumes = volume1
      temperature_of_additional_volumes = temperature1
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elast_tensor1]
    type = ADComputeElasticityTensor
    C_ijkl = &#x27;0 5&#x27;
    fill_method = symmetric_isotropic
    block = 1
  [../]
  [./strain1]
    type = ADComputeFiniteStrain
    block = 1
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
  [./elast_tensor2]
    type = ADComputeElasticityTensor
    C_ijkl = &#x27;0 5&#x27;
    fill_method = symmetric_isotropic
    block = 2
  [../]
  [./strain2]
    type = ADComputeFiniteStrain
    block = 2
  [../]
  [./stress2]
    type = ADComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_rel_tol = 1e-12
  l_tol = 1e-12

  l_max_its = 20

  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = 100
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = SideAverageValue
    boundary = 100
    variable = temp
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./materialInput]
    type = SideAverageValue
    boundary = &#x27;7 8 9 10 11 12&#x27;
    variable = material_input
    execute_on = linear
  [../]
  [./volume1]
    type = FunctionValuePostprocessor
    function = additional_volume
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./temperature1]
    type = FunctionValuePostprocessor
    function = temperature_of_additional_volume
    execute_on = &#x27;initial linear&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="16a875a6-8514-4f47-b34f-9590543a48fb"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="78f8d0c2-cc63-4a60-82c7-3f876fb28628"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1cda820b-3411-48d8-98cc-6c5b27133387"><div class="modal-content"><h4>test/tests/kernels/ad_vector_couple/ad_vector_couple.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
    family = LAGRANGE
    order = FIRST
  []
  [v]
    family = LAGRANGE_VEC
    order = FIRST
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = ADDiffusion
    variable = u
  []
  [convection]
    type = ADCoupledVectorConvection
    variable = u
    velocity_vector = v
  []
  [diff_v]
    type = ADVectorDiffusion
    variable = v
  []
[]

[BCs]
  [left]
    type = ADFunctionDirichletBC
    variable = u
    function = 1
    boundary = &#x27;left&#x27;
  []
  [right]
    type = ADFunctionDirichletBC
    variable = u
    function = 2
    boundary = &#x27;bottom&#x27;
  []

  [left_v]
    type = ADVectorFunctionDirichletBC
    variable = v
    function_x = 1
    function_y = 2
    boundary = &#x27;left&#x27;
  []
  [right_v]
    type = ADVectorFunctionDirichletBC
    variable = v
    function_x = 4
    function_y = 8
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  num_steps = 10
  dt = 0.05
[]

[Outputs]
  execute_on = TIMESTEP_END
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6d5299e7-cbb9-4064-8df0-de3ce8bfe7d6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_centerline_VLC.i</h4><pre class="moose-pre"><code class="language-text"># Simple test to check for use of AxisymmetricCenterlineAverageValue with
# volumetric_locking_correction activated in a tensor mechanics simulation

[Mesh]
  type = GeneratedMesh
  dim = 2
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
  volumetric_locking_correction = true
[]

[Problem]
  coord_type = RZ
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./temperature]
    initial_condition = 298.0
  [../]
[]

[BCs]
  [./symmetry_x]
    type = ADDirichletBC
    variable = disp_r
    value = 0
    boundary = left
  [../]
  [./roller_z]
    type = ADDirichletBC
    variable = disp_z
    value = 0
    boundary = bottom
  [../]
  [./top_load]
    type = ADFunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = top
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./_elastic_strain]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  line_search = &#x27;none&#x27;

  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-6
  l_max_its = 50

  start_time = 0.0
  end_time = 0.3
  dt = 0.1
[]

[Postprocessors]
  [./center_temperature]
    type = AxisymmetricCenterlineAverageValue
    variable = temperature
    boundary = left
  [../]
[]

[Outputs]
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="25191ae3-d878-465a-8442-d013bd2619cf"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_plane_stress.i</h4><pre class="moose-pre"><code class="language-text">################################################################################
#
# 1x1x1 cube, single element
# simulate plane stress
# pull in +y direction on right surface to produce shear strain
#
#
#
#          ____________
#         /|          /|
#        / |  5      / |                       -X  Left   1
#       /__________ /  |                       +X  Right  4
#      |   |    3  |   |                       +Y  Top    5
#      | 1 |       | 4 |                       -Y  Bottom 2
#      |   |_6_____|___|           y           +Z  Front  6
#      |  /        |  /            ^           -Z  Back   3
#      | /    2    | /             |
#      |/__________|/              |
#                                  ----&gt; x
#                                 /
#                                /
#                               z
#
#
#
#################################################################################

[Mesh]
  file = cube.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0.0026 0 -0.0026 0&#x27;
  [../]
  [./pressure]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0   0    0   0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = displ
  [../]
  [./pin_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;1  4&#x27;
    value = 0.0
  [../]
  [./pin_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
  [./front]
    type = ADPressure
    variable = disp_z
    component = 2
    boundary = 6
    function = pressure
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 200.0e3
    poissons_ratio = .3
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 120
    shear_retention_factor = 0.1
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
    residual_stress = 0.1
    beta = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.4
  dt = 0.04
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="70766f06-76d5-4a96-806b-27bf828dc1aa"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/initial_temperature.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test
#
# This test is designed to compute an internal pressure based on
#   p = n * R * T / V
# where
#   p is the pressure
#   n is the amount of material in the volume (moles)
#   R is the universal gas constant
#   T is the temperature
#   V is the volume
#
# The mesh is composed of one block (1) with an interior cavity of volume 8.
#   Block 2 sits in the cavity and has a volume of 1.  Thus, the total
#   initial volume is 7.
# The test adjusts n, T, and V in the following way:
#   n =&gt; n0 + alpha * t
#   T =&gt; T0 + beta * t
#   V =&gt; V0 + gamma * t
# with
#   alpha = n0
#   beta = T0 / 2
#   gamma = -(0.003322259...) * V0
#   T0 = 240.54443866068704
#   V0 = 7
#   n0 = f(p0)
#   p0 = 100
#   R = 8.314472 J * K^(-1) * mol^(-1)
#
# So, n0 = p0 * V0 / R / T0 = 100 * 7 / 8.314472 / 240.544439
#        = 0.35
#
# The parameters combined at t = 1 gives p = 301.
#
# This test sets the initial temperature to 500, but the CavityPressure
#   is told that that initial temperature is T0.  Thus, the final solution
#   is unchanged.

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = 3d.e
[]

[GlobalParams]
  volumetric_locking_correction = true
[]

[Functions]
  [./displ_positive]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.0029069767441859684&#x27;
  [../]
  [./displ_negative]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 -0.0029069767441859684&#x27;
  [../]
  [./temp1]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1.5&#x27;
    scale_factor = 240.54443866068704
  [../]
  [./material_input_function]
    type = PiecewiseLinear
    x = &#x27;0    1&#x27;
    y = &#x27;0 0.35&#x27;
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 500
  [../]
  [./material_input]
  [../]
[]

[AuxVariables]
  [./pressure_residual_x]
  [../]
  [./pressure_residual_y]
  [../]
  [./pressure_residual_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
  [./heat]
    type = ADDiffusion
    variable = temp
    use_displaced_mesh = true
  [../]
  [./material_input_dummy]
    type = ADDiffusion
    variable = material_input
    use_displaced_mesh = true
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_xx
  [../]
  [./stress_yy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_zz
  [../]
  [./stress_xy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
    variable = stress_xy
  [../]
  [./stress_yz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 2
    variable = stress_yz
  [../]
  [./stress_zx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 0
    variable = stress_zx
  [../]
[]

[BCs]
  [./no_x_exterior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;7 8&#x27;
    value = 0.0
  [../]
  [./no_y_exterior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;9 10&#x27;
    value = 0.0
  [../]
  [./no_z_exterior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./prescribed_left]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 13
    function = displ_positive
  [../]
  [./prescribed_right]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 14
    function = displ_negative
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;17 18&#x27;
    value = 0.0
  [../]
  [./no_x_interior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./no_y_interior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    value = 0.0
  [../]
  [./no_z_interior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;5 6&#x27;
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 100
    function = temp1
    variable = temp
  [../]
  [./MaterialInput]
    type = ADFunctionDirichletBC
    boundary = &#x27;100 13 14 15 16&#x27;
    function = material_input_function
    variable = material_input
  [../]
  [./CavityPressure]
    [./1]
      boundary = 100
      initial_pressure = 100
      material_input = materialInput
      R = 8.314472
      temperature = aveTempInterior
      initial_temperature = 240.54443866068704
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      save_in = &#x27;pressure_residual_x pressure_residual_y pressure_residual_z&#x27;
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elast_tensor1]
    type = ADComputeElasticityTensor
    C_ijkl = &#x27;0 5&#x27;
    fill_method = symmetric_isotropic
    block = 1
  [../]
  [./strain1]
    type = ADComputeFiniteStrain
    block = 1
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
  [./elast_tensor2]
    type = ADComputeElasticityTensor
    C_ijkl = &#x27;0 5&#x27;
    fill_method = symmetric_isotropic
    block = 2
  [../]
  [./strain2]
    type = ADComputeFiniteStrain
    block = 2
  [../]
  [./stress2]
    type = ADComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_rel_tol = 1e-12
  l_tol = 1e-12

  l_max_its = 20

  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = 100
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = SideAverageValue
    boundary = 100
    variable = temp
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./materialInput]
    type = SideAverageValue
    boundary = &#x27;7 8 9 10 11 12&#x27;
    variable = material_input
    execute_on = linear
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d308fb51-d258-451c-b1ed-f48d1859127b"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="634209a4-7ad8-47dc-a09b-826925b2c1ab"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f4747200-521d-4723-bc39-4602b9c582fd"><div class="modal-content"><h4>test/tests/kernels/ad_vector_couple/ad_vector_couple_default.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
    family = LAGRANGE
    order = FIRST
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = ADDiffusion
    variable = u
  []
  [convection]
    type = ADCoupledVectorConvection
    variable = u
    velocity_vector = &#x27;0 1&#x27;
  []
[]

[BCs]
  [left]
    type = ADFunctionDirichletBC
    variable = u
    function = 1
    boundary = &#x27;left&#x27;
  []
  [right]
    type = ADFunctionDirichletBC
    variable = u
    function = 2
    boundary = &#x27;bottom&#x27;
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  num_steps = 10
  dt = 0.1
[]

[Outputs]
  execute_on = TIMESTEP_END
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7b401d36-2dda-4058-a1da-20f22ee9a4b7"><div class="modal-content"><h4>modules/xfem/test/tests/moving_interface/moving_ad_bimaterial.i</h4><pre class="moose-pre"><code class="language-text"># This test is for two layer materials with different youngs modulus with AD
# The global stress is determined by switching the stress based on level set values
# The material interface is marked by a level set function
# The two layer materials are glued together
# This case is also meant to test for a bug in moving interfaces on displaced meshes
# It should fail during the healing step of the 2nd timestep if the bug is present.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
    heal_always = true
  [../]
[]

[Mesh]
  displacements = &#x27;disp_x disp_y&#x27;
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmin = 0.0
    xmax = 5.
    ymin = 0.0
    ymax = 5.
    elem_type = QUAD4
  []
  [./left_bottom]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_bottom&#x27;
    coord = &#x27;0.0 0.0&#x27;
    input = generated_mesh
  [../]
  [./left_top]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_top&#x27;
    coord = &#x27;0.0 5.&#x27;
    input = left_bottom
  [../]
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;y-3.153 + t&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = 0.03*t
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e7
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
  [./combined_elasticity_tensor]
    type = ADLevelSetBiMaterialRankFour
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = elasticity_tensor
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

  line_search = &#x27;bt&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50

# time control
  start_time = 0.0
  dt = 0.15
  num_steps = 3

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  execute_on = timestep_end
  csv = true
  file_base = moving_bimaterial_out
  perf_graph = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="22079d92-ed76-42a0-b066-8c60f6b7313e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/gtn_single.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of an individual GTN viscoplasticity model

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  base_name = &#x27;total&#x27;
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
    base_name = &#x27;total&#x27;
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = gtn
    initial_porosity = 0.1
    outputs = all
    base_name = &#x27;total&#x27;
  [../]

  [./gtn]
    type = ADViscoplasticityStressUpdate
    total_strain_base_name = &#x27;total&#x27;
    coefficient = &#x27;coef&#x27;
    power = 3
    viscoplasticity_model = GTN
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;1e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = total_hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = total_vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dcd91c10-b806-4b66-9640-c4b6710528dd"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_dual.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of combining two LPS viscoplasticity models with different stress
# exponents.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Variables]
  [./temp]
    initial_condition = 1000
  [../]
[]

[Kernels]
  [./dt]
    type = ADTimeDerivative
    variable = temp
  [../]
  [./diff]
    type = ADDiffusion
    variable = temp
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
  [./tot_effective_viscoplasticity]
    type = ParsedFunction
    vals = &#x27;lps_1_eff_creep_strain lps_3_eff_creep_strain&#x27;
    vars = &#x27;lps_1_eff_creep_strain lps_3_eff_creep_strain&#x27;
    value = &#x27;lps_1_eff_creep_strain+lps_3_eff_creep_strain&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = &#x27;one two&#x27;
    initial_porosity = 0.1
    outputs = all
  [../]

  [./one]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef_3&#x27;
    power = 3
    base_name = &#x27;lps_1&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./two]
    type = ADViscoplasticityStressUpdate
    coefficient = 1e-10
    power = 1
    base_name = &#x27;lps_3&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef_3
    # Example of creep power law
    args = temp
    function = &#x27;0.5e-18 * exp(-4e4 / 1.987 / temp)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
  [./temp_ramp]
    type = ADFunctionDirichletBC
    boundary = right
    function = &#x27;1000 + 400 * t / 0.12&#x27;
    variable = temp
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./lps_1_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_1_effective_viscoplasticity
  [../]
  [./lps_3_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_3_effective_viscoplasticity
  [../]
  [./lps_1_gauge_stress]
    type = ElementAverageValue
    variable = lps_1_gauge_stress
  [../]
  [./lps_3_gauge_stress]
    type = ElementAverageValue
    variable = lps_3_gauge_stress
  [../]
  [./eff_creep_strain_tot]
    type = FunctionValuePostprocessor
    function = tot_effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="16c87c7c-eea1-46af-ab86-4c4811d5dac8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_function.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking. This tests the option to prescribe the
# cracking strength using an AuxVariable. In this case, an elemental
# AuxVariable is used, and a function is used to prescribe its value.
# One of the elements is weaker than the others, so the crack localizes
# in that element.
#
[Mesh]
   file = plate.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./cracking_stress_fn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 0.1 0.2 0.3 0.4&#x27;
    y = &#x27;0 0.001 0 -0.001 0&#x27;
  [../]
  [./fstress]
    type = ParsedFunction
    value = &#x27;if(x &gt; 0.667, 1.1e6, 1.2e6)&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx strain_xx strain_yy strain_xy strain_yz&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxKernels]
  [./cracking_stress_fn]
    type = FunctionAux
    variable = cracking_stress_fn
    function = fstress
    execute_on = initial
  [../]
  [./crack_flags2]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags2
   component = 2
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    function = displ
  [../]

  [./pin_x]
    type = ADDirichletBC
    variable = disp_x
    boundary =  &#x27;1 2&#x27;
    value = 0
  [../]
  [./pin_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;1 4&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 200.0e7
    poissons_ratio = 0.0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = cracking_stress_fn
    softening_models = abrupt_softening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
    residual_stress = 0.0
  [../]
[]

[Postprocessors]
  [./elem_stress_xx]
    type = ElementalVariableValue
    variable = stress_xx
    elementid = 2
  [../]
  [./elem_strain_xx]
    type = ElementalVariableValue
    variable = strain_xx
    elementid = 2
  [../]
  [./elem_crack_flags_x]
    type = ElementalVariableValue
    variable = crack_flags2
    elementid = 2
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;101               &#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-6
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.2
  dt = 0.0025
[]

[Outputs]
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dacbcf3d-28f4-4b52-be81-51e2db518c24"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/multiple_postprocessors.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test (Volume input as a vector of postprocessors)
#
# This test is designed to compute an internal pressure based on
#   p = n * R * T / V
# where
#   p is the pressure
#   n is the amount of material in the volume (moles)
#   R is the universal gas constant
#   T is the temperature
#   V is the volume
#
# The mesh is composed of one block (1) with an interior cavity of volume 8.
#   Block 2 sits in the cavity and has a volume of 1.  Thus, the total
#   initial volume is 7.
# The test adjusts n, T, and V in the following way:
#   n =&gt; n0 + alpha * t
#   T =&gt; T0 + beta * t
#   V =&gt; V0 + gamma * t
# with
#   alpha = n0
#   beta = T0 / 2
#   gamma = - (0.003322259...) * V0
#   T0 = 240.54443866068704
#   V0 = 7
#   n0 = f(p0)
#   p0 = 100
#   R = 8.314472 J * K^(-1) * mol^(-1)
#
# So, n0 = p0 * V0 / R / T0 = 100 * 7 / 8.314472 / 240.544439
#        = 0.35
#
# In this test the internal volume is calculated as the sum of two Postprocessors
# internalVolumeInterior and internalVolumeExterior.  This sum equals the value
# reported by the internalVolume postprocessor.
#
# The parameters combined at t = 1 gives p = 301.
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  volumetric_locking_correction = true
[]

[Mesh]
  file = 3d.e
[]

[Functions]
  [./displ_positive]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.0029069767441859684&#x27;
  [../]
  [./displ_negative]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 -0.0029069767441859684&#x27;
  [../]
  [./temp1]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1.5&#x27;
    scale_factor = 240.54443866068704
  [../]
  [./material_input_function]
    type = PiecewiseLinear
    x = &#x27;0    1&#x27;
    y = &#x27;0 0.35&#x27;
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 240.54443866068704
  [../]
  [./material_input]
  [../]
[]

[AuxVariables]
  [./pressure_residual_x]
  [../]
  [./pressure_residual_y]
  [../]
  [./pressure_residual_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
  [./heat]
    type = ADDiffusion
    variable = temp
    use_displaced_mesh = true
  [../]
  [./material_input_dummy]
    type = ADDiffusion
    variable = material_input
    use_displaced_mesh = true
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_xx
  [../]
  [./stress_yy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_zz
  [../]
  [./stress_xy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
    variable = stress_xy
  [../]
  [./stress_yz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 2
    variable = stress_yz
  [../]
  [./stress_zx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 0
    variable = stress_zx
  [../]
[]

[BCs]
  [./no_x_exterior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;7 8&#x27;
    value = 0.0
  [../]
  [./no_y_exterior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;9 10&#x27;
    value = 0.0
  [../]
  [./no_z_exterior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./prescribed_left]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 13
    function = displ_positive
  [../]
  [./prescribed_right]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 14
    function = displ_negative
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;17 18&#x27;
    value = 0.0
  [../]
  [./no_x_interior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./no_y_interior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    value = 0.0
  [../]
  [./no_z_interior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;5 6&#x27;
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 100
    function = temp1
    variable = temp
  [../]
  [./MaterialInput]
    type = ADFunctionDirichletBC
    boundary = &#x27;100 13 14 15 16&#x27;
    function = material_input_function
    variable = material_input
  [../]
  [./CavityPressure]
    [./1]
      boundary = 100
      initial_pressure = 100
      material_input = materialInput
      R = 8.314472
      temperature = aveTempInterior
      volume = &#x27;internalVolumeInterior internalVolumeExterior&#x27;
      startup_time = 0.5
      output = ppress
      save_in = &#x27;pressure_residual_x pressure_residual_y pressure_residual_z&#x27;
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elast_tensor1]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e1
    poissons_ratio = 0
    block = 1
  [../]
  [./strain1]
    type = ADComputeFiniteStrain
    block = 1
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
  [./elast_tensor2]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
    block = 2
  [../]
  [./strain2]
    type = ADComputeFiniteStrain
    block = 2
  [../]
  [./stress2]
    type = ADComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_rel_tol = 1e-12
  l_tol = 1e-12

  l_max_its = 20

  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = 100
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = SideAverageValue
    boundary = 100
    variable = temp
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./internalVolumeInterior]
    type = InternalVolume
    boundary = &#x27;1 2 3 4 5 6&#x27;
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./internalVolumeExterior]
    type = InternalVolume
    boundary = &#x27;13 14 15 16 17 18&#x27;
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./materialInput]
    type = SideAverageValue
    boundary = &#x27;7 8 9 10 11 12&#x27;
    variable = material_input
    execute_on = linear
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f096119f-1c15-4e3b-961c-9996a1164bbe"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d0c16347-76a2-4c80-a067-88dc6b9e1ac2"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="52c93d7d-9660-400c-98bd-6e0dc27faf7b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rz_exponential.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.

[Mesh]
  file = cracking_rz_test.e
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Functions]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pully]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disply
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 3
    value = 0.0
  [../]

  [./sides]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = 0.316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 10
  nl_rel_tol = 1e-8

  nl_abs_tol = 1e-4

  start_time = 0.0
  end_time = 6.0
  dt = 0.005
  dtmin = 0.005
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="347c8bf2-65f7-413d-9919-518e1a6826bb"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_multiple_softening.i</h4><pre class="moose-pre"><code class="language-text"># Test of cracking with direction-specific release models in 3
# directions. Block is first pulled in one direction, and then
# held while it is sequentially pulled in the other two
# directions. Poisson&#x27;s ratio is zero so that the cracking in one
# direction doesn&#x27;t affect the others.

# Softening in the three directions should follow the laws for the
# prescribed models in the three directions, which are power law (x),
# exponential (y), and abrupt (z).

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 1 1 1&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 0 1 1&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3&#x27;
    y = &#x27;0 0 0 1&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = right
    function = displx
  [../]
  [./pully]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = disply
  [../]
  [./pullz]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = front
    function = displz
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
    softening_models = &#x27;power_law_softening exponential_softening abrupt_softening&#x27;
    prescribed_crack_directions = &#x27;x y z&#x27;
  [../]
  [./power_law_softening]
    type = ADPowerLawSoftening
    stiffness_reduction = 0.3333
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
  [./abrupt_softening]
    type = ADAbruptSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 3.0
  dt = 0.01
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c2950dff-85e4-40d0-af10-88451708b377"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_exponential.i</h4><pre class="moose-pre"><code class="language-text">#
# Test to exercise the exponential stress release
#
# Stress vs. strain should show a linear relationship until cracking,
#   an exponential stress release, a linear relationship back to zero
#   strain, a linear relationship with the original stiffness in
#   compression and then back to zero strain, a linear relationship
#   back to the exponential curve, and finally further exponential
#   stress release.
#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1       2  3      4 5       6&#x27;
    y = &#x27;0 0.00175 0 -0.0001 0 0.00175 0.0035&#x27;
  [../]
  [./disply]
    type = PiecewiseLinear
    x = &#x27;0 5 6&#x27;
    y = &#x27;0 0 .00175&#x27;
  [../]
  [./displz]
    type = PiecewiseLinear
    x = &#x27;0 2 3&#x27;
    y = &#x27;0 0 .0035&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pullx]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./move_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    function = disply
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;3&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;

  line_search = &#x27;none&#x27;
  l_max_its = 100
  l_tol = 1e-6

  nl_max_its = 10
  nl_rel_tol = 1e-12
  nl_abs_tol = 1.e-4

  start_time = 0.0
  dt = 0.02
  dtmin = 0.02
  num_steps = 300
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1495b8d3-2ba2-47ae-952f-dd0494ead06d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_rotation.i</h4><pre class="moose-pre"><code class="language-text"># This test is to ensure that the smeared cracking model correctly handles finite
# rotation of cracked elements.

# This consists of a single element that is first  subjected to tensile loading
# in the y-direction via a prescribed displacement. This loading is sufficiently
# high to crack the material in that direction, but not completely unload. The
# prescribed displacement is then reversed so that the element is returned to its
# original configuration.

# In the next phase of the analysis, this element is then rotated 90 degrees by
# prescribing the displacement of the bottom of the element. The prescribed
# displacement BC used to crack the element in the first phase is deactivated.

# Once the element is fully rotated, a new BC is activated on what was originally
# the top surface (but is now the surface on the right hand side) to pull in
# the x-direction.

# If everything is working correctly, the model should re-load on the original
# crack (which should be rotated along with the elemnent) up to the peak stress
# in the first phase of the analysis, and then continue the unloading process
# as the crack strains continue to increase. Throughout this analysis, there should
# only be a single crack, as manifested in the crack_flags variables.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./crack_flags1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./crack_flags3]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./crack_flags1]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags1
    component = 0
  [../]
  [./crack_flags2]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags2
    component = 1
  [../]
  [./crack_flags3]
    type = ADMaterialRealVectorValueAux
    property = crack_flags
    variable = crack_flags3
    component = 2
  [../]
[]

[BCs]
  [./x_pin]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./y_pin]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./z_all]
    type = ADDirichletBC
    variable = disp_z
    boundary = &#x27;11 12 13 14 15 16 17 18&#x27;
    value = 0.0
  [../]
  [./x_lb]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;11 12&#x27;
    function = &#x27;if(t&lt;10,0,if(t&gt;=100,1,1-cos((t-10)*pi/180)))&#x27;
  [../]
  [./y_lb]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;11 12&#x27;
    function = &#x27;if(t&lt;10,0,if(t&gt;=100,1,sin((t-10)*pi/180)))&#x27;
  [../]
  [./x_lt]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;13 14&#x27;
    function = &#x27;2+(t-100)*0.01&#x27;
  [../]
  [./x_rt]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = &#x27;17 18&#x27;
    function = &#x27;1+(t-100)*0.01&#x27;
  [../]
  [./top_pull]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = &#x27;13 14 17 18&#x27;
    function = &#x27;if(t&lt;5,t*0.01,0.05-(t-5)*0.01)&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 100.e9
    poissons_ratio = 0.
  [../]
  [./cracking_stress]
    type = ADComputeSmearedCrackingStress
    shear_retention_factor = 0.1
    cracking_stress = 3.e9
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;
  line_search = &#x27;none&#x27;

  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 100
  nl_abs_tol = 1e-5
  nl_rel_tol = 1e-12

  start_time = 0
  end_time = 110
  dt = 1
[]

[Controls]
  [./p1]
    type = TimePeriod
    start_time = 0.0
    end_time = 10.0
    disable_objects = &#x27;BCs/x_lt BCs/x_rt&#x27;
    enable_objects = &#x27;BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
  [./p2]
    type = TimePeriod
    start_time = 10.0
    end_time = 101.0
    disable_objects = &#x27;BCs/x_lt BCs/x_rt BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
  [./p3]
    type = TimePeriod
    start_time = 101.0
    end_time = 110.0
    enable_objects = &#x27;BCs/x_lt BCs/x_rt&#x27;
    disable_objects = &#x27;BCs/top_pull&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b26c1696-8b3d-448b-b4fe-4e389874ca0a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/3d_bar.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    xmin = 0
    xmax = 2
    ymin = 0
    ymax = 2
    zmin = 0
    zmax = 10
    nx = 10
    ny = 2
    nz = 2
    elem_type = HEX8
  []
  [corner]
    type = ExtraNodesetGenerator
    new_boundary = 101
    coord = &#x27;0 0 0&#x27;
    input = generated_mesh
  []
  [side]
    type = ExtraNodesetGenerator
    new_boundary = 102
    coord = &#x27;2 0 0&#x27;
    input = corner
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_finite_deform_jacobian = true
    volumetric_locking_correction = false
    use_automatic_differentiation = true
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric9
    C_ijkl = &#x27;1.684e5 0.176e5 0.176e5 1.684e5 0.176e5 1.684e5 0.754e5 0.754e5 0.754e5&#x27;
  [../]
[]

[BCs]
 [./fix_corner_x]
   type = ADDirichletBC
   variable = disp_x
   boundary = 101
   value = 0
 [../]
 [./fix_corner_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 101
   value = 0
 [../]
 [./fix_side_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 102
   value = 0
 [../]
 [./fix_z]
   type = ADDirichletBC
   variable = disp_z
   boundary = back
   value = 0
 [../]
 [./move_z]
   type = ADFunctionDirichletBC
   variable = disp_z
   boundary = front
   function = &#x27;t&#x27;
 [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_rel_tol = 1e-10
  nl_max_its = 10

  l_tol  = 1e-4
  l_max_its = 50

  dt = 0.2
  dtmin = 0.2

  num_steps = 2
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dc4271f2-d21c-4d70-ba71-99bb36b22a1b"><div class="modal-content"><h4>modules/xfem/test/tests/bimaterials/glued_ad_bimaterials_2d.i</h4><pre class="moose-pre"><code class="language-text"># This test is for two layer materials with different youngs modulus using AD
# The global stress is determined by switching the stress based on level set values
# The material interface is marked by a level set function
# The two layer materials are glued together

[GlobalParams]
  order = FIRST
  family = LAGRANGE
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
  [../]
[]

[Mesh]
  displacements = &#x27;disp_x disp_y&#x27;
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmin = 0.0
    xmax = 5.
    ymin = 0.0
    ymax = 5.
    elem_type = QUAD4
  []
  [./left_bottom]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_bottom&#x27;
    coord = &#x27;0.0 0.0&#x27;
    input = gen
  [../]
  [./left_top]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;left_top&#x27;
    coord = &#x27;0.0 5.&#x27;
    input = left_bottom
  [../]
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;y-2.5&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = 0.03*t
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e5
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
  [./combined_elasticity_tensor]
    type = ADLevelSetBiMaterialRankFour
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = elasticity_tensor
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

  line_search = &#x27;bt&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50

# time control
  start_time = 0.0
  dt = 0.1
  num_steps = 2

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  file_base = glued_bimaterials_2d_out
  execute_on = timestep_end
  csv = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ede3949f-5948-4b62-ad36-ad8a837c8bfb"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_deprecated.i</h4><pre class="moose-pre"><code class="language-text">#
# Simple pull test for cracking.
# The stress increases for two steps and then drops to zero.

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displ]
    type = PiecewiseLinear
    x = &#x27;0 1 2 3  4&#x27;
    y = &#x27;0 1 0 -1 0&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./pull]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displ
  [../]
  [./left]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./bottom]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./back]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 2.8e7
    poissons_ratio = 0
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 1.68e6
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;101                asm      lu&#x27;

  line_search = &#x27;none&#x27;

  l_max_its = 100
  nl_max_its = 100
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-8
  l_tol = 1e-5
  start_time = 0.0
  end_time = 0.1
  dt = 0.025
[]

[Outputs]
  exodus = true
  file_base = cracking_out
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7540b5ee-5e1e-46b1-bb6b-fba2df4d1805"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_2D_geometries/2D-RZ_finiteStrain_resid.i</h4><pre class="moose-pre"><code class="language-text"># This tests the save_in_disp residual aux-variables for
# ComputeAxisymmetricRZFiniteStrain, which is generated through the use of the
# TensorMechanics MasterAction. The GeneratedMesh is 1x1, rotated via axisym to
# create a cylinder of height 1, radius 1.
#
# PostProcessor force_z plots the force on the top surface of the cylinder.
#
# Displacement of 0.1 is applied to top of cylinder while other surfaces are
# constrained. Plotting force_z vs stress_z will show a slope of 3.14159 (pi),
# consistent with formula for normal stress:
#
# Stress = force / area
#
# where area is A = pi * r^2 for a circle.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 5
  ny = 5
  xmin = 0.0
  xmax = 1.0
  ymin = 0.0
  ymax = 1.0
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Problem]
  coord_type = RZ
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    save_in = &#x27;force_r force_z&#x27;
    use_automatic_differentiation = true
  [../]
[]

[AuxVariables]
  [./stress_r]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_r]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./force_r]
    order = FIRST
    family = LAGRANGE
  [../]
  [./force_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./stress_r]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_r
    execute_on = timestep_end
  [../]
  [./strain_r]
    type = ADRankTwoAux
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
    variable = strain_r
    execute_on = timestep_end
  [../]
  [./stress_z]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_z
    execute_on = timestep_end
  [../]
  [./strain_z]
    type = ADRankTwoAux
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
    variable = strain_z
    execute_on = timestep_end
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]

  [./_elastic_strain]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[BCs]
  [./no_disp_r_left]
    type = ADDirichletBC
    variable = disp_r
    boundary = left
    value = 0.0
  [../]
  [./no_disp_r_right]
    type = ADDirichletBC
    variable = disp_r
    boundary = right
    value = 0.0
  [../]
  [./no_disp_z_bottom]
    type = ADDirichletBC
    variable = disp_z
    boundary = bottom
    value = 0.0
  [../]
  [./top]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = top
    function = &#x27;t&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;  201               hypre    boomeramg      10&#x27;

  line_search = &#x27;none&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 5e-9
  nl_abs_tol = 1e-10
  nl_max_its = 15

  l_tol = 1e-3
  l_max_its = 50

  start_time = 0.0
  end_time = 0.1
  dt = 0.01
[]

[Postprocessors]
  [./strainR]
    type = ElementAverageValue
    variable = strain_r
  [../]
  [./stressR]
    type = ElementAverageValue
    variable = stress_r
  [../]
  [./strainZ]
    type = ElementAverageValue
    variable = strain_z
  [../]
  [./stressZ]
    type = ElementAverageValue
    variable = stress_z
  [../]
  [./force_r]
    type = NodalSum
    variable = force_r
    boundary = top
  [../]
  [./force_z]
    type = NodalSum
    variable = force_z
    boundary = top
  [../]
[]

[Outputs]
  exodus = true
  print_linear_residuals = false
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="58caf4e7-f4e7-4a24-961e-267a98585182"><div class="modal-content"><h4>modules/xfem/test/tests/bimaterials/inclusion_ad_bimaterials_2d.i</h4><pre class="moose-pre"><code class="language-text"># This test is for a matrix-inclusion composite materials using AD
# The global stress is determined by switching the stress based on level set values
# The inclusion geometry is marked by a level set function
# The matrix and inclusion are glued together

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[XFEM]
  qrule = volfrac
  output_cut_plane = true
[]

[UserObjects]
  [./level_set_cut_uo]
    type = LevelSetCutUserObject
    level_set_var = ls
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 11
  ny = 11
  xmin = 0.0
  xmax = 5.
  ymin = 0.0
  ymax = 5.
  elem_type = QUAD4
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./ls]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./ls_function]
    type = FunctionAux
    variable = ls
    function = ls_func
  [../]
[]

[Functions]
  [./ls_func]
    type = ParsedFunction
    value = &#x27;sqrt((y-2.5)*(y-2.5) + (x-2.5)*(x-2.5)) - 1.5&#x27;
  [../]
[]

[AuxVariables]
  [./a_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./a_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./b_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = SMALL
    use_automatic_differentiation = true
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_xy&#x27;
  [../]
[]

[AuxKernels]
  [./a_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 0
    variable = a_strain_xx
  [../]
  [./a_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 1
    index_j = 1
    variable = a_strain_yy
  [../]
  [./a_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = A_total_strain
    index_i = 0
    index_j = 1
    variable = a_strain_xy
  [../]
  [./b_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 0
    variable = b_strain_xx
  [../]
  [./b_strain_yy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 1
    index_j = 1
    variable = b_strain_yy
  [../]
  [./b_strain_xy]
    type = ADRankTwoAux
    rank_two_tensor = B_total_strain
    index_i = 0
    index_j = 1
    variable = b_strain_xy
  [../]
[]

[Constraints]
  [./dispx_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_x
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
  [./dispy_constraint]
    type = XFEMSingleVariableConstraint
    use_displaced_mesh = false
    variable = disp_y
    alpha = 1e8
    geometric_cut_userobject = &#x27;level_set_cut_uo&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_x
    value = 0.0
  [../]
  [./bottomy]
    type = ADDirichletBC
    boundary = bottom
    variable = disp_y
    value = 0.0
  [../]
  [./topx]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_x
    function = &#x27;0.03*t&#x27;
  [../]
  [./topy]
    type = ADFunctionDirichletBC
    boundary = top
    variable = disp_y
    function = &#x27;0.03*t&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor_A]
    type = ADComputeIsotropicElasticityTensor
    base_name = A
    youngs_modulus = 1e9
    poissons_ratio = 0.3
  [../]
  [./strain_A]
    type = ADComputeSmallStrain
    base_name = A
  [../]
  [./stress_A]
    type = ADComputeLinearElasticStress
    base_name = A
  [../]
  [./elasticity_tensor_B]
    type = ADComputeIsotropicElasticityTensor
    base_name = B
    youngs_modulus = 1e5
    poissons_ratio = 0.3
  [../]
  [./strain_B]
    type = ADComputeSmallStrain
    base_name = B
  [../]
  [./stress_B]
    type = ADComputeLinearElasticStress
    base_name = B
  [../]
  [./combined_stress]
    type = ADLevelSetBiMaterialRankTwo
    levelset_positive_base = &#x27;A&#x27;
    levelset_negative_base = &#x27;B&#x27;
    level_set_var = ls
    prop_name = stress
  [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_hypre_type -pc_hypre_boomeramg_max_iter&#x27;
  petsc_options_value = &#x27;201                hypre    boomeramg      8&#x27;

# controls for linear iterations
  l_max_its = 20
  l_tol = 1e-8

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-50 #1e-7

# time control
  start_time = 0.0
  dt = 0.5
  end_time = 1.0
  num_steps = 2

  max_xfem_update = 1
[]

[Outputs]
  exodus = true
  file_base = inclusion_bimaterials_2d_out
  execute_on = timestep_end
  csv = true
  [./console]
    type = Console
    output_linear = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d0bba3b-b37c-483c-8c86-1c06f3a190de"><div class="modal-content"><h4>test/tests/bcs/ad_bcs/ad_bc.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = ADFunctionDirichletBC
    variable = u
    boundary = left
    function = &#x27;1&#x27;
  [../]
  [./right]
    type = ADRobinBC
    variable = u
    boundary = right
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="21efd392-4a3b-4a8e-bfbc-2c04c8d55c8e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_smeared_cracking/cracking_xyz.i</h4><pre class="moose-pre"><code class="language-text">#

[Mesh]
  file = cracking_test.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Functions]
  [./displx]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.00175&#x27;
  [../]
  [./velocity_y]
    type = ParsedFunction
    value = &#x27;if(t &lt; 2, 0.00175, 0)&#x27;
  [../]
  [./velocity_z]
    type = ParsedFunction
    value = 0.00175
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
    use_automatic_differentiation = true
  [../]
[]

[BCs]
  [./fix_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./move_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = displx
  [../]

  [./fix_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = 2
    value = 0.0
  [../]
  [./move_y]
    type = PresetVelocity
    variable = disp_y
    boundary = 5
    function = velocity_y
#    time_periods = &#x27;p2 p3&#x27;
  [../]

  [./fix_z]
    type = ADDirichletBC
    variable = disp_z
    boundary = 3
    value = 0.0
  [../]
  [./move_z]
    type = PresetVelocity
    variable = disp_z
    boundary = 6
    function = velocity_z
#    time_periods = &#x27;p3&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 186.5e9
    poissons_ratio = .316
  [../]
  [./elastic_stress]
    type = ADComputeSmearedCrackingStress
    cracking_stress = 119.3e6
    softening_models = exponential_softening
  [../]
  [./exponential_softening]
    type = ADExponentialSoftening
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton

  petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type&#x27;
  petsc_options_value = &#x27;101                lu&#x27;


  line_search = &#x27;none&#x27;


  l_max_its = 100
  l_tol = 1e-5

  nl_max_its = 100
  nl_abs_tol = 1e-4
  #nl_rel_tol = 1e-4
  nl_rel_tol = 1e-6

  start_time = 0.0
  end_time = 3.0
  dt = 0.01
[]

[Controls]
  [./p1]
    type = TimePeriod
    start_time = 0.0
    end_time = 1.0
    disable_objects = &#x27;BCs/move_y BCs/move_z&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]

  [./p2]
    type = TimePeriod
    start_time = 1.0
    end_time = 2.0
    disable_objects = &#x27;BCs/move_z&#x27;
    enable_objects = &#x27;BCs/move_y&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
  [../]

  [./p3]
    type = TimePeriod
    start_time = 2.0
    end_time = 3.0
    enable_objects = &#x27;BCs/move_y BCs/move_z&#x27;
    reverse_on_false = false
    execute_on = &#x27;initial timestep_begin&#x27;
    set_sync_times = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c0fdc711-c958-42fd-87f3-ba5c85090b86"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/negative_volume.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test
#
# This test is designed to compute a negative number of moles
# to trigger an error check in the CavityPressureUserObject.
# The negative number of moles is achieved by supplying an
# open volume to the InternalVolume postprocessor, which
# calculates a negative volume.

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 2
[]

[Functions]
  [./temperature]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 2&#x27;
    scale_factor = 100
  [../]
[]

[Variables]
  [./temperature]
    initial_condition = 100
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    add_variables = true
    use_automatic_differentiation = true
  [../]
[]

[Kernels]
  [./heat]
    type = Diffusion
    variable = temperature
    use_displaced_mesh = true
  [../]
[]

[BCs]
  [./no_x]
    type = ADDirichletBC
    variable = disp_r
    boundary = left
    value = 0.0
  [../]
  [./no_y]
    type = ADDirichletBC
    variable = disp_z
    boundary = bottom
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 2
    function = temperature
    variable = temperature
  [../]
  [./CavityPressure]
    [./pressure]
      boundary = &#x27;top bottom right&#x27;
      initial_pressure = 10e5
      R = 8.3143
      output_initial_moles = initial_moles
      temperature = aveTempInterior
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elastic_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_abs_tol = 1e-10
  l_max_its = 20
  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = &#x27;top bottom right&#x27;
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = AxisymmetricCenterlineAverageValue
    boundary = left
    variable = temperature
    execute_on = &#x27;initial linear&#x27;
  [../]
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="571abe9e-adb6-417f-b439-a13758f3d7be"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="06016327-9a27-436d-899d-edcb03de2c7d"><div class="modal-content"><h4>modules/combined/test/tests/thermal_elastic/ad-thermal_elastic.i</h4><pre class="moose-pre"><code class="language-text"># Patch Test

# This test is designed to compute constant xx, yy, zz, xy, yz, and xz
#  stress on a set of irregular hexes.  The mesh is composed of one
#  block with seven elements.  The elements form a unit cube with one
#  internal element.  There is a nodeset for each exterior node.

# The cube is displaced by 1e-6 units in x, 2e-6 in y, and 3e-6 in z.
#  The faces are sheared as well (1e-6, 2e-6, and 3e-6 for xy, yz, and
#  zx).  This gives a uniform strain/stress state for all six unique
#  tensor components.  This displacement is again applied in the second
#  step.

# With Young&#x27;s modulus at 1e6 and Poisson&#x27;s ratio at 0, the shear
#  modulus is 5e5 (G=E/2/(1+nu)).  Therefore, for the mechanical strain,
#
#  stress xx = 1e6 * 1e-6 = 1
#  stress yy = 1e6 * 2e-6 = 2
#  stress zz = 1e6 * 3e-6 = 3
#  stress xy = 2 * 5e5 * 1e-6 / 2 = 0.5
#             (2 * G   * gamma_xy / 2 = 2 * G * epsilon_xy)
#  stress yz = 2 * 5e5 * 2e-6 / 2 = 1
#  stress zx = 2 * 5e5 * 3e-6 / 2 = 1.5

# Young&#x27;s modulus is a function of temperature for this test.  The
#  temperature changes from 100 to 500.  The Young&#x27;s modulus drops
#  due to that temperature change from 1e6 to 6e5.

# Poisson&#x27;s ratio also is a function of temperature and changes from
#  0 to 0.25.

# At the end of the temperature ramp, E=6e5 and nu=0.25.  This gives
#  G=2.4e=5.  lambda=E*nu/(1+nu)/(1-2*nu)=2.4E5.  The final stress
#  is therefore

#  stress xx = 2.4e5 * 12e-6 + 2*2.4e5*2e-6 = 3.84
#  stress yy = 2.4e5 * 12e-6 + 2*2.4e5*4e-6 = 4.80
#  stress zz = 2.4e5 * 12e-6 + 2*2.4e5*6e-6 = 5.76
#  stress xy = 2 * 2.4e5 * 2e-6 / 2 = 0.48
#             (2 * G   * gamma_xy / 2 = 2 * G * epsilon_xy)
#  stress yz = 2 * 2.4e5 * 4e-6 / 2 = 0.96
#  stress xz = 2 * 2.4e5 * 6e-6 / 2 = 1.44

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = thermal_elastic.e
[]

[Functions]
  [./ramp1]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 1. 2.&#x27;
    scale_factor = 1e-6
  [../]
  [./ramp2]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 1. 2.&#x27;
    scale_factor = 2e-6
  [../]
  [./ramp3]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 1. 2.&#x27;
    scale_factor = 3e-6
  [../]
  [./ramp4]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 1. 2.&#x27;
    scale_factor = 4e-6
  [../]
  [./ramp6]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 1. 2.&#x27;
    scale_factor = 6e-6
  [../]
  [./tempFunc]
    type = PiecewiseLinear
    x = &#x27;0     1     2&#x27;
    y = &#x27;100.0 100.0 500.0&#x27;
  [../]
[]

[Variables]
  [./temp]
    initial_condition = 100.0
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_xz stress_yz&#x27;
    strain = FINITE
    use_automatic_differentiation = true
  [../]
[]

[Kernels]
  [./heat]
    type = ADDiffusion
    variable = temp
  [../]
[]

[BCs]
  [./node1_x]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./node1_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 1
    function = ramp2
  [../]
  [./node1_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 1
    function = ramp3
  [../]

  [./node2_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 2
    function = ramp1
  [../]
  [./node2_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 2
    function = ramp2
  [../]
  [./node2_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 2
    function = ramp6
  [../]

  [./node3_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 3
    function = ramp1
  [../]
  [./node3_y]
    type = DirichletBC
    variable = disp_y
    boundary = 3
    value = 0.0
  [../]
  [./node3_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 3
    function = ramp3
  [../]

  [./node4_x]
    type = DirichletBC
    variable = disp_x
    boundary = 4
    value = 0.0
  [../]
  [./node4_y]
    type = DirichletBC
    variable = disp_y
    boundary = 4
    value = 0.0
  [../]
  [./node4_z]
    type = DirichletBC
    variable = disp_z
    boundary = 4
    value = 0.0
  [../]

  [./node5_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 5
    function = ramp1
  [../]
  [./node5_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 5
    function = ramp4
  [../]
  [./node5_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 5
    function = ramp3
  [../]

  [./node6_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 6
    function = ramp2
  [../]
  [./node6_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 6
    function = ramp4
  [../]
  [./node6_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 6
    function = ramp6
  [../]

  [./node7_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 7
    function = ramp2
  [../]
  [./node7_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 7
    function = ramp2
  [../]
  [./node7_z]
    type = ADFunctionDirichletBC
    variable = disp_z
    boundary = 7
    function = ramp3
  [../]

  [./node8_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 8
    function = ramp1
  [../]
  [./node8_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = 8
    function = ramp2
  [../]
  [./node8_z]
    type = DirichletBC
    variable = disp_z
    boundary = 8
    value = 0.0
  [../]

  [./temp]
    type = ADFunctionDirichletBC
    variable = temp
    boundary = &#x27;10 12&#x27;
    function = tempFunc
  [../]
[]

[Materials]
  [./youngs_modulus]
    type = ADPiecewiseLinearInterpolationMaterial
    x = &#x27;100 500&#x27;
    y = &#x27;1e6 6e5&#x27;
    property = youngs_modulus
    variable = temp
  [../]
  [./poissons_ratio]
    type = ADPiecewiseLinearInterpolationMaterial
    x = &#x27;100 500&#x27;
    y = &#x27;0   0.25&#x27;
    property = poissons_ratio
    variable = temp
  [../]

  [./elasticity_tensor]
    type = ADComputeVariableIsotropicElasticityTensor
    youngs_modulus = youngs_modulus
    poissons_ratio = poissons_ratio
  [../]

  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 1e-9
  nl_abs_tol = 1e-9

  l_max_its = 20

  start_time = 0.0
  dt = 1.0
  end_time = 2.0
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5a14f8f0-27ff-461f-befa-7f721393bb13"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_finite_strain_jacobian/bending_jacobian.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 10
    ymin = 0
    ymax = 2
    nx = 10
    ny = 2
    elem_type = QUAD4
  []
  [corner]
    type = ExtraNodesetGenerator
    new_boundary = 101
    coord = &#x27;0 0&#x27;
    input = generated_mesh
  []
  [side]
    type = ExtraNodesetGenerator
    new_boundary = 102
    coord = &#x27;10 0&#x27;
    input = corner
  []
  [mid]
    type = ExtraNodesetGenerator
    new_boundary = 103
    coord = &#x27;5 2&#x27;
    input = side
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_finite_deform_jacobian = true
    volumetric_locking_correction = false
    use_automatic_differentiation = true
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric9
    C_ijkl = &#x27;1.684e5 0.176e5 0.176e5 1.684e5 0.176e5 1.684e5 0.754e5 0.754e5 0.754e5&#x27;
  [../]
[]

[BCs]
 [./fix_corner_x]
   type = ADDirichletBC
   variable = disp_x
   boundary = 101
   value = 0
 [../]
 [./fix_corner_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 101
   value = 0
 [../]
 [./fix_y]
   type = ADDirichletBC
   variable = disp_y
   boundary = 102
   value = 0
 [../]
 [./move_y]
   type = ADFunctionDirichletBC
   variable = disp_y
   boundary = 103
   function = &#x27;-t&#x27;
 [../]
[]

[Executioner]
  type = Transient

  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  nl_rel_tol = 1e-10
  nl_max_its = 10

  l_tol  = 1e-4
  l_max_its = 50

  dt = 0.1
  dtmin = 0.1

  num_steps = 2
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c6f6e379-0e4c-4667-9616-287e3dff4e4c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of an individual LPS viscoplasticity model

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = lps
    initial_porosity = 0.1
    outputs = all
  [../]

  [./lps]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;1e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./eff_creep_strain]
    type = ElementAverageValue
    variable = effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="36d036d9-76ef-4b84-b16f-758da8f6f305"><div class="modal-content"><h4>test/tests/bcs/ad_bc_preset_nodal/bc_function_preset.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  nz = 0
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[Variables]
  active = &#x27;u&#x27;

  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Functions]
  [./left]
    type = ParsedFunction
    value = &#x27;y&#x27;
  [../]

  [./right]
    type = ParsedFunction
    value = &#x27;1+y&#x27;
  [../]
[]

[Kernels]
  active = &#x27;diff&#x27;

  [./diff]
    type = ADDiffusion
    variable = u
  [../]
[]

[BCs]
  active = &#x27;left right&#x27;

   [./left]
    type = ADFunctionDirichletBC
    variable = u
    boundary = 3
    function = left
  [../]

  [./right]
    type = ADFunctionDirichletBC
    variable = u
    boundary = 1
    function = right
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  file_base = bc_func_out
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b77d4524-d251-4d94-a6e6-fea51cdc3a07"><div class="modal-content"><h4>test/tests/kernels/ad_vector_couple/ad_grad_vector_couple.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
    family = LAGRANGE
    order = FIRST
  []
  [v]
    family = LAGRANGE_VEC
    order = FIRST
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = ADDiffusion
    variable = u
  []
  [convection]
    type = ADCoupledVectorConvection
    variable = u
    velocity_vector = v
    use_grad_row = true
  []
  [diff_v]
    type = ADVectorDiffusion
    variable = v
  []
[]

[BCs]
  [left]
    type = ADFunctionDirichletBC
    variable = u
    function = 1
    boundary = &#x27;left&#x27;
  []
  [right]
    type = ADFunctionDirichletBC
    variable = u
    function = 2
    boundary = &#x27;bottom&#x27;
  []

  [left_v]
    type = ADVectorFunctionDirichletBC
    variable = v
    function_x = 1
    function_y = 2
    boundary = &#x27;left&#x27;
  []
  [right_v]
    type = ADVectorFunctionDirichletBC
    variable = v
    function_x = 4
    function_y = 8
    boundary = &#x27;top&#x27;
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  num_steps = 10
  dt = 0.05
[]

[Outputs]
  execute_on = TIMESTEP_END
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="76c82a77-2772-4012-89a7-7f29e0b7401e"><div class="modal-content"><h4>modules/combined/test/tests/ad_cavity_pressure/3d.i</h4><pre class="moose-pre"><code class="language-text">#
# Cavity Pressure Test
#
# This test is designed to compute an internal pressure based on
#   p = n * R * T / V
# where
#   p is the pressure
#   n is the amount of material in the volume (moles)
#   R is the universal gas constant
#   T is the temperature
#   V is the volume
#
# The mesh is composed of one block (1) with an interior cavity of volume 8.
#   Block 2 sits in the cavity and has a volume of 1.  Thus, the total
#   initial volume is 7.
# The test adjusts n, T, and V in the following way:
#   n =&gt; n0 + alpha * t
#   T =&gt; T0 + beta * t
#   V =&gt; V0 + gamma * t
# with
#   alpha = n0
#   beta = T0 / 2
#   gamma = - (0.003322259...) * V0
#   T0 = 240.54443866068704
#   V0 = 7
#   n0 = f(p0)
#   p0 = 100
#   R = 8.314472 J * K^(-1) * mol^(-1)
#
# So, n0 = p0 * V0 / R / T0 = 100 * 7 / 8.314472 / 240.544439
#        = 0.35
#
# The parameters combined at t = 1 gives p = 301.
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  volumetric_locking_correction = true
[]

[Mesh]
  file = 3d.e
[]

[Functions]
  [./displ_positive]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.0029069767441859684&#x27;
  [../]
  [./displ_negative]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 -0.0029069767441859684&#x27;
  [../]
  [./temp1]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;1 1.5&#x27;
    scale_factor = 240.54443866068704
  [../]
  [./material_input_function]
    type = PiecewiseLinear
    x = &#x27;0    1&#x27;
    y = &#x27;0 0.35&#x27;
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 240.54443866068704
  [../]
  [./material_input]
  [../]
[]

[AuxVariables]
  [./pressure_residual_x]
  [../]
  [./pressure_residual_y]
  [../]
  [./pressure_residual_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
  [./heat]
    type = ADDiffusion
    variable = temp
    use_displaced_mesh = true
  [../]
  [./material_input_dummy]
    type = ADDiffusion
    variable = material_input
    use_displaced_mesh = true
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = stress_xx
  [../]
  [./stress_yy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = stress_zz
  [../]
  [./stress_xy]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
    variable = stress_xy
  [../]
  [./stress_yz]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 2
    variable = stress_yz
  [../]
  [./stress_zx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 0
    variable = stress_zx
  [../]
[]

[BCs]
  [./no_x_exterior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;7 8&#x27;
    value = 0.0
  [../]
  [./no_y_exterior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;9 10&#x27;
    value = 0.0
  [../]
  [./no_z_exterior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;11 12&#x27;
    value = 0.0
  [../]
  [./prescribed_left]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 13
    function = displ_positive
  [../]
  [./prescribed_right]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = 14
    function = displ_negative
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;15 16&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;17 18&#x27;
    value = 0.0
  [../]
  [./no_x_interior]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./no_y_interior]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    value = 0.0
  [../]
  [./no_z_interior]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;5 6&#x27;
    value = 0.0
  [../]
  [./temperatureInterior]
    type = ADFunctionDirichletBC
    boundary = 100
    function = temp1
    variable = temp
  [../]
  [./MaterialInput]
    type = ADFunctionDirichletBC
    boundary = &#x27;100 13 14 15 16&#x27;
    function = material_input_function
    variable = material_input
  [../]
  [./CavityPressure]
    [./1]
      boundary = 100
      initial_pressure = 100
      material_input = materialInput
      R = 8.314472
      temperature = aveTempInterior
      volume = internalVolume
      startup_time = 0.5
      output = ppress
      save_in = &#x27;pressure_residual_x pressure_residual_y pressure_residual_z&#x27;
      use_automatic_differentiation = true
    [../]
  [../]
[]

[Materials]
  [./elast_tensor1]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e1
    poissons_ratio = 0
    block = 1
  [../]
  [./strain1]
    type = ADComputeFiniteStrain
    block = 1
  [../]
  [./stress1]
    type = ADComputeFiniteStrainElasticStress
    block = 1
  [../]
  [./elast_tensor2]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
    block = 2
  [../]
  [./strain2]
    type = ADComputeFiniteStrain
    block = 2
  [../]
  [./stress2]
    type = ADComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  nl_rel_tol = 1e-12
  l_tol = 1e-12

  l_max_its = 20

  dt = 0.5
  end_time = 1.0
[]

[Postprocessors]
  [./internalVolume]
    type = InternalVolume
    boundary = 100
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./aveTempInterior]
    type = SideAverageValue
    boundary = 100
    variable = temp
    execute_on = &#x27;initial linear&#x27;
  [../]
  [./materialInput]
    type = SideAverageValue
    boundary = &#x27;7 8 9 10 11 12&#x27;
    variable = material_input
    execute_on = linear
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6b85b9b2-bd72-4c15-9cff-b57f9c7c5cd7"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2065fd5c-8248-4821-99f9-eb7e2c2209e0"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_viscoplasticity_stress_update/lps_single_split.i</h4><pre class="moose-pre"><code class="language-text"># This test provides an example of combining two LPS viscoplasticity model.
# The answer should be close, but not exactly the same, as lps_single.i

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmax = 0.002
  ymax = 0.002
[]

[Modules/TensorMechanics/Master/All]
  strain = FINITE
  add_variables = true
  generate_output = &#x27;strain_xx strain_yy strain_xy hydrostatic_stress vonmises_stress&#x27;
  use_automatic_differentiation = true
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 0.1&#x27;
    y = &#x27;0 1e-5&#x27;
  [../]
  [./tot_effective_viscoplasticity]
    type = ParsedFunction
    vals = &#x27;lps_1_eff_creep_strain lps_2_eff_creep_strain&#x27;
    vars = &#x27;lps_1_eff_creep_strain lps_2_eff_creep_strain&#x27;
    value = &#x27;lps_1_eff_creep_strain+lps_2_eff_creep_strain&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./stress]
    type = ADComputeMultiplePorousInelasticStress
    inelastic_models = &#x27;one two&#x27;
    initial_porosity = 0.1
    outputs = all
  [../]

  [./one]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    base_name = &#x27;lps_first&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./two]
    type = ADViscoplasticityStressUpdate
    coefficient = &#x27;coef&#x27;
    power = 3
    base_name = &#x27;lps_second&#x27;
    outputs = all
    relative_tolerance = 1e-11
  [../]
  [./coef]
    type = ADParsedMaterial
    f_name = coef
    # Example of creep power law
    function = &#x27;0.5e-18 * exp(-4e4 / 1.987 / 1200)&#x27;
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 0.01
  end_time = 0.12
[]

[Postprocessors]
  [./disp_x]
    type = SideAverageValue
    variable = disp_x
    boundary = right
  [../]
  [./disp_y]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
  [./lps_1_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_first_effective_viscoplasticity
    outputs = none
  [../]
  [./lps_2_eff_creep_strain]
    type = ElementAverageValue
    variable = lps_second_effective_viscoplasticity
    outputs = none
  [../]
  [./eff_creep_strain_tot]
    type = FunctionValuePostprocessor
    function = tot_effective_viscoplasticity
  [../]
  [./porosity]
    type = ElementAverageValue
    variable = porosity
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="032b129d-61a0-42d8-90df-776688d19f4a"><div class="modal-content"><h4>modules/combined/test/tests/thermo_mech/ad-youngs_modulus_function_temp.i</h4><pre class="moose-pre"><code class="language-text"># ---------------------------------------------------------------------------
# This test is designed to verify the variable elasticity tensor functionality in the
# ADComputeFiniteStrainElasticStress class with the elasticity_tensor_has_changed flag
# by varying the young&#x27;s modulus with temperature. A constant strain is applied
# to the mesh in this case, and the stress varies with the changing elastic constants.
#
# Geometry: A single element cube in symmetry boundary conditions and pulled
#           at a constant displacement to create a constant strain in the x-direction.
#
# Temperature:  The temperature varies from 400K to 700K in this simulation by
#           100K each time step. The temperature is held constant in the last
#           timestep to ensure that the elasticity tensor components are constant
#           under constant temperature.
#
# Results: Because Poisson&#x27;s ratio is set to zero, only the stress along the x
#          axis is non-zero.  The stress changes with temperature.
#
#    Temperature(K)   strain_{xx}(m/m)     Young&#x27;s Modulus(Pa)   stress_{xx}(Pa)
#          400              0.001             10.0e6               1.0e4
#          500              0.001             10.0e6               1.0e4
#          600              0.001              9.94e6              9.94e3
#          700              0.001              9.93e6              9.93e3
#
#    The tensor mechanics results align exactly with the analytical results above
#    when this test is run with ComputeIncrementalSmallStrain.  When the test is
#    run with ComputeFiniteStrain, a 0.05% discrepancy between the analytical
#    strains and the simulation strain results is observed, and this discrepancy
#    is carried over into the calculation of the elastic stress.
#-------------------------------------------------------------------------

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temp]
    initial_condition = 400
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./elastic_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Functions]
  [./temperature_function]
    type = PiecewiseLinear
    x = &#x27;1       4&#x27;
    y = &#x27;400   700&#x27;
  [../]
[]

[Kernels]
  [./heat]
    type = ADDiffusion
    variable = temp
  [../]
  [./TensorMechanics]
    use_displaced_mesh = true
    use_automatic_differentiation = true
  [../]
[]


[AuxKernels]
  [./stress_xx]
    type = ADRankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]

 [./elastic_strain_xx]
    type = ADRankTwoAux
    rank_two_tensor = elastic_strain
    variable = elastic_strain_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./u_left_fix]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./u_bottom_fix]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./u_back_fix]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]
  [./u_pull_right]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.001
  [../]

  [./temp_bc_1]
    type = ADFunctionDirichletBC
    variable = temp
    preset = false
    boundary = &#x27;1 2 3 4&#x27;
    function = temperature_function
  [../]
[]

[Materials]
  [./youngs_modulus]
    type = ADPiecewiseLinearInterpolationMaterial
    xy_data = &#x27;0          10e+6
               599.9999   10e+6
               600        9.94e+6
               99900      10e3&#x27;
    property = youngs_modulus
    variable = temp
  [../]

  [./elasticity_tensor]
    type = ADComputeVariableIsotropicElasticityTensor
    youngs_modulus = youngs_modulus
    poissons_ratio = 0.0
  [../]
  [./strain]
    type = ADComputeIncrementalSmallStrain
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
[]

[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  end_time = 5
[]

[Postprocessors]
  [./elastic_strain_xx]
    type = ElementAverageValue
    variable = elastic_strain_xx
  [../]
  [./elastic_stress_xx]
    type = ElementAverageValue
    variable = stress_xx
  [../]
  [./temp]
    type = AverageNodalVariableValue
    variable = temp
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#df020795-6a3b-456d-8667-6836b19dc97a" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#67a5d32c-00ae-4e03-9ec4-8727529794df" class="tooltipped" data-position="left" data-tooltip="Preset boundary conditions">Preset boundary conditions</a></li><li><a href="#8f23ca6d-34ae-4425-87c9-5c91e315277f" class="tooltipped" data-position="left" data-tooltip="Example Input Syntax">Example Input Syntax</a></li><li><a href="#a69bf219-d1f6-414f-b8c7-a7f532789399" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#8f642f5c-6153-411b-85a3-267130d5e5cc" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>