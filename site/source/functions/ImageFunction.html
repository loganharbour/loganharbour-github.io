<!DOCTYPE html><head><meta charset="UTF-8"><title>ImageFunction.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="df14b26d-ee78-4f8a-896d-456532138722"><i class="material-icons">menu</i></a><ul class="sidenav" id="df14b26d-ee78-4f8a-896d-456532138722"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">functions</span><a href="#" class="breadcrumb">ImageFunction</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="8d2af1ad-bb74-4c97-96dd-201bbefb71be" data-section-level="1" data-section-text="ImageFunction"><h1 id="imagefunction">ImageFunction</h1><p>Function with values sampled from an image or image stack.</p><section class="scrollspy" id="082198cc-ca48-48e1-b45b-d4d77c49f380" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>Simulations often require the phase to be initialized or compared to existing micro-structure data, such as CT or SEM scans as shown in the figure. MOOSE includes a flexible, <a href="../../syntax/Functions/index.html">Function</a> based method for accessing this type of data for use in initial conditions or other calculations. For example, <a href="#fig:large_adapt">Figure 1</a> is a reconstructed image of snow captured using cryospheric micro-CT scanner at the <a href="http://www.montana.edu/subzero">MSU Subzero Research Laboratory</a>.</p><div class="card moose-float" id="fig:large_adapt"><div class="card-content"><img src="../../large_media/framework/image_function/large_adapt.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 1: </span><span class="moose-caption-text">Mesh of 3D micro-CT data using <code>ImageFunction</code>.</span></p></div></div></section><section class="scrollspy" id="74ffd20f-d845-42dd-8180-c5d26170564d" data-section-level="2" data-section-text="Setup"><h2 id="setup">Setup</h2><p>To utilize the image reading portion of the phase-field module VTK must be enabled when building libMesh. Please see MOOSE FAQ for more information.</p></section><section class="scrollspy" id="f2227b3c-e894-49d4-963d-bf4b21d77145" data-section-level="2" data-section-text="Examples"><h2 id="examples">Examples</h2><section id="0f325eca-acec-4dfc-bafe-fcd5ea57d41d" data-section-level="3" data-section-text="Single Image"><h3 id="single-image">Single Image</h3><p>Consider the simple image in <a href="#fig:small_raw">Figure 2</a>, reading this image is accomplished by including a <code>ImageFunction</code> in your input file.</p><pre class="moose-pre"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]
</code></pre><a href="#fbe39bf9-2265-48de-acb8-b3dbddf317b4" class="modal-trigger">(test/tests/functions/image_function/image.i)</a><div class="modal moose-modal" id="fbe39bf9-2265-48de-acb8-b3dbddf317b4"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/functions/image_function/image.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 10
  nz = 10
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_raw"><div class="card-content"><img src="../../large_media/framework/image_function/small_raw.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 2: </span><span class="moose-caption-text">Example image input (stack/test_00.png).</span></p></div></div><p>This function may then be used just like any other function within MOOSE, for example, it may be utilized as an initial condition for a variable.  The following input file syntax would use the function above as an initial condition for the <code>u</code> variable and create an initial mesh as shown in <a href="#fig:small_uniform">Figure 3</a>.</p><pre class="moose-pre"><code class="language-text">[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]
</code></pre><a href="#7fdb7805-d216-48a6-9e81-30e747044d71" class="modal-trigger">(test/tests/functions/image_function/image.i)</a><div class="modal moose-modal" id="7fdb7805-d216-48a6-9e81-30e747044d71"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/functions/image_function/image.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 10
  nz = 10
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_uniform"><div class="card-content"><img src="../../large_media/framework/image_function/small_uniform.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 3: </span><span class="moose-caption-text">Mesh showing initial condition extracted from image in <a href="#fig:small_raw">Figure 2</a>.</span></p></div></div><p>The example image shown is 20 by 20 pixels as is the mesh (20 by 20 elements) to which the initial condition is applied. The meshed version looks slightly different than the original image because the initial condition is applied by sampling the image at each node within the mesh, which in this case matches with the pixel boundaries, so the value can sampled can easily vary due to floating point precision limitations.</p><p>Matching the mesh to the pixel dimensions <strong>is not</strong> a requirement, and not recommend. The main reason for building the <code>ImageFunction</code> object was to enable an arbitrary mesh geometry to be able to sample the image and adapt accordingly.</p><p>Beginning with a 2 by 2 element mesh and adding the following an adaptivity block to the input file results in the mesh shown <a href="#fig:small_adapt">Figure 4</a>.</p><pre class="moose-pre"><code class="language-text">[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]
</code></pre><a href="#cd4b7f6d-6187-4379-8572-891f61e2792d" class="modal-trigger">(test/tests/functions/image_function/threshold_adapt.i)</a><div class="modal moose-modal" id="cd4b7f6d-6187-4379-8572-891f61e2792d"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/functions/image_function/threshold_adapt.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 2.7e4
    upper_value = 1
    lower_value = -1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_adapt"><div class="card-content"><img src="../../large_media/framework/image_function/small_adapt.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 4: </span><span class="moose-caption-text">Mesh showing initial condition with initial adaptivity extracted from image in                <a href="#fig:small_raw">Figure 2</a>.</span></p></div></div></section><section id="f3a289f1-4bc3-4ec2-bbc8-73afc908e9cf" data-section-level="3" data-section-text="Image Stacks"><h3 id="image-stacks">Image Stacks</h3><p>Image stacks or 3D images are also supported (see <a href="ImageFunction.html#file-types">Supported File Types</a>). For example, consider as set of images named test_00.png, test_01.png, ..., and test_19.png within a directory &quot;stacked&quot;. To read these images the syntax below is used in the <code>ImageFunction</code> block.  Again, using this data as an initial condition and using initial adaptivity, as shown above, results in the mesh shown in <a href="#fig:small_3d">Figure 5</a>.</p><pre class="moose-pre"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]
</code></pre><a href="#edc59805-b65c-4d36-9067-e313e091e24a" class="modal-trigger">(test/tests/functions/image_function/image_3d.i)</a><div class="modal moose-modal" id="edc59805-b65c-4d36-9067-e313e091e24a"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/functions/image_function/image_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="card moose-float" style="width:50%;margin-right:auto;margin-left:auto;" id="fig:small_3d"><div class="card-content"><img src="../../large_media/framework/image_function/small_3d.png" class="materialboxed moose-image"></img><p class="moose-caption"><span class="moose-caption-heading">Figure 5: </span><span class="moose-caption-text">3D Mesh showing initial condition with initial adaptivity extracted from a stack of                images similar to the image in <a href="#fig:small_raw">Figure 2</a>. The mesh is cropped in the vertical                direction to show the internal structure.</span></p></div></div><p>It is also possible to limit the reader to a set of images using the <span class="moose-parameter-name tooltipped" data-tooltip="Range of images to analyze, used with 'file_base' (ignored if 'file' is given)" data-position="bottom" data-delay="5">&quot;file_range&quot;</span> parameter, which may be set to a single value to read a single image or a range to read a subset of the images.</p></section></section><section class="scrollspy" id="0cee7328-cc52-4f6c-b975-dbedc4773b8b" data-section-level="2" data-section-text="Image Processing"><h2 id="image-processing">Image Processing</h2><p>The <a href="http://www.vtk.org/">VTK</a> library includes a range of image filters and processing tools, some basic processing tools are included. However, a derivative class could easily be developed to expand upon these capabilities.</p><section id="d595aad8-fc38-4c92-9bd3-04282f3f44b9" data-section-level="3" data-section-text="Component"><h3 id="component">Component</h3><p>By default, the RGB pixel data is converted into a single greyscale value representing the magnitude. This is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageMagnitude.html">vtkImageMagnitude</a> class.</p><p>It is possible to select a single component rather than using the magnitude by setting the <span class="moose-parameter-name tooltipped" data-tooltip="The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image." data-position="bottom" data-delay="5">&quot;component&quot;</span> parameter in the input file to a valid component number, which will be 0, 1 or 2 for RGB images.</p></section><section id="d6465e0f-735a-44f7-aa4c-42b1c5a0dbe0" data-section-level="3" data-section-text="Thresholding"><h3 id="thresholding">Thresholding</h3><p>Basic thresholding is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageThreshold.html">vtkImageThreshold</a> class. Thresholding requires three parameters be set in the input file:</p><ul class="browser-default"><li><p><span class="moose-parameter-name tooltipped" data-tooltip="The threshold value" data-position="bottom" data-delay="5">&quot;threshold&quot;</span>: The threshold value to consider. </p></li><li><p><span class="moose-parameter-name tooltipped" data-tooltip="The value to set for data greater than the threshold value" data-position="bottom" data-delay="5">&quot;upper_value&quot;</span>: Image data above the threshold are replaced with this value. </p></li><li><p><span class="moose-parameter-name tooltipped" data-tooltip="The value to set for data less than the threshold value" data-position="bottom" data-delay="5">&quot;lower_value&quot;</span>: Image data below the threshold are replaced with this value.</p></li></ul></section><section id="2fddc5d8-9f7b-4c1d-97c8-cfde10edce8a" data-section-level="3" data-section-text="Shift and Scale"><h3 id="shift-and-scale">Shift and Scale</h3><p>It is possible to shift and scale the image data, this is accomplished using the <a href="http://www.vtk.org/doc/nightly/html/classvtkImageShiftScale.html">vtkImageShiftScale</a> object. The <span class="moose-parameter-name tooltipped" data-tooltip="Value to add to all pixels; occurs prior to scaling" data-position="bottom" data-delay="5">&quot;shift&quot;</span> parameter adds the given value to the image data and <span class="moose-parameter-name tooltipped" data-tooltip="Multiplier to apply to all pixel values; occurs after shifting" data-position="bottom" data-delay="5">&quot;scale&quot;</span> parameter multiplies the image data by the supplied value.</p><p>The order of application of the shift and scale are dictated by the VTK object, the documentation states: &quot;Pixels are shifted (a constant value added) and then scaled (multiplied by a scalar).&quot;</p></section><section id="0016e69a-19ba-4a8f-b830-23d7c7b93627" data-section-level="3" data-section-text="Image Flipping"><h3 id="image-flipping">Image Flipping</h3><p>Flipping an image along the major axis directions x, y, or z is performed using <a href="http://www.vtk.org/doc/nightly/html/classvtkImageFlip.html">vtkImageFlip</a> object. Three flags exists&mdash;<span class="moose-parameter-name tooltipped" data-tooltip="Flip the image along the x-axis" data-position="bottom" data-delay="5">&quot;flip_x&quot;</span>, <span class="moose-parameter-name tooltipped" data-tooltip="Flip the image along the y-axis" data-position="bottom" data-delay="5">&quot;flip_y&quot;</span>, and <span class="moose-parameter-name tooltipped" data-tooltip="Flip the image along the z-axis" data-position="bottom" data-delay="5">&quot;flip_z&quot;</span>&mdash;which may be set in any combination.</p></section></section><section class="scrollspy" id="25cb0803-f5c7-4939-a612-a3be71cba9f6" data-section-level="2" data-section-text="Image Dimensions"><h2 id="image-dimensions">Image Dimensions</h2><p>By default, the image actual physical dimensions are set to the dimensions of the mesh. However, it is possible to set the dimensions of the image independently from using the <code>origin</code> and <code>dimensions</code> input parameters.</p><p>This allows for flexibility to how the <code>ImageFunction</code> is utilized. For example, a mesh could be defined to domain that is smaller than the actual image. Thus, if the <code>ImageFunction</code> dimensions are set to the larger domain, the mesh would only sample some portion of the image. Effectively, this feature can work on a cropped image, without needing to create a separate cropped image.</p></section><section class="scrollspy" id="e7d14b8d-4db2-4776-afc4-c720f3b5814a" data-section-level="2" data-section-text="Supported File Types"><h2 id="file-types">Supported File Types</h2><p>Currently, two types of files are supported *.tif and *.png. However, *.tif files often do not read correctly with VTK, depending on the format of the file. So, if you experience problems reading *.tif files it may require changing the format to *.png. This can easily be done with any number of tools with <a href="http://www.imagemagick.org">ImageMagick</a> being one of the most powerful.</p><pre class="moose-pre"><code class="language-text">[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]
</code></pre><a href="#184c6168-29e5-4d23-8897-7079581b201c" class="modal-trigger">(test/tests/functions/image_function/image_3d.i)</a><div class="modal moose-modal" id="184c6168-29e5-4d23-8897-7079581b201c"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/test/tests/functions/image_function/image_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="cf8e19f9-19d5-4fe6-b428-c4f13d2d9440" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="6b634bda-9526-4bbf-a32a-8f5687792887" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">component</span><span class="moose-parameter-header-description">The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The image RGB-component to return, leaving this blank will result in a greyscale value for the image to be created. The component number is zero based, i.e. 0 returns the first (RED) component of the image.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">dimensions</span><span class="moose-parameter-header-description">x,y,z dimensions of the image (defaults to mesh dimensions)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::Point</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>x,y,z dimensions of the image (defaults to mesh dimensions)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file</span><span class="moose-parameter-header-description">Name of single image file to extract mesh parameters from.  If provided, a 2D mesh is created.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Name of single image file to extract mesh parameters from.  If provided, a 2D mesh is created.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_base</span><span class="moose-parameter-header-description">Image file base to open, use this option when a stack of images must be read (ignored if 'file' is given)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileNameNoExtension</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Image file base to open, use this option when a stack of images must be read (ignored if 'file' is given)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_range</span><span class="moose-parameter-header-description">Range of images to analyze, used with 'file_base' (ignored if 'file' is given)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<unsigned int></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Range of images to analyze, used with 'file_base' (ignored if 'file' is given)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">file_suffix</span><span class="moose-parameter-header-description">Suffix of the file to open, e.g. 'png'</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Suffix of the file to open, e.g. 'png'</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">origin</span><span class="moose-parameter-header-description">Origin of the image (defaults to mesh origin)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>libMesh::Point</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Origin of the image (defaults to mesh origin)</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="827ad577-3307-4639-9aaf-bd5086e4df38" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="9d2c3c5b-3b7f-4fbd-9426-0692221db6a3" data-section-level="3" data-section-text="Flip Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">flip_x</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the x-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the x-axis</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">flip_y</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the y-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the y-axis</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">flip_z</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Flip the image along the z-axis</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Flip the image along the z-axis</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Flip Parameters</h3></summary></details></section><section id="93b35b10-af2c-48da-9ffd-12f020654f62" data-section-level="3" data-section-text="Threshold Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">lower_value</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The value to set for data less than the threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The value to set for data less than the threshold value</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">threshold</span><span class="moose-parameter-header-description">The threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The threshold value</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">upper_value</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The value to set for data greater than the threshold value</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The value to set for data greater than the threshold value</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Threshold Parameters</h3></summary></details></section><section id="44931a52-36c8-4604-9a49-63b8cdb0df4b" data-section-level="3" data-section-text="Rescale Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">scale</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Multiplier to apply to all pixel values; occurs after shifting</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Multiplier to apply to all pixel values; occurs after shifting</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">shift</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Value to add to all pixels; occurs prior to scaling</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Value to add to all pixels; occurs prior to scaling</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Rescale Parameters</h3></summary></details></section></section><section class="scrollspy" id="9a6913a3-e0ce-48ca-9a78-0d794a586a65" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#f6467330-2082-453d-86bd-e242248554a4" class="modal-trigger">test/tests/functions/image_function/shift_and_scale.i</a></li><li><a href="#ebb8f33f-d227-4c40-9062-64ab09993ad2" class="modal-trigger">test/tests/functions/image_function/subset.i</a></li><li><a href="#780074f7-40d8-4e98-af27-7aae0f787335" class="modal-trigger">test/tests/functions/image_function/crop.i</a></li><li><a href="#f5856d37-142a-4cf5-926b-cb4f86bfd0cf" class="modal-trigger">test/tests/functions/image_function/threshold_adapt_parallel.i</a></li><li><a href="#4a512e33-01c6-42c8-8759-f23da2dc7d30" class="modal-trigger">test/tests/functions/image_function/image_2d_elemental.i</a></li><li><a href="#f61dca27-5d13-4ad6-bd0d-6b13429509e4" class="modal-trigger">test/tests/functions/image_function/image_mesh_2d.i</a></li><li><a href="#f3804803-857c-418f-bce7-3aac0d7b654d" class="modal-trigger">test/tests/functions/image_function/threshold.i</a></li><li><a href="#1ecbe4f3-8832-4df8-b398-1eeb43316e7a" class="modal-trigger">test/tests/functions/image_function/image_mesh_3d.i</a></li><li><a href="#bb861e34-bd38-4d9d-8fad-944b6a2938ab" class="modal-trigger">modules/phase_field/test/tests/feature_flood_test/parallel_feature_count.i</a></li><li><a href="#2926ef10-309e-4fed-8b5d-0962b5fec762" class="modal-trigger">test/tests/functions/image_function/image_3d.i</a></li><li><a href="#d7fb4d0a-53b2-49c2-ac51-93c11116eccd" class="modal-trigger">test/tests/functions/image_function/threshold_adapt.i</a></li><li><a href="#a76c5d38-769f-40c7-a0b2-e8b57252ef86" class="modal-trigger">test/tests/functions/image_function/flip.i</a></li><li><a href="#a6a52d80-8aeb-4031-b0f9-d8db54b28353" class="modal-trigger">test/tests/functions/image_function/image.i</a></li><li><a href="#2e93855d-9307-40ab-b92e-1aab73f6e124" class="modal-trigger">test/tests/functions/image_function/error/threshold_values.i</a></li><li><a href="#6025022a-bb6d-40d4-8267-0a688dcea2b0" class="modal-trigger">test/tests/functions/image_function/component.i</a></li><li><a href="#6dbf15ab-eb75-406f-8ccb-a97020879a71" class="modal-trigger">modules/phase_field/test/tests/boundary_intersecting_features/boundary_intersecting_features.i</a></li><li><a href="#48235cd7-98af-4831-a34d-289b6f6b25bf" class="modal-trigger">test/tests/functions/image_function/error/check_error.i</a></li><li><a href="#9170cfa6-7fd0-4e9d-9427-1934f1b76003" class="modal-trigger">test/tests/functions/image_function/image_2d.i</a></li><li><a href="#bbe0e09f-c4e9-4e8f-ba30-03dce00fd36c" class="modal-trigger">test/tests/functions/image_function/moose_logo_test_2D.i</a></li><li><a href="#a16df5e9-3aef-4757-9916-a81e73b5c66f" class="modal-trigger">test/tests/functions/image_function/image_3d_subset.i</a></li><li><a href="#67791947-9cdf-4673-aa98-e0efa8fb44e2" class="modal-trigger">test/tests/functions/image_function/flip_dual.i</a></li><li><a href="#9fdfa58a-42f3-456e-92c3-ee39ace4f141" class="modal-trigger">test/tests/functions/image_function/flip_quad.i</a></li></ul><div class="modal moose-modal" id="f6467330-2082-453d-86bd-e242248554a4"><div class="modal-content"><h4>test/tests/functions/image_function/shift_and_scale.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    shift = -62735.0
    scale = 0.0001
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]

</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ebb8f33f-d227-4c40-9062-64ab09993ad2"><div class="modal-content"><h4>test/tests/functions/image_function/subset.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  uniform_refine = 2
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    origin = &#x27;0.25 0.25 0&#x27;
    dimensions = &#x27;0.5 0.5 0&#x27;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]

</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="780074f7-40d8-4e98-af27-7aae0f787335"><div class="modal-content"><h4>test/tests/functions/image_function/crop.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  uniform_refine = 2
  xmin = 0.5
  ymin = 0.5
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    file_suffix = png
    origin = &#x27;0 0 0&#x27;
    dimensions = &#x27;1 1 0&#x27;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f5856d37-142a-4cf5-926b-cb4f86bfd0cf"><div class="modal-content"><h4>test/tests/functions/image_function/threshold_adapt_parallel.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  parallel_type = distributed
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 2.7e4
    upper_value = 1
    lower_value = -1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Outputs]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a512e33-01c6-42c8-8759-f23da2dc7d30"><div class="modal-content"><h4>test/tests/functions/image_function/image_2d_elemental.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    # file range is parsed as a vector of unsigned.  If it only has 1
    # entry, only a single file is read.
    file_range = &#x27;0&#x27;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f61dca27-5d13-4ad6-bd0d-6b13429509e4"><div class="modal-content"><h4>test/tests/functions/image_function/image_mesh_2d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = ImageMesh
  dim = 2
  file = stack/test_00.png
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    # ImageFunction gets its file range parameters from ImageMesh,
    # when it is present.  This prevents duplicating information in
    # input files.
    type = ImageFunction
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f3804803-857c-418f-bce7-3aac0d7b654d"><div class="modal-content"><h4>test/tests/functions/image_function/threshold.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 2.7e4
    upper_value = 1
    lower_value = -1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1ecbe4f3-8832-4df8-b398-1eeb43316e7a"><div class="modal-content"><h4>test/tests/functions/image_function/image_mesh_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = ImageMesh
  dim = 3
  file_base = stack/test
  file_suffix = png
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    # ImageFunction gets its file range parameters from ImageMesh,
    # when it is present.  This prevents duplicating information in
    # input files.
    type = ImageFunction
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bb861e34-bd38-4d9d-8fad-944b6a2938ab"><div class="modal-content"><h4>modules/phase_field/test/tests/feature_flood_test/parallel_feature_count.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = ImageMesh
  dim = 2
  file = spiral_16x16.png
  scale_to_one = false
[]

[Variables]
  [./u]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxVariables]
  [./feature]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./proc_id]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./feature_ghost]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./nodal_flood_aux]
    type = FeatureFloodCountAux
    variable = feature
    flood_counter = flood_count_pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./proc_id]
    type = ProcessorIDAux
    variable = proc_id
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./ghost]
    type = FeatureFloodCountAux
    variable = feature_ghost
    field_display = GHOSTED_ENTITIES
    flood_counter = flood_count_pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Functions]
  [./tif]
    type = ImageFunction
    component = 0
  [../]
[]

[ICs]
  [./u_ic]
    type = FunctionIC
    function = tif
    variable = u
  [../]
[]

[Postprocessors]
  [./flood_count_pp]
    type = FeatureFloodCount
    variable = u
    threshold = 1.0
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Steady
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2926ef10-309e-4fed-8b5d-0962b5fec762"><div class="modal-content"><h4>test/tests/functions/image_function/image_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d7fb4d0a-53b2-49c2-ac51-93c11116eccd"><div class="modal-content"><h4>test/tests/functions/image_function/threshold_adapt.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 2.7e4
    upper_value = 1
    lower_value = -1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Outputs]
  exodus = true
[]

</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a76c5d38-769f-40c7-a0b2-e8b57252ef86"><div class="modal-content"><h4>test/tests/functions/image_function/flip.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    flip_x = true
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a6a52d80-8aeb-4031-b0f9-d8db54b28353"><div class="modal-content"><h4>test/tests/functions/image_function/image.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 10
  nz = 10
[]

[Adaptivity]
  max_h_level = 5
  initial_steps = 5
  initial_marker = marker
  [Indicators]
    [indicator]
      type = GradientJumpIndicator
      variable = u
    []
  []
  [Markers]
    [marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.9
    []
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file = stack/test_00.png
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2e93855d-9307-40ab-b92e-1aab73f6e124"><div class="modal-content"><h4>test/tests/functions/image_function/error/threshold_values.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [tif]
    type = ImageFunction
    file_base = ../stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    threshold = 30000
    upper_value = 1
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = tif
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6025022a-bb6d-40d4-8267-0a688dcea2b0"><div class="modal-content"><h4>test/tests/functions/image_function/component.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    component = 0
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6dbf15ab-eb75-406f-8ccb-a97020879a71"><div class="modal-content"><h4>modules/phase_field/test/tests/boundary_intersecting_features/boundary_intersecting_features.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  # ImageMesh ignores nx, xmin, xmax (and similarly for y and z) and
  # tries to read them from the image file...
  type = ImageMesh
  dim = 2

  # Be sure to choose a corresponding image name below!
  # file = image001_cropped3_closing_298.png         # full size, 157 Mb Exodus file!
  # file = eighth_image001_cropped3_closing_298.png  # 1/8
  file = sixteenth_image001_cropped3_closing_298.png # 1/16

  # Uncomment to maintain 1:1 ratio between number of pixels and mesh size.
  # scale_to_one = false

  # Uncomment to set cells_per_pixel to something other than the default value of 1.0.
  # Must be &lt;= 1.
  # cells_per_pixel = .75

  # To crop an image to e.g. 1/8th size, install ImageMagick and run:
  #  convert image001_cropped3_closing_298.png -crop 230x198+100+100 eighth_image001_cropped3_closing_298.png
  # Note: Do not use &#x27;sips&#x27; on OSX to crop!  It actually interpolates
  # the colors in the image instead of just cropping.
[]

[Variables]
  [./u]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxVariables]
  [./grain_auxvar]
    order = CONSTANT
    family = MONOMIAL
  [../]

  [./centroids]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./nodal_flood_aux]
    variable = grain_auxvar
    type = FeatureFloodCountAux
    flood_counter = flood_count_pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]

  [./centroids]
    type = FeatureFloodCountAux
    variable = centroids
    flood_counter = flood_count_pp
    field_display = CENTROID
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Functions]
  [./tif]
    # ImageFunction gets its file range parameters from ImageMesh,
    # when it is present.  This prevents duplicating information in
    # input files.
    type = ImageFunction

    # In these sample images the features we want to analyze are RED (or close to pure red). The
    # background is BLUE so we can easily distinguish between the two by selecting only the red channel.
    component = 0
  [../]
[]

[ICs]
  [./u_ic]
    type = FunctionIC
    function = tif
    variable = u
  [../]
[]

[Postprocessors]
  [./flood_count_pp]
    type = FeatureFloodCount
    variable = u
    threshold = 1.0
    compute_var_to_feature_map = true
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[VectorPostprocessors]
  [./grain_volumes]
    type = FeatureVolumeVectorPostprocessor
    flood_counter = flood_count_pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Problem]
  type = FEProblem
  solve = false
[../]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="48235cd7-98af-4831-a34d-289b6f6b25bf"><div class="modal-content"><h4>test/tests/functions/image_function/error/check_error.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [tif]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = tif
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9170cfa6-7fd0-4e9d-9427-1934f1b76003"><div class="modal-content"><h4>test/tests/functions/image_function/image_2d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bbe0e09f-c4e9-4e8f-ba30-03dce00fd36c"><div class="modal-content"><h4>test/tests/functions/image_function/moose_logo_test_2D.i</h4><pre class="moose-pre"><code class="language-text">[Problem]
  solve = false
[]

[Mesh]
  type = ImageMesh
  cells_per_pixel = 1
  dim = 2
  file = moose_logo_small.png
[]

[Variables]
  [original]
    family = MONOMIAL
    order = CONSTANT
  []
  [scaled]
    family = MONOMIAL
    order = CONSTANT
  []
  [shifted]
    family = MONOMIAL
    order = CONSTANT
  []
[]

[Functions]
  [image]
    type = ImageFunction
    file = moose_logo_small.png
  []
  [image_scale]
    type = ImageFunction
    file = moose_logo_small.png
    scale = 0.00392156862
  []
  [image_shift]
    type = ImageFunction
    file = moose_logo_small.png
    shift = -127.5
  []
[]

[ICs]
  [original_IC]
    type = FunctionIC
    function = image
    variable = original
  []
  [scaled_IC]
    type = FunctionIC
    function = image_scale
    variable = scaled
  []
  [shifted_IC]
    type = FunctionIC
    function = image_shift
    variable = shifted
  []
[]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a16df5e9-3aef-4757-9916-a81e73b5c66f"><div class="modal-content"><h4>test/tests/functions/image_function/image_3d_subset.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 20
  ny = 20
  nz = 6
  zmax = 0.3
[]

[Variables]
  [u]
  []
[]

[Functions]
  [image_func]
    type = ImageFunction
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0 5&#x27;
  []
[]

[ICs]
  [u_ic]
    type = FunctionIC
    function = image_func
    variable = u
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="67791947-9cdf-4673-aa98-e0efa8fb44e2"><div class="modal-content"><h4>test/tests/functions/image_function/flip_dual.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  uniform_refine = 1
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 20
    ny = 40
    ymax = 2
  []
  [top]
    type = SubdomainBoundingBoxGenerator
    input = gen
    top_right = &#x27;1 2 0&#x27;
    bottom_left = &#x27;0 1 0&#x27;
    block_id = 1
  []
[]

[Variables]
  [u]
  []
[]

[Functions]
  [top]
    type = ImageFunction
    origin = &#x27;0 1 0&#x27;
    file_base = stack/test
    file_suffix = png
    flip_y = true
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    dimensions = &#x27;1 1 0&#x27;
  []
  [bottom]
    type = ImageFunction
    origin = &#x27;0 0 0&#x27;
    file_base = stack/test
    file_suffix = png
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    dimensions = &#x27;1 1 0&#x27;
  []
[]

[ICs]
  [top_ic]
    function = top
    variable = u
    type = FunctionIC
    block = 1
  []
  [bottom_ic]
    function = bottom
    variable = u
    type = FunctionIC
    block = 0
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9fdfa58a-42f3-456e-92c3-ee39ace4f141"><div class="modal-content"><h4>test/tests/functions/image_function/flip_quad.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  uniform_refine = 1
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 20
    ny = 20
    xmax = 2
    ymax = 2
  []
  # Define block IDs for the four quadrants in CCW order:
  # 1=top_right
  # 2=top_left
  # 3=bottom_left
  # 4=bottom_right
  [top_right_modifier]
    input = gen
    type = SubdomainBoundingBoxGenerator
    top_right = &#x27;2 2 0&#x27;
    bottom_left = &#x27;1 1 0&#x27;
    block_id = 1
  []
  [top_left_modifier]
    input = top_right_modifier
    type = SubdomainBoundingBoxGenerator
    top_right = &#x27;1 2 0&#x27;
    bottom_left = &#x27;0 1 0&#x27;
    block_id = 2
  []
  [bottom_left_modifier]
    input = top_left_modifier
    type = SubdomainBoundingBoxGenerator
    top_right = &#x27;1 1 0&#x27;
    bottom_left = &#x27;0 0 0&#x27;
    block_id = 3
  []
  [bottom_right_modifier]
    input = bottom_left_modifier
    type = SubdomainBoundingBoxGenerator
    top_right = &#x27;2 1 0&#x27;
    bottom_left = &#x27;1 0 0&#x27;
    block_id = 4
  []
[]

[Variables]
  [u]
    family = MONOMIAL
    order = CONSTANT
  []
[]

[Functions]
  [bottom_left_func]
    type = ImageFunction
    file_base = stack/test
    flip_x = true
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    file_suffix = png
    origin = &#x27;0 0 0&#x27;
    dimensions = &#x27;1 1 0&#x27;
  []
  [top_left_func]
    type = ImageFunction
    file_base = stack/test
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    file_suffix = png
    origin = &#x27;0 1 0&#x27;
    dimensions = &#x27;1 1 0&#x27;
    flip_x = true
    flip_y = true
  []
  [top_right_func]
    type = ImageFunction
    origin = &#x27;1 1 0&#x27;
    file_base = stack/test
    file_suffix = png
    flip_y = true
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    dimensions = &#x27;1 1 0&#x27;
  []
  [bottom_right_func]
    type = ImageFunction
    origin = &#x27;1 0 0&#x27;
    file_base = stack/test
    file_range = &#x27;0&#x27; # file_range is a vector input, a single entry means &quot;read only 1 file&quot;
    file_suffix = png
    dimensions = &#x27;1 1 0&#x27;
  []
[]

[ICs]
  # Defined the same way as the MeshGenerators
  [top_right_ic]
    function = top_right_func
    variable = u
    type = FunctionIC
    block = 1
  []
  [top_left_ic]
    function = top_left_func
    variable = u
    type = FunctionIC
    block = 2
  []
  [bottom_left_ic]
    function = bottom_left_func
    variable = u
    type = FunctionIC
    block = 3
  []
  [bottom_right_ic]
    function = bottom_right_func
    variable = u
    type = FunctionIC
    block = 4
  []
[]

[Problem]
  type = FEProblem
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#082198cc-ca48-48e1-b45b-d4d77c49f380" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#74ffd20f-d845-42dd-8180-c5d26170564d" class="tooltipped" data-position="left" data-tooltip="Setup">Setup</a></li><li><a href="#f2227b3c-e894-49d4-963d-bf4b21d77145" class="tooltipped" data-position="left" data-tooltip="Examples">Examples</a></li><li><a href="#0cee7328-cc52-4f6c-b975-dbedc4773b8b" class="tooltipped" data-position="left" data-tooltip="Image Processing">Image Processing</a></li><li><a href="#25cb0803-f5c7-4939-a612-a3be71cba9f6" class="tooltipped" data-position="left" data-tooltip="Image Dimensions">Image Dimensions</a></li><li><a href="#e7d14b8d-4db2-4776-afc4-c720f3b5814a" class="tooltipped" data-position="left" data-tooltip="Supported File Types">Supported File Types</a></li><li><a href="#cf8e19f9-19d5-4fe6-b428-c4f13d2d9440" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#9a6913a3-e0ce-48ca-9a78-0d794a586a65" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>