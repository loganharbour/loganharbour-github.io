<!DOCTYPE html><head><meta charset="UTF-8"><title>PiecewiseMulticonstant.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="1c517e34-0823-43e5-aaa1-f2f6bbc1bb03"><i class="material-icons">menu</i></a><ul class="sidenav" id="1c517e34-0823-43e5-aaa1-f2f6bbc1bb03"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">functions</span><a href="#" class="breadcrumb">PiecewiseMulticonstant</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="f8e5bb12-a346-4246-9b38-eb9e2c613b10" data-section-level="1" data-section-text="PiecewiseMulticonstant"><h1 id="piecewisemulticonstant">PiecewiseMulticonstant</h1><p>The <code>PiecewiseMulticonstant</code> function provides the capability of multi-dimensional piecewise constant interpolation. The data is read from file provided in the <code>data_file</code> argument. Interpolation axes can be a selection of one or multiple of <code>x</code>, <code>y</code>, <code>z</code>, <code>t</code>, the number of interpolation axes is referred to as dimension of the interpolation.</p><p>Formatting instructions for the <code>data_file</code> (reproduced from <code>data_file</code> docstring): any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information.   The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f(i,j,k,l) corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i&gt;<u>0 corresponding to the index along the first AXIS, j&gt;</u>0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</p><p>The <code>direction</code> parameter controls whether the function takes the value of the abscissa of the user-provided point to the right or left of the value at which the function is evaluated. A <code>direction</code> has to be provided for each dimension.</p><p>PiecewiseMulticonstant performs constant interpolation on 1D, 2D, 3D or 4D data.  The data_file specifies the axes directions and the function values.  If a point lies outside the data range, the appropriate end value is used.</p><section class="scrollspy" id="d694615a-d974-4f20-97d4-1d30a25ef3aa" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="23f8764b-618b-4460-8ff0-eb81b8115e38" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">data_file</span><span class="moose-parameter-header-description">File holding data for use with PiecewiseMultiInterpolation.  Format: any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information.  The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f[i,j,k,l] corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i>=0 corresponding to the index along the first AXIS, j>=0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>File holding data for use with PiecewiseMultiInterpolation.  Format: any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information.  The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f[i,j,k,l] corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i>=0 corresponding to the index along the first AXIS, j>=0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">direction</span><span class="moose-parameter-header-description">Direction to look to find value for each interpolation dimension.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MultiMooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>left right</p><p class="moose-parameter-description"><span>Description:</span>Direction to look to find value for each interpolation dimension.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="74bc0e90-f16f-40ce-94f8-f946909edb9d" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="177ac529-4ac0-4d19-9b49-12315b88c105" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#08af453e-9fd6-49f7-bfda-141139c1757f" class="modal-trigger">test/tests/functions/piecewise_multilinear/twoD_const.i</a></li></ul><div class="modal moose-modal" id="08af453e-9fd6-49f7-bfda-141139c1757f"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/twoD_const.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests in 2D
# See [Functions] block for a description of the tests
# The functions are compared with ParsedFunctions using postprocessors

[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 2
  nx = 4
  ymin = -1
  ymax =  1
  ny = 4
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./constant]
    family = MONOMIAL
    order = CONSTANT
  [../]

  [./constant_ref]
    family = MONOMIAL
    order = CONSTANT
  [../]

  [./diff]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./const_AuxK]
    type = FunctionAux
    variable = constant
    function = const_fcn
  [../]

  [./const_ref_AuxK]
    type = FunctionAux
    variable = constant_ref
    function = const_ref
  [../]

  [./diff]
    type = ParsedAux
    variable = diff
    function = &#x27;constant - constant_ref&#x27;
    args = &#x27;constant constant_ref&#x27;
  [../]
[]


[Functions]
  [./const_fcn]
    type = PiecewiseMulticonstant
    direction = &#x27;left right&#x27;
    data_file = twoD_const.txt
  [../]

  [./const_ref]
    type = ParsedFunction
    value = &#x27;
            ix := if(x &lt; 0.5, 0, if(x &lt; 1, 1, 2));
            iy := if(y &gt; 0, 2, if(y &gt; -0.5, 1, 0));
            iy * 3 + ix
            &#x27;
  [../]
[]


[Postprocessors]
  [./diff_pp]
    type = ElementIntegralVariablePostprocessor
    variable = diff
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = twoD_const
  hide = dummy
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="c6ea24fa-87ca-4d32-945b-7cf25fc2a7e1" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#d694615a-d974-4f20-97d4-1d30a25ef3aa" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#177ac529-4ac0-4d19-9b49-12315b88c105" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#c6ea24fa-87ca-4d32-945b-7cf25fc2a7e1" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>