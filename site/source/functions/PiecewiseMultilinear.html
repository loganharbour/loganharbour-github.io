<!DOCTYPE html><head><meta charset="UTF-8"><title>PiecewiseMultilinear.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="697a779e-059e-402a-8041-557d853a0029"><i class="material-icons">menu</i></a><ul class="sidenav" id="697a779e-059e-402a-8041-557d853a0029"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">functions</span><a href="#" class="breadcrumb">PiecewiseMultilinear</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="a5d25db8-e1d2-4ae3-8407-1f59d6fc76a9" data-section-level="1" data-section-text="PiecewiseMultilinear"><h1 id="piecewisemultilinear">PiecewiseMultilinear</h1><p>The <code>PiecewiseMultilinear</code> function provides the capability of multi-dimensional piecewise linear interpolation. The data is read from file provided in the <code>data_file</code> argument. Interpolation axes can be a selection of one or multiple of <code>x</code>, <code>y</code>, <code>z</code>, <code>t</code>, the number of interpolation axes is referred to as dimension of the interpolation.</p><p>Formatting instructions for the <code>data_file</code> (reproduced from <code>data_file</code> docstring): any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information. The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f(i,j,k,l) corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i&gt;<u>0 corresponding to the index along the first AXIS, j&gt;</u>0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</p><p>PiecewiseMultilinear performs linear interpolation on 1D, 2D, 3D or 4D data.  The data_file specifies the axes directions and the function values.  If a point lies outside the data range, the appropriate end value is used.</p><section class="scrollspy" id="1cbba24a-52d9-4a45-9e35-d4a504b70c07" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="1097b568-a8a2-4c8c-a8d6-965c853c89db" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">data_file</span><span class="moose-parameter-header-description">File holding data for use with PiecewiseMultiInterpolation.  Format: any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information.  The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f[i,j,k,l] corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i>=0 corresponding to the index along the first AXIS, j>=0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>FileName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>File holding data for use with PiecewiseMultiInterpolation.  Format: any empty line and any line beginning with # are ignored, all other lines are assumed to contain relevant information.  The file must begin with specification of the grid.  This is done through lines containing the keywords: AXIS X; AXIS Y; AXIS Z; or AXIS T.  Immediately following the keyword line must be a space-separated line of real numbers which define the grid along the specified axis.  These data must be monotonically increasing.  After all the axes and their grids have been specified, there must be a line that is DATA.  Following that line, function values are given in the correct order (they may be on individual lines, or be space-separated on a number of lines).  When the function is evaluated, f[i,j,k,l] corresponds to the i + j*Ni + k*Ni*Nj + l*Ni*Nj*Nk data value.  Here i>=0 corresponding to the index along the first AXIS, j>=0 corresponding to the index along the second AXIS, etc, and Ni = number of grid points along the first AXIS, etc.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="07f5867e-9cb0-475a-bfec-a1ae66453d4c" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="81f46e7b-fc9d-463b-8c7a-33f0a590f5c2" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#55507ac3-96c8-4794-8764-f8b627899ec4" class="modal-trigger">test/tests/functions/piecewise_multilinear/time.i</a></li><li><a href="#dca13b33-4e42-440f-9ce9-97ca6863a61f" class="modal-trigger">test/tests/functions/piecewise_multilinear/except1.i</a></li><li><a href="#4fe224c9-44b9-409b-8bf9-648583430254" class="modal-trigger">test/tests/functions/piecewise_multilinear/twoDa.i</a></li><li><a href="#5bc6a2c1-e2ee-4ceb-bb18-48a79b2d7236" class="modal-trigger">test/tests/functions/piecewise_multilinear/except2.i</a></li><li><a href="#f728e54b-d51e-49b2-8e2f-944312695335" class="modal-trigger">test/tests/functions/piecewise_multilinear/except5.i</a></li><li><a href="#383a373f-7018-4b88-82e0-49d42c07b366" class="modal-trigger">modules/porous_flow/examples/reservoir_model/regular_grid.i</a></li><li><a href="#c493f9e6-d6aa-44e7-9996-566984d14db8" class="modal-trigger">test/tests/functions/piecewise_multilinear/except3.i</a></li><li><a href="#14a8667e-acce-447f-8e3b-0cc3f048857a" class="modal-trigger">test/tests/functions/piecewise_multilinear/oneDa.i</a></li><li><a href="#035c3e7a-4c2f-49fa-99ab-9241f0ffeeb7" class="modal-trigger">test/tests/functions/piecewise_multilinear/oneDb.i</a></li><li><a href="#ef14fa24-8f51-4877-92dc-26d1bac17842" class="modal-trigger">test/tests/functions/piecewise_multilinear/except4.i</a></li><li><a href="#6ffc2098-1657-435d-a17d-b651c3befa59" class="modal-trigger">test/tests/functions/piecewise_multilinear/fourDa.i</a></li><li><a href="#48a6c84a-d2fd-40d4-9ba3-f49e20f21bbe" class="modal-trigger">test/tests/functions/piecewise_multilinear/twoDb.i</a></li></ul><div class="modal moose-modal" id="55507ac3-96c8-4794-8764-f8b627899ec4"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/time.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests for time-dependent data
# See [Functions] block for a description of the tests

[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = 0
  xmax = 1
  nx = 1
  ymin = 0
  ymax = 1
  ny = 1
  zmin = 0
  zmax = 1
  nz = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./time1_var]
  [../]
[]

[AuxKernels]
  [./time1_AuxK]
    type = FunctionAux
    variable = time1_var
    function = time1_fcn
  [../]
[]

[Functions]
# This increases linearly: f = t
  [./time1_fcn]
    type = PiecewiseMultilinear
    data_file = time1.txt
  [../]
  [./time1_answer]
    type = ParsedFunction
    value = t
  [../]
[]

[Postprocessors]
  [./time1_pp]
    type = NodalL2Error
    function = time1_answer
    variable = time1_var
  [../]
[]


[Executioner]
  type = Transient
  dt = 0.1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = time
  hide = dummy
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dca13b33-4e42-440f-9ce9-97ca6863a61f"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/except1.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function exception test
# Data file does not exist

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_auxK]
    type = FunctionAux
    variable = f
    function = except1_fcn
  [../]
[]


[Functions]
  [./except1_fcn]
    type = PiecewiseMultilinear
    data_file = except1.txt
  [../]
[]


[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = except1
  hide = dummy
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4fe224c9-44b9-409b-8bf9-648583430254"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/twoDa.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests in 2D
# See [Functions] block for a description of the tests
# The functions are compared with ParsedFunctions using postprocessors

[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 1
  nx = 6
  ymin = 0
  ymax = 1
  ny = 6
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./bilinear1_var]
  [../]
[]

[AuxKernels]
  [./bilinear1_AuxK]
    type = FunctionAux
    variable = bilinear1_var
    function = bilinear1_fcn
  [../]
[]


[Functions]
# This is just f = 1 + 2x + 3y
  [./bilinear1_fcn]
    type = PiecewiseMultilinear
    data_file = twoD1.txt
  [../]
  [./bilinear1_answer]
    type = ParsedFunction
    value = 1+2*x+3*y
  [../]
[]

[Postprocessors]
  [./bilinear1_pp]
    type = NodalL2Error
    function = bilinear1_answer
    variable = bilinear1_var
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = twoDa
  hide = dummy
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bc6a2c1-e2ee-4ceb-bb18-48a79b2d7236"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/except2.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function exception test
# Grid is not monotonic

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_auxK]
    type = FunctionAux
    variable = f
    function = except1_fcn
  [../]
[]


[Functions]
  [./except1_fcn]
    type = PiecewiseMultilinear
    data_file = except2.txt
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  hide = dummy
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f728e54b-d51e-49b2-8e2f-944312695335"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/except5.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function exception test
# No valid AXIS lines in the data_file

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_auxK]
    type = FunctionAux
    variable = f
    function = except5_fcn
  [../]
[]


[Functions]
  [./except5_fcn]
    type = PiecewiseMultilinear
    data_file = except5.txt
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  hide = dummy
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="383a373f-7018-4b88-82e0-49d42c07b366"><div class="modal-content"><h4>modules/porous_flow/examples/reservoir_model/regular_grid.i</h4><pre class="moose-pre"><code class="language-text"># SPE 10 comparative problem - model 1
# Data and description from https://www.spe.org/web/csp/datasets/set01.htm
# Simple input file that just establishes gravity equilibrium in the model
#
# Heterogeneous permeability is included by reading data from an external file
# using the PiecewiseMultilinear function, and saving that data to an elemental
# AuxVariable that is then used in PorousFlowPermeabilityConstFromVar

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 20
  xmax = 762
  ymax = 15.24
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 -9.81 0&#x27;
  temperature_unit = Celsius
[]

[Variables]
  [porepressure]
    initial_condition = 20e6
  []
[]

[Functions]
  [perm_md_fcn]
    type = PiecewiseMultilinear
    data_file = spe10_case1.data
  []
[]

[BCs]
  [top]
    type = DirichletBC
    variable = porepressure
    value = 20e6
    boundary = top
  []
[]

[AuxVariables]
  [temperature]
    initial_condition = 50
  []
  [xnacl]
    initial_condition = 0.1
  []
  [porosity]
    family = MONOMIAL
    order = CONSTANT
    initial_condition = 0.2
  []
  [perm_md]
    family = MONOMIAL
    order = CONSTANT
  []
  [perm]
    family = MONOMIAL
    order = CONSTANT
  []
[]

[Kernels]
  [mass0]
    type = PorousFlowMassTimeDerivative
    variable = porepressure
  []
  [flux0]
    type = PorousFlowFullySaturatedDarcyFlow
    variable = porepressure
  []
[]

[AuxKernels]
  [perm_md]
    type = FunctionAux
    function = perm_md_fcn
    variable = perm_md
    execute_on = initial
  []
  [perm]
    type = ParsedAux
    variable = perm
    args = perm_md
    function = &#x27;9.869233e-16*perm_md&#x27;
    execute_on = initial
  []
[]

[UserObjects]
  [dictator]
    type = PorousFlowDictator
    porous_flow_vars = porepressure
    number_fluid_phases = 1
    number_fluid_components = 1
  []
[]

[Modules]
  [FluidProperties]
    [water]
      type = Water97FluidProperties
    []
    [watertab]
      type = TabulatedFluidProperties
      fp = water
      save_file = false
    []
  []
[]

[Materials]
  [temperature]
    type = PorousFlowTemperature
    temperature = temperature
  []
  [ps]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  []
  [massfrac]
    type = PorousFlowMassFraction
  []
  [brine]
    type = PorousFlowBrine
    compute_enthalpy = false
    compute_internal_energy = false
    xnacl = xnacl
    phase = 0
    water_fp = watertab
  []
  [porosity]
    type = PorousFlowPorosityConst
    porosity = porosity
  []
  [permeability]
    type = PorousFlowPermeabilityConstFromVar
    perm_xx = perm
    perm_yy = perm
    perm_zz = perm
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1e5
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-06
  steady_state_detection = true
  steady_state_tolerance = 1e-12
  [TimeStepper]
    type = IterationAdaptiveDT
    dt = 1e2
  []
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c493f9e6-d6aa-44e7-9996-566984d14db8"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/except3.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function exception test
# Incorrect number of data points

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_auxK]
    type = FunctionAux
    variable = f
    function = except3_fcn
  [../]
[]


[Functions]
  [./except3_fcn]
    type = PiecewiseMultilinear
    data_file = except3.txt
  [../]
[]


[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  hide = dummy
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="14a8667e-acce-447f-8e3b-0cc3f048857a"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/oneDa.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests in 1D
# See [Functions] block for a description of the tests
# All tests yield variable = 1 everywhere, so they are compared using postprocessors

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 10
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./end1_var]
  [../]

  [./end2_var]
  [../]

  [./end3_var]
  [../]

  [./end4_var]
  [../]

  [./one_pt1_var]
  [../]

  [./one_pt2_var]
  [../]

  [./one_pt3_var]
  [../]

  [./other_axis1_var]
  [../]

  [./other_axis2_var]
  [../]

  [./other_axis3_var]
  [../]
[]

[AuxKernels]
  [./end1_auxK]
    type = FunctionAux
    variable = end1_var
    function = end1_fcn
  [../]

  [./end2_auxK]
    type = FunctionAux
    variable = end2_var
    function = end2_fcn
  [../]

  [./end3_auxK]
    type = FunctionAux
    variable = end3_var
    function = end3_fcn
  [../]

  [./end4_auxK]
    type = FunctionAux
    variable = end4_var
    function = end4_fcn
  [../]

  [./one_pt1_auxK]
    type = FunctionAux
    variable = one_pt1_var
    function = one_pt1_fcn
  [../]

  [./one_pt2_auxK]
    type = FunctionAux
    variable = one_pt2_var
    function = one_pt2_fcn
  [../]

  [./one_pt3_auxK]
    type = FunctionAux
    variable = one_pt3_var
    function = one_pt3_fcn
  [../]

  [./other_axis1_auxK]
    type = FunctionAux
    variable = other_axis1_var
    function = other_axis1_fcn
  [../]

  [./other_axis2_auxK]
    type = FunctionAux
    variable = other_axis2_var
    function = other_axis2_fcn
  [../]

  [./other_axis3_auxK]
    type = FunctionAux
    variable = other_axis3_var
    function = other_axis3_fcn
  [../]
[]


[Functions]
# The result (which is unity) that all the functions should yield
  [./answer_fcn]
    type = ConstantFunction
    value = 1
  [../]

# Function that is 1 for all x&gt;=0, due to data only being defined on x&lt;0
  [./end1_fcn]
    type = PiecewiseMultilinear
    data_file = end1.txt
  [../]

# Function that is 1 for all x&gt;=0, due to data only being defined on x&lt;=0
  [./end2_fcn]
    type = PiecewiseMultilinear
    data_file = end2.txt
  [../]

# Function that is 1 for all x&lt;=2, due to data only being defined on x&gt;2
  [./end3_fcn]
    type = PiecewiseMultilinear
    data_file = end3.txt
  [../]

# Function that is 1 for all x&lt;=2, due to data only being defined on x&gt;=2
  [./end4_fcn]
    type = PiecewiseMultilinear
    data_file = end4.txt
  [../]

# Function that is 1 for all x, due to only one point being defined on X at x=2
  [./one_pt1_fcn]
    type = PiecewiseMultilinear
    data_file = one_pt1.txt
  [../]

# Function that is 1 for all x, due to only one point being defined on X at x=1
  [./one_pt2_fcn]
    type = PiecewiseMultilinear
    data_file = one_pt2.txt
  [../]

# Function that is 1 for all x, due to only one point being defined on X at x=-1
  [./one_pt3_fcn]
    type = PiecewiseMultilinear
    data_file = one_pt3.txt
  [../]

# Function that is 1 for all x, and data is defined on Y axis only
  [./other_axis1_fcn]
    type = PiecewiseMultilinear
    data_file = other_axis1.txt
  [../]

# Function that is 1 for all x, and data is defined on T axis only for t&gt;=1
  [./other_axis2_fcn]
    type = PiecewiseMultilinear
    data_file = other_axis2.txt
  [../]

# Function that is 1 for all x, and data that is unity and defined on T axis for -1&lt;=t&lt;=1
  [./other_axis3_fcn]
    type = PiecewiseMultilinear
    data_file = other_axis3.txt
  [../]
[]

[Postprocessors]
  [./end1_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = end1_var
  [../]
  [./end2_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = end2_var
  [../]
  [./end3_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = end3_var
  [../]
  [./one_pt1_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = one_pt1_var
  [../]
  [./one_pt2_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = one_pt2_var
  [../]
  [./one_pt3_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = one_pt3_var
  [../]
  [./other_axis1_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = other_axis1_var
  [../]
  [./other_axis2_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = other_axis2_var
  [../]
  [./other_axis3_pp]
    type = NodalL2Error
    function = answer_fcn
    variable = other_axis3_var
  [../]
[]

[Executioner]
  type = Transient
  dt = 0.5
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = oneDa
  hide = dummy
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="035c3e7a-4c2f-49fa-99ab-9241f0ffeeb7"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/oneDb.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests in 1D
# See [Functions] block for a description of the tests
# The functions are compared with ParsedFunctions using postprocessors

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 10
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./linear1_var]
  [../]
  [./linear2_var]
  [../]
[]

[AuxKernels]
  [./linear1_AuxK]
    type = FunctionAux
    variable = linear1_var
    function = linear1_fcn
  [../]
  [./linear2_AuxK]
    type = FunctionAux
    variable = linear2_var
    function = linear2_fcn
  [../]
[]


[Functions]
# This is just f = x
  [./linear1_fcn]
    type = PiecewiseMultilinear
    data_file = linear1.txt
  [../]
  [./linear1_answer]
    type = ParsedFunction
    value = x
  [../]

# This is a hat function
  [./linear2_fcn]
    type = PiecewiseMultilinear
    data_file = linear2.txt
  [../]
  [./linear2_answer]
    type = ParsedFunction
    value = min(x,1)+min(2-x,1)-1
  [../]

[]

[Postprocessors]
  [./linear1_pp]
    type = NodalL2Error
    function = linear1_answer
    variable = linear1_var
  [../]
  [./linear2_pp]
    type = NodalL2Error
    function = linear2_answer
    variable = linear2_var
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = oneDb
  hide = dummy
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ef14fa24-8f51-4877-92dc-26d1bac17842"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/except4.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function exception test
# AXIS X encountered more than once

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmin = 0
  xmax = 2
  nx = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_auxK]
    type = FunctionAux
    variable = f
    function = except4_fcn
  [../]
[]


[Functions]
  [./except4_fcn]
    type = PiecewiseMultilinear
    data_file = except4.txt
  [../]
[]

[Executioner]
  type = Transient
  dt = 1
  end_time = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  hide = dummy
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6ffc2098-1657-435d-a17d-b651c3befa59"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/fourDa.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function test in 3D with function depending on time
#
# This test uses a function on the unit cube.
# For t&lt;=3 the function is unity at (x,y,z)=(0,0,0) and zero elsewhere
# For t&gt;=7 the function is unity at (x,y,z)=(1,1,1) and zero elsewhere

[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = 0
  xmax = 1
  nx = 2
  ymin = 0
  ymax = 1
  ny = 2
  zmin = 0
  zmax = 1
  nz = 2
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_kernel]
    type = TimeDerivative
    variable = dummy
  [../]
[]

[AuxVariables]
  [./f]
  [../]
[]

[AuxKernels]
  [./f_AuxK]
    type = FunctionAux
    function = fourDa
    variable = f
  [../]
[]

[Functions]
  [./fourDa]
    type = PiecewiseMultilinear
    data_file = fourDa.txt
  [../]
[]


[Executioner]
  type = Transient
  dt = 1
  end_time = 10
[]

[Outputs]
  file_base = fourDa
  exodus = true
  hide = dummy
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="48a6c84a-d2fd-40d4-9ba3-f49e20f21bbe"><div class="modal-content"><h4>test/tests/functions/piecewise_multilinear/twoDb.i</h4><pre class="moose-pre"><code class="language-text"># PiecewiseMultilinear function tests in 2D
# The spatial grid is 1&lt;=x&lt;=5 and 1&lt;=y&lt;=5
# At t&lt;=1 a disk of radius 0.5 sits at (x,y)=(1.45,1.45): it has f=1.  Elsewhere f=0
# At t&gt;=0 a disk of radius 0.5 sits at (x,y)=(4,55,4,55): it has f=1.  Elsewhere f=0
# The disks&#x27; centers were chosen specially so that the disk partially sits outside the grid
# which illustrates the extrapolation process used by GriddedData and PiecewiseMultilinear
[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 6
  nx = 60
  ymin = 0
  ymax = 6
  ny = 60
[]

[Variables]
  [./dummy]
  [../]
[]

[Kernels]
  [./dummy_u]
    type = TimeDerivative
    variable = dummy
  [../]
[]


[AuxVariables]
  [./moving_disk_var]
  [../]
[]

[AuxKernels]
  [./moving_disk_AuxK]
    type = FunctionAux
    variable = moving_disk_var
    function = moving_disk_fcn
  [../]
[]


[Functions]
  [./moving_disk_fcn]
    type = PiecewiseMultilinear
    data_file = twoD2.txt
  [../]
[]


[Executioner]
  type = Transient
  dt = 0.5
  end_time = 10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = twoDb
  hide = dummy
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="67ff4ec3-c383-42fd-b5d9-04d020dbaa53" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#1cbba24a-52d9-4a45-9e35-d4a504b70c07" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#81f46e7b-fc9d-463b-8c7a-33f0a590f5c2" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#67ff4ec3-c383-42fd-b5d9-04d020dbaa53" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>