<!DOCTYPE html><head><meta charset="UTF-8"><title>RandomIC.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="f3b20f2b-23f8-4c36-be06-2c5c5d33213f"><i class="material-icons">menu</i></a><ul class="sidenav" id="f3b20f2b-23f8-4c36-be06-2c5c5d33213f"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">ics</span><a href="#" class="breadcrumb">RandomIC</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="7cf02881-02cd-4759-99c5-a6e1dd41a167" data-section-level="1" data-section-text="RandomIC"><h1 id="randomic">RandomIC</h1><p>RandomIC initializes a variable using randomly generated numbers. These can either follow a uniform distribution over a user-defined range (using the <code>min</code> and <code>max</code> parameters), or follow an arbitrary distribution defined by a <code>Distribution</code> object specified using the <code>distribution</code> parameter.  An initial seed value may be set with the &quot;seed&quot; parameter. The RandomIC object produces a parallel agnostic random field.</p><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p></p></div></div></div><section class="scrollspy" id="4c76f0a6-416e-4b6c-b95c-9f23289a9091" data-section-level="2" data-section-text="Class Description"><h2 id="class-description">Class Description</h2><p>Initialize a variable with randomly generated numbers following either a uniform distribution or a user-defined distribution</p></section><section class="scrollspy" id="a93d7eb7-d622-4a31-9f6b-85bc08bd18af" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="2eef44f9-42a8-47a8-9f93-4141d79e7667" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The variable this initial condition is supposed to provide values for.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>VariableName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The variable this initial condition is supposed to provide values for.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="2fb98805-8b3d-453d-b78c-2129f24a78a1" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">The list of block ids (SubdomainID) that this object will be applied</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<SubdomainName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of block ids (SubdomainID) that this object will be applied</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">distribution</span><span class="moose-parameter-header-description">Name of distribution defining distribution of randomly generated values</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>DistributionName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Name of distribution defining distribution of randomly generated values</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">legacy_generator</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Determines whether or not the legacy generator (deprecated) should be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether or not the legacy generator (deprecated) should be used.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">max</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">Upper bound of uniformly distributed randomly generated values</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Upper bound of uniformly distributed randomly generated values</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">min</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Lower bound of uniformly distributed randomly generated values</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Lower bound of uniformly distributed randomly generated values</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">Seed value for the random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Seed value for the random number generator</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="012b5e27-04bd-4dbc-921e-f20c3ef9990d" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">ignore_uo_dependency</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">When set to true, a UserObject retrieved by this IC will not be executed before the this IC</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>When set to true, a UserObject retrieved by this IC will not be executed before the this IC</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="94f04a2f-0930-4ba9-b655-ec822e14b015" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#84df643c-41cd-4c4e-9ed6-6ef061ff6792" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01b.i</a></li><li><a href="#81799cf4-5b86-43d5-a087-d2b112522566" class="modal-trigger">test/tests/materials/derivative_sum_material/random_ic.i</a></li><li><a href="#8f334cef-03fa-4ddf-b714-194710c690d7" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass06.i</a></li><li><a href="#0f77e627-ea37-48b9-a1fd-b2ad1ae89d0f" class="modal-trigger">modules/phase_field/examples/cahn-hilliard/Math_CH.i</a></li><li><a href="#0021d5bb-9eb6-4d80-b483-134515ae01a3" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_02.i</a></li><li><a href="#5285e0a0-f01e-447f-b1a6-b056e5af8cd7" class="modal-trigger">modules/porous_flow/test/tests/jacobian/denergy03.i</a></li><li><a href="#bac0233b-8ef9-4202-b0a6-16057a4efed7" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/primary_convection.i</a></li><li><a href="#c072153d-9976-4542-8017-b62beb261f50" class="modal-trigger">modules/richards/test/tests/darcy/ss.i</a></li><li><a href="#5cae20eb-11e5-4317-98b2-40f1b6312a31" class="modal-trigger">modules/phase_field/tutorials/spinodal_decomposition/s3_decomp.i</a></li><li><a href="#ef4ba6cf-d4a6-4e15-9574-4754b864ee66" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh13.i</a></li><li><a href="#06e085bd-8fca-4a7e-8d72-6894f515ee5d" class="modal-trigger">test/tests/kernels/jxw_grad_test_dep_on_displacements/jxw-cylindrical.i</a></li><li><a href="#32e70539-4cd2-4a58-9545-07a78c265dd4" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cwp01.i</a></li><li><a href="#eab4f93e-128e-47ea-9486-8799c881427d" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux11.i</a></li><li><a href="#afe16170-8ca1-4dab-a4ac-95e1b98e15b4" class="modal-trigger">modules/combined/test/tests/poro_mechanics/jacobian1.i</a></li><li><a href="#948ced59-9e08-4b57-9c07-d9c4cdc1042c" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_liquid_2.i</a></li><li><a href="#2d1fc85c-3ca2-47af-8c1b-44b802222cfa" class="modal-trigger">modules/porous_flow/test/tests/jacobian/heat_vol_exp01.i</a></li><li><a href="#a13c88a5-7102-4bc4-b1e5-478b887ced3f" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</a></li><li><a href="#46f1fcc6-eeb7-4e46-8db3-502c9d4052af" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_02.i</a></li><li><a href="#848d1fed-592e-490c-99ff-9223973247d4" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection2.i</a></li><li><a href="#0c8d594b-b9a4-42ce-9fdd-70fbad03c145" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection5.i</a></li><li><a href="#de8de8e6-bcd7-4c4b-aeb9-29ff41bdb994" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</a></li><li><a href="#6a0100a9-d1fa-4762-9b9f-d7d2d661e789" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCEnergyDensity/auxkernel.i</a></li><li><a href="#988984fb-3446-4a76-ba21-db31823aa609" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux07.i</a></li><li><a href="#e219071d-b356-457a-acfa-dac1ddefae56" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper1.i</a></li><li><a href="#632da586-5736-467f-b60f-122fde662c23" class="modal-trigger">python/chigger/tests/simple/mug_blocks.i</a></li><li><a href="#474c0ffb-17fb-4f6b-944d-e4b8f86e6cfd" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_convreact2.i</a></li><li><a href="#37a8d67a-8447-48c8-aacc-3cb4d910f641" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/langmuir_jac_ad.i</a></li><li><a href="#25afbf6c-5c02-4276-9400-81aea4c6c313" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_01.i</a></li><li><a href="#92d9d1d4-2bfe-4848-b107-2a12696f560e" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCTrad/PFCTrad_test.i</a></li><li><a href="#1416b500-3def-4d87-ba5c-d5fed7454757" class="modal-trigger">modules/porous_flow/test/tests/jacobian/eff_stress01.i</a></li><li><a href="#06814ba1-1d13-4520-9cfd-14c67bb9dec7" class="modal-trigger">modules/phase_field/tutorials/spinodal_decomposition/s5_energycurve.i</a></li><li><a href="#3a32a4a7-5332-4a9b-ad64-d891706394b6" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_ad2.i</a></li><li><a href="#664526bc-6711-46b9-8731-86d2d2f60474" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_ad.i</a></li><li><a href="#b1dc8d86-608e-448e-b0dd-969e8f34ee5c" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_30.i</a></li><li><a href="#4513f5ef-1ef8-4a24-abeb-3d038dcf919c" class="modal-trigger">modules/phase_field/examples/cahn-hilliard/Parsed_CH.i</a></li><li><a href="#0055a1dc-d7f9-4a67-81ac-5bea41d7ab29" class="modal-trigger">modules/porous_flow/test/tests/jacobian/pls03.i</a></li><li><a href="#df7cf415-3fac-4daa-8f50-de26680d7080" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn16.i</a></li><li><a href="#3c091cb2-bbf8-4f39-8f1b-6a9378d80c5d" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn08.i</a></li><li><a href="#0c3e7298-fe36-4a0c-88f4-f55f89cf4108" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_01.i</a></li><li><a href="#c25a06ee-d783-4fad-b9db-29cf5e51fb99" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCRFF_split/PFCRFF_split_test_master.i</a></li><li><a href="#fbb3aec5-6ddb-478e-925e-da922792cb84" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn18.i</a></li><li><a href="#9591f38f-52a6-4d88-9df7-094df80e6099" class="modal-trigger">modules/porous_flow/examples/lava_lamp/2phase_convection.i</a></li><li><a href="#009a2083-f5dd-44f5-bf35-94678f834b5a" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn07.i</a></li><li><a href="#6a152bc4-8247-4915-b374-eecb04c996bc" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn10.i</a></li><li><a href="#64d095c1-0afe-4ec9-ac4b-5835b07a5730" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh02.i</a></li><li><a href="#99f1dd4f-3e97-41a2-aa89-404ea8c012ab" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn03.i</a></li><li><a href="#86e64a8b-50df-43ce-b515-b10466c19d62" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_gas.i</a></li><li><a href="#482f2784-a668-47cf-ae78-3a60e98ac227" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn05.i</a></li><li><a href="#26df6f40-9c95-4961-b0b8-f6c1898f5d7c" class="modal-trigger">modules/richards/test/tests/jacobian_2/jnQ2P.i</a></li><li><a href="#c4e9ee14-eafd-47d1-99cd-be9debb3cfcc" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random2.i</a></li><li><a href="#a19ee83f-0535-42b8-a04e-db1d896095c2" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_twophase_nonisothermal.i</a></li><li><a href="#bd7a2a80-8f86-47e6-9629-3c492639a467" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/random_hyperbolic.i</a></li><li><a href="#dd573976-e780-4270-acce-c3891686cd16" class="modal-trigger">modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_stabilized_test.i</a></li><li><a href="#ef580d81-e89e-4f73-b4c7-deb2e05a4f5a" class="modal-trigger">modules/combined/examples/phase_field-mechanics/Pattern1.i</a></li><li><a href="#86562ff5-47dd-4c5d-a9b6-25c93d283205" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh_fu_05.i</a></li><li><a href="#85b15cf9-eee1-4f80-972c-5bbf2deb099c" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn17.i</a></li><li><a href="#c9412dfd-b8dd-4129-ba40-2a31cbc8aa00" class="modal-trigger">test/tests/userobjects/shape_element_user_object/shape_side_uo_jac_test.i</a></li><li><a href="#8b261133-e733-4f2e-8af7-3a1ea5c76b4c" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh07.i</a></li><li><a href="#834287d8-e082-4f7c-9e97-ae92218b9333" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn02.i</a></li><li><a href="#6e1a8655-addf-4f31-8367-7620cc06e765" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_16.i</a></li><li><a href="#366f23f0-771f-4466-b34e-4e075bea9569" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_20.i</a></li><li><a href="#e4dac33a-908c-4a4b-bd53-d29aaa3fbbb9" class="modal-trigger">modules/combined/test/tests/chemical_reactions_richards/langmuir_jac3.i</a></li><li><a href="#0434b098-bffd-45c2-afd7-42f6a9b142ac" class="modal-trigger">modules/porous_flow/test/tests/jacobian/disp01.i</a></li><li><a href="#64530cbc-b829-47a7-b7c1-f96dd5ee86c8" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_04.i</a></li><li><a href="#4318c264-8c9a-4496-9f29-d564c96ea3f3" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_02.i</a></li><li><a href="#5851dcfc-dcd7-4834-a025-3ea6974dcf6b" class="modal-trigger">modules/phase_field/examples/nucleation/cahn_hilliard.i</a></li><li><a href="#8738f3b5-c1e5-4e85-a432-b25372cb963e" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/2species_equilibrium.i</a></li><li><a href="#4b8358a4-10d1-49a1-8a74-a16376c32cde" class="modal-trigger">modules/richards/test/tests/jacobian_2/jnQ2P_bh2.i</a></li><li><a href="#58a2da9b-4a51-459c-83ca-92a1058ab99f" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_planar.i</a></li><li><a href="#9cd9240f-d5fd-4fa8-81a4-1d9f8f5976a9" class="modal-trigger">modules/porous_flow/test/tests/jacobian/diff02.i</a></li><li><a href="#74b26595-40e1-4112-84ff-12d411fdfd5c" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_linear_elasticity/linear_elastic_material.i</a></li><li><a href="#6478d9f0-c927-40a2-a5b6-837772129d08" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh06.i</a></li><li><a href="#f32fce0d-646f-4148-b9ef-7f7115ffb394" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_05.i</a></li><li><a href="#317eb822-9830-4d82-a906-bd6925c42063" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto02.i</a></li><li><a href="#c3e4b34e-3af4-419d-8991-4e27b2dbe183" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCTrad/pfct_newton_split1_asm1_10.i</a></li><li><a href="#0ffe3c3d-e667-42a6-8bc6-e2e1b9fac8fb" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_01.i</a></li><li><a href="#269bf5f2-0637-4c4f-b456-2c835464032e" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh03.i</a></li><li><a href="#e4b82a6f-2020-489e-9477-ba1f867c9f44" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn04.i</a></li><li><a href="#01141de6-2103-4cea-9f50-aeec5a28b934" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh03.i</a></li><li><a href="#63f88fa9-c94d-4a77-b80c-eb357c18076c" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux13.i</a></li><li><a href="#93fc61b9-f2bf-4c3f-9ca9-335fc546d2e1" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_twophase_nonisothermal.i</a></li><li><a href="#4c91d181-66c1-4ad7-8d67-edd50b53405e" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass04.i</a></li><li><a href="#27ab3374-aef8-4765-b754-3fa2f5ab3a54" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_gas.i</a></li><li><a href="#e7674df7-e87b-4b8b-afc0-d8553cf123d0" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random5.i</a></li><li><a href="#096b9df8-6f82-416f-b5c7-61fff4dbe0a9" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_22.i</a></li><li><a href="#bd14b6ac-2d6b-4078-bf9b-ebec52c1ff5b" class="modal-trigger">modules/combined/examples/mortar/eigenstrain_action.i</a></li><li><a href="#9631856d-0c47-4c57-993c-8f68c591a34e" class="modal-trigger">modules/porous_flow/test/tests/jacobian/diff03.i</a></li><li><a href="#f26cde5f-21cd-4d66-87a0-e88dbc92a744" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn07.i</a></li><li><a href="#1854b27d-8124-4c92-938f-2777585add85" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_tolerance_test.i</a></li><li><a href="#f1a5f912-5d52-4109-a7a9-2f7797d5dc43" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_twophase.i</a></li><li><a href="#20e1e43e-4f06-494f-8a69-874481aa4944" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/inertial_torque.i</a></li><li><a href="#bbed31b3-e769-4916-8b54-ee28d69ce598" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</a></li><li><a href="#d3d3a86b-f4f2-4b54-aa98-fc34156d32f9" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh10.i</a></li><li><a href="#3b84e464-cbd5-4cef-8877-3e7cc741f491" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn14.i</a></li><li><a href="#9d37383d-855e-412e-97e0-741f78053c24" class="modal-trigger">modules/porous_flow/test/tests/jacobian/pls04.i</a></li><li><a href="#1f7c135b-4696-4a0f-a9ab-f6a198381fc7" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh04.i</a></li><li><a href="#61405242-7c33-4b32-8992-c6885dcf0f4a" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_03.i</a></li><li><a href="#c36d9da5-227d-430d-96f4-1082c743ef9d" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_03.i</a></li><li><a href="#2d6522d7-d4f2-4498-a964-1d72878c369e" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh01.i</a></li><li><a href="#bf4cd5f9-e84a-4373-a0db-171d1bc1aac7" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass_vol_exp01.i</a></li><li><a href="#a3ca541b-be7f-4ad0-a571-65325f3b563a" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/langmuir_jac_de.i</a></li><li><a href="#069934f4-d878-4884-9b9f-bf9bceee709e" class="modal-trigger">modules/porous_flow/test/tests/jacobian/hcs02.i</a></li><li><a href="#b856f498-545a-4093-8f89-0a374d813d08" class="modal-trigger">test/tests/materials/derivative_sum_material/ad_random_ic.i</a></li><li><a href="#8ab08e47-191d-49d8-bb3b-60a3fc65aa7b" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_07.i</a></li><li><a href="#e187ec00-d6f1-4a0e-b99a-d59ce4dcf63d" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn21.i</a></li><li><a href="#a5c5fe8c-3055-4110-833d-b5c302d6595f" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn22.i</a></li><li><a href="#a8315589-191a-4615-b89e-e9584d6fff26" class="modal-trigger">test/tests/ics/random_ic_test/random_ic_test.i</a></li><li><a href="#36d171b9-72e1-4d76-892a-90605cbaef38" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01a.i</a></li><li><a href="#894edd8c-61eb-41df-9ed1-b7ba6e8afd59" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/2species_equilibrium_with_density.i</a></li><li><a href="#743f71a6-5e29-4215-9e0c-0612c14bc8c0" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn01.i</a></li><li><a href="#3756fe75-44da-4758-a239-af82ce2f9aa1" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_06.i</a></li><li><a href="#d687c301-d741-4ce6-9248-c1b5b235c0f1" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/langmuir_jac2.i</a></li><li><a href="#479b9343-47cc-464b-8dd1-a3534591315f" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/random.i</a></li><li><a href="#c13bd58b-a3fd-4c34-b962-afa3960dfed4" class="modal-trigger">modules/porous_flow/test/tests/jacobian/line_sink03.i</a></li><li><a href="#2fd40bac-42e4-4f32-a7dc-7fe106bba92f" class="modal-trigger">modules/porous_flow/test/tests/jacobian/desorped_mass_vol_exp01.i</a></li><li><a href="#376847ed-cfe0-4629-a319-ca010d3237ad" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto01.i</a></li><li><a href="#5ad06857-83c6-43da-b38c-a30045d10c96" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn21.i</a></li><li><a href="#05475e51-2246-4d40-94ce-fb8c4411112e" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh08.i</a></li><li><a href="#d81d2fd5-ba08-4b11-9269-acdd814e0723" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</a></li><li><a href="#cdad390b-38c5-483d-9654-ea7e0a6fc527" class="modal-trigger">modules/porous_flow/test/tests/jacobian/disp02.i</a></li><li><a href="#6a4ba7e9-3056-4eb0-ab12-fba0cc797d36" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn22.i</a></li><li><a href="#69b06d61-0e50-4666-a42d-a8032e23dba8" class="modal-trigger">modules/porous_flow/test/tests/jacobian/desorped_mass01.i</a></li><li><a href="#cd314464-7ddb-404f-a293-9b46a02e2691" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_diffreact.i</a></li><li><a href="#6a03b4b1-dcf0-4897-9c4f-fa35046c09ce" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01a.i</a></li><li><a href="#9c4dd61a-5e26-48be-bff8-8502f4e95204" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_diffreact2.i</a></li><li><a href="#682c80b8-d397-459c-a1e7-9481f7bf7c2a" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random4.i</a></li><li><a href="#9ca3cb67-68e2-4b6b-b8c6-72954cec0484" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random1.i</a></li><li><a href="#23d1dc8f-5300-4454-964e-95e4e355fdd4" class="modal-trigger">modules/porous_flow/test/tests/jacobian/heat_advection01_fully_saturated.i</a></li><li><a href="#650445b4-2a5f-4449-829f-6c508c557194" class="modal-trigger">test/tests/kernels/jxw_grad_test_dep_on_displacements/not-handling-jxw.i</a></li><li><a href="#607f17de-444c-43f9-877e-e2f6a0d171a2" class="modal-trigger">modules/combined/examples/mortar/eigenstrain.i</a></li><li><a href="#32ec605b-1dc7-4b63-ab25-e8c05aa907df" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_expansion_test.i</a></li><li><a href="#b218b029-cf9d-4eeb-8d66-db25da556b29" class="modal-trigger">test/tests/preconditioners/fdp/fdp_test.i</a></li><li><a href="#b152d611-a248-469a-a145-3a69764b2431" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_lumped_08.i</a></li><li><a href="#ffd539a1-58ee-4cb5-8a38-4bddbced74c0" class="modal-trigger">modules/porous_flow/test/tests/heterogeneous_materials/constant_poroperm2.i</a></li><li><a href="#5f30d36e-5d28-41ad-a50e-8d2feb3c3790" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_10.i</a></li><li><a href="#346fb946-60a6-43e0-9b2f-c98e968e18b4" class="modal-trigger">modules/porous_flow/test/tests/jacobian/denergy01.i</a></li><li><a href="#e478a2b7-7b70-4383-853b-6831474a8d71" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh14.i</a></li><li><a href="#42da221c-4eee-49b7-a71f-a9ccdcdc5469" class="modal-trigger">modules/porous_flow/test/tests/jacobian/eff_stress02.i</a></li><li><a href="#57e41b30-2f71-4f63-a5e7-1381c85c054c" class="modal-trigger">modules/porous_flow/test/tests/jacobian/hcond01.i</a></li><li><a href="#c5802206-f403-4545-ac17-2a815526bc26" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux03.i</a></li><li><a href="#b40ca142-3c7a-4afb-a588-e05f9f1c49cc" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn31.i</a></li><li><a href="#7fe68ee6-f64a-4310-8750-b8b2066cbdaf" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux06.i</a></li><li><a href="#6487ef6c-3906-4f8b-87ba-a7289dbd4601" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass_vol_exp02.i</a></li><li><a href="#36e798e8-633f-45e6-9aa3-4ecc33f89932" class="modal-trigger">modules/porous_flow/test/tests/jacobian/heat_advection02.i</a></li><li><a href="#d7a0a9d0-1043-484f-b894-0a985738a8e5" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass09.i</a></li><li><a href="#e2baf6a3-cfc5-4c13-852e-fdcdbae54c56" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_06.i</a></li><li><a href="#11bd68a9-5f3c-4a91-b326-565890105dda" class="modal-trigger">test/tests/kernels/conservative_advection/no_upwinding_jacobian.i</a></li><li><a href="#84c6e7ac-b882-4693-a8d8-c5ec3e88111c" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCTrad/pfct_newton_split1_asm5.i</a></li><li><a href="#ccb7ce04-c99a-4afc-800b-1796285851c0" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux12.i</a></li><li><a href="#5bc3a0ba-8897-45eb-8b2f-ef4e61b4ac84" class="modal-trigger">modules/combined/test/tests/thermal_elastic/derivatives.i</a></li><li><a href="#f7ec45d3-83c5-48a8-b1d0-847bbbbdd674" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass03.i</a></li><li><a href="#1ee5c1e0-9f1d-4140-91cb-9fd16f550bfc" class="modal-trigger">python/chigger/tests/input/mug_blocks.i</a></li><li><a href="#603a78aa-c60a-43c3-8ea5-f7e82d1b95ff" class="modal-trigger">modules/combined/test/tests/linear_elasticity/tensor.i</a></li><li><a href="#f7672bb6-c5ba-48e5-ba67-5ef76c0a0f61" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_12.i</a></li><li><a href="#126ce6c6-8044-442a-bc70-22b71f6699f5" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_02.i</a></li><li><a href="#7b5e1d54-c5c4-4e63-9b4f-fa65a83e03c6" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/poro01.i</a></li><li><a href="#a9a83891-9388-47e1-a6d0-d12b02727b3f" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn13.i</a></li><li><a href="#903963d0-4b7b-4b75-b94d-11c9111ff5cd" class="modal-trigger">modules/porous_flow/test/tests/jacobian/heat_advection01.i</a></li><li><a href="#c2930b19-8e82-41f1-af40-02b97b9bc4d2" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_01.i</a></li><li><a href="#45c77258-c87c-4418-85e1-f16823785af9" class="modal-trigger">modules/porous_flow/test/tests/jacobian/phe01.i</a></li><li><a href="#676c9222-7038-4c20-b5e8-525a5ad7446b" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_equilsub2.i</a></li><li><a href="#eb3305f8-930a-440f-849f-6f4737672951" class="modal-trigger">modules/porous_flow/test/tests/jacobian/pls02.i</a></li><li><a href="#28a847ea-7d0f-4cb8-b884-20bed8514385" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection3.i</a></li><li><a href="#e42367a9-bfd4-473d-a158-033cbd7f3a09" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh_lumped_07.i</a></li><li><a href="#5d1b4f7a-c5ea-4b50-9e12-a257cf5f8416" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn01.i</a></li><li><a href="#4d8d30a6-bff4-48ad-b0a7-2b30c7f7c92f" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper3.i</a></li><li><a href="#35ac4bc8-1e65-4cec-8654-21629b8b0e4d" class="modal-trigger">modules/porous_flow/test/tests/jacobian/pls01.i</a></li><li><a href="#0ec01129-e27f-434e-9278-e2a843218997" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/rock1.i</a></li><li><a href="#831c726c-9c83-41f0-8018-758654e314d0" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_fu_18.i</a></li><li><a href="#7bc9eb11-5953-465c-b958-d7d066e825dd" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh05.i</a></li><li><a href="#9ca0ee6b-190d-4b87-9e0e-3948392795d3" class="modal-trigger">modules/combined/test/tests/linear_elasticity/linear_elastic_material.i</a></li><li><a href="#e3a2d304-a70a-46c0-a293-ba80c278be40" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_linear_elasticity/tensor.i</a></li><li><a href="#951a8920-f9f3-4b63-9dc5-df4ea31a7ff3" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random3.i</a></li><li><a href="#1d04cf40-1f2a-4f4e-bb93-84e85bcf5a09" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn30.i</a></li><li><a href="#7f5863af-5ca3-4118-a13e-3c190e4db51c" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh05.i</a></li><li><a href="#c7a134a2-3e6f-4eed-9016-de677d33d682" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn38.i</a></li><li><a href="#dfb4fbdc-739b-4cba-849e-ef0fa6a02466" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_liquid.i</a></li><li><a href="#c29d8e49-21ec-4c2c-8127-edb7b804c6e6" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn40.i</a></li><li><a href="#713c840a-ae75-4121-a341-96465dfb33d3" class="modal-trigger">test/tests/dgkernels/jacobian_testing/coupled_dg_jac_test.i</a></li><li><a href="#29b50080-4542-4ad6-bb41-fa854de06b4c" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01d.i</a></li><li><a href="#aa83332b-f9f6-47e4-b6d2-8d5700621243" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn03.i</a></li><li><a href="#52aff1f3-ca0d-4748-8e73-70c1bfe904f5" class="modal-trigger">modules/porous_flow/test/tests/jacobian/line_sink02.i</a></li><li><a href="#12f6be86-313b-4fc9-afc2-e054f016de0b" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01c.i</a></li><li><a href="#38743a9d-fb92-4e4f-86d4-8fb2c1f9310f" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass07.i</a></li><li><a href="#539100ad-47a4-4265-9b31-6041f25e788b" class="modal-trigger">modules/porous_flow/test/tests/jacobian/line_sink04.i</a></li><li><a href="#43e57ca4-18ad-4145-a205-990035781355" class="modal-trigger">modules/porous_flow/test/tests/jacobian/denergy04.i</a></li><li><a href="#5ee94e75-9ddc-4f64-a0bb-aeaa49747e67" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass05.i</a></li><li><a href="#ad83ee4d-86d2-4f09-88fe-0a8ae96dda76" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_convreact.i</a></li><li><a href="#1441dcd7-9668-4377-b8e1-5f195d46673e" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn02.i</a></li><li><a href="#ea4812bf-bcb2-4360-a7ac-e93992af7c35" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn06.i</a></li><li><a href="#5b707e2c-ba1c-40d4-a4bd-0b1732b25554" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_04.i</a></li><li><a href="#6f499a82-8924-4b9a-9926-ed76e29b036b" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux10.i</a></li><li><a href="#6bb2e8f4-0a34-45fd-994a-0d1086586534" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux01_fully_saturated.i</a></li><li><a href="#0d0cab2c-234b-4f22-a24e-7a5c877e2fdc" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01c_action.i</a></li><li><a href="#66f0ead9-6113-4a15-b46d-02ff1fb2a337" class="modal-trigger">modules/porous_flow/test/tests/heterogeneous_materials/constant_poroperm.i</a></li><li><a href="#9e3cc22a-4552-489e-97a1-a15a44a2f771" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_de2.i</a></li><li><a href="#90e09c1e-8910-4c45-8149-2e0f7d0b3636" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn11.i</a></li><li><a href="#b540acf2-e8bf-45f7-9f07-e97cd5d06113" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn20.i</a></li><li><a href="#16d45c86-0943-4d50-9350-53081f2e2a7c" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_lumped_16.i</a></li><li><a href="#6b8ee00c-2c63-4c4b-bd30-51aee212d84d" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn_lumped_18.i</a></li><li><a href="#0767e842-d28c-4213-883f-3a608216655d" class="modal-trigger">modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_de.i</a></li><li><a href="#b21c3c38-a643-4ec3-a99d-f502a7f9f024" class="modal-trigger">modules/porous_flow/examples/lava_lamp/1phase_convection.i</a></li><li><a href="#1b8db403-3b49-45f9-a5ae-1fe3f5058bf9" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_04.i</a></li><li><a href="#609c746e-a355-4f23-8ed2-6bfce9eb03f9" class="modal-trigger">modules/porous_flow/test/tests/jacobian/exponential_decay.i</a></li><li><a href="#db1863e7-dfeb-4a1f-b195-9ef0ccdcdf19" class="modal-trigger">modules/porous_flow/test/tests/jacobian/disp03.i</a></li><li><a href="#8011c9ad-60be-4136-8303-353230367dec" class="modal-trigger">modules/porous_flow/test/tests/jacobian/denergy05.i</a></li><li><a href="#5bb150a7-3616-4ca4-be31-8249b1ac41a7" class="modal-trigger">modules/richards/test/tests/darcy/jac.i</a></li><li><a href="#f1f51526-f110-42e2-8355-d2b224259688" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto03.i</a></li><li><a href="#30b55089-2e4e-4cab-bf6c-235f497e6521" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/2species.i</a></li><li><a href="#c0880ffc-6a22-4172-9c33-b4a335fbaaaa" class="modal-trigger">modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_traction_stabilized.i</a></li><li><a href="#c6b7483d-ce56-4ca7-9be3-19632be48653" class="modal-trigger">modules/porous_flow/test/tests/jacobian/line_sink01.i</a></li><li><a href="#cbce4be3-d4f8-403b-bbdf-9a17452968c6" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_09.i</a></li><li><a href="#92da43eb-5929-4e4d-8edd-fbf85d944ede" class="modal-trigger">modules/richards/test/tests/jacobian_2/jnQ2P_bh1.i</a></li><li><a href="#c0bf41fe-1334-4d5e-89b5-fb7c72041edf" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01b.i</a></li><li><a href="#301ab987-4d7c-4cd6-9866-789e8e40bcb4" class="modal-trigger">modules/phase_field/examples/cahn-hilliard/Parsed_SplitCH.i</a></li><li><a href="#5c5da6c6-318f-4d12-a733-3affa75bc4f1" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh15.i</a></li><li><a href="#b4399fef-72d1-460b-b003-0de6abb7ea74" class="modal-trigger">modules/chemical_reactions/test/tests/jacobian/coupled_equilsub.i</a></li><li><a href="#3e0b3457-0abf-4e1c-bd94-b9c1053fa1a5" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</a></li><li><a href="#a1d01834-350a-47d8-b5ba-e1b2a80b8572" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/jacobian_01.i</a></li><li><a href="#c4c83b7c-6af0-4ac7-8dbb-054f75fa412e" class="modal-trigger">modules/combined/examples/phase_field-mechanics/LandauPhaseTrans.i</a></li><li><a href="#9312e91e-74b3-4c74-b640-66d393aed79b" class="modal-trigger">modules/porous_flow/test/tests/jacobian/hcond02.i</a></li><li><a href="#1364eed4-20fb-4447-bc58-98cc21b404d2" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh07.i</a></li><li><a href="#663a46e5-d931-41fb-969a-df2b4d56a724" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh01.i</a></li><li><a href="#88f51bcc-4a5e-4ab9-af9f-1816d7088e89" class="modal-trigger">modules/navier_stokes/test/tests/ins/RZ_cone/RZ_cone_stab_jac_test.i</a></li><li><a href="#4b8b08b0-3403-4aa1-a67c-9ebd438838b1" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_liquid.i</a></li><li><a href="#9f16dfe2-8f96-40f5-9e83-c68f9b82337e" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/special_joint1.i</a></li><li><a href="#7b513c34-d4f0-4a8d-a529-ed5efa3c16ab" class="modal-trigger">test/tests/kernels/conservative_advection/full_upwinding_jacobian.i</a></li><li><a href="#c2c6de54-b4ac-4177-9288-ba482ef54322" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_22.i</a></li><li><a href="#e1654795-9264-49aa-a642-3d8cc84aa973" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn04.i</a></li><li><a href="#591cf529-4f80-43ff-babb-a7a6476e06e2" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_03.i</a></li><li><a href="#a22ddd4d-479e-41d3-bb63-cb6cd91cd1b1" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh16.i</a></li><li><a href="#5d5a2f0d-41ce-42df-a1bc-0e43ebae4c10" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn09.i</a></li><li><a href="#14b36ae0-0112-47de-9851-568d1fa50b17" class="modal-trigger">modules/richards/test/tests/jacobian_2/jnQ2P_sink.i</a></li><li><a href="#46fff5cc-0261-4a55-87a9-ef5c6422f5ee" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_update.i</a></li><li><a href="#f921e643-c732-4dae-a54b-b579add2d251" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh_fu_11.i</a></li><li><a href="#4a477250-5ffa-4f46-ae49-3e2d3fb1b70a" class="modal-trigger">modules/porous_flow/test/tests/jacobian/disp04.i</a></li><li><a href="#8643304c-a195-412a-a902-0b6862be7e1d" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass08.i</a></li><li><a href="#6820be06-f435-435b-ab68-f0e079fee5f5" class="modal-trigger">modules/porous_flow/test/tests/jacobian/eff_stress03.i</a></li><li><a href="#34f6959a-efe2-474c-af07-c1abb0141862" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux09.i</a></li><li><a href="#a6100206-37c0-4a14-8ab0-c49859a09772" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_08.i</a></li><li><a href="#cef4c74a-f6be-4f6d-ad57-e5c46223d815" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn12.i</a></li><li><a href="#67e08f7d-b2af-4c77-b192-66fc5c6ddaa9" class="modal-trigger">modules/porous_flow/test/tests/heterogeneous_materials/vol_expansion_poroperm.i</a></li><li><a href="#47823ed7-f2ec-47a4-97c3-be5dc132ed5d" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux05.i</a></li><li><a href="#997b6791-c73c-42dc-91f5-9bd24b20b3a2" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn06.i</a></li><li><a href="#5fab1c12-ab55-49bc-989a-a614505f12d9" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/special_rock1.i</a></li><li><a href="#950b2f62-2aef-49a6-b4df-ced6ded31498" class="modal-trigger">test/tests/executioners/eigen_executioners/ane.i</a></li><li><a href="#5584ae6d-ef24-4db6-a369-3c23e02cb639" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux02.i</a></li><li><a href="#74cafd6d-2b19-44e9-96cd-aa8b6a02df9e" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</a></li><li><a href="#842d2705-6060-4716-96e8-758e104a8ef1" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux04.i</a></li><li><a href="#88d90d31-33ad-48ab-b074-267cbdcd11f6" class="modal-trigger">modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_test.i</a></li><li><a href="#1451a200-8552-4b35-854d-9d7a12c109e5" class="modal-trigger">modules/stochastic_tools/test/tests/ics/random_ic_distribution_test/random_ic_distribution_test.i</a></li><li><a href="#c727d300-9986-4adc-b193-d0e4177170fc" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh09.i</a></li><li><a href="#6616c1cc-fa84-425a-ae28-3945df531645" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass10.i</a></li><li><a href="#b48f4a04-2e87-43e0-b5cd-104ce6d32018" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection6.i</a></li><li><a href="#95af8bb4-04cb-4ae3-938f-6d8711a19b8a" class="modal-trigger">modules/porous_flow/test/tests/jacobian/denergy02.i</a></li><li><a href="#61004b3c-3543-4184-8c33-8cc65b0fcb76" class="modal-trigger">modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_cancelation_test.i</a></li><li><a href="#e588d404-c42b-45d3-af3e-546b6ea9b557" class="modal-trigger">modules/richards/test/tests/gravity_head_2/gh_fu_01.i</a></li><li><a href="#6132360b-865a-4695-bc41-895784b51c7e" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap/random.i</a></li><li><a href="#24d3045b-98a7-49b2-a5ee-f838ccc308f7" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/random_planar.i</a></li><li><a href="#aa6ed176-9193-4d69-a977-0a21afb4517b" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn05.i</a></li><li><a href="#ed0a1bc8-a7e9-4ab8-a891-009e044619c1" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection1.i</a></li><li><a href="#6e138001-015a-4406-8117-c367e85b9369" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn08.i</a></li><li><a href="#ceb0ee9a-421b-4d8e-bf3d-c6c55d553985" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_twophase.i</a></li><li><a href="#ed21a5e4-540b-4ff4-8e53-be4b7a83a19c" class="modal-trigger">modules/phase_field/tutorials/spinodal_decomposition/s4_mobility.i</a></li><li><a href="#98c50e90-fdc7-4425-8f80-1775d363ac67" class="modal-trigger">modules/porous_flow/test/tests/jacobian/hgs01.i</a></li><li><a href="#a6567750-d70a-46c5-8a6e-bcbe693afdf8" class="modal-trigger">modules/porous_flow/test/tests/jacobian/diff01.i</a></li><li><a href="#b8f260ed-488c-44be-b96e-f9247ccf31f9" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01c.i</a></li><li><a href="#3be33032-e4af-4abd-92e4-477af758c661" class="modal-trigger">modules/porous_flow/test/tests/jacobian/basic_advection4.i</a></li><li><a href="#55535e22-077d-49b9-8dc7-f39347f252cf" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn40.i</a></li><li><a href="#baa9a97f-321b-4815-8b72-54c6024c675d" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn_fu_05.i</a></li><li><a href="#b0e37bc0-bfdf-433c-a96d-97f671d62d4d" class="modal-trigger">modules/richards/test/tests/jacobian_1/jn15.i</a></li><li><a href="#a1aec19e-f58c-4fed-974d-b6a0644d301e" class="modal-trigger">modules/porous_flow/test/tests/jacobian/fflux08.i</a></li><li><a href="#3549cef3-133e-4142-9283-f426f85c8ae0" class="modal-trigger">modules/porous_flow/test/tests/jacobian/hcs01.i</a></li><li><a href="#9840ffcb-1753-43ac-90da-5651ae08c0c0" class="modal-trigger">modules/richards/test/tests/jacobian_2/jn30.i</a></li><li><a href="#7886925d-294a-4142-9d5c-f542e0bfbf39" class="modal-trigger">modules/porous_flow/test/tests/jacobian/eff_stress04.i</a></li><li><a href="#ac746f26-6985-43b6-b583-24a3163b2a62" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper5.i</a></li><li><a href="#cdd84477-246f-4e14-9fcb-1f28200410db" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh12.i</a></li><li><a href="#09dc9ee5-1181-426c-b77a-4441e1c18d81" class="modal-trigger">test/tests/kernels/jxw_grad_test_dep_on_displacements/jxw-spherical.i</a></li><li><a href="#a876b708-d4bc-4806-b76b-2954a4d3af6c" class="modal-trigger">modules/porous_flow/test/tests/jacobian/mass01_fully_saturated.i</a></li><li><a href="#84ae79d8-eeff-4b92-87bd-9f580efaf100" class="modal-trigger">modules/richards/test/tests/gravity_head_1/gh11.i</a></li></ul><div class="modal moose-modal" id="84df643c-41cd-4c4e-9ed6-6ef061ff6792"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01b.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, constant and large fluid-bulk, constant viscosity, constant permeability
# fully saturated with fully-saturated Kernel
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyBase
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1E3 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e3
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01b
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="81799cf4-5b86-43d5-a087-d2b112522566"><div class="modal-content"><h4>test/tests/materials/derivative_sum_material/random_ic.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 250
  ymax = 250
  elem_type = QUAD4
[]

[Variables]
  [./c]
    [./InitialCondition]
      type = RandomIC
    [../]
  [../]
[]

[Kernels]
  [./w_res]
    type = Diffusion
    variable = c
  [../]
  [./time]
    type = TimeDerivative
    variable = c
  [../]
[]

[Materials]
  [./free_energy1]
    type = DerivativeParsedMaterial
    f_name = Fa
    args = &#x27;c&#x27;
    function = (c-0.1)^4*(1-0.1-c)^4
  [../]
  [./free_energy2]
    type = DerivativeParsedMaterial
    f_name = Fb
    args = &#x27;c&#x27;
    function = -0.25*(c-0.1)^4*(1-0.1-c)^4
  [../]

  # Fa+Fb+Fb == Fc
  [./free_energy3]
    type = DerivativeParsedMaterial
    f_name = Fc
    args = &#x27;c&#x27;
    function = 0.5*(c-0.1)^4*(1-0.1-c)^4
    outputs = all
  [../]
  [./dfree_energy3]
    type = DerivativeParsedMaterial
    f_name = dFc
    args = &#x27;c&#x27;
    material_property_names = &#x27;F:=D[Fc,c]&#x27;
    function = F
    outputs = all
  [../]
  [./d2free_energy3]
    type = DerivativeParsedMaterial
    f_name = d2Fc
    args = &#x27;c&#x27;
    material_property_names = &#x27;F:=D[Fc,c,c]&#x27;
    function = F
    outputs = all
  [../]

  [./free_energy]
    type = DerivativeSumMaterial
    f_name = F_sum
    sum_materials = &#x27;Fa Fb Fb&#x27;
    args = &#x27;c&#x27;
    outputs = all
  [../]
  [./dfree_energy]
    type = DerivativeParsedMaterial
    f_name = dF_sum
    material_property_names = &#x27;F:=D[F_sum,c]&#x27;
    function = F
    args = &#x27;c&#x27;
    outputs = all
  [../]
  [./d2free_energy]
    type = DerivativeParsedMaterial
    f_name = d2F_sum
    material_property_names = &#x27;F:=D[F_sum,c,c]&#x27;
    function = F
    args = &#x27;c&#x27;
    outputs = all
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 1
[]

[Postprocessors]
  [./F_sum]
    type = ElementAverageValue
    variable = F_sum
  [../]
  [./F_check]
    type = ElementAverageValue
    variable = Fc
  [../]
  [./dF_sum]
    type = ElementAverageValue
    variable = dF_sum
  [../]
  [./dF_check]
    type = ElementAverageValue
    variable = dFc
  [../]
  [./d2F_sum]
    type = ElementAverageValue
    variable = d2F_sum
  [../]
  [./d2F_check]
    type = ElementAverageValue
    variable = d2Fc
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8f334cef-03fa-4ddf-b714-194710c690d7"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass06.i</h4><pre class="moose-pre"><code class="language-text"># 1phase with MD_Gaussian (var = log(mass-density) with Gaussian capillary) formulation
# constant-bulk density, constant porosity, 1component
# fully saturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./md]
  [../]
[]

[ICs]
  [./md]
    type = RandomIC
    min = 0
    max = 1
    variable = md
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = md
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;md&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 0.8
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseMD_Gaussian
    mass_density = md
    al = 1.1
    density_P0 = 0.8
    bulk_modulus = 1.5
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0f77e627-ea37-48b9-a1fd-b2ad1ae89d0f"><div class="modal-content"><h4>modules/phase_field/examples/cahn-hilliard/Math_CH.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 100
  xmax = 60
  ymax = 60
[]

[Variables]
  [./c]
    order = THIRD
    family = HERMITE
    [./InitialCondition]
      type = RandomIC
      min = -0.1
      max =  0.1
    [../]
  [../]
[]

[Kernels]
  [./c_dot]
    type = TimeDerivative
    variable = c
  [../]
  [./CHbulk]
    type = CHMath
    variable = c
  [../]
  [./CHint]
    type = CHInterface
    variable = c
    mob_name = M
    kappa_name = kappa_c
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./mat]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;1.0 0.5&#x27;
  [../]
[]

[Postprocessors]
  [./top]
    type = SideIntegralVariablePostprocessor
    variable = c
    boundary = top
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  scheme = bdf2

  # Preconditioning using the additive Schwartz method and LU decomposition
  petsc_options_iname = &#x27;-pc_type -sub_ksp_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      preonly       lu          &#x27;

  # Alternative preconditioning options using Hypre (algebraic multi-grid)
  #petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  #petsc_options_value = &#x27;hypre    boomeramg&#x27;

  l_tol = 1e-4
  l_max_its = 30

  dt = 2.0
  end_time = 80.0
[]

[Outputs]
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0021d5bb-9eb6-4d80-b483-134515ae01a3"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_02.i</h4><pre class="moose-pre"><code class="language-text"># Checking the Jacobian of Flux-Limited TVD Advection, 1 phase, 3 components, unsaturated, using flux_limiter_type = none
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = -1
  ymax = 2
[]

[GlobalParams]
  gravity = &#x27;1 2 -0.5&#x27;
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./tracer0]
  [../]
  [./tracer1]
  [../]
[]


[ICs]
  [./pp]
    variable = pp
    type = RandomIC
    min = -1
    max = 0
  [../]
  [./tracer0]
    variable = tracer0
    type = RandomIC
    min = 0
    max = 1
  [../]
  [./tracer1]
    variable = tracer1
    type = RandomIC
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./fluxpp]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = pp
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer0
    advective_flux_calculator = advective_flux_calculator_1
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer1
    advective_flux_calculator = advective_flux_calculator_2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.4
      viscosity = 1.1
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp tracer0 tracer1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.5
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    fluid_component = 1
  [../]
  [./advective_flux_calculator_2]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    fluid_component = 2
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;tracer0 tracer1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    phase = 0
    n = 2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.21 0 0  0 1.5 0  0 0 0.8&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
  num_steps = 1
  dt = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5285e0a0-f01e-447f-b1a6-b056e5af8cd7"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/denergy03.i</h4><pre class="moose-pre"><code class="language-text"># 2phase, 1 component, with solid displacements, time derivative of energy-density, TM porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pgas]
  [../]
  [./pwater]
  [../]
  [./temp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 1.0
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -1.0
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas temp pwater disp_x disp_y disp_z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      cv = 0.7
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./porosity]
    type = PorousFlowPorosity
    thermal = true
    mechanical = true
    porosity_zero = 0.7
    thermal_expansion_coeff = 0.5
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bac0233b-8ef9-4202-b0a6-16057a4efed7"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/primary_convection.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the PrimaryConvection Kernel

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./conv]
    type = PrimaryConvection
    variable = a
    p = pressure
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c072153d-9976-4542-8017-b62beb261f50"><div class="modal-content"><h4>modules/richards/test/tests/darcy/ss.i</h4><pre class="moose-pre"><code class="language-text"># Test to show that DarcyFlux produces the correct steadystate

[GlobalParams]
  variable = pressure
  fluid_weight = &#x27;0 0 -1E4&#x27;
  fluid_viscosity = 2
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 2
  nz = 3
  zmax = 0
  zmin = -10
[]

[Variables]
  [./pressure]
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./darcy]
    type = DarcyFlux
    variable = pressure
  [../]
[]


[AuxVariables]
  [./f_0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f_0]
    type = DarcyFluxComponent
    component = x
    variable = f_0
    porepressure = pressure
  [../]
  [./f_1]
    type = DarcyFluxComponent
    component = y
    variable = f_1
    porepressure = pressure
  [../]
  [./f_2]
    type = DarcyFluxComponent
    component = z
    variable = f_2
    porepressure = pressure
  [../]
[]

[BCs]
  [./zmax]
    type = DirichletBC
    boundary = front
    value = 0
    variable = pressure
  [../]
[]


[Materials]
  [./solid]
    type = DarcyMaterial
    block = 0
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = ss
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5cae20eb-11e5-4317-98b2-40f1b6312a31"><div class="modal-content"><h4>modules/phase_field/tutorials/spinodal_decomposition/s3_decomp.i</h4><pre class="moose-pre"><code class="language-text">#
# Simulation of iron-chromium alloy decomposition using simplified conditions.
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  elem_type = QUAD4
  nx = 25
  ny = 25
  nz = 0
  xmin = 0
  xmax = 25
  ymin = 0
  ymax = 25
  zmin = 0
  zmax = 0
  uniform_refine = 2
[]

[Variables]
  [./c]   # Mole fraction of Cr (unitless)
    order = FIRST
    family = LAGRANGE
  [../]
  [./w]   # Chemical potential (eV/mol)
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./concentrationIC]   # 46.774 mol% Cr with variations
    type = RandomIC
    min = 0.44774
    max = 0.48774
    seed = 210
    variable = c
  [../]
[]

[BCs]
  [./Periodic]
    [./c_bcs]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Kernels]
  [./w_dot]
    variable = w
    v = c
    type = CoupledTimeDerivative
  [../]
  [./coupled_res]
    variable = w
    type = SplitCHWRes
    mob_name = M
  [../]
  [./coupled_parsed]
    variable = c
    type = SplitCHParsed
    f_name = f_loc
    kappa_name = kappa_c
    w = w
  [../]
[]

[Materials]
  # d is a scaling factor that makes it easier for the solution to converge
  # without changing the results. It is defined in each of the materials and
  # must have the same value in each one.
  [./constants]
    # Define constant values kappa_c and M. Eventually M will be replaced with
    # an equation rather than a constant.
    type = GenericFunctionMaterial
    prop_names = &#x27;kappa_c M&#x27;
    prop_values = &#x27;8.125e-16*6.24150934e+18*1e+09^2*1e-27
                   2.2841e-26*1e+09^2/6.24150934e+18/1e-27&#x27;
                   # kappa_c*eV_J*nm_m^2*d
                   # M*nm_m^2/eV_J/d
  [../]
  [./local_energy]
    # Defines the function for the local free energy density as given in the
    # problem, then converts units and adds scaling factor.
    type = DerivativeParsedMaterial
    f_name = f_loc
    args = c
    constant_names = &#x27;A   B   C   D   E   F   G  eV_J  d&#x27;
    constant_expressions = &#x27;-2.446831e+04 -2.827533e+04 4.167994e+03 7.052907e+03
                            1.208993e+04 2.568625e+03 -2.354293e+03
                            6.24150934e+18 1e-27&#x27;
    function = &#x27;eV_J*d*(A*c+B*(1-c)+C*c*log(c)+D*(1-c)*log(1-c)+
                E*c*(1-c)+F*c*(1-c)*(2*c-1)+G*c*(1-c)*(2*c-1)^2)&#x27;
    derivative_order = 2
  [../]
[]

[Postprocessors]
  [./step_size]             # Size of the time step
    type = TimestepSize
  [../]
  [./iterations]            # Number of iterations needed to converge timestep
    type = NumNonlinearIterations
  [../]
  [./nodes]                 # Number of nodes in mesh
    type = NumNodes
  [../]
  [./evaluations]           # Cumulative residual calculations for simulation
    type = NumResidualEvaluations
  [../]
  [./active_time]           # Time computer spent on simulation
    type = PerfGraphData
    section_name = &quot;Root&quot;
    data_type = total
  [../]
[]

[Preconditioning]
  [./coupled]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  l_max_its = 30
  l_tol = 1e-6
  nl_max_its = 50
  nl_abs_tol = 1e-9
  end_time = 604800   # 7 days
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type
                         -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm      31                  preonly
                         ilu          1&#x27;
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    cutback_factor = 0.8
    growth_factor = 1.5
    optimal_iterations = 7
  [../]
  [./Adaptivity]
    coarsen_fraction = 0.1
    refine_fraction = 0.7
    max_h_level = 2
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Outputs]
  exodus = true
  console = true
  csv = true
  [./console]
    type = Console
    max_rows = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ef4ba6cf-d4a6-4e15-9574-4754b864ee66"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh13.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh13
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="06e085bd-8fca-4a7e-8d72-6894f515ee5d"><div class="modal-content"><h4>test/tests/kernels/jxw_grad_test_dep_on_displacements/jxw-cylindrical.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
  order = SECOND
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  ny = 3
  elem_type = QUAD9
[]

[Problem]
  coord_type = RZ
[]

[Variables]
  [./disp_r]
  [../]
  [./disp_z]
  [../]
  [./u]
    order = FIRST
  [../]
  [./v]
  [../]
[]

[Kernels]
  [./disp_r]
    type = Diffusion
    variable = disp_r
  [../]
  [./disp_z]
    type = Diffusion
    variable = disp_z
  [../]
  [./u]
    type = ADDiffusion
    variable = u
    use_displaced_mesh = true
  [../]
  [./v]
    type = ADDiffusion
    variable = v
    use_displaced_mesh = true
  [../]
[]

[BCs]
  # BCs cannot be preset due to Jacobian tests
  [./u_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = u
  [../]
  [./u_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = u
  [../]
  [./v_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = v
  [../]
  [./v_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = v
  [../]
  [./disp_r_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = disp_r
  [../]
  [./disp_r_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = disp_r
  [../]
  [./disp_z_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;bottom&#x27;
    variable = disp_z
  [../]
  [./disp_z_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;top&#x27;
    variable = disp_z
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  [./dofmap]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  [../]
  exodus = true
[]

[ICs]
  [./disp_r]
    type = RandomIC
    variable = disp_r
    min = 0.01
    max = 0.09
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = 0.01
    max = 0.09
  [../]
  [./u]
    type = RandomIC
    variable = u
    min = 0.1
    max = 0.9
  [../]
  [./v]
    type = RandomIC
    variable = v
    min = 0.1
    max = 0.9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="32e70539-4cd2-4a58-9545-07a78c265dd4"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cwp01.i</h4><pre class="moose-pre"><code class="language-text"># Capped weak-plane plasticity
# checking jacobian for a fully-elastic situation
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 100
    value_residual = 2
    rate = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0
    value_residual = 0.5
    rate = 2
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.1
    value_residual = 0.05
    rate = 1
  [../]
  [./t_strength]
    type = TensorMechanicsHardeningExponential
    value_0 = 100
    value_residual = 0
    rate = 1
  [../]
  [./c_strength]
    type = TensorMechanicsHardeningConstant
    value = 100
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    lambda = 1.0
    shear_modulus = 2.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;1 2 3  2 -4 -5  3 -5 2&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
  [../]
  [./mc]
    type = CappedWeakPlaneStressUpdate
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tensile_strength = t_strength
    compressive_strength = c_strength
    max_NR_iterations = 20
    tip_smoother = 1
    smoothing_tol = 2
    yield_function_tol = 1E-10
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="eab4f93e-128e-47ea-9486-8799c881427d"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux11.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 3components, constant viscosity, constant insitu permeability
# density with constant bulk, VG relative perm with a cubic, nonzero gravity, unsaturated with VG
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
  [./massfrac1]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1.0
    max = 0.0
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 0.3
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac1
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0 massfrac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 1 # small so that most effective saturations are close to 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityVG
    m = 0.6
    seff_turnover = 0.8
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="afe16170-8ca1-4dab-a4ac-95e1b98e15b4"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/jacobian1.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./p]
    type = RandomIC
    min = -1
    max = 1
    variable = porepressure
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./poro]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.6
    solid_bulk_compliance = 0.25
    fluid_bulk_compliance = 0.125
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jacobian1
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="948ced59-9e08-4b57-9c07-d9c4cdc1042c"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_liquid_2.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that give a single liquid phase, including salt as a nonlinear variable

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
  [./xnacl]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 5e6
    max = 8e6
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.03
    variable = zi
  [../]
  [./xnacl]
    type = RandomIC
    min = 0.01
    max = 0.15
    variable = xnacl
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./mass2]
    type = PorousFlowMassTimeDerivative
    variable = xnacl
    fluid_component = 2
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
  [./adv2]
    type = PorousFlowAdvectiveFlux
    variable = xnacl
    fluid_component = 2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi xnacl&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2d1fc85c-3ca2-47af-8c1b-44b802222cfa"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/heat_vol_exp01.i</h4><pre class="moose-pre"><code class="language-text"># Tests the PorousFlowHeatVolumetricExpansion kernel
# Fluid with constant bulk modulus, van-Genuchten capillary, THM porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  block = 0
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
  [./temperature]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./p]
    type = RandomIC
    min = -1
    max = 0
    variable = porepressure
  [../]
  [./t]
    type = RandomIC
    min = 1
    max = 2
    variable = temperature
  [../]
[]

[BCs]
  # necessary otherwise volumetric strain rate will be zero
  [./disp_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_z]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./dummy]
    type = TimeDerivative
    variable = porepressure
  [../]
  [./temp]
    type = PorousFlowHeatVolumetricExpansion
    variable = temperature
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure temperature disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
  [../]
[]

[Materials]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss_nodal]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    thermal = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
    thermal_expansion_coeff = 0.1
    reference_temperature = 0.1
    reference_porepressure = 0.2
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jacobian2
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a13c88a5-7102-4bc4-b1e5-478b887ced3f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Smoothed tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_smoothed
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="46f1fcc6-eeb7-4e46-8db3-502c9d4052af"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_02.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_02
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="848d1fed-592e-490c-99ff-9223973247d4"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection2.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with 1 porepressure as a PorousFlow variable
# Fully saturated
# Constant permeability
# Constant viscosity
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
  [./P]
  [../]
[]

[ICs]
  [./P]
    type = RandomIC
    variable = P
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./dummy_P]
    type = NullKernel
    variable = P
  [../]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = P
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.6
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3
      density0 = 4
      thermal_expansion = 0
      viscosity = 150.0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./ppss_qp]
    type = PorousFlow1PhaseP
    porepressure = P
    capillary_pressure = pc
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;5 0 0 0 5 0 0 0 5&#x27;
  [../]
  [./relperm_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0c8d594b-b9a4-42ce-9fdd-70fbad03c145"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection5.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with 1 porepressure as a PorousFlow variable
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
  [./P]
  [../]
[]

[ICs]
  [./P]
    type = RandomIC
    variable = P
    min = -1
    max = 1
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./dummy_P]
    type = NullKernel
    variable = P
  [../]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = P
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.6
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3
      density0 = 4
      thermal_expansion = 0
      viscosity = 150.0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./ppss_qp]
    type = PorousFlow1PhaseP
    porepressure = P
    capillary_pressure = pc
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./effective_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
    fluid = true
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityKozenyCarman
    poroperm_function = kozeny_carman_phi0
    k0 = 5
    m = 2
    n = 2
    phi0 = 0.1
  [../]
  [./relperm_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="de8de8e6-bcd7-4c4b-aeb9-29ff41bdb994"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random04
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6a0100a9-d1fa-4762-9b9f-d7d2d661e789"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCEnergyDensity/auxkernel.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 15
  ny = 15
  nz = 0
  xmax = 6
  ymax = 6
  zmax = 0
[]

[Variables]
  [./n]
    [./InitialCondition]
      type = RandomIC
      min = 0.0
      max = 0.1
    [../]
  [../]
  [./u]
    scaling = 1e2
  [../]
  [./v]
    scaling = 1e1
  [../]
[]

[AuxVariables]
  [./ed]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./edrff0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./edrff1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./edrff2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./ndot]
    type = TimeDerivative
    variable = n
  [../]
  [./n_bulk]
    type = CHBulkPFCTrad
    variable = n
  [../]
  [./u_term]
    type = MatDiffusion
    variable = n
    v = u
    diffusivity = C2
  [../]
  [./v_term]
    type = MatDiffusion
    variable = n
    v = v
    diffusivity = C4
  [../]
  [./u_rctn]
    type = Reaction
    variable = u
  [../]
  [./u_gradn]
    type = LaplacianSplit
    variable = u
    c = n
  [../]
  [./v_rctn]
    type = Reaction
    variable = v
  [../]
  [./v_gradu]
    type = LaplacianSplit
    variable = v
    c = u
  [../]
[]

[AuxKernels]
  [./Energy_n]
    type = PFCEnergyDensity
    execute_on = &#x27;initial timestep_end&#x27;
    variable = ed
    v = &#x27;n u v&#x27;
  [../]

  [./Energy_rff0]
    type = PFCRFFEnergyDensity
    execute_on = &#x27;initial timestep_end&#x27;
    variable = edrff0
    log_approach = tolerance
    v = &#x27;n u v&#x27;
  [../]
  [./Energy_rff1]
    type = PFCRFFEnergyDensity
    execute_on = &#x27;initial timestep_end&#x27;
    variable = edrff1
    log_approach = cancelation
    v = &#x27;n u v&#x27;
  [../]
  [./Energy_rff2]
    type = PFCRFFEnergyDensity
    execute_on = &#x27;initial timestep_end&#x27;
    variable = edrff2
    log_approach = expansion
    v = &#x27;n u v&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFCTrad]
    type = PFCTradMaterial
    order = FOURTH
  [../]
[]

[Postprocessors]
  [./Total_free_energy]
    type = PFCElementEnergyIntegral
    variable = ed
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
    off_diag_row = &#x27;u n n v&#x27;
    off_diag_column = &#x27;n u v u&#x27;
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON

  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 101&#x27;
  # petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  # petsc_options_value = &#x27;asm         101   preonly   lu      1&#x27;
  petsc_options_iname = &#x27;-pc_type &#x27;
  petsc_options_value = &#x27;lu &#x27;

  l_max_its = 100
  l_tol = 1e-04
  nl_rel_tol = 1e-09
  nl_abs_tol = 1e-11

  num_steps = 1
  dt = 0.1
[]

[Outputs]
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="988984fb-3446-4a76-ba21-db31823aa609"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux07.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PS), 2components (that exist in both phases), constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, vanGenuchten capillary pressure
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./sgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = 0
    max = 1
  [../]
  [./ppgas]
    type = RandomIC
    variable = sgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = sgas
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 10
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
    s_res = 0.0
    sum_s_res = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e219071d-b356-457a-acfa-dac1ddefae56"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper1.i</h4><pre class="moose-pre"><code class="language-text"># This runs the models mentioned in the first example of the Multi-Surface paper
#
# Plasticity models:
# SimpleTester with a = 1 and b = 0 and strength = 1E9  (only does elasticity)
# SimpleTester with a = 1 and b = 0 and strength = 0
# SimpleTester with a = 1 and b = 0 and strength = 1E-3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = console
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = console
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = console
  [../]
[]


[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1E9
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 0
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1E-3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  active = &#x27;elasticity_tensor strain single&#x27;
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./elastic_model]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple0&#x27;
  [../]
  [./single]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple1&#x27;
  [../]
  [./double]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple1 simple2&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="632da586-5736-467f-b60f-122fde662c23"><div class="modal-content"><h4>python/chigger/tests/simple/mug_blocks.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = mug.e
[]

[MeshModifiers]
  [./subdomains]
    type = SubdomainBoundingBox
    top_right = &#x27;3 3 3&#x27;
    bottom_left = &#x27;0 -3 -2.1&#x27;
    block_id = &#x27;76&#x27;
  [../]
[]

[Variables]
  [./convected]
    order = FIRST
    family = LAGRANGE
  [../]
  [./diffused]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./aux_elem]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./diff_convected]
    type = Diffusion
    variable = convected
  [../]
  [./conv]
    # Couple a variable into the convection kernel using local_name = simulationg_name syntax
    type = Convection
    variable = convected
    velocity = &#x27;1 1 1&#x27;
  [../]
  [./diff_diffused]
    type = Diffusion
    variable = diffused
  [../]
  [./diff_t]
    type = TimeDerivative
    variable = diffused
  [../]
  [./conv_t]
    type = TimeDerivative
    variable = convected
    block = &#x27;76&#x27;
  [../]
[]

[BCs]
  [./bottom_convected]
    type = DirichletBC
    variable = convected
    boundary = bottom
    value = 1
  [../]
  [./top_convected]
    type = DirichletBC
    variable = convected
    boundary = top
    value = 0
  [../]
  [./bottom_diffused]
    type = DirichletBC
    variable = diffused
    boundary = bottom
    value = 2
  [../]
  [./top_diffused]
    type = DirichletBC
    variable = diffused
    boundary = top
    value = 0
  [../]
[]

[Postprocessors]
  [./func_pp]
    type = FunctionValuePostprocessor
    function = 2*t
  [../]
[]

[Executioner]
  # Preconditioned JFNK (default)
  type = Transient
  num_steps = 20
  solve_type = PJFNK
  dt = 0.1
[]

[Outputs]
  exodus = true
[]

[ICs]
  [./aux_ic]
    variable = aux_elem
    max = 10
    seed = 2
    type = RandomIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="474c0ffb-17fb-4f6b-944d-e4b8f86e6cfd"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_convreact2.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledConvectionReactionSub Kernel using
# activity coefficients not equal to unity

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a1conv]
    type = CoupledConvectionReactionSub
    variable = a
    v = b
    log_k = 2
    weight = 1
    sto_v = 2.5
    sto_u = 2
    p = pressure
    gamma_eq = 2
    gamma_u = 2.5
    gamma_v = 1.5
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="37a8d67a-8447-48c8-aacc-3cb4d910f641"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/langmuir_jac_ad.i</h4><pre class="moose-pre"><code class="language-text"># testing adsorption jacobian
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 0
    max = 1
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./langmuir_params]
    type = LangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0
    one_over_adsorption_time_const = 0.813
    langmuir_density = 2.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="25afbf6c-5c02-4276-9400-81aea4c6c313"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_01.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
  [./non_Richards]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas non_Richards_should_have_0_off_diag&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
  [./non_Richards_should_have_0_off_diag]
    type = BodyForce
    variable = non_Richards
    function = 0
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn01
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="92d9d1d4-2bfe-4848-b107-2a12696f560e"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCTrad/PFCTrad_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
  xmax = 8
  ymax = 8
[]

[Variables]
  [./n]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 4
    [../]
  [../]
  [./u]
    scaling = 1e2
  [../]
  [./v]
    scaling = 1e1
  [../]
[]

[Kernels]
  [./ndot]
    type = TimeDerivative
    variable = n
  [../]
  [./n_bulk]
    type = CHBulkPFCTrad
    variable = n
  [../]
  [./u_term]
    type = MatDiffusion
    variable = n
    v = u
    diffusivity = C2
  [../]
  [./v_term]
    type = MatDiffusion
    variable = n
    v = v
    diffusivity = C4
  [../]
  [./u_rctn]
    type = Reaction
    variable = u
  [../]
  [./u_gradn]
    type = LaplacianSplit
    variable = u
    c = n
  [../]
  [./v_rctn]
    type = Reaction
    variable = v
  [../]
  [./v_gradu]
    type = LaplacianSplit
    variable = v
    c = u
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFCTrad]
    type = PFCTradMaterial
    order = FOURTH
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
    off_diag_row    = &#x27;u n n v&#x27;
    off_diag_column = &#x27;n u v u&#x27;
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON

  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 101&#x27;
  # petsc_options_iname = -pc_type
  # petsc_options_value = lu
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         101   preonly   lu      5&#x27;

  l_max_its = 100
  l_tol = 1e-04
  nl_rel_tol = 1e-09
  nl_abs_tol = 1e-11

  num_steps = 2
  dt = 0.1
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1416b500-3def-4d87-ba5c-d5fed7454757"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/eff_stress01.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]


[Kernels]
  [./grad0]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 0
    variable = ppwater
  [../]
  [./grad1]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Materials]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="06814ba1-1d13-4520-9cfd-14c67bb9dec7"><div class="modal-content"><h4>modules/phase_field/tutorials/spinodal_decomposition/s5_energycurve.i</h4><pre class="moose-pre"><code class="language-text">#
# Example simulation of an iron-chromium alloy at 500 C. Equilibrium
# concentrations are at 23.6 and 82.3 mol% Cr. Kappa value, free energy equation,
# and mobility equation were provided by Lars Hoglund. Solved using the split
# form of the Cahn-Hilliard equation.

[Mesh]
  type = GeneratedMesh
  dim = 2
  elem_type = QUAD4
  nx = 25
  ny = 25
  nz = 0
  xmin = 0
  xmax = 25
  ymin = 0
  ymax = 25
  zmin = 0
  zmax = 0
  uniform_refine = 2
[]

[Variables]
  [./c]   # Mole fraction of Cr (unitless)
    order = FIRST
    family = LAGRANGE
    scaling = 1e+04
  [../]
  [./w]   # Chemical potential (eV/mol)
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./f_density]   # Local energy density (eV/mol)
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[ICs]
  [./concentrationIC]   # 46.774 mol% Cr with variations
    type = RandomIC
    min = 0.44774
    max = 0.48774
    seed = 210
    variable = c
  [../]
[]

[BCs]
  [./Periodic]
    [./c_bcs]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Kernels]
  [./w_dot]
    variable = w
    v = c
    type = CoupledTimeDerivative
  [../]
  [./coupled_res]
    variable = w
    type = SplitCHWRes
    mob_name = M
  [../]
  [./coupled_parsed]
    variable = c
    type = SplitCHParsed
    f_name = f_loc
    kappa_name = kappa_c
    w = w
  [../]
[]

[AuxKernels]
  # Calculates the energy density by combining the local and gradient energies
  [./f_density]   # (eV/mol/nm^2)
    type = TotalFreeEnergy
    variable = f_density
    f_name = &#x27;f_loc&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    interfacial_vars = c
  [../]
[]

[Materials]
  # d is a scaling factor that makes it easier for the solution to converge
  # without changing the results. It is defined in each of the first three
  # materials and must have the same value in each one.
  [./kappa]                  # Gradient energy coefficient (eV nm^2/mol)
    type = GenericFunctionMaterial
    prop_names = &#x27;kappa_c&#x27;
    prop_values = &#x27;8.125e-16*6.24150934e+18*1e+09^2*1e-27&#x27;
                  # kappa_c *eV_J*nm_m^2* d
  [../]
  [./mobility]               # Mobility (nm^2 mol/eV/s)
    # NOTE: This is a fitted equation, so only &#x27;Conv&#x27; has units
    type = DerivativeParsedMaterial
    f_name = M
    args = c
    constant_names =       &#x27;Acr    Bcr    Ccr    Dcr
                            Ecr    Fcr    Gcr
                            Afe    Bfe    Cfe    Dfe
                            Efe    Ffe    Gfe
                            nm_m   eV_J   d&#x27;
    constant_expressions = &#x27;-32.770969 -25.8186669 -3.29612744 17.669757
                            37.6197853 20.6941796  10.8095813
                            -31.687117 -26.0291774 0.2286581   24.3633544
                            44.3334237 8.72990497  20.956768
                            1e+09      6.24150934e+18          1e-27&#x27;
    function = &#x27;nm_m^2/eV_J/d*((1-c)^2*c*10^
                (Acr*c+Bcr*(1-c)+Ccr*c*log(c)+Dcr*(1-c)*log(1-c)+
                Ecr*c*(1-c)+Fcr*c*(1-c)*(2*c-1)+Gcr*c*(1-c)*(2*c-1)^2)
                +c^2*(1-c)*10^
                (Afe*c+Bfe*(1-c)+Cfe*c*log(c)+Dfe*(1-c)*log(1-c)+
                Efe*c*(1-c)+Ffe*c*(1-c)*(2*c-1)+Gfe*c*(1-c)*(2*c-1)^2))&#x27;
    derivative_order = 1
    outputs = exodus
  [../]
  [./local_energy]           # Local free energy function (eV/mol)
    type = DerivativeParsedMaterial
    f_name = f_loc
    args = c
    constant_names = &#x27;A   B   C   D   E   F   G  eV_J  d&#x27;
    constant_expressions = &#x27;-2.446831e+04 -2.827533e+04 4.167994e+03 7.052907e+03
                            1.208993e+04 2.568625e+03 -2.354293e+03
                            6.24150934e+18 1e-27&#x27;
    function = &#x27;eV_J*d*(A*c+B*(1-c)+C*c*log(c)+D*(1-c)*log(1-c)+
                E*c*(1-c)+F*c*(1-c)*(2*c-1)+G*c*(1-c)*(2*c-1)^2)&#x27;
    derivative_order = 2
  [../]
  [./precipitate_indicator]  # Returns 1/625 if precipitate
    type = ParsedMaterial
    f_name = prec_indic
    args = c
    function = if(c&gt;0.6,0.0016,0)
  [../]
[]

[Postprocessors]
  [./step_size]             # Size of the time step
    type = TimestepSize
  [../]
  [./iterations]            # Number of iterations needed to converge timestep
    type = NumNonlinearIterations
  [../]
  [./nodes]                 # Number of nodes in mesh
    type = NumNodes
  [../]
  [./evaluations]           # Cumulative residual calculations for simulation
    type = NumResidualEvaluations
  [../]
  [./total_energy]          # Total free energy at each timestep
    type = ElementIntegralVariablePostprocessor
    variable = f_density
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./num_features]          # Number of precipitates formed
    type = FeatureFloodCount
    variable = c
    threshold = 0.6
  [../]
  [./precipitate_area]      # Fraction of surface devoted to precipitates
    type = ElementIntegralMaterialProperty
    mat_prop = prec_indic
  [../]
  [./active_time]           # Time computer spent on simulation
    type = PerfGraphData
    section_name = &quot;Root&quot;
    data_type = total
  [../]
[]

[Preconditioning]
  [./coupled]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  l_max_its = 30
  l_tol = 1e-6
  nl_max_its = 50
  nl_abs_tol = 1e-9
  end_time = 604800   # 7 days
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type
                         -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm      31                  preonly
                         ilu          1&#x27;
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    cutback_factor = 0.8
    growth_factor = 1.5
    optimal_iterations = 7
  [../]
  [./Adaptivity]
    coarsen_fraction = 0.1
    refine_fraction = 0.7
    max_h_level = 2
  [../]
[]

[Outputs]
  exodus = true
  console = true
  csv = true
  [./console]
    type = Console
    max_rows = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3a32a4a7-5332-4a9b-ad64-d891706394b6"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_ad2.i</h4><pre class="moose-pre"><code class="language-text"># testing adsorption jacobian with large mollification parameter
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 0
    max = 1
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./mollified_langmuir_params]
    type = MollifiedLangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0
    one_over_adsorption_time_const = 0.813
    langmuir_density = 6.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
    mollifier = 1E2
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="664526bc-6711-46b9-8731-86d2d2f60474"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_ad.i</h4><pre class="moose-pre"><code class="language-text"># testing adsorption jacobian
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 0
    max = 1
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./mollified_langmuir_params]
    type = MollifiedLangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0
    one_over_adsorption_time_const = 0.813
    langmuir_density = 6.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b1dc8d86-608e-448e-b0dd-969e8f34ee5c"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_30.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# wellbore = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]

  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[DiracKernels]
  [./bh]
    type = RichardsBorehole
    bottom_pressure = 0
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pressure
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
    fully_upwind = true
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn_fu_30
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4513f5ef-1ef8-4a24-abeb-3d038dcf919c"><div class="modal-content"><h4>modules/phase_field/examples/cahn-hilliard/Parsed_CH.i</h4><pre class="moose-pre"><code class="language-text">#
# Example problem showing how to use the DerivativeParsedMaterial with CahnHilliard.
# The free energy is identical to that from CHMath, f_bulk = 1/4*(1-c)^2*(1+c)^2.
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 100
  xmax = 60
  ymax = 60
[]

[Modules]
  [./PhaseField]
    [./Conserved]
      [./c]
        free_energy = fbulk
        mobility = M
        kappa = kappa_c
        solve_type = DIRECT
      [../]
    [../]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[ICs]
  [./cIC]
    type = RandomIC
    variable = c
    min = -0.1
    max =  0.1
  [../]
[]

[AuxKernels]
  [./local_energy]
    type = TotalFreeEnergy
    variable = local_energy
    f_name = fbulk
    interfacial_vars = c
    kappa_names = kappa_c
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./mat]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;1.0 0.5&#x27;
  [../]
  [./free_energy]
    type = DerivativeParsedMaterial
    f_name = fbulk
    args = c
    constant_names = W
    constant_expressions = 1.0/2^2
    function = W*(1-c)^2*(1+c)^2
    enable_jit = true
  [../]
[]

[Postprocessors]
  [./top]
    type = SideIntegralVariablePostprocessor
    variable = c
    boundary = top
  [../]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  scheme = bdf2

  # Alternative preconditioning using the additive Schwartz method and LU decomposition
  #petsc_options_iname = &#x27;-pc_type -sub_ksp_type -sub_pc_type&#x27;
  #petsc_options_value = &#x27;asm      preonly       lu          &#x27;

  # Preconditioning options using Hypre (algebraic multi-grid)
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre    boomeramg&#x27;

  l_max_its = 30
  l_tol = 1e-4
  nl_max_its = 20
  nl_rel_tol = 1e-9

  dt = 2.0
  end_time = 20.0
[]

[Outputs]
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0055a1dc-d7f9-4a67-81ac-5bea41d7ab29"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/pls03.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPiecewiseLinearSink with 2-phase, 3-components
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 2
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;left&#x27;
    pt_vals = &#x27;-1 -0.5 0&#x27;
    multipliers = &#x27;1 2 4&#x27;
    variable = ppwater
    mass_fraction_component = 0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 -2 4&#x27;
    mass_fraction_component = 0
    variable = ppgas
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 3 4&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph0_sp0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
  [../]
  [./flux_2]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;back top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;0 1 -3&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
  [./flux_3]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 3 4&#x27;
    mass_fraction_component = 2
    variable = ppwater
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
  [../]
  [./flux_4]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;back top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;0 1 -3&#x27;
    mass_fraction_component = 2
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-0.5*x*y&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  file_base = pls03
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="df7cf415-3fac-4daa-8f50-de26680d7080"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn16.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn16
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3c091cb2-bbf8-4f39-8f1b-6a9378d80c5d"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn08.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0c3e7298-fe36-4a0c-88f4-f55f89cf4108"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_01.i</h4><pre class="moose-pre"><code class="language-text"># Checking the Jacobian of Flux-Limited TVD Advection, 1 phase, 1 component, full saturation, using flux_limiter_type = none
# This is quite a heavy test, but we need a fairly big mesh to check the upwinding is happening correctly
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  xmin = 0
  xmax = 1
  ny = 4
  ymin = -1
  ymax = 2
  bias_y = 1.5
  nz = 4
  zmin = 1
  zmax = 2
  bias_z = 0.8
[]

[GlobalParams]
  gravity = &#x27;1 2 -0.5&#x27;
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
[]


[ICs]
  [./pp]
    variable = pp
    type = RandomIC
    min = 1
    max = 2
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = pp
    advective_flux_calculator = advective_flux_calculator
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.4
      viscosity = 1.1
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator]
    type = PorousFlowAdvectiveFluxCalculatorSaturated
    flux_limiter_type = None
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.21 0 0  0 1.5 0  0 0 0.8&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
  num_steps = 1
  dt = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c25a06ee-d783-4fad-b9db-29cf5e51fb99"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCRFF_split/PFCRFF_split_test_master.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  num_L = 5
  L_name_base = L
  ymax = 6
  xmax = 6
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 12
  ny = 12
[]

[Variables]
  [./n]
    [./InitialCondition]
      type = RandomIC
      max = 0.8
      min = 0.2
      seed = 12345
    [../]
  [../]
  [./CHPFCRFFSplitVariables]
    sub_filenames = PFCRFF_split_test_sub.i
    n_name = n
    #sub_file_name = test_sub.i
  [../]
[]

[Kernels]
  [./CHPFCRFFSplitKernel]
    log_approach = expansion
    n_name = n
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFC]
    type = PFCRFFMaterial
  [../]
[]

[Postprocessors]
  [./dt]
    type = TimestepSize
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  # petsc_options = &#x27;-snes_mf_operator -ksp_monitor&#x27;
  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 31&#x27;
  # petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  # petsc_options_value = &#x27;asm         101   preonly   lu      1&#x27;
  type = Transient
  num_steps = 1
  dt = 0.1
  l_max_its = 50
  nl_max_its = 20
  petsc_options = &#x27;-pc_factor_shift_nonzero&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;hypre boomeramg 31&#x27;
  l_tol = 1e-04
  nl_rel_tol = 1e-9
  scheme = bdf2
[]

[Outputs]
  exodus = true
[]

[ICs]
  active = &#x27;&#x27;
  [./density_IC]
    y2 = 10.5
    lc = 6
    y1 = 1.5
    min = .8
    max = .2
    x2 = 10.5
    crystal_structure = FCC
    variable = n
    x1 = 1.5
    type = PFCFreezingIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fbb3aec5-6ddb-478e-925e-da922792cb84"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn18.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# almost gas saturated

# gravity = true
# supg = true
# transient = true


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -100.0
      max = -90.0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn18
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9591f38f-52a6-4d88-9df7-094df80e6099"><div class="modal-content"><h4>modules/porous_flow/examples/lava_lamp/2phase_convection.i</h4><pre class="moose-pre"><code class="language-text"># Two phase density-driven convection of dissolved CO2 in brine
#
# Initially, the model has a gas phase at the top with a saturation of 0.29
# (which corresponds to an initial value of zi = 0.2).
# Diffusion of the dissolved CO2
# component from the saturated liquid to the unsaturated liquid below reduces the
# amount of CO2 in the gas phase. As the density of the CO2-saturated brine is greater
# than the unsaturated brine, a gravitational instability arises and density-driven
# convection of CO2-rich fingers descend into the unsaturated brine.
#
# The instability is seeded by a random perturbation to the porosity field.
# Mesh adaptivity is used to refine the mesh as the fingers form.
#
# Note: this model is computationally expensive, so should be run with multiple cores,
# preferably on a cluster.

[GlobalParams]
  PorousFlowDictator = &#x27;dictator&#x27;
  gravity = &#x27;0 -9.81 0&#x27;
[]

[Adaptivity]
  max_h_level = 2
  marker = marker
  initial_marker = initial
  initial_steps = 2
  [./Indicators]
    [./indicator]
      type = GradientJumpIndicator
      variable = zi
    [../]
  [../]
  [./Markers]
    [./marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.8
    [../]
    [./initial]
      type = BoxMarker
      bottom_left = &#x27;0 1.95 0&#x27;
      top_right = &#x27;2 2 0&#x27;
      inside = REFINE
      outside = DO_NOTHING
    [../]
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  ymax = 2
  xmax = 2
  ny = 40
  nx = 40
  bias_y = 0.95
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.01
  [../]
  [./saturation_gas]
    order = FIRST
    family = MONOMIAL
  [../]
  [./xco2l]
    order = FIRST
    family = MONOMIAL
  [../]
  [./density_liquid]
    order = FIRST
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./xco2l]
    type = PorousFlowPropertyAux
    variable = xco2l
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./density_liquid]
    type = PorousFlowPropertyAux
    variable = density_liquid
    property = density
    phase = 0
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
    scaling = 1e4
  [../]
[]

[ICs]
  [./pressure]
    type = FunctionIC
    function = 10e6-9.81*1000*y
    variable = pgas
  [../]
  [./zi]
    type = BoundingBoxIC
    variable = zi
    x1 = 0
    x2 = 2
    y1 = 1.95
    y2 = 2
    inside = 0.2
    outside = 0
  [../]
  [./porosity]
    type = RandomIC
    variable = porosity
    min = 0.25
    max = 0.275
    seed = 0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pgas
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = zi
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2sw]
      type = CO2FluidProperties
    [../]
    [./co2]
      type = TabulatedFluidProperties
      fp = co2sw
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = &#x27;45&#x27;
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = &#x27;pgas&#x27;
    z = &#x27;zi&#x27;
    temperature_unit = Celsius
    xnacl = &#x27;xnacl&#x27;
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = porosity
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-11 0 0 0 1e-11 0 0 0 1e-11&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    phase = 0
    n = 2
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    phase = 1
    n = 2
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./diffusivity]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;2e-9 2e-9 2e-9 2e-9&#x27;
    tortuosity = &#x27;1 1&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./mumps_is_best_for_parallel_jobs]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
  [./basic]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e6
  nl_max_its = 25
  l_max_its = 100
  dtmax = 1e4
  nl_abs_tol = 1e-6
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    growth_factor = 2
    cutback_factor = 0.5
  [../]
[]

[Functions]
  [./flux]
    type = ParsedFunction
    vals = &#x27;delta_xco2 dt&#x27;
    vars = &#x27;dx dt&#x27;
    value = &#x27;dx/dt&#x27;
  [../]
[]

[Postprocessors]
  [./total_co2_in_gas]
    type = PorousFlowFluidMass
    phase = 1
    fluid_component = 1
  [../]
  [./total_co2_in_liquid]
    type = PorousFlowFluidMass
    phase = 0
    fluid_component = 1
  [../]
  [./numdofs]
    type = NumDOFs
  [../]
  [./delta_xco2]
    type = ChangeOverTimePostprocessor
    postprocessor = total_co2_in_liquid
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./flux]
    type = FunctionValuePostprocessor
    function = flux
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="009a2083-f5dd-44f5-bf35-94678f834b5a"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn07.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn07
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6a152bc4-8247-4915-b374-eecb04c996bc"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn10.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn10
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="64d095c1-0afe-4ec9-ac4b-5835b07a5730"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh02.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh02
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="99f1dd4f-3e97-41a2-aa89-404ea8c012ab"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn03.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn03
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86e64a8b-50df-43ce-b515-b10466c19d62"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_gas.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions that give a single gas phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e4
    max = 4e4
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.88
    max = 0.98
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="482f2784-a668-47cf-ae78-3a60e98ac227"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn05.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn05
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="26df6f40-9c95-4961-b0b8-f6c1898f5d7c"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jnQ2P.i</h4><pre class="moose-pre"><code class="language-text"># quick two phase

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]


[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulkCut
    dens0 = 1
    cut_limit = 1.1
    zero_point = -1.1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermWaterCubic]
    type = RichardsRelPermMonomial
    simm = 0.05
    n = 3
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.1
    n = 3
  [../]
[]

[Variables]
  [./pp]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
  [./sat]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
  [./nonQ2P_var]
  []
[]

[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_relperm_for_diffusion = RelPermWaterCubic
  water_viscosity = 1
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 1
  diffusivity = 1E-2
[]

[Kernels]
  [./nonQ2P_variable_check]
    type = BodyForce
    variable = nonQ2P_var
    function = 0
  [../]
[]


[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1.1 0 0  0 2.2 0  0 0 3.3&#x27;
    gravity = &#x27;1 2 3&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jnQ2P
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c4e9ee14-eafd-47d1-99cd-be9debb3cfcc"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random2.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with compressive failure only
# Plasticity models:
# Compressive strength = 1 MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./cs]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./ang]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random2
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a19ee83f-0535-42b8-a04e-db1d896095c2"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_twophase_nonisothermal.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for nonisothermal two phase conditions, including salt as a nonlinear variable

[Mesh]
  [./mesh]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 2
    ny = 2
  [../]
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
  [./xnacl]
  [../]
  [./temperature]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e6
    max = 4e6
    variable = pgas
    seed = 1
  [../]
  [./z]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = zi
    seed = 1
  [../]
  [./xnacl]
    type = RandomIC
    min = 0.01
    max = 0.15
    variable = xnacl
    seed = 1
  [../]
  [./temperature]
    type = RandomIC
    min = 20
    max = 80
    variable = temperature
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./mass2]
    type = PorousFlowMassTimeDerivative
    variable = xnacl
    fluid_component = 2
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
  [./adv2]
    type = PorousFlowAdvectiveFlux
    variable = xnacl
    fluid_component = 2
  [../]
  [./energy]
    type = PorousFlowEnergyTimeDerivative
    variable = temperature
  [../]
  [./heat]
    type = PorousFlowHeatAdvection
    variable = temperature
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi xnacl temperature&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temperature
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature = temperature
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1000
    density = 2500
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
  automatic_scaling = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bd7a2a80-8f86-47e6-9629-3c492639a467"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/random_hyperbolic.i</h4><pre class="moose-pre"><code class="language-text"># drucker-prager hyperbolic.
# apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 125
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 0.1E3
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
    use_custom_returnMap = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./dp]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-6
    min_stepsize = 1E-3
    plastic_models = dp
    debug_fspb = crash
    deactivation_scheme = safe
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_hyperbolic
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dd573976-e780-4270-acce-c3891686cd16"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_stabilized_test.i</h4><pre class="moose-pre"><code class="language-text"># This input file tests the jacobians of many of the INS kernels
[GlobalParams]
  gravity = &#x27;1.1 1.1 1.1&#x27;
  u = vel_x
  v = vel_y
  w = vel_z
  p = p
  integrate_p_by_parts = true
  laplace = true
  pspg = true
  supg = true
  alpha = 1.1
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = 0
  xmax = 3.0
  ymin = 0
  ymax = 1.5
  zmax = 1.1
  nx = 1
  ny = 1
  nz = 1
  elem_type = HEX27
[]

[Variables]
  [./vel_x]
    order = SECOND
    family = LAGRANGE
  [../]
  [./vel_y]
    order = SECOND
    family = LAGRANGE
  [../]
  [./vel_z]
    order = SECOND
    family = LAGRANGE
  [../]
  [./p]
    order = SECOND
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./mass]
    type = INSMass
    variable = p
  [../]
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    component = 0
  [../]
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    component = 1
  [../]
  [./z_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_z
    component = 2
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;0.5 1.5&#x27;
  [../]
[]

[Preconditioning]
  [./SMP_PJFNK]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  solve_type = NEWTON
  type = Steady
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
[]

[ICs]
  [./p]
    type = RandomIC
    variable = p
    min = 0.5
    max = 1.5
  [../]
  [./vel_x]
    type = RandomIC
    variable = vel_x
    min = 0.5
    max = 1.5
  [../]
  [./vel_y]
    type = RandomIC
    variable = vel_y
    min = 0.5
    max = 1.5
  [../]
  [./vel_z]
    type = RandomIC
    variable = vel_z
    min = 0.5
    max = 1.5
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ef580d81-e89e-4f73-b4c7-deb2e05a4f5a"><div class="modal-content"><h4>modules/combined/examples/phase_field-mechanics/Pattern1.i</h4><pre class="moose-pre"><code class="language-text">#
# Pattern example 1
#
# Phase changes driven by a combination mechanical (elastic) and chemical
# driving forces. In this three phase system a matrix phase, an oversized and
# an undersized precipitate phase compete. The chemical free energy favors a
# phase separation into either precipitate phase. A mix of both precipitate
# emerges to balance lattice expansion and contraction.
#
# This example demonstrates the use of
# * ACMultiInterface
# * SwitchingFunctionConstraintEta and SwitchingFunctionConstraintLagrange
# * DerivativeParsedMaterial
# * ElasticEnergyMaterial
# * DerivativeMultiPhaseMaterial
# * MultiPhaseStressMaterial
# which are the components to se up a phase field model with an arbitrary number
# of phases
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 80
  ny = 80
  nz = 0
  xmin = -20
  xmax = 20
  ymin = -20
  ymax = 20
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[GlobalParams]
  # CahnHilliard needs the third derivatives
  derivative_order = 3
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    additional_free_energy = cross_energy
  [../]
  [./cross_terms]
    type = CrossTermGradientFreeEnergy
    variable = cross_energy
    interfacial_vars = &#x27;eta1 eta2 eta3&#x27;
    kappa_names = &#x27;kappa11 kappa12 kappa13
                   kappa21 kappa22 kappa23
                   kappa31 kappa32 kappa33&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 0.8
      seed = 1235
    [../]
  [../]

  # Order parameter for the Matrix
  [./eta1]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.5
  [../]
  # Order parameters for the 2 different inclusion orientations
  [./eta2]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.1
  [../]
  [./eta3]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.1
  [../]

  # Mesh displacement
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]

  # Lagrange-multiplier
  [./lambda]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1.0
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_res]
    type = CahnHilliard
    variable = c
    f_name = F
    args = &#x27;eta1 eta2 eta3&#x27;
  [../]
  [./time]
    type = TimeDerivative
    variable = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta1
    args = &#x27;eta2 eta3 c&#x27;
    mob_name = L1
    f_name = F
  [../]
  [./ACInterface1]
    type = ACMultiInterface
    variable = eta1
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L1
    kappa_names = &#x27;kappa11 kappa12 kappa13&#x27;
  [../]
  [./lagrange1]
    type = SwitchingFunctionConstraintEta
    variable = eta1
    h_name   = h1
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 2
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
  [./ACBulk2]
    type = AllenCahn
    variable = eta2
    args = &#x27;eta1 eta3 c&#x27;
    mob_name = L2
    f_name = F
  [../]
  [./ACInterface2]
    type = ACMultiInterface
    variable = eta2
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L2
    kappa_names = &#x27;kappa21 kappa22 kappa23&#x27;
  [../]
  [./lagrange2]
    type = SwitchingFunctionConstraintEta
    variable = eta2
    h_name   = h2
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 3
  [./deta3dt]
    type = TimeDerivative
    variable = eta3
  [../]
  [./ACBulk3]
    type = AllenCahn
    variable = eta3
    args = &#x27;eta1 eta2 c&#x27;
    mob_name = L3
    f_name = F
  [../]
  [./ACInterface3]
    type = ACMultiInterface
    variable = eta3
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L3
    kappa_names = &#x27;kappa31 kappa32 kappa33&#x27;
  [../]
  [./lagrange3]
    type = SwitchingFunctionConstraintEta
    variable = eta3
    h_name   = h3
    lambda = lambda
  [../]

  # Lagrange-multiplier constraint kernel for lambda
  [./lagrange]
    type = SwitchingFunctionConstraintLagrange
    variable = lambda
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
    epsilon = 1e-6
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c  L1 L2 L3  kappa11 kappa12 kappa13 kappa21 kappa22 kappa23 kappa31 kappa32 kappa33&#x27;
    prop_values = &#x27;0.2 0        1  1  1   2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00   &#x27;
  [../]

  # We use this to output the level of constraint enforcement
  # ideally it should be 0 everywhere, if the constraint is fully enforced
  [./etasummat]
    type = ParsedMaterial
    f_name = etasum
    args = &#x27;eta1 eta2 eta3&#x27;
    material_property_names = &#x27;h1 h2 h3&#x27;
    function = &#x27;h1+h2+h3-1&#x27;
    outputs = exodus
  [../]

  # This parsed material creates a single property for visualization purposes.
  # It will be 0 for phase 1, -1 for phase 2, and 1 for phase 3
  [./phasemap]
    type = ParsedMaterial
    f_name = phase
    args = &#x27;eta2 eta3&#x27;
    function = &#x27;if(eta3&gt;0.5,1,0)-if(eta2&gt;0.5,1,0)&#x27;
    outputs = exodus
  [../]

  # matrix phase
  [./elasticity_tensor_1]
    type = ComputeElasticityTensor
    base_name = phase1
    C_ijkl = &#x27;3 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_1]
    type = ComputeSmallStrain
    base_name = phase1
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_1]
    type = ComputeLinearElasticStress
    base_name = phase1
  [../]

  # oversized phase
  [./elasticity_tensor_2]
    type = ComputeElasticityTensor
    base_name = phase2
    C_ijkl = &#x27;7 7&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_2]
    type = ComputeSmallStrain
    base_name = phase2
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]
  [./stress_2]
    type = ComputeLinearElasticStress
    base_name = phase2
  [../]
  [./eigenstrain_2]
    type = ComputeEigenstrain
    base_name = phase2
    eigen_base = &#x27;0.02&#x27;
    eigenstrain_name = eigenstrain
  [../]

  # undersized phase
  [./elasticity_tensor_3]
    type = ComputeElasticityTensor
    base_name = phase3
    C_ijkl = &#x27;7 7&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_3]
    type = ComputeSmallStrain
    base_name = phase3
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]
  [./stress_3]
    type = ComputeLinearElasticStress
    base_name = phase3
  [../]
  [./eigenstrain_3]
    type = ComputeEigenstrain
    base_name = phase3
    eigen_base = &#x27;-0.05&#x27;
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching1]
    type = SwitchingFunctionMaterial
    function_name = h1
    eta = eta1
    h_order = SIMPLE
  [../]
  [./switching2]
    type = SwitchingFunctionMaterial
    function_name = h2
    eta = eta2
    h_order = SIMPLE
  [../]
  [./switching3]
    type = SwitchingFunctionMaterial
    function_name = h3
    eta = eta3
    h_order = SIMPLE
  [../]

  [./barrier]
    type = MultiBarrierFunctionMaterial
    etas = &#x27;eta1 eta2 eta3&#x27;
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;4*c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(c-0.9)^2-0.4&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_3]
    type = DerivativeParsedMaterial
    f_name = Fc3
    function = &#x27;(c-0.9)^2-0.5&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # elastic free energies
  [./elastic_free_energy_1]
    type = ElasticEnergyMaterial
    base_name = phase1
    f_name = Fe1
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]
  [./elastic_free_energy_2]
    type = ElasticEnergyMaterial
    base_name = phase2
    f_name = Fe2
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]
  [./elastic_free_energy_3]
    type = ElasticEnergyMaterial
    base_name = phase3
    f_name = Fe3
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]

  # phase free energies (chemical + elastic)
  [./phase_free_energy_1]
    type = DerivativeSumMaterial
    f_name = F1
    sum_materials = &#x27;Fc1 Fe1&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./phase_free_energy_2]
    type = DerivativeSumMaterial
    f_name = F2
    sum_materials = &#x27;Fc2 Fe2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./phase_free_energy_3]
    type = DerivativeSumMaterial
    f_name = F3
    sum_materials = &#x27;Fc3 Fe3&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global free energy
  [./free_energy]
    type = DerivativeMultiPhaseMaterial
    f_name = F
    fi_names = &#x27;F1  F2  F3&#x27;
    hi_names = &#x27;h1  h2  h3&#x27;
    etas     = &#x27;eta1 eta2 eta3&#x27;
    args = &#x27;c&#x27;
    W = 3
  [../]

  # Generate the global stress from the phase stresses
  [./global_stress]
    type = MultiPhaseStressMaterial
    phase_base = &#x27;phase1 phase2 phase3&#x27;
    h          = &#x27;h1     h2     h3&#x27;
  [../]
[]

[BCs]
  # the boundary conditions on the displacement enforce periodicity
  # at zero total shear and constant volume
  [./bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
  [./top_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;top&#x27;
    value = 0
  [../]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = 0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;right&#x27;
    value = 0
  [../]

  [./Periodic]
    [./disp_x]
      auto_direction = &#x27;y&#x27;
    [../]
    [./disp_y]
      auto_direction = &#x27;x&#x27;
    [../]

    # all other phase field variables are fully periodic
    [./c]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta1]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta2]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta3]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./lambda]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      ilu&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10
  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.1
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]

[Debug]
  # show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86562ff5-47dd-4c5d-a9b6-25c93d283205"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh_fu_05.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1E-1 1E0 1E1 1E3 1E4 1E5 1E6 1E7&#x27;
    x = &#x27;0 1E-1 1E0 1E1 1E2 1E3 1E4 1E5 1E6&#x27;
  [../]
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.2
    max = 1.8
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-10 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1E6

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_05
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="85b15cf9-eee1-4f80-972c-5bbf2deb099c"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn17.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true with supg

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
    use_supg = true
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn16
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c9412dfd-b8dd-4129-ba40-2a31cbc8aa00"><div class="modal-content"><h4>test/tests/userobjects/shape_element_user_object/shape_side_uo_jac_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  parallel_type = replicated
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pot]
  [../]
[]

[Kernels]
[]

[BCs]
  [./left_pot]
    boundary = left
    type = ExampleShapeSideIntegratedBC
    variable = pot
    num_user_object = num_user_object
    denom_user_object = denom_user_object
    v = u
    Vb = 1
  [../]
[]

[UserObjects]
  [./num_user_object]
    type = NumShapeSideUserObject
    u = u
    boundary = left
    execute_on = &#x27;linear nonlinear&#x27;
  [../]
  [./denom_user_object]
    type = DenomShapeSideUserObject
    u = u
    boundary = left
    execute_on = &#x27;linear nonlinear&#x27;
  [../]
[]

[Problem]
  type = FEProblem
  kernel_coverage_check = false
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady

  solve_type = NEWTON
  petsc_options = &#x27;-snes_test_display&#x27;
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
[]

[Outputs]
  exodus = true
  perf_graph = true
[]

[ICs]
  [./u]
    type = RandomIC
    variable = u
  [../]
  [./pot]
    type = RandomIC
    variable = pot
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8b261133-e733-4f2e-8af7-3a1ea5c76b4c"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh07.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1E-1 1E0 1E1 1E3 1E4 1E5 1E6 1E7&#x27;
    x = &#x27;0 1E-1 1E0 1E1 1E2 1E3 1E4 1E5 1E6&#x27;
  [../]
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.2
    max = 1.8
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-13 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1E6

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh07
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="834287d8-e082-4f7c-9e97-ae92218b9333"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn02.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn02
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6e1a8655-addf-4f31-8367-7620cc06e765"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_16.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn16
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="366f23f0-771f-4466-b34e-4e075bea9569"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_20.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true, with fully_upwind = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
  fully_upwind = true
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E6 2E6&#x27;  # can not make too high as finite difference constant state bums out due to precision loss
    use_mobility = false
    use_relperm = false
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn_fu_20
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4dac33a-908c-4a4b-bd53-d29aaa3fbbb9"><div class="modal-content"><h4>modules/combined/test/tests/chemical_reactions_richards/langmuir_jac3.i</h4><pre class="moose-pre"><code class="language-text"># testing whether when we have a centre block containing &#x27;conc&#x27; which is a CONSTANT MONOMIAL, and two-phase Richards flow, we get the correct Jacobian
[Mesh]
  type = FileMesh
  file = three_eles.e
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGstandard SUPGstandard&#x27;
  sat_UO = &#x27;Saturation Saturation&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 1.1E-5&#x27;
  gravity = &#x27;0 0 -10&#x27;
  linear_shape_fcns = true
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1000
    bulk_mod = 2E9
  [../]
  [./DensityGas]
    type = RichardsDensityMethane20degC
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1E-5
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1E-5
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 3
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.0
    sum_s_res = 0.0
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 1.0E+1
  [../]
[]

[Variables]
  [./pwater]
  [../]
  [./pgas]
  [../]
  [./conc]
    family = MONOMIAL
    order = CONSTANT
    block = centre_block
  [../]
[]

[ICs]
  [./water]
    type = ConstantIC
    variable = pwater
    value = 0.0
  [../]
  [./gas]
    type = RandomIC
    variable = pgas
    min = 0
    max = 5E5
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = 0
    max = 20
    block = centre_block
  [../]
[]


[Kernels]
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
  [./c_dot]
    type = TimeDerivative
    block = centre_block
    variable = conc
  [../]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    block = centre_block
    variable = conc
    pressure_var = pgas
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    block = centre_block
    variable = pgas
    conc_var = conc
  [../]
[]

[Materials]
  [./all_blocks]
    type = RichardsMaterial
    block = &#x27;left_block centre_block right_block&#x27;
    mat_porosity = 0.02
    mat_permeability = &#x27;1E-15 0 0  0 1E-15 0  0 0 1E-16&#x27;
  [../]
  [./langmuir_params]
    type = LangmuirMaterial
    block = centre_block
    one_over_desorption_time_const = 0.813
    one_over_adsorption_time_const = 0.813
    langmuir_density = 20.0
    langmuir_pressure = 1.5E6
    pressure_var = pgas
    conc_var = conc
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E3 # get rid of the large c_dot contribution
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac3
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0434b098-bffd-45c2-afd7-42f6a9b142ac"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/disp01.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the dispersive contribution to the diffusive component of
# the PorousFlowDisperiveFlux kernel. By setting disp_long and disp_trans to the same
# non-zero value, and diffusion to zero (by setting tortuosity to zero), the purely
# dispersive component of the flux is zero, and the only flux is due to the contribution
# from disp_trans on the diffusive flux.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 2e1
    min = 1e1
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.1
    disp_trans = 0.1
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.1
    disp_trans = 0.1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-2 1e-1&#x27;
    tortuosity = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="64530cbc-b829-47a7-b7c1-f96dd5ee86c8"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_04.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn04
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4318c264-8c9a-4496-9f29-d564c96ea3f3"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_02.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn02
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5851dcfc-dcd7-4834-a025-3ea6974dcf6b"><div class="modal-content"><h4>modules/phase_field/examples/nucleation/cahn_hilliard.i</h4><pre class="moose-pre"><code class="language-text">#
# Test the DiscreteNucleation material in a toy system. The global
# concentration is above the solubility limit, but below the spinodal.
# Without further intervention no nucleation will occur in a phase
# field model. The DiscreteNucleation material will locally modify the
# free energy to coerce nuclei to grow.
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 120
  ny = 120
  xmax = 500
  ymax = 500
  elem_type = QUAD
[]

[Modules]
  [./PhaseField]
    [./Conserved]
      [./c]
        free_energy = F
        mobility = M
        kappa = kappa_c
        solve_type = REVERSE_SPLIT
      [../]
    [../]
  [../]
[]

[ICs]
  [./c_IC]
    type = RandomIC
    variable = c
    min = 0.2
    max = 0.21
  [../]
[]

[Materials]
  [./pfmobility]
    type = GenericConstantMaterial
    prop_names  = &#x27;M kappa_c&#x27;
    prop_values = &#x27;1 25&#x27;
  [../]
  [./chemical_free_energy]
    # simple double well free energy
    type = DerivativeParsedMaterial
    f_name = Fc
    args = &#x27;c&#x27;
    constant_names       = &#x27;barr_height  cv_eq&#x27;
    constant_expressions = &#x27;0.1          0&#x27;
    function = 16*barr_height*c^2*(1-c)^2 # +0.01*(c*plog(c,0.005)+(1-c)*plog(1-c,0.005))
    derivative_order = 2
    outputs = exodus
  [../]
  [./probability]
    # This is a made up toy nucleation rate it should be replaced by
    # classical nucleation theory in a real simulation.
    type = ParsedMaterial
    f_name = P
    args = c
    function = c*1e-7
    outputs = exodus
  [../]
  [./nucleation]
    # The nucleation material is configured to insert nuclei into the free energy
    # tht force the concentration to go to 0.95, and holds this enforcement for 500
    # time units.
    type = DiscreteNucleation
    f_name = Fn
    op_names  = c
    op_values = 0.90
    penalty = 5
    penalty_mode = MIN
    map = map
    outputs = exodus
  [../]
  [./free_energy]
    # add the chemical and nucleation free energy contributions together
    type = DerivativeSumMaterial
    derivative_order = 2
    args = c
    sum_materials = &#x27;Fc Fn&#x27;
  [../]
[]

[UserObjects]
  [./inserter]
    # The inserter runs at the end of each time step to add nucleation events
    # that happend during the timestep (if it converged) to the list of nuclei
    type = DiscreteNucleationInserter
    hold_time = 100
    probability = P
  [../]
  [./map]
    # The map UO runs at the beginning of a timestep and generates a per-element/qp
    # map of nucleus locations. The map is only regenerated if the mesh changed or
    # the list of nuclei was modified.
    # The map converts the nucleation points into finite area objects with a given radius.
    type = DiscreteNucleationMap
    radius = 10
    periodic = c
    inserter = inserter
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Postprocessors]
  [./dt]
    type = TimestepSize
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu          &#x27;

  nl_max_its = 20
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-10
  nl_abs_tol = 1.0e-10
  start_time = 0.0
  num_steps = 1200

  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    growth_factor = 1.5
    cutback_factor = 0.5
    optimal_iterations = 5
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8738f3b5-c1e5-4e85-a432-b25372cb963e"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/2species_equilibrium.i</h4><pre class="moose-pre"><code class="language-text"># Tests the Jacobian when equilibrium secondary species are present

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  ny = 3
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    max = 5
    min = 1
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[ReactionNetwork]
  [./AqueousEquilibriumReactions]
    primary_species = &#x27;a b&#x27;
    reactions = &#x27;2a = pa2     2
                 a + b = pab 2&#x27;
    secondary_species = &#x27;pa2 pab&#x27;
    pressure = pressure
  [../]
[]

[Kernels]
  [./a_ie]
    type = PrimaryTimeDerivative
    variable = a
  [../]
  [./a_diff]
    type = PrimaryDiffusion
    variable = a
  [../]
  [./a_conv]
    type = PrimaryConvection
    variable = a
    p = pressure
  [../]
  [./b_ie]
    type = PrimaryTimeDerivative
    variable = b
  [../]
  [./b_diff]
    type = PrimaryDiffusion
    variable = b
  [../]
  [./b_conv]
    type = PrimaryConvection
    variable = b
    p = pressure
  [../]
  [./pressure]
    type = DarcyFluxPressure
    variable = pressure
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4b8358a4-10d1-49a1-8a74-a16376c32cde"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jnQ2P_bh2.i</h4><pre class="moose-pre"><code class="language-text"># quick two phase with injection borehole

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]


[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.3 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.1
    n = 3
  [../]
  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pp]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
  [./sat]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]



[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_viscosity = 1
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 1
  diffusivity = 0
[]


[DiracKernels]
  [./bh_water]
    type = Q2PBorehole
    bottom_pressure = 2
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = sat
    unit_weight = &#x27;0 0 0&#x27;
    character = -1E12
    fluid_density = DensityWater
    fluid_relperm = RelPermWater
    other_var = pp
    var_is_porepressure = false
    fluid_viscosity = 0.5
  [../]
  [./bh_gas]
    type = Q2PBorehole
    bottom_pressure = 1.5
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pp
    unit_weight = &#x27;0 0 0&#x27;
    character = -1E12
    fluid_density = DensityGas
    fluid_relperm = RelPermGas
    other_var = sat
    var_is_porepressure = true
    fluid_viscosity = 0.25
  [../]
[]



[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 0 # just so we get virtually no contributions from the time derivatives
    mat_permeability = &#x27;1.1E-20 0 0  0 2.2E-20 0  0 0 3.3E-20&#x27;
    gravity = &#x27;1 2 3&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jnQ2P_bh2
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="58a2da9b-4a51-459c-83ca-92a1058ab99f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_planar.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1250
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1250
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    yield_function_tolerance = 1.0E-1
    shift = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    deactivation_scheme = &#x27;safe_to_dumb&#x27;
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    min_stepsize = 1E-3
    max_stepsize_for_dumb = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_planar
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9cd9240f-d5fd-4fa8-81a4-1d9f8f5976a9"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/diff02.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the diffusive component of the PorousFlowDisperiveFlux kernel for two phases.
# By setting disp_long and disp_trans to zero, the purely diffusive component of the flux
# can be isolated. Uses constant tortuosity and diffusion coefficients

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./sgas]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./massfrac1]
  [../]
[]

[ICs]
  [./sgas]
    type = RandomIC
    variable = sgas
    max = 1
    min = 0
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = sgas
    gravity = &#x27;1 0 0&#x27;
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;sgas massfrac0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 0.1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = 1
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
     diffusion_coeff = &#x27;1e-2 1e-1 1e-2 1e-1&#x27;
     tortuosity = &#x27;0.1 0.2&#x27;
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityConst
    phase = 1
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="74b26595-40e1-4112-84ff-12d411fdfd5c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_linear_elasticity/linear_elastic_material.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 50
  ymax = 50
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./diffused]
     [./InitialCondition]
      type = RandomIC
     [../]
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
  use_automatic_differentiation = true
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = diffused
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e6
    poissons_ratio = 0
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
[]

[BCs]
  [./bottom]
    type = ADDirichletBC
    variable = diffused
    boundary = &#x27;right&#x27;
    value = 1
  [../]
  [./top]
    type = ADDirichletBC
    variable = diffused
    boundary = &#x27;top&#x27;
    value = 0
  [../]
  [./disp_x_BC]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;bottom top&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = ADDirichletBC
    variable = disp_x
    boundary = &#x27;left right&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;bottom top&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = ADDirichletBC
    variable = disp_y
    boundary = &#x27;left right&#x27;
    value = 0.02
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6478d9f0-c927-40a2-a5b6-837772129d08"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh06.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh06
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f32fce0d-646f-4148-b9ef-7f7115ffb394"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_05.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn05
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="317eb822-9830-4d82-a906-bd6925c42063"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto02.i</h4><pre class="moose-pre"><code class="language-text"># checking jacobian for linear plasticity (weak_plane_tensile)
# with hardening
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1 2&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;1 2 3  2 -4 -5  3 -5 2&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    tangent_operator = linear
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c3e4b34e-3af4-419d-8991-4e27b2dbe183"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCTrad/pfct_newton_split1_asm1_10.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
  xmax = 8
  ymax = 8
[]

[Variables]
  [./n]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 4
    [../]
  [../]
  [./u]
    scaling = 1e2
  [../]
  [./v]
    scaling = 1e1
  [../]
[]

[Kernels]
  [./ndot]
    type = TimeDerivative
    variable = n
  [../]
  [./n_bulk]
    type = CHBulkPFCTrad
    variable = n
  [../]
  [./u_term]
    type = MatDiffusion
    variable = n
    v = u
    diffusivity = C2
  [../]
  [./v_term]
    type = MatDiffusion
    variable = n
    v = v
    diffusivity = C4
  [../]
  [./u_rctn]
    type = Reaction
    variable = u
  [../]
  [./u_gradn]
    type = LaplacianSplit
    variable = u
    c = n
  [../]
  [./v_rctn]
    type = Reaction
    variable = v
  [../]
  [./v_gradu]
    type = LaplacianSplit
    variable = v
    c = u
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFCTrad]
    type = PFCTradMaterial
    order = 4
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;

  l_max_its = 100
  l_tol = 1e-04
  nl_rel_tol = 1e-09
  nl_abs_tol = 1e-11

  splitting = &#x27;nuv&#x27;
  petsc_options = &#x27;-snes_view&#x27;

  num_steps = 2
  dt = 0.1
[]

[Splits]
  [./nuv]
    splitting       = &#x27;v nu&#x27;
    splitting_type  = schur
    schur_type      = full
    schur_pre       = Sp
    #petsc_options = &#x27;-dm_view&#x27;
  [../]
  [./nu]
    vars = &#x27;n u&#x27;
    petsc_options = &#x27;-ksp_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_asm_nblocks -pc_asm_overlap  -sub_pc_type&#x27;
    petsc_options_value =  &#x27;              101      asm              10               1            lu&#x27;
  [../]
  [./v]
    vars = &#x27;v&#x27;
    #petsc_options = &#x27;-ksp_monitor&#x27;
    petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
    petsc_options_value =  &#x27;asm         101   preonly   lu      0&#x27;
    #full = true
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0ffe3c3d-e667-42a6-8bc6-e2e1b9fac8fb"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[AuxVariables]
  [./RFUF_Residual]
  [../]
  [./RFUF_Jacobian]
  [../]
[]

[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    richardsVarNames_UO = PPNames
    variable = pressure
    save_in = RFUF_Residual
    diag_save_in = RFUF_Jacobian
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_01
  [./Exodus]
    hide = &#x27;RFUF_Residual RFUF_Jacobian&#x27;
    type = Exodus
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="269bf5f2-0637-4c4f-b456-2c835464032e"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh03.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.4
    max = 0.6
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.4
    max = 1.6
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
    outputs = none # no reason why mass should be conserved
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
    outputs = none # no reason why mass should be conserved
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_factor_shift_type&#x27;
    petsc_options_value = &#x27;nonzero&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh03
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4b82a6f-2020-489e-9477-ba1f867c9f44"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn04.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn04
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="01141de6-2103-4cea-9f50-aeec5a28b934"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh03.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh03
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="63f88fa9-c94d-4a77-b80c-eb357c18076c"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux13.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP), 3components (that exist in both phases), constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with vanGenuchten
# using harmonic-mean mobility
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 0.4
  [../]
[]


[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 -0.1 0&#x27;
    full_upwind_threshold = 0
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 -0.1 0&#x27;
    full_upwind_threshold = 0
    fallback_scheme = harmonic
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac_ph0_sp0
    gravity = &#x27;-1 -0.1 0&#x27;
    full_upwind_threshold = 0
    fallback_scheme = harmonic
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="93fc61b9-f2bf-4c3f-9ca9-335fc546d2e1"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_twophase_nonisothermal.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for nonisothermal two phase conditions

[Mesh]
  [./mesh]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 2
    ny = 2
  [../]
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
  [./temperature]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e5
    max = 5e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.06
    variable = z
  [../]
  [./temperature]
    type = RandomIC
    min = 20
    max = 80
    variable = temperature
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
  [./energy]
    type = PorousFlowEnergyTimeDerivative
    variable = temperature
  [../]
  [./heat]
    type = PorousFlowHeatAdvection
    variable = temperature
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z temperature&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temperature
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature = temperature
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1000
    density = 2500
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4c91d181-66c1-4ad7-8d67-edd50b53405e"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass04.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./mass_sp0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./mass_sp1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="27ab3374-aef8-4765-b754-3fa2f5ab3a54"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_gas.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that give a single gas phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 5e4
    max = 1e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.9
    max = 0.99
    variable = zi
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e7674df7-e87b-4b8b-afc0-d8553cf123d0"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random5.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb
# Plasticity models:
# Tensile strength = 1.5
# Compressive strength = 3.0
# Cohesion = 1.0
# Friction angle = dilation angle = 20deg
#
# Young = 1, Poisson = 0.3
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 12
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 12
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./Smax]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./Smid]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./Smin]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./Smax]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = Smax
    scalar_type = MaxPrincipal
  [../]
  [./Smid]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = Smid
    scalar_type = MidPrincipal
  [../]
  [./Smin]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = Smin
    scalar_type = MinPrincipal
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1.5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 3.0
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1.0
  [../]
  [./phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./psi]
    type = TensorMechanicsHardeningConstant
    value = 3
    convert_to_radians = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 100
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ComputeFiniteStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./capped_mc]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    smoothing_tol = 0.2
    yield_function_tol = 1.0E-12
    max_NR_iterations = 1000
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = capped_mc
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random5
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="096b9df8-6f82-416f-b5c7-61fff4dbe0a9"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_22.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true, with fully_upwind = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  fully_upwind = true
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # can not make too high as finite-difference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    variable = pwater
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bd14b6ac-2d6b-4078-bf9b-ebec52c1ff5b"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain_action.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
[]

[Modules/PhaseField/MortarPeriodicity]
  [./strain]
    variable = &#x27;disp_x disp_y&#x27;
    periodicity = gradient
    periodic_directions = &#x27;x y&#x27;
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9631856d-0c47-4c57-993c-8f68c591a34e"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/diff03.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the diffusive component of the PorousFlowDisperiveFlux kernel for two phases.
# By setting disp_long and disp_trans to zero, the purely diffusive component of the flux
# can be isolated. Uses saturation-dependent tortuosity and diffusion coefficients from the
# Millington-Quirk model

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./sgas]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./massfrac1]
  [../]
[]

[ICs]
  [./sgas]
    type = RandomIC
    variable = sgas
    max = 1
    min = 0
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = sgas
    gravity = &#x27;1 0 0&#x27;
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;sgas massfrac0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 0.1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = 1
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityMillingtonQuirk
    diffusion_coeff = &#x27;1e-2 1e-1 1e-2 1e-1&#x27;
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityConst
    phase = 1
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f26cde5f-21cd-4d66-87a0-e88dbc92a744"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn07.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn07
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1854b27d-8124-4c92-938f-2777585add85"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_tolerance_test.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  num_L = 5
  L_name_base = L
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 12
  ny = 12
  xmax = 6
  ymax = 6
[]

[Variables]
  [./PFCRFFVariables]
  [../]
  [./n]
    [./InitialCondition]
      type = RandomIC
      max = 0.8
      min = 0.2
      seed = 12345
    [../]
  [../]
[]

[Kernels]
  [./PFCRFFKernel]
    n_name = n
    log_approach = tolerance
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFC]
    type = PFCRFFMaterial
  [../]
[]

[Postprocessors]
  [./dt]
    type = TimestepSize
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  # petsc_options = &#x27;-snes_mf_operator -ksp_monitor&#x27;
  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 31&#x27;
  # petsc_options = &#x27;-pc_factor_shift_nonzero &#x27;
  # petsc_options_iname = -pc_type
  # petsc_options_value = lu
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         101   preonly   lu      5&#x27;
  type = Transient
  num_steps = 1
  dt = 0.1
  l_max_its = 50
  nl_max_its = 20
  solve_type = NEWTON
  l_tol = 1e-04
  nl_rel_tol = 1e-9
  scheme = bdf2
[]

[Outputs]
  exodus = true
[]

[ICs]
  active = &#x27;&#x27;
  [./density_IC]
    y2 = 10.5
    lc = 6
    y1 = 1.5
    min = .8
    max = .2
    x2 = 10.5
    crystal_structure = FCC
    variable = n
    x1 = 1.5
    type = PFCFreezingIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f1a5f912-5d52-4109-a7a9-2f7797d5dc43"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_twophase.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that are appropriate for two phases

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e6
    max = 4e6
    variable = pgas
    seed = 1
  [../]
  [./z]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = zi
    seed = 2
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="20e1e43e-4f06-494f-8a69-874481aa4944"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/inertial_torque.i</h4><pre class="moose-pre"><code class="language-text"># Check of the InertialTorque Jacobian
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  velocities = &#x27;vel_x vel_y vel_z&#x27;
  accelerations = &#x27;accel_x accel_y accel_z&#x27;
  gamma = 0.4
  beta = 0.4
  alpha = 0.1
  eta = 0.1
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./vel_x]
  [../]
  [./vel_y]
  [../]
  [./vel_z]
  [../]
  [./accel_x]
  [../]
  [./accel_y]
  [../]
  [./accel_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
  [../]
  [./vel_x]
    type = RandomIC
    variable = vel_x
  [../]
  [./vel_y]
    type = RandomIC
    variable = vel_y
  [../]
  [./vel_z]
    type = RandomIC
    variable = vel_z
  [../]
  [./accel_x]
    type = RandomIC
    variable = accel_x
  [../]
  [./accel_y]
    type = RandomIC
    variable = accel_y
  [../]
  [./accel_z]
    type = RandomIC
    variable = accel_z
  [../]
[]


[Kernels]
  [./icm_x]
    type = InertialTorque
    component = 0
    variable = disp_x
  [../]
  [./icm_y]
    type = InertialTorque
    component = 1
    variable = disp_y
  [../]
  [./icm_z]
    type = InertialTorque
    component = 2
    variable = disp_z
  [../]
[]


[AuxKernels]
  [./vel_x]
    type = NewmarkVelAux
    variable = vel_x
    acceleration = accel_x
    execute_on = timestep_end
  [../]
  [./vel_y]
    type = NewmarkVelAux
    variable = vel_y
    acceleration = accel_y
    execute_on = timestep_end
  [../]
  [./vel_z]
    type = NewmarkVelAux
    variable = vel_z
    acceleration = accel_z
    execute_on = timestep_end
  [../]
  [./accel_x]
    type = NewmarkAccelAux
    variable = accel_x
    displacement = disp_x
    velocity = vel_x
    execute_on = timestep_end
  [../]
  [./accel_y]
    type = NewmarkAccelAux
    variable = accel_y
    displacement = disp_y
    velocity = vel_y
    execute_on = timestep_end
  [../]
  [./accel_z]
    type = NewmarkAccelAux
    variable = accel_z
    displacement = disp_z
    velocity = vel_z
    execute_on = timestep_end
  [../]
[]

[Materials]
  [./density]
    type = GenericConstantMaterial
    prop_names = density
    prop_values = 3.0
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bbed31b3-e769-4916-8b54-ee28d69ce598"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random01
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d3d3a86b-f4f2-4b54-aa98-fc34156d32f9"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh10.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh10
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3b84e464-cbd5-4cef-8877-3e7cc741f491"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn14.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn14
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9d37383d-855e-412e-97e0-741f78053c24"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/pls04.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPiecewiseLinearSink with 2-phase, 3-components, with enthalpy, internal_energy, and thermal_conductivity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 2
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
  [./temp]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = 1
    max = 2
  [../]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
      cv = 1.8
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.1 0.2 0.3 0.2 0 0.1 0.3 0.1 0.1&#x27;
    wet_thermal_conductivity = &#x27;10 2 31 2 40 1 31 1 10&#x27;
    exponent = 0.5
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;left&#x27;
    pt_vals = &#x27;-1 -0.5 0&#x27;
    multipliers = &#x27;1 2 4&#x27;
    variable = ppwater
    mass_fraction_component = 0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    use_enthalpy = true
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 -2 4&#x27;
    mass_fraction_component = 0
    variable = ppgas
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    use_internal_energy = true
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 3 4&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph0_sp0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    use_internal_energy = true
  [../]
  [./flux_2]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;back top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;0 1 -3&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    use_enthalpy = true
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
  [./flux_3]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 3 4&#x27;
    mass_fraction_component = 2
    variable = ppwater
    fluid_phase = 0
    use_relperm = true
    use_enthalpy = true
    use_mobility = true
  [../]
  [./flux_4]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;back top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;0 1 -3&#x27;
    mass_fraction_component = 2
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-0.5*x*y&#x27;
    use_enthalpy = true
    use_thermal_conductivity = true
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = pls04
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1f7c135b-4696-4a0f-a9ab-f6a198381fc7"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh04.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh04
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="61405242-7c33-4b32-8992-c6885dcf0f4a"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_03.i</h4><pre class="moose-pre"><code class="language-text"># Checking the Jacobian of Flux-Limited TVD Advection, 2 phases, 2 components, using flux_limiter_type = None
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 2
  ymin = -1
  ymax = 2
  bias_y = 1.5
[]

[GlobalParams]
  gravity = &#x27;1 2 -0.5&#x27;
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]


[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./flux_ph0_sp0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = ppwater
    advective_flux_calculator = advective_flux_calculator_ph0_sp0
  [../]
  [./flux_ph0_sp1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = ppgas
    advective_flux_calculator = advective_flux_calculator_ph0_sp1
  [../]
  [./flux_ph1_sp0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = massfrac_ph0_sp0
    advective_flux_calculator = advective_flux_calculator_ph1_sp0
  [../]
  [./flux_ph1_sp1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = massfrac_ph1_sp0
    advective_flux_calculator = advective_flux_calculator_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.5
  [../]
  [./advective_flux_calculator_ph0_sp0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    phase = 0
    fluid_component = 0
  [../]
  [./advective_flux_calculator_ph0_sp1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    phase = 0
    fluid_component = 1
  [../]
  [./advective_flux_calculator_ph1_sp0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    phase = 1
    fluid_component = 0
  [../]
  [./advective_flux_calculator_ph1_sp1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = None
    phase = 1
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.21 0 0  0 1.5 0  0 0 0.8&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
  num_steps = 1
  dt = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c36d9da5-227d-430d-96f4-1082c743ef9d"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_03.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_03
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2d6522d7-d4f2-4498-a964-1d72878c369e"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh01
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bf4cd5f9-e84a-4373-a0db-171d1bc1aac7"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass_vol_exp01.i</h4><pre class="moose-pre"><code class="language-text"># Tests the PorousFlowMassVolumetricExpansion kernel
# Fluid with constant bulk modulus, van-Genuchten capillary, constant porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  block = 0
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./p]
    type = RandomIC
    min = -1
    max = 1
    variable = porepressure
  [../]
[]

[BCs]
  # necessary otherwise volumetric strain rate will be zero
  [./disp_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_z]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./poro]
    type = PorousFlowMassVolumetricExpansion
    fluid_component = 0
    variable = porepressure
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1E20
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jacobian2
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a3ca541b-be7f-4ad0-a571-65325f3b563a"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/langmuir_jac_de.i</h4><pre class="moose-pre"><code class="language-text"># testing desorption jacobian
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 1
    max = 2
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./langmuir_params]
    type = LangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0.813
    one_over_adsorption_time_const = 0
    langmuir_density = 0.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="069934f4-d878-4884-9b9f-bf9bceee709e"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/hcs02.i</h4><pre class="moose-pre"><code class="language-text"># apply a half-cubic heat sink flux
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 2
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = temp
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = -1
    max = 0
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;left&#x27;
    center = 0.1
    cutoff = -1.1
    max = 2.2
    variable = temp
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;top left front&#x27;
    center = 0.5
    cutoff = -1.1
    max = -2.2
    variable = temp
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;right&#x27;
    center = -0.1
    cutoff = -1.1
    max = 1.2
    variable = temp
    flux_function = &#x27;-1.1*x*y&#x27;
  [../]
  [./flux_2]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;bottom&#x27;
    center = 3.2
    cutoff = -1.1
    max = 1.2
    variable = temp
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
[]


[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = hcs02
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b856f498-545a-4093-8f89-0a374d813d08"><div class="modal-content"><h4>test/tests/materials/derivative_sum_material/ad_random_ic.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmax = 250
  ymax = 250
  elem_type = QUAD4
[]

[Variables]
  [./c]
    [./InitialCondition]
      type = RandomIC
    [../]
  [../]
[]

[Kernels]
  [./w_res]
    type = ADDiffusion
    variable = c
  [../]
  [./time]
    type = ADTimeDerivative
    variable = c
  [../]
[]

[Materials]
  [./free_energy1]
    type = ADDerivativeParsedMaterial
    f_name = Fa
    args = &#x27;c&#x27;
    function = (c-0.1)^4*(1-0.1-c)^4
  [../]
  [./free_energy2]
    type = ADDerivativeParsedMaterial
    f_name = Fb
    args = &#x27;c&#x27;
    function = -0.25*(c-0.1)^4*(1-0.1-c)^4
  [../]

  # Fa+Fb+Fb == Fc
  [./free_energy3]
    type = ADDerivativeParsedMaterial
    f_name = Fc
    args = &#x27;c&#x27;
    function = 0.5*(c-0.1)^4*(1-0.1-c)^4
    outputs = all
  [../]
  [./dfree_energy3]
    type = ADDerivativeParsedMaterial
    f_name = dFc
    args = &#x27;c&#x27;
    material_property_names = &#x27;F:=D[Fc,c]&#x27;
    function = F
    outputs = all
  [../]
  [./d2free_energy3]
    type = ADDerivativeParsedMaterial
    f_name = d2Fc
    args = &#x27;c&#x27;
    material_property_names = &#x27;F:=D[Fc,c,c]&#x27;
    function = F
    outputs = all
  [../]

  [./free_energy]
    type = ADDerivativeSumMaterial
    f_name = F_sum
    sum_materials = &#x27;Fa Fb Fb&#x27;
    args = &#x27;c&#x27;
    outputs = all
  [../]
  [./dfree_energy]
    type = ADDerivativeParsedMaterial
    f_name = dF_sum
    material_property_names = &#x27;F:=D[F_sum,c]&#x27;
    function = F
    args = &#x27;c&#x27;
    outputs = all
  [../]
  [./d2free_energy]
    type = ADDerivativeParsedMaterial
    f_name = d2F_sum
    material_property_names = &#x27;F:=D[F_sum,c,c]&#x27;
    function = F
    args = &#x27;c&#x27;
    outputs = all
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 1
[]

[Postprocessors]
  [./F_sum]
    type = ElementAverageValue
    variable = F_sum
  [../]
  [./F_check]
    type = ElementAverageValue
    variable = Fc
  [../]
  [./dF_sum]
    type = ElementAverageValue
    variable = dF_sum
  [../]
  [./dF_check]
    type = ElementAverageValue
    variable = dFc
  [../]
  [./d2F_sum]
    type = ElementAverageValue
    variable = d2F_sum
  [../]
  [./d2F_check]
    type = ElementAverageValue
    variable = d2Fc
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8ab08e47-191d-49d8-bb3b-60a3fc65aa7b"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_07.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn07
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e187ec00-d6f1-4a0e-b99a-d59ce4dcf63d"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn21.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsHalfGaussianSink
    boundary = &#x27;left right&#x27;
    max = 2E6
    sd = 0.7
    centre = 0.9
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn21
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a5c5fe8c-3055-4110-833d-b5c302d6595f"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn22.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # cannot make too high as finitedifference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn20
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a8315589-191a-4615-b89e-e9584d6fff26"><div class="modal-content"><h4>test/tests/ics/random_ic_test/random_ic_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
[]

[Variables]
  [u]
    order = FIRST
    family = LAGRANGE
  []
[]

[AuxVariables]
  [u_aux]
    order = FIRST
    family = LAGRANGE
  []
[]

[ICs]
  [u]
    type = RandomIC
    legacy_generator = false
    variable = u
  []

  [u_aux]
    type = RandomIC
    legacy_generator = false
    variable = u_aux
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
  []

  [right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
  []
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="36d171b9-72e1-4d76-892a-90605cbaef38"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01a.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant fluid-bulk, constant viscosity, constant permeability, Corey relative perm
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_00]
    type = PointValue
    variable = pp
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_01]
    type = PointValue
    variable = pp
    point = &#x27;-0.1 0 0&#x27;
  [../]
  [./pp_02]
    type = PointValue
    variable = pp
    point = &#x27;-0.2 0 0&#x27;
  [../]
  [./pp_03]
    type = PointValue
    variable = pp
    point = &#x27;-0.3 0 0&#x27;
  [../]
  [./pp_04]
    type = PointValue
    variable = pp
    point = &#x27;-0.4 0 0&#x27;
  [../]
  [./pp_05]
    type = PointValue
    variable = pp
    point = &#x27;-0.5 0 0&#x27;
  [../]
  [./pp_06]
    type = PointValue
    variable = pp
    point = &#x27;-0.6 0 0&#x27;
  [../]
  [./pp_07]
    type = PointValue
    variable = pp
    point = &#x27;-0.7 0 0&#x27;
  [../]
  [./pp_08]
    type = PointValue
    variable = pp
    point = &#x27;-0.8 0 0&#x27;
  [../]
  [./pp_09]
    type = PointValue
    variable = pp
    point = &#x27;-0.9 0 0&#x27;
  [../]
  [./pp_10]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01a
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="894edd8c-61eb-41df-9ed1-b7ba6e8afd59"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/2species_equilibrium_with_density.i</h4><pre class="moose-pre"><code class="language-text"># Tests the Jacobian when equilibrium secondary species are present including density
# in flux calculation

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  ny = 3
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    max = 5
    min = 1
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[ReactionNetwork]
  [./AqueousEquilibriumReactions]
    primary_species = &#x27;a b&#x27;
    reactions = &#x27;2a = pa2     2
                 a + b = pab 2&#x27;
    secondary_species = &#x27;pa2 pab&#x27;
    pressure = pressure
  [../]
[]

[Kernels]
  [./a_ie]
    type = PrimaryTimeDerivative
    variable = a
  [../]
  [./a_diff]
    type = PrimaryDiffusion
    variable = a
  [../]
  [./a_conv]
    type = PrimaryConvection
    variable = a
    p = pressure
    gravity = &#x27;0 -10 0&#x27;
  [../]
  [./b_ie]
    type = PrimaryTimeDerivative
    variable = b
  [../]
  [./b_diff]
    type = PrimaryDiffusion
    variable = b
  [../]
  [./b_conv]
    type = PrimaryConvection
    variable = b
    p = pressure
    gravity = &#x27;0 -10 0&#x27;
  [../]
  [./pressure]
    type = DarcyFluxPressure
    variable = pressure
    gravity = &#x27;0 -10 0&#x27;
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity density&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2 10&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="743f71a6-5e29-4215-9e0c-0612c14bc8c0"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn01.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn01
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3756fe75-44da-4758-a239-af82ce2f9aa1"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_06.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn06
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d687c301-d741-4ce6-9248-c1b5b235c0f1"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/langmuir_jac2.i</h4><pre class="moose-pre"><code class="language-text"># testing whether when we have a centre block containing &#x27;conc&#x27; which is a CONSTANT MONOMIAL, we get the correct Jacobian
[Mesh]
  type = FileMesh
  file = three_eles.e
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
    family = MONOMIAL
    order = CONSTANT
    block = centre_block
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = -1
    max = 1
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
    block = centre_block
  [../]
[]


[Kernels]
  [./p_dot] # this is just so a kernel is defined everywhere
    type = TimeDerivative
    variable = pressure
  [../]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    block = centre_block
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    block = centre_block
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./nothing] # when any block contains a material, all blocks need to
    type = GenericConstantMaterial
    block = &#x27;left_block centre_block right_block&#x27;
    prop_names = &#x27;&#x27;
    prop_values = &#x27;&#x27;
  [../]
  [./langmuir_params]
    type = MollifiedLangmuirMaterial
    block = centre_block
    one_over_desorption_time_const = 0.813E-10
    one_over_adsorption_time_const = 0.813E-10
    langmuir_density = 2.34
    langmuir_pressure = 1.5
    pressure_var = pressure
    conc_var = conc
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac2
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="479b9343-47cc-464b-8dd1-a3534591315f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/random.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0.1E3
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-6
    min_stepsize = 1E-3
    plastic_models = mc
    debug_fspb = crash
    deactivation_scheme = safe
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c13bd58b-a3fd-4c34-b962-afa3960dfed4"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/line_sink03.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPeacemanBorehole with 2-phase, 3-components, with enthalpy, internal_energy, and thermal_conductivity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
  [./temp]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
  [./dummy_outflow0]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow1]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow2]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow3]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow4]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow5]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow6]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow7]
    type = PorousFlowSumQuantity
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = 1
    max = 2
  [../]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
      cv = 1.8
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.1 0.02 0.03 0.02 0.0 0.01 0.03 0.01 0.3&#x27;
  [../]
[]

[DiracKernels]
  #active = &#x27;dirac6 dirac2&#x27; # incorrect jacobian for ny=2
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5&#x27; # correct jacobian for ny=2
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5 dirac6&#x27; # incorrect jacobian for ny=2
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5 dirac7&#x27; # correct jacobian in dbg, but not in opt, for ny=2
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5 dirac6&#x27; # incorrect jacobian in dbg, but correct for opt, for ny=1
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5&#x27; # correct jacobian, for ny=1
  #active = &#x27;dirac0 dirac1 dirac2 dirac3 dirac4 dirac5 dirac6&#x27; # incorrect jacobian in dbg, but correct for opt, for ny=1.  row24, col 21 and 22 are wrong.  row24=node3, 21=ppwater, 22=ppgas, 24=massfrac_ph0_sp1 (all at node3)
  [./dirac0]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = ppwater
    point_file = one_point.bh
    line_length = 1
    SumQuantityUO = dummy_outflow0
    character = 1
    bottom_p_or_t = -10
    unit_weight = &#x27;1 2 3&#x27;
    re_constant = 0.123
  [../]
  [./dirac1]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = ppgas
    line_length = 1
    line_direction = &#x27;-1 -1 -1&#x27;
    use_relative_permeability = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow1
    character = -0.5
    bottom_p_or_t = 10
    unit_weight = &#x27;1 2 -3&#x27;
    re_constant = 0.3
  [../]
  [./dirac2]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = massfrac_ph0_sp0
    line_length = 1.3
    line_direction = &#x27;1 0 1&#x27;
    use_mobility = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow2
    character = 0.6
    bottom_p_or_t = -4
    unit_weight = &#x27;-1 -2 -3&#x27;
    re_constant = 0.4
  [../]
  [./dirac3]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = massfrac_ph0_sp1
    line_length = 1.3
    line_direction = &#x27;1 1 1&#x27;
    use_enthalpy = true
    mass_fraction_component = 0
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow3
    character = -1
    bottom_p_or_t = 3
    unit_weight = &#x27;0.1 0.2 0.3&#x27;
    re_constant = 0.5
  [../]
  [./dirac4]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = massfrac_ph1_sp0
    function_of = temperature
    line_length = 0.9
    line_direction = &#x27;1 1 1&#x27;
    mass_fraction_component = 1
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow4
    character = 1.1
    bottom_p_or_t = -7
    unit_weight = &#x27;-1 2 3&#x27;
    re_constant = 0.6
  [../]
  [./dirac5]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = temp
    line_length = 0.9
    function_of = temperature
    line_direction = &#x27;1 2 3&#x27;
    mass_fraction_component = 2
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow5
    character = 0.9
    bottom_p_or_t = -8
    unit_weight = &#x27;1 2 1&#x27;
    re_constant = 0.7
  [../]
  [./dirac6]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = ppwater
    point_file = nine_points.bh
    SumQuantityUO = dummy_outflow6
    character = 0
    bottom_p_or_t = 10
    unit_weight = &#x27;0.0 0.0 0.0&#x27;
  [../]
  [./dirac7]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = massfrac_ph0_sp0
    use_mobility = true
    mass_fraction_component = 1
    use_relative_permeability = true
    use_internal_energy = true
    point_file = ten_points.bh
    SumQuantityUO = dummy_outflow7
    character = -1
    bottom_p_or_t = 10
    unit_weight = &#x27;0.1 0.2 0.3&#x27;
  [../]
[]


[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = line_sink03
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2fd40bac-42e4-4f32-a7dc-7fe106bba92f"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/desorped_mass_vol_exp01.i</h4><pre class="moose-pre"><code class="language-text"># Tests the PorousFlowDesorpedMassVolumetricExpansion kernel
# Fluid with constant bulk modulus, van-Genuchten capillary, HM porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  block = 0
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
  [./conc]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./p]
    type = RandomIC
    min = -1
    max = 1
    variable = porepressure
  [../]
  [./conc]
    type = RandomIC
    min = 0
    max = 1
    variable = conc
  [../]
[]

[BCs]
  # necessary otherwise volumetric strain rate will be zero
  [./disp_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_z]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./poro]
    type = PorousFlowMassVolumetricExpansion
    fluid_component = 0
    variable = porepressure
  [../]
  [./conc_in_poro]
    type = PorousFlowDesorpedMassVolumetricExpansion
    conc_var = conc
    variable = porepressure
  [../]
  [./conc]
    type = PorousFlowDesorpedMassVolumetricExpansion
    conc_var = conc
    variable = conc
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z conc&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jacobian2
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="376847ed-cfe0-4629-a319-ca010d3237ad"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto01.i</h4><pre class="moose-pre"><code class="language-text"># checking jacobian for a fully-elastic situation
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1 2&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;1 2 3  2 -4 -5  3 -5 2&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5ad06857-83c6-43da-b38c-a30045d10c96"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn21.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = true
# halfgaussiansink = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[BCs]
  [./water_flux]
    type = RichardsHalfGaussianSink
    boundary = &#x27;left right&#x27;
    max = 2E6
    sd = 0.7
    centre = 0.9
    multiplying_fcn = 1.5
    variable = pwater
  [../]
  [./gas_flux]
    type = RichardsHalfGaussianSink
    boundary = &#x27;top&#x27;
    max = -1.1E6
    sd = 0.4
    centre = 0.8
    multiplying_fcn = 1.1
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="05475e51-2246-4d40-94ce-fb8c4411112e"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh08.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    preset = false
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh08
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d81d2fd5-ba08-4b11-9269-acdd814e0723"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random02
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cdad390b-38c5-483d-9654-ea7e0a6fc527"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/disp02.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the dispersive contribution to the diffusive component of
# the PorousFlowDisperiveFlux kernel along with a non-zero diffusion.
# By setting disp_long and disp_trans to the same non-zero value, the purely
# dispersive component of the flux is zero, and the only flux is due to diffusion
# and its contribution from disp_trans.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 2e1
    min = 1e1
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.1
    disp_trans = 0.1
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.1
    disp_trans = 0.1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-2 1e-1&#x27;
    tortuosity = &#x27;0.1&#x27;
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6a4ba7e9-3056-4eb0-ab12-fba0cc797d36"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn22.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # can not make too high as finite-difference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    variable = pwater
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="69b06d61-0e50-4666-a42d-a8032e23dba8"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/desorped_mass01.i</h4><pre class="moose-pre"><code class="language-text"># 1phase
# vanGenuchten, constant-bulk density, HM porosity, 1component, unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = -1
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
  [../]
  [./conc]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1
    max = 1
  [../]
  [./conc]
    type = RandomIC
    variable = conc
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./conc]
    type = PorousFlowDesorpedMassTimeDerivative
    conc_var = conc
    variable = conc
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp disp_x disp_y disp_z conc&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cd314464-7ddb-404f-a293-9b46a02e2691"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_diffreact.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledDiffusionReactionSub Kernel

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a1diff]
    type = CoupledDiffusionReactionSub
    variable = a
    v = b
    log_k = 2
    weight = 2
    sto_v = 1.5
    sto_u = 2
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6a03b4b1-dcf0-4897-9c4f-fa35046c09ce"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01a.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, constant fluid-bulk, constant viscosity, constant permeability
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyBase
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01a
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9c4dd61a-5e26-48be-bff8-8502f4e95204"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_diffreact2.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledDiffusionReactionSub Kernel using
# activity coefficients not equal to unity

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a1diff]
    type = CoupledDiffusionReactionSub
    variable = a
    v = b
    log_k = 2
    weight = 2
    sto_v = 1.5
    sto_u = 2
    gamma_eq = 2
    gamma_u = 2.5
    gamma_v = 1.5
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="682c80b8-d397-459c-a1e7-9481f7bf7c2a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random4.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb
# Plasticity models:
# Tensile strength = 0.1MPa
# Compressive strength = 1.0MPa
# Cohesion = 1MPa
# Friction angle = dilation angle = 0.5
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 12
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 12
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f7]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f8]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f9]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 4
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 5
    variable = f5
  [../]
  [./f6]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 6
    variable = f6
  [../]
  [./f7]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 7
    variable = f7
  [../]
  [./f8]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 8
    variable = f8
  [../]
  [./f9]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 9
    variable = f9
  [../]
  [./f10]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 10
    variable = f10
  [../]
  [./f11]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 11
    variable = f11
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = int1
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./intnl0_max]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./intnl1_max]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./raw_f4]
    type = ElementExtremeValue
    variable = f4
    outputs = console
  [../]
  [./raw_f5]
    type = ElementExtremeValue
    variable = f5
    outputs = console
  [../]
  [./raw_f6]
    type = ElementExtremeValue
    variable = f6
    outputs = console
  [../]
  [./raw_f7]
    type = ElementExtremeValue
    variable = f7
    outputs = console
  [../]
  [./raw_f8]
    type = ElementExtremeValue
    variable = f8
    outputs = console
  [../]
  [./raw_f9]
    type = ElementExtremeValue
    variable = f9
    outputs = console
  [../]
  [./raw_f10]
    type = ElementExtremeValue
    variable = f10
    outputs = console
  [../]
  [./raw_f11]
    type = ElementExtremeValue
    variable = f11
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
  [./f4]
    type = FunctionValuePostprocessor
    function = should_be_zero4_fcn
  [../]
  [./f5]
    type = FunctionValuePostprocessor
    function = should_be_zero5_fcn
  [../]
  [./f6]
    type = FunctionValuePostprocessor
    function = should_be_zero6_fcn
  [../]
  [./f7]
    type = FunctionValuePostprocessor
    function = should_be_zero7_fcn
  [../]
  [./f8]
    type = FunctionValuePostprocessor
    function = should_be_zero8_fcn
  [../]
  [./f9]
    type = FunctionValuePostprocessor
    function = should_be_zero9_fcn
  [../]
  [./f10]
    type = FunctionValuePostprocessor
    function = should_be_zero10_fcn
  [../]
  [./f11]
    type = FunctionValuePostprocessor
    function = should_be_zero11_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
  [./should_be_zero4_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f4&#x27;
  [../]
  [./should_be_zero5_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f5&#x27;
  [../]
  [./should_be_zero6_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f6&#x27;
  [../]
  [./should_be_zero7_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f7&#x27;
  [../]
  [./should_be_zero8_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f8&#x27;
  [../]
  [./should_be_zero9_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f9&#x27;
  [../]
  [./should_be_zero10_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f10&#x27;
  [../]
  [./should_be_zero11_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f11&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 2E6
    internal_limit = 1
  [../]
  [./cs]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E7
    value_residual = 0.5E7
    internal_limit = 1
  [../]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 2E6
    value_residual = 1E6
    internal_limit = 1
  [../]
  [./phi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.6
    value_residual = 0.2
    internal_limit = 1
  [../]
  [./psi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.5
    value_residual = 0.1
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    smoothing_tol = 1E5
    max_NR_iterations = 1000
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  dtmin = 1
  type = Transient
[]


[Outputs]
  file_base = random4
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9ca3cb67-68e2-4b6b-b8c6-72954cec0484"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random1.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with tensile failure only
# Plasticity models:
# Tensile strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./ang]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random1
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="23d1dc8f-5300-4454-964e-95e4e355fdd4"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/heat_advection01_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, using fully-saturated version, heat advection
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    max = 0.0
    min = -1.0
  [../]
[]

[Kernels]
  [./pp]
    type = TimeDerivative
    variable = pp
  [../]
  [./heat_advection]
    type = PorousFlowFullySaturatedHeatAdvection
    variable = temp
    gravity = &#x27;1 2 3&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./PS]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="650445b4-2a5f-4449-829f-6c508c557194"><div class="modal-content"><h4>test/tests/kernels/jxw_grad_test_dep_on_displacements/not-handling-jxw.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  order = SECOND
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  elem_type = QUAD9
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./u]
    order = FIRST
  [../]
  [./v]
  [../]
[]

[Kernels]
  [./disp_x]
    type = Diffusion
    variable = disp_x
  [../]
  [./disp_y]
    type = Diffusion
    variable = disp_y
  [../]
  [./u]
    type = ADDiffusion
    variable = u
    use_displaced_mesh = true
  [../]
  [./v]
    type = ADDiffusion
    variable = v
    use_displaced_mesh = true
  [../]
[]

[BCs]
  # BCs cannot be preset due to Jacobian test
  [./u_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = u
  [../]
  [./u_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = u
  [../]
  [./v_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = v
  [../]
  [./v_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = v
  [../]
  [./disp_x_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = disp_x
  [../]
  [./disp_x_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = disp_x
  [../]
  [./disp_y_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;bottom&#x27;
    variable = disp_y
  [../]
  [./disp_y_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;top&#x27;
    variable = disp_y
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  [./dofmap]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  [../]
  exodus = true
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = 0.01
    max = 0.09
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = 0.01
    max = 0.09
  [../]
  [./u]
    type = RandomIC
    variable = u
    min = 0.1
    max = 0.9
  [../]
  [./v]
    type = RandomIC
    variable = v
    min = 0.1
    max = 0.9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="607f17de-444c-43f9-877e-e2f6a0d171a2"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
  [secondary_x]
    input = anode
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;3&#x27;
    new_block_id = 10
    new_block_name = &quot;secondary_x&quot;
  []
  [primary_x]
    input = secondary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;1&#x27;
    new_block_id = 12
    new_block_name = &quot;primary_x&quot;
  []
  [secondary_y]
    input = primary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;0&#x27;
    new_block_id = 11
    new_block_name = &quot;secondary_y&quot;
  []
  [primary_y]
    input = secondary_y
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;2&#x27;
    new_block_id = 13
    new_block_name = &quot;primary_y&quot;
  []
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]

  # Lagrange multipliers for gradient component periodicity
  [./lm_left_right_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]

  [./lm_up_down_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
[]

[Constraints]
  [./ud_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]

  [./lr_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
    block = 0
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0 10 11&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="32ec605b-1dc7-4b63-ab25-e8c05aa907df"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_expansion_test.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  num_L = 5
  L_name_base = L
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 12
  ny = 12
  xmax = 6
  ymax = 6
[]

[Variables]
  [./PFCRFFVariables]
  [../]
  [./n]
    [./InitialCondition]
      type = RandomIC
      max = 1.00187734619
      min = -1.00187734619
      seed = 12345
    [../]
  [../]
[]

[Kernels]
  [./PFCRFFKernel]
    n_name = n
    log_approach = expansion
    n_exp_terms = 5
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFC]
    type = PFCRFFMaterial
  [../]
[]

[Postprocessors]
  [./dt]
    type = TimestepSize
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  # petsc_options = &#x27;-snes_mf_operator -ksp_monitor&#x27;
  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 31&#x27;
  # petsc_options_iname = -pc_type
  # petsc_options_value = lu
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         101   preonly   lu      5&#x27;
  type = Transient
  num_steps = 1
  dt = 0.1
  l_max_its = 50
  nl_max_its = 20
  solve_type = NEWTON
  petsc_options = &#x27;-pc_factor_shift_nonzero &#x27;
  l_tol = 1e-04
  nl_rel_tol = 1e-6
  scheme = bdf2
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b218b029-cf9d-4eeb-8d66-db25da556b29"><div class="modal-content"><h4>test/tests/preconditioners/fdp/fdp_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  nx = 2
  ny = 2
  dim = 2
[]

[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[Preconditioning]
  [./FDP]
    type = FDP
  [../]
[]

[Kernels]
  [./diff_u]
    type = Diffusion
    variable = u
  [../]
  [./conv_v]
    type = CoupledForce
    variable = v
    v = u
  [../]
  [./diff_v]
    type = Diffusion
    variable = v
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  exodus = false
[]

[ICs]
  [./u]
    variable = u
    type = RandomIC
    min = 0.1
    max = 0.9
  [../]
  [./v]
    variable = v
    type = RandomIC
    min = 0.1
    max = 0.9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b152d611-a248-469a-a145-3a69764b2431"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_lumped_08.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = true
# transient = true

# with mass lumping

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsLumpedMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsLumpedMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn116
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ffd539a1-58ee-4cb5-8a38-4bddbced74c0"><div class="modal-content"><h4>modules/porous_flow/test/tests/heterogeneous_materials/constant_poroperm2.i</h4><pre class="moose-pre"><code class="language-text"># Assign porosity and permeability variables from constant AuxVariables to create
# a heterogeneous model

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  ny = 3
  nz = 3
  xmin = 1
  xmax = 4
  ymin = 1
  ymax = 4
  zmin = 1
  zmax = 4
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 -10&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 1e6
  [../]
[]

[AuxVariables]
  [./poro]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./poromat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./poromat]
    type = PorousFlowPropertyAux
    property = porosity
    variable = poromat
  [../]
  [./permxxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxxmat
    column = 0
    row = 0
  [../]
  [./permxymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxymat
    column = 1
    row = 0
  [../]
  [./permxzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxzmat
    column = 2
    row = 0
  [../]
  [./permyxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyxmat
    column = 0
    row = 1
  [../]
  [./permyymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyymat
    column = 1
    row = 1
  [../]
  [./permyzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyzmat
    column = 2
    row = 1
  [../]
  [./permzxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzxmat
    column = 0
    row = 2
  [../]
  [./permzymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzymat
    column = 1
    row = 2
  [../]
  [./permzzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzzmat
    column = 2
    row = 2
  [../]
[]

[ICs]
  [./poro]
    type = RandomIC
    seed = 0
    variable = poro
    max = 0.5
    min = 0.1
  [../]
  [./permxx]
    type = FunctionIC
    function = permxx
    variable = permxx
  [../]
  [./permxy]
    type = FunctionIC
    function = permxy
    variable = permxy
  [../]
  [./permxz]
    type = FunctionIC
    function = permxz
    variable = permxz
  [../]
  [./permyx]
    type = FunctionIC
    function = permyx
    variable = permyx
  [../]
  [./permyy]
    type = FunctionIC
    function = permyy
    variable = permyy
  [../]
  [./permyz]
    type = FunctionIC
    function = permyz
    variable = permyz
  [../]
  [./permzx]
    type = FunctionIC
    function = permzx
    variable = permzx
  [../]
  [./permzy]
    type = FunctionIC
    function = permzy
    variable = permzy
  [../]
  [./permzz]
    type = FunctionIC
    function = permzz
    variable = permzz
  [../]
[]

[Functions]
  [./permxx]
    type = ParsedFunction
    value = &#x27;(x*x)*1e-11&#x27;
  [../]
  [./permxy]
    type = ParsedFunction
    value = &#x27;(x*y)*1e-11&#x27;
  [../]
  [./permxz]
    type = ParsedFunction
    value = &#x27;(x*z)*1e-11&#x27;
  [../]
  [./permyx]
    type = ParsedFunction
    value = &#x27;(y*x)*1e-11&#x27;
  [../]
  [./permyy]
    type = ParsedFunction
    value = &#x27;(y*y)*1e-11&#x27;
  [../]
  [./permyz]
    type = ParsedFunction
    value = &#x27;(y*z)*1e-11&#x27;
  [../]
  [./permzx]
    type = ParsedFunction
    value = &#x27;(z*x)*1e-11&#x27;
  [../]
  [./permzy]
    type = ParsedFunction
    value = &#x27;(z*y)*1e-11&#x27;
  [../]
  [./permzz]
    type = ParsedFunction
    value = &#x27;(z*z)*1e-11&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    variable = ppwater
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      viscosity = 1e-3
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = ppwater
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = poro
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConstFromVar
    perm_xx = permxx
    perm_xy = permxy
    perm_xz = permxz
    perm_yx = permyx
    perm_yy = permyy
    perm_yz = permyz
    perm_zx = permzx
    perm_zy = permzy
    perm_zz = permzz
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Postprocessors]
  [./mass_ph0]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 100
  dt = 100
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5f30d36e-5d28-41ad-a50e-8d2feb3c3790"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_10.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_10
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="346fb946-60a6-43e0-9b2f-c98e968e18b4"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/denergy01.i</h4><pre class="moose-pre"><code class="language-text"># 0phase time derivative of energy-density
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]


[Kernels]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp&#x27;
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e478a2b7-7b70-4383-853b-6831474a8d71"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh14.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh14
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="42da221c-4eee-49b7-a71f-a9ccdcdc5469"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/eff_stress02.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PS)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./sgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = 0
    max = 1
  [../]
  [./sgas]
    type = RandomIC
    variable = sgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./grad0]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 0
    variable = ppwater
  [../]
  [./grad1]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 1
    variable = sgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 10
    sat_lr = 0.01
  [../]
[]

[Materials]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="57e41b30-2f71-4f63-a5e7-1381c85c054c"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/hcond01.i</h4><pre class="moose-pre"><code class="language-text"># 0phase heat conduction
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]


[Kernels]
  [./heat_conduction]
    type = PorousFlowHeatConduction
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp&#x27;
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;1.1 0.1 0.3 0.1 2.2 0 0.3 0 3.3&#x27;
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c5802206-f403-4545-ac17-2a815526bc26"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux03.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP), 2components (that exist in both phases), constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with vanGenuchten
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]


[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b40ca142-3c7a-4afb-a588-e05f9f1c49cc"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn31.i</h4><pre class="moose-pre"><code class="language-text"># two phase with injection borehole (both fully_upwind=true and fully_upwind=false)
#
# unsaturated = true
# gravity = true
# supg = true
# transient = true
# wellbore = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 0.5E-3&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]

  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]



[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[DiracKernels]
  [./bh_water]
    type = RichardsBorehole
    bottom_pressure = 1
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pwater
    unit_weight = &#x27;0 0 0&#x27;
    character = -1E12
  [../]
  [./bh_gas]
    type = RichardsBorehole
    bottom_pressure = 2
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pgas
    unit_weight = &#x27;0 0 0&#x27;
    character = -1E12
    fully_upwind = true
  [../]
[]



[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn31
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7fe68ee6-f64a-4310-8750-b8b2066cbdaf"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux06.i</h4><pre class="moose-pre"><code class="language-text"># 1phase with MD_Gaussian (var = log(mass-density) with Gaussian capillary) formulation
# constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./md]
  [../]
[]

[ICs]
  [./md]
    type = RandomIC
    min = -1
    max = -0.224 # unsaturated for md&lt;log(density_P0=0.8)=-0.223
    variable = md
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = md
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;md&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseMD_Gaussian
    mass_density = md
    al = 1.1
    density_P0 = 0.8
    bulk_modulus = 1.5
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6487ef6c-3906-4f8b-87ba-a7289dbd4601"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass_vol_exp02.i</h4><pre class="moose-pre"><code class="language-text"># Tests the PorousFlowMassVolumetricExpansion kernel
# Fluid with constant bulk modulus, van-Genuchten capillary, HM porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  block = 0
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./p]
    type = RandomIC
    min = -1
    max = 1
    variable = porepressure
  [../]
[]

[BCs]
  # necessary otherwise volumetric strain rate will be zero
  [./disp_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_z]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./poro]
    type = PorousFlowMassVolumetricExpansion
    fluid_component = 0
    variable = porepressure
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jacobian2
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="36e798e8-633f-45e6-9aa3-4ecc33f89932"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/heat_advection02.i</h4><pre class="moose-pre"><code class="language-text"># 2phase, unsaturated, heat advection
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
  [./pgas]
  [../]
  [./pwater]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 1.0
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -1.0
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]

[Kernels]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./heat_advection]
    type = PorousFlowHeatAdvection
    variable = temp
    gravity = &#x27;1 2 3&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pgas pwater&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.8
      density0 = 0.7
      thermal_expansion = 0
      viscosity = 1.3
      cv = 1.6
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d7a0a9d0-1043-484f-b894-0a985738a8e5"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass09.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PS)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./sgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = 0
    max = 1
  [../]
  [./sgas]
    type = RandomIC
    variable = sgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./mass_sp0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./mass_sp1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = sgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 10
    sat_lr = 0.1
    log_extension = false
    s_scale = 0.9
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e2baf6a3-cfc5-4c13-852e-fdcdbae54c56"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_06.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn06
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="11bd68a9-5f3c-4a91-b326-565890105dda"><div class="modal-content"><h4>test/tests/kernels/conservative_advection/no_upwinding_jacobian.i</h4><pre class="moose-pre"><code class="language-text"># Test of advection with no upwinding
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  ny = 2
  nz = 1
[]

[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./advection]
    type = ConservativeAdvection
    variable = u
    velocity = &#x27;2 -1.1 1.23&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
  dt = 2
  end_time = 2
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="84c6e7ac-b882-4693-a8d8-c5ec3e88111c"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCTrad/pfct_newton_split1_asm5.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
  xmax = 8
  ymax = 8
[]

[Variables]
  [./n]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 4
    [../]
  [../]
  [./u]
    scaling = 1e2
  [../]
  [./v]
    scaling = 1e1
  [../]
[]

[Kernels]
  [./ndot]
    type = TimeDerivative
    variable = n
  [../]
  [./n_bulk]
    type = CHBulkPFCTrad
    variable = n
  [../]
  [./u_term]
    type = MatDiffusion
    variable = n
    v = u
    diffusivity = C2
  [../]
  [./v_term]
    type = MatDiffusion
    variable = n
    v = v
    diffusivity = C4
  [../]
  [./u_rctn]
    type = Reaction
    variable = u
  [../]
  [./u_gradn]
    type = LaplacianSplit
    variable = u
    c = n
  [../]
  [./v_rctn]
    type = Reaction
    variable = v
  [../]
  [./v_gradu]
    type = LaplacianSplit
    variable = v
    c = u
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFCTrad]
    type = PFCTradMaterial
    order = 4
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;

  l_max_its = 100
  l_tol = 1e-04
  nl_rel_tol = 1e-09
  nl_abs_tol = 1e-11

  splitting = &#x27;nuv&#x27;
  petsc_options = &#x27;-snes_view&#x27;

  num_steps = 2
  dt = 0.1
[]

[Splits]
  [./nuv]
    splitting       = &#x27;v nu&#x27;
    splitting_type  = schur
    schur_type      = full
    schur_pre       = Sp
    #petsc_options = &#x27;-dm_view&#x27;
  [../]
  [./nu]
    vars = &#x27;n u&#x27;
    petsc_options = &#x27;-ksp_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_gmres_restart -pc_type -pc_asm_overlap  -sub_pc_type&#x27;
    petsc_options_value =  &#x27;              101      asm               5            lu&#x27;
  [../]
  [./v]
    vars = &#x27;v&#x27;
    #petsc_options = &#x27;-ksp_monitor&#x27;
    petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
    petsc_options_value =  &#x27;asm         101   preonly   lu      0&#x27;
    #full = true
  [../]
[]

[Outputs]
  execute_on = &#x27;initial timestep_end linear&#x27;
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ccb7ce04-c99a-4afc-800b-1796285851c0"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux12.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 3components, constant viscosity, constant insitu permeability
# density with constant bulk, FLAC relative perm with a cubic, nonzero gravity, unsaturated with VG
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
  [./massfrac1]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1.0
    max = 0.0
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 0.3
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac1
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0 massfrac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 1 # small so that most effective saturations are close to 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityFLAC
    m = 10
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bc3a0ba-8897-45eb-8b2f-ef4e61b4ac84"><div class="modal-content"><h4>modules/combined/test/tests/thermal_elastic/derivatives.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2
[]

[Variables]
  [./a]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
  [./b]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Debug]
  [./MaterialDerivativeTest]
    [./elastic]
      prop_name = elasticity_tensor
      prop_type = RankFourTensor
      derivative_order = 1
      args = &#x27;a b&#x27;
    [../]
  [../]
[]

[Problem]
  kernel_coverage_check = false
[]

[Materials]
  [./youngs_modulus]
    type = DerivativeParsedMaterial
    f_name = youngs_modulus
    function = &#x27;23.1 * a^4 + 10.7 * b^2&#x27;
    args = &#x27;a b&#x27;
  [../]
  [./poissons_ratio]
    type = DerivativeParsedMaterial
    f_name = poissons_ratio
    function = &#x27;0.2 * a^2 + 0.29 * b^3&#x27;
    args = &#x27;a b&#x27;
  [../]

  [./elasticity_tensor]
    type = ComputeVariableIsotropicElasticityTensor
    args = &#x27;a b&#x27;
    youngs_modulus = youngs_modulus
    poissons_ratio = poissons_ratio
  [../]
[]

[Executioner]
  type = Steady
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7ec45d3-83c5-48a8-b1d0-847bbbbdd674"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass03.i</h4><pre class="moose-pre"><code class="language-text"># 1phase
# vanGenuchten, constant-bulk density, constant porosity, 3components
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./mass_frac_comp0]
  [../]
  [./mass_frac_comp1]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1
    max = 0
  [../]
  [./mass_frac_comp0]
    type = RandomIC
    variable = mass_frac_comp0
    min = 0
    max = 0.3
  [../]
  [./mass_frac_comp1]
    type = RandomIC
    variable = mass_frac_comp1
    min = 0
    max = 0.3
  [../]
[]

[Kernels]
  [./mass_comp0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./masscomp1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = mass_frac_comp0
  [../]
  [./masscomp2]
    type = PorousFlowMassTimeDerivative
    fluid_component = 2
    variable = mass_frac_comp1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp mass_frac_comp0 mass_frac_comp1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    s_scale = 0.9
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;mass_frac_comp0 mass_frac_comp1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1ee5c1e0-9f1d-4140-91cb-9fd16f550bfc"><div class="modal-content"><h4>python/chigger/tests/input/mug_blocks.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = mug.e
[]

[MeshModifiers]
  [./subdomains]
    type = SubdomainBoundingBox
    top_right = &#x27;3 3 3&#x27;
    bottom_left = &#x27;0 -3 -2.1&#x27;
    block_id = &#x27;76&#x27;
  [../]
[]

[Variables]
  [./convected]
    order = FIRST
    family = LAGRANGE
  [../]
  [./diffused]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./aux_elem]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./diff_convected]
    type = Diffusion
    variable = convected
  [../]
  [./conv]
    # Couple a variable into the convection kernel using local_name = simulationg_name syntax
    type = Convection
    variable = convected
    velocity = &#x27;1 1 1&#x27;
  [../]
  [./diff_diffused]
    type = Diffusion
    variable = diffused
  [../]
  [./diff_t]
    type = TimeDerivative
    variable = diffused
  [../]
  [./conv_t]
    type = TimeDerivative
    variable = convected
    block = &#x27;76&#x27;
  [../]
[]

[BCs]
  [./bottom_convected]
    type = DirichletBC
    variable = convected
    boundary = bottom
    value = 1
  [../]
  [./top_convected]
    type = DirichletBC
    variable = convected
    boundary = top
    value = 0
  [../]
  [./bottom_diffused]
    type = DirichletBC
    variable = diffused
    boundary = bottom
    value = 2
  [../]
  [./top_diffused]
    type = DirichletBC
    variable = diffused
    boundary = top
    value = 0
  [../]
[]

[Postprocessors]
  [./func_pp]
    type = FunctionValuePostprocessor
    function = 2*t
  [../]
[]

[Executioner]
  # Preconditioned JFNK (default)
  type = Transient
  num_steps = 20
  solve_type = PJFNK
  dt = 0.1
[]

[Outputs]
  exodus = true
[]

[ICs]
  [./aux_ic]
    variable = aux_elem
    max = 10
    seed = 2
    type = RandomIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="603a78aa-c60a-43c3-8ea5-f7e82d1b95ff"><div class="modal-content"><h4>modules/combined/test/tests/linear_elasticity/tensor.i</h4><pre class="moose-pre"><code class="language-text"># This input file is designed to test the RankTwoAux and RankFourAux
# auxkernels, which report values out of the Tensors used in materials
# properties.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  nz = 0
  xmin = 0
  xmax = 2
  ymin = 0
  ymax = 2
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[Variables]
  [./diffused]
     [./InitialCondition]
      type = RandomIC
     [../]
  [../]
[]

[AuxVariables]
  [./C11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C13]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C14]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C15]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C16]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C23]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C24]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C25]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C26]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C34]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C35]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C36]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C44]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C45]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C46]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C55]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C56]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C66]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = diffused
  [../]
[]

[AuxKernels]
  [./matl_C11]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 0
    variable = C11
  [../]
  [./matl_C12]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 1
    index_l = 1
    variable = C12
  [../]
  [./matl_C13]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 2
    index_l = 2
    variable = C13
  [../]
  [./matl_C14]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 1
    index_l = 2
    variable = C14
  [../]
  [./matl_C15]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 2
    variable = C15
  [../]
  [./matl_C16]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 1
    variable = C16
  [../]
  [./matl_C22]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 1
    index_l = 1
    variable = C22
  [../]
  [./matl_C23]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 2
    index_l = 2
    variable = C23
  [../]
  [./matl_C24]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 1
    index_l = 2
    variable = C24
  [../]
  [./matl_C25]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 0
    index_l = 2
    variable = C25
  [../]
  [./matl_C26]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 0
    index_l = 1
    variable = C26
  [../]
 [./matl_C33]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 2
    index_l = 2
    variable = C33
  [../]
  [./matl_C34]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 1
    index_l = 2
    variable = C34
  [../]
  [./matl_C35]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C35
  [../]
  [./matl_C36]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C36
  [../]
  [./matl_C44]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 1
    index_l = 2
    variable = C44
  [../]
  [./matl_C45]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C45
  [../]
  [./matl_C46]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C46
  [../]
  [./matl_C55]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C55
  [../]
  [./matl_C56]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C56
  [../]
  [./matl_C66]
    type = RankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 1
    index_k = 0
    index_l = 1
    variable = C66
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric21
    C_ijkl =&#x27;1111 1122 1133 1123 1113 1112 2222 2233 2223 2213 2212 3333 3323 3313 3312 2323 2313 2312 1313 1312 1212&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
[]

[BCs]
  [./bottom]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;1&#x27;
    value = 1
  [../]
  [./top]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;2&#x27;
    value = 0
  [../]
  [./disp_x_BC]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;0 2&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 3&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;0 2&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 3&#x27;
    value = 0.02
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7672bb6-c5ba-48e5-ba67-5ef76c0a0f61"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_12.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_12
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="126ce6c6-8044-442a-bc70-22b71f6699f5"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_02.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn02
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7b5e1d54-c5c4-4e63-9b4f-fa65a83e03c6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/poro01.i</h4><pre class="moose-pre"><code class="language-text"># tests of the poroelasticity kernel, PoroMechanicsCoupling
# in conjunction with the usual StressDivergenceTensors Kernel
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./p]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -1
    max = 1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -1
    max = 1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -1
    max = 1
  [../]
  [./p]
    type = RandomIC
    variable = p
    min = -1
    max = 1
  [../]
[]

[Kernels]
  [./unimportant_p]
    type = TimeDerivative
    variable = p
  [../]
  [./grad_stress_x]
    type = StressDivergenceTensors
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    porepressure = p
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    porepressure = p
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    porepressure = p
    component = 2
  [../]
  [./This_is_not_poroelasticity._It_is_checking_diagonal_jacobian]
    type = PoroMechanicsCoupling
    variable = disp_x
    porepressure = disp_x
    component = 0
  [../]
  [./This_is_not_poroelasticity._It_is_checking_diagonal_jacobian_again]
    type = PoroMechanicsCoupling
    variable = disp_x
    porepressure = disp_x
    component = 1
  [../]
  [./This_is_not_poroelasticity._It_is_checking_offdiagonal_jacobian_for_disps]
    type = PoroMechanicsCoupling
    variable = disp_x
    porepressure = disp_y
    component = 2
  [../]
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./biot]
    type = GenericConstantMaterial
    prop_names = biot_coefficient
    prop_values = 0.54
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a9a83891-9388-47e1-a6d0-d12b02727b3f"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn13.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn13
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="903963d0-4b7b-4b75-b94d-11c9111ff5cd"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/heat_advection01.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, unsaturated, heat advection
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    max = 0.0
    min = -1.0
  [../]
[]

[Kernels]
  [./pp]
    type = TimeDerivative
    variable = pp
  [../]
  [./heat_advection]
    type = PorousFlowHeatAdvection
    variable = temp
    gravity = &#x27;1 2 3&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 1.3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./PS]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c2930b19-8e82-41f1-af40-02b97b9bc4d2"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn01
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="45c77258-c87c-4418-85e1-f16823785af9"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/phe01.i</h4><pre class="moose-pre"><code class="language-text"># Capped weak-plane plasticity, Kernel = PorousFlowPlasticHeatEnergy
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./temperature]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./temp]
    type = RandomIC
    variable = temperature
    min = 0.1
    max = 0.2
  [../]
[]

[Kernels]
  [./phe]
    type = PorousFlowPlasticHeatEnergy
    variable = temperature
  [../]
  [./dummy_disp_x]
    type = PorousFlowPlasticHeatEnergy
    coeff = -1.3
    variable = disp_x
  [../]
  [./dummy_disp_y]
    type = PorousFlowPlasticHeatEnergy
    coeff = 1.1
    variable = disp_y
  [../]
  [./dummy_disp_z]
    type = PorousFlowPlasticHeatEnergy
    coeff = 0.2
    variable = disp_z
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temperature disp_x disp_y disp_z&#x27;
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 2
    rate = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0
    value_residual = 0.5
    rate = 2
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.1
    value_residual = 0.05
    rate = 3
  [../]
  [./t_strength]
    type = TensorMechanicsHardeningExponential
    value_0 = 100
    value_residual = 100
    rate = 1
  [../]
  [./c_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0
    internal_0 = -2
    internal_limit = 0
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
    temperature = temperature
  [../]
  [./porosity]
    type = PorousFlowPorosity
    thermal = true
    mechanical = true
    porosity_zero = 0.3
    thermal_expansion_coeff = 1.3
  [../]
  [./volstrain]
    type = PorousFlowVolumetricStrain
  [../]
  [./phe]
    type = ComputePlasticHeatEnergy
  [../]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    lambda = 1.0
    shear_modulus = 2.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;0 0 0  0 0 1  0 1 -1.5&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    tangent_operator = nonlinear
  [../]
  [./mc]
    type = CappedWeakPlaneStressUpdate
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tensile_strength = t_strength
    compressive_strength = c_strength
    max_NR_iterations = 20
    tip_smoother = 0
    smoothing_tol = 1
    yield_function_tol = 1E-10
    perfect_guess = false
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="676c9222-7038-4c20-b5e8-525a5ad7446b"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_equilsub2.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledBEEquilibriumSub Kernel using
# activity coefficients not equal to unity

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a]
    type = CoupledBEEquilibriumSub
    variable = a
    v = b
    log_k = 2
    weight = 2
    sto_v = 1.5
    sto_u = 2
    gamma_eq = 2
    gamma_u = 2.5
    gamma_v = 1.5
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="eb3305f8-930a-440f-849f-6f4737672951"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/pls02.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPiecewiseLinearSink with 2-phase, 2-components
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 3
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;left&#x27;
    pt_vals = &#x27;-1 -0.5 0&#x27;
    multipliers = &#x27;1 2 4&#x27;
    variable = ppwater
    mass_fraction_component = 0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 -2 4&#x27;
    mass_fraction_component = 0
    variable = ppgas
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;1 3 4&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph0_sp0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
  [../]
  [./flux_2]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;back top&#x27;
    pt_vals = &#x27;0 0.5 1&#x27;
    multipliers = &#x27;0 1 -3&#x27;
    mass_fraction_component = 1
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  file_base = pls02
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="28a847ea-7d0f-4cb8-b884-20bed8514385"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection3.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with 1 porepressure as a PorousFlow variable
# Constant permeability
# Constant viscosity
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
  [./P]
  [../]
[]

[ICs]
  [./P]
    type = RandomIC
    variable = P
    min = -1
    max = 0
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./dummy_P]
    type = NullKernel
    variable = P
  [../]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = P
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.6
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3
      density0 = 4
      thermal_expansion = 0
      viscosity = 150.0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./ppss_qp]
    type = PorousFlow1PhaseP
    porepressure = P
    capillary_pressure = pc
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;5 0 0 0 5 0 0 0 5&#x27;
  [../]
  [./relperm_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e42367a9-bfd4-473d-a158-033cbd7f3a09"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh_lumped_07.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = true
# lumped = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 0.5E-3&#x27;
  gravity = &#x27;0 0 0&#x27;
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1E-1 1E0 1E1 1E3 1E4 1E5 1E6 1E7&#x27;
    x = &#x27;0 1E-1 1E0 1E1 1E2 1E3 1E4 1E5 1E6&#x27;
  [../]
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 1E-3
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.2
    max = 1.8
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsLumpedMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsLumpedMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-13 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1E6

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_lumped_07
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5d1b4f7a-c5ea-4b50-9e12-a257cf5f8416"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn01
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4d8d30a6-bff4-48ad-b0a7-2b30c7f7c92f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper3.i</h4><pre class="moose-pre"><code class="language-text"># This runs the third example models described in the &#x27;MultiSurface&#x27; plasticity paper
# Just change the deactivation_scheme
#
# Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
# WeakPlaneTensile with strength = 1000Pa
# WeakPlaneShear with cohesion = 0.1MPa and friction angle = 25, dilation angle = 5deg
#
# Lame lambda = 1.2GPa.  Lame mu = 1.2GPa (Young = 3GPa, poisson = 0.5)
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1.0
    shift = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./mc_smooth]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0
    shift = 1.0
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
  [./tensile_smooth]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wpt_str]
    type = TensorMechanicsHardeningConstant
    value = 1.0E3
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = wpt_str
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wps_c]
    type = TensorMechanicsHardeningConstant
    value = 1.0E5
  [../]
  [./wps_tan_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.466
  [../]
  [./wps_tan_psi]
    type = TensorMechanicsHardeningConstant
    value = 0.087
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = wps_c
    tan_friction_angle = wps_tan_phi
    tan_dilation_angle = wps_tan_psi
    smoother = 1.0E4
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.2E9 1.2E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile_smooth mc_smooth wpt wps&#x27;
    max_NR_iterations = 30
    specialIC = &#x27;none&#x27;
    deactivation_scheme = &#x27;optimized&#x27;
    min_stepsize = 1E-6
    max_stepsize_for_dumb = 1E-2

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper3
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="35ac4bc8-1e65-4cec-8654-21629b8b0e4d"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/pls01.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPiecewiseLinearSink with 1-phase, 1-component
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 0
    min = -1
  [../]
[]

[Kernels]
  [./dummy]
    type = TimeDerivative
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 2.2 0 0 0 3.3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;left&#x27;
    pt_vals = &#x27;-1 -0.5 0&#x27;
    multipliers = &#x27;1 2 4&#x27;
    variable = pp
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;x*y&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  file_base = pls01
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0ec01129-e27f-434e-9278-e2a843218997"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/rock1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 10deg
# Tensile with strength = 1MPa
# WeakPlaneShear with cohesion = 1MPa, friction angle = 25deg, dilation angle = 25deg
# WeakPlaneTensile with strength = 0.01MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 0.01E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;mc tensile wps wpt&#x27;
    deactivation_scheme = &#x27;optimized_to_safe_to_dumb&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = rock1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="831c726c-9c83-41f0-8018-758654e314d0"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_fu_18.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# almost gas saturated

# gravity = true
# supg = true
# transient = true


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -100.0
      max = -90.0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn18
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7bc9eb11-5953-465c-b958-d7d066e825dd"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh05.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh05
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9ca0ee6b-190d-4b87-9e0e-3948392795d3"><div class="modal-content"><h4>modules/combined/test/tests/linear_elasticity/linear_elastic_material.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  nz = 0
  xmin = 0
  xmax = 50
  ymin = 0
  ymax = 50
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./diffused]
     [./InitialCondition]
      type = RandomIC
     [../]
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = diffused
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric9
    #reading C_11  C_12  C_13  C_22  C_23  C_33  C_44  C_55  C_66
    C_ijkl =&#x27;1.0e6  0.0   0.0 1.0e6  0.0  1.0e6 0.5e6 0.5e6 0.5e6&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
[]

[BCs]
  [./bottom]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;1&#x27;
    value = 1
  [../]
  [./top]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;2&#x27;
    value = 0
  [../]
  [./disp_x_BC]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;0 2&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 3&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;0 2&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 3&#x27;
    value = 0.02
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e3a2d304-a70a-46c0-a293-ba80c278be40"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_linear_elasticity/tensor.i</h4><pre class="moose-pre"><code class="language-text"># This input file is designed to test the RankTwoAux and RankFourAux
# auxkernels, which report values out of the Tensors used in materials
# properties.

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  xmax = 2
  ymax = 2
[]

[Variables]
  [./diffused]
     [./InitialCondition]
      type = RandomIC
     [../]
  [../]
[]

[AuxVariables]
  [./C11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C13]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C14]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C15]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C16]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C23]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C24]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C25]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C26]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C34]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C35]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C36]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C44]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C45]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C46]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C55]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C56]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./C66]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Modules/TensorMechanics/Master/All]
  strain = SMALL
  add_variables = true
  generate_output = &#x27;stress_xx stress_yy stress_zz stress_xy stress_yz stress_zx&#x27;
  use_automatic_differentiation = true
[]

[Kernels]
  [./diff]
    type = ADDiffusion
    variable = diffused
  [../]
[]

[AuxKernels]
  [./matl_C11]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 0
    variable = C11
  [../]
  [./matl_C12]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 1
    index_l = 1
    variable = C12
  [../]
  [./matl_C13]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 2
    index_l = 2
    variable = C13
  [../]
  [./matl_C14]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 1
    index_l = 2
    variable = C14
  [../]
  [./matl_C15]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 2
    variable = C15
  [../]
  [./matl_C16]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 0
    index_k = 0
    index_l = 1
    variable = C16
  [../]
  [./matl_C22]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 1
    index_l = 1
    variable = C22
  [../]
  [./matl_C23]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 2
    index_l = 2
    variable = C23
  [../]
  [./matl_C24]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 1
    index_l = 2
    variable = C24
  [../]
  [./matl_C25]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 0
    index_l = 2
    variable = C25
  [../]
  [./matl_C26]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 1
    index_k = 0
    index_l = 1
    variable = C26
  [../]
 [./matl_C33]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 2
    index_l = 2
    variable = C33
  [../]
  [./matl_C34]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 1
    index_l = 2
    variable = C34
  [../]
  [./matl_C35]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C35
  [../]
  [./matl_C36]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 2
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C36
  [../]
  [./matl_C44]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 1
    index_l = 2
    variable = C44
  [../]
  [./matl_C45]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C45
  [../]
  [./matl_C46]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 1
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C46
  [../]
  [./matl_C55]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 2
    index_k = 0
    index_l = 2
    variable = C55
  [../]
  [./matl_C56]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 2
    index_k = 0
    index_l = 1
    variable = C56
  [../]
  [./matl_C66]
    type = ADRankFourAux
    rank_four_tensor = elasticity_tensor
    index_i = 0
    index_j = 1
    index_k = 0
    index_l = 1
    variable = C66
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric21
    C_ijkl =&#x27;1111 1122 1133 1123 1113 1112 2222 2233 2223 2213 2212 3333 3323 3313 3312 2323 2313 2312 1313 1312 1212&#x27;
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
  [../]
[]

[BCs]
  [./bottom]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;right&#x27;
    value = 1
  [../]
  [./top]
    type = DirichletBC
    variable = diffused
    boundary = &#x27;top&#x27;
    value = 0
  [../]
  [./disp_x_BC]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;bottom top&#x27;
    value = 0.5
  [../]
  [./disp_x_BC2]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;left right&#x27;
    value = 0.01
  [../]
  [./disp_y_BC]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom top&#x27;
    value = 0.8
  [../]
  [./disp_y_BC2]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;left right&#x27;
    value = 0.02
  [../]
[]

[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="951a8920-f9f3-4b63-9dc5-df4ea31a7ff3"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random3.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with Mohr-Coulomb failure only
# Plasticity models:
# Cohesion = 1MPa
# Friction angle = dilation angle = 0.5
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 6
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 7
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 8
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 9
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 10
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 11
    variable = f5
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./intnl_max]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./raw_f4]
    type = ElementExtremeValue
    variable = f4
    outputs = console
  [../]
  [./raw_f5]
    type = ElementExtremeValue
    variable = f5
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
  [./f4]
    type = FunctionValuePostprocessor
    function = should_be_zero4_fcn
  [../]
  [./f5]
    type = FunctionValuePostprocessor
    function = should_be_zero5_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
  [./should_be_zero4_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f4&#x27;
  [../]
  [./should_be_zero5_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f5&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./ang]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.9
    value_residual = 0.2
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random3
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d04cf40-1f2a-4f4e-bb93-84e85bcf5a09"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn30.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# wellbore = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]

  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[DiracKernels]
  [./bh]
    type = RichardsBorehole
    bottom_pressure = 0
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pressure
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn30
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7f5863af-5ca3-4118-a13e-3c190e4db51c"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh05.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1E-1 1E0 1E1 1E3 1E4 1E5 1E6 1E7&#x27;
    x = &#x27;0 1E-1 1E0 1E1 1E2 1E3 1E4 1E5 1E6&#x27;
  [../]
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.2
    max = 1.8
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-10 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1E6

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh05
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c7a134a2-3e6f-4eed-9016-de677d33d682"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn38.i</h4><pre class="moose-pre"><code class="language-text"># two phase, with RSC Seff
# unsaturated = true

# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterRSC
    oil_viscosity = 2E-3
    scale_ratio = 2E3
    shift = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasRSC
    oil_viscosity = 2E-3
    scale_ratio = 2E3
    shift = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dfb4fbdc-739b-4cba-849e-ef0fa6a02466"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_liquid.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions that give a single liquid phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 6e6
    max = 8e6
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.05
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c29d8e49-21ec-4c2c-8127-edb7b804c6e6"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn40.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# steam = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]

  [./stream_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 0.5
    [../]
  [../]
[]

[DiracKernels]
  [./stream]
    type = RichardsPolyLineSink
    pressures = &#x27;-0.5 0.25 0.26 0.5&#x27;
    fluxes = &#x27;1E5 2E10 -1E10 1E5&#x27; # outer ones can not be too big otherwise the PETSc constant state finitedifferencing loses precision
    point_file = jn40.stream
    SumQuantityUO = stream_total_outflow_mass
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn40
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="713c840a-ae75-4121-a341-96465dfb33d3"><div class="modal-content"><h4>test/tests/dgkernels/jacobian_testing/coupled_dg_jac_test.i</h4><pre class="moose-pre"><code class="language-text">###########################################################
# This is a test of the off diagonal jacobian machinery of
# the Discontinuous Galerkin System.
###########################################################


[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2
  elem_type = EDGE2
[]

[Variables]
  [./u]
    order = FIRST
    family = MONOMIAL
  [../]
  [./v]
    order = FIRST
    family = MONOMIAL
  [../]
[]

[DGKernels]
  [./dg_diff]
    type = DGCoupledDiffusion
    variable = u
    v = v
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Problem]
  kernel_coverage_check = false
[]

[ICs]
  [./u]
    type = RandomIC
    min = 0.1
    max = 0.9
    variable = u
  [../]
  [./v]
    type = RandomIC
    min = 0.1
    max = 0.9
    variable = v
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="29b50080-4542-4ad6-bb41-fa854de06b4c"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01d.i</h4><pre class="moose-pre"><code class="language-text"># Test illustrating that PorousFlow allows block-restricted relative permeabilities and capillarities
# and automatically adds appropriate Joiners.
# Physically, this test is checking that gravity head is established
# for 1phase, vanGenuchten, constant fluid-bulk, constant viscosity, constant permeability, Corey relative perm
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 1
    nx = 100
    xmin = -1
    xmax = 0
  []
  [./define_block1]
    input = gen
    type = SubdomainBoundingBoxGenerator
    block_id = 1
    bottom_left = &#x27;-1 -1 -1&#x27;
    top_right = &#x27;-0.5 1 1&#x27;
  [../]
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 -1 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = -1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc_0]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
  [./pc_1]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss_0]
    type = PorousFlow1PhaseP
    block = 0
    porepressure = pp
    capillary_pressure = pc_0
  [../]
  [./ppss_1]
    type = PorousFlow1PhaseP
    block = 1
    porepressure = pp
    capillary_pressure = pc_1
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm_0]
    type = PorousFlowRelativePermeabilityCorey
    block = 0
    n = 1
    phase = 0
  [../]
  [./relperm_1]
    type = PorousFlowRelativePermeabilityCorey
    block = 1
    n = 2
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  active = andy
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E6
  end_time = 1E6
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01d
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="aa83332b-f9f6-47e4-b6d2-8d5700621243"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn03.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn03
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="52aff1f3-ca0d-4748-8e73-70c1bfe904f5"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/line_sink02.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPolyLineSink with 2-phase, 3-components, with enthalpy, internal_energy, and thermal_conductivity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 2
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
  [./temp]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
  [./dummy_outflow]
    type = PorousFlowSumQuantity
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = 1
    max = 2
  [../]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
      cv = 1.8
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.1 0.2 0.3 0.2 0 0.1 0.3 0.1 0.1&#x27;
  [../]
[]

[DiracKernels]
  [./dirac0]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = ppwater
    point_file = one_point.bh
    line_length = 1
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-0.9 1.5&#x27;
    fluxes = &#x27;-1.1 2.2&#x27;
  [../]
  [./dirac1]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = ppgas
    line_length = 1
    use_relative_permeability = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -2.2&#x27;
  [../]
  [./dirac2]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = massfrac_ph0_sp0
    line_length = 1.3
    use_mobility = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac3]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = massfrac_ph0_sp1
    line_length = 1.3
    use_enthalpy = true
    mass_fraction_component = 0
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac4]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = massfrac_ph1_sp0
    function_of = temperature
    line_length = 0.9
    mass_fraction_component = 1
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac5]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = temp
    line_length = 0.9
    mass_fraction_component = 2
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac6]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = massfrac_ph0_sp0
    use_mobility = true
    function_of = temperature
    mass_fraction_component = 1
    use_relative_permeability = true
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;0 -0.2&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = line_sink02
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="12f6be86-313b-4fc9-afc2-e054f016de0b"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01c.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant fluid-bulk, constant viscosity, constant permeability, Corey relative perm
# unsaturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 -1 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = -1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01c
  exodus = true
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="38743a9d-fb92-4e4f-86d4-8fb2c1f9310f"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass07.i</h4><pre class="moose-pre"><code class="language-text"># 1phase with MD_Gaussian (var = log(mass-density) with Gaussian capillary) formulation
# constant-bulk density, constant porosity, 1component
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./md]
  [../]
[]

[ICs]
  [./md]
    type = RandomIC
    min = -1
    max = -0.224 # unsaturated for md&lt;log(density_P0=0.8)=-0.223
    variable = md
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = md
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;md&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 0.8
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseMD_Gaussian
    mass_density = md
    al = 1.1
    density_P0 = 0.8
    bulk_modulus = 1.5
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="539100ad-47a4-4265-9b31-6041f25e788b"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/line_sink04.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPolyLineSink with 2-phase, 3-components, with enthalpy, internal_energy, and thermal_conductivity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 2
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
  [./temp]
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
  [./dummy_outflow]
    type = PorousFlowSumQuantity
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = 1
    max = 2
  [../]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
      cv = 1.8
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.1 0.2 0.3 0.2 0 0.1 0.3 0.1 0.1&#x27;
  [../]
[]

[DiracKernels]
  [./dirac0]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = ppwater
    point_file = one_point.bh
    line_length = 1
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-0.9 1.5&#x27;
    fluxes = &#x27;-1.1 2.2&#x27;
  [../]
  [./dirac1]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = ppgas
    line_length = 1
    use_relative_permeability = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -2.2&#x27;
  [../]
  [./dirac2]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = massfrac_ph0_sp0
    line_length = 1.3
    use_mobility = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac3]
    type = PorousFlowPolyLineSink
    fluid_phase = 0
    variable = massfrac_ph0_sp1
    line_length = 1.3
    use_enthalpy = true
    mass_fraction_component = 0
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac4]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = massfrac_ph1_sp0
    function_of = temperature
    line_length = 0.9
    mass_fraction_component = 1
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac5]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = temp
    line_length = 0.9
    mass_fraction_component = 2
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;1.1 -0.2&#x27;
  [../]
  [./dirac6]
    type = PorousFlowPolyLineSink
    fluid_phase = 1
    variable = massfrac_ph0_sp0
    use_mobility = true
    function_of = temperature
    mass_fraction_component = 1
    use_relative_permeability = true
    use_internal_energy = true
    point_file = ten_points.bh
    SumQuantityUO = dummy_outflow
    p_or_t_vals = &#x27;-1.9 1.5&#x27;
    fluxes = &#x27;0 -0.2&#x27;
  [../]
[]


[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = line_sink04
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="43e57ca4-18ad-4145-a205-990035781355"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/denergy04.i</h4><pre class="moose-pre"><code class="language-text"># 2phase, 1 component, with solid displacements, time derivative of energy-density, THM porosity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pgas]
  [../]
  [./pwater]
  [../]
  [./temp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 1.0
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -1.0
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas temp pwater disp_x disp_y disp_z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      cv = 0.7
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    thermal = true
    ensure_positive = false
    porosity_zero = 0.7
    thermal_expansion_coeff = 0.7
    biot_coefficient = 0.9
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5ee94e75-9ddc-4f64-a0bb-aeaa49747e67"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass05.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 3components (that exist in both phases)
# unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./mass_sp0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./mass_sp1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = ppgas
  [../]
  [./mass_sp2]
    type = PorousFlowMassTimeDerivative
    fluid_component = 2
    variable = massfrac_ph0_sp0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ad83ee4d-86d2-4f09-88fe-0a8ae96dda76"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_convreact.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledConvectionReactionSub Kernel

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a1conv]
    type = CoupledConvectionReactionSub
    variable = a
    v = b
    log_k = 2
    weight = 1
    sto_v = 2.5
    sto_u = 2
    p = pressure
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1441dcd7-9668-4377-b8e1-5f195d46673e"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn02.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn02
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ea4812bf-bcb2-4360-a7ac-e93992af7c35"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn06.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn06
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5b707e2c-ba1c-40d4-a4bd-0b1732b25554"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_04.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_04
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6f499a82-8924-4b9a-9926-ed76e29b036b"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux10.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 3components, constant viscosity, constant insitu permeability
# density with constant bulk, BW relative perm, nonzero gravity, unsaturated with BW
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
  [./massfrac1]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = -0.7+x+y
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 0.3
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac1
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0 massfrac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureBW
    Sn = 0.05
    Ss = 0.9
    las = 2.2
    C = 1.5
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityBW
    Sn = 0.05
    Ss = 0.9
    Kn = 0.02
    Ks = 0.95
    C = 1.5
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6bb2e8f4-0a34-45fd-994a-0d1086586534"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux01_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 3components, constant viscosity, constant insitu permeability
# density with constant bulk, nonzero gravity
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
  [./massfrac1]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = -0.7+x+y
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 0.3
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyFlow
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowFullySaturatedDarcyFlow
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowFullySaturatedDarcyFlow
    fluid_component = 2
    variable = massfrac1
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0 massfrac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
[]

[Preconditioning]
  active = check
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0d0cab2c-234b-4f22-a24e-7a5c877e2fdc"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01c_action.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# using the Unsaturated Action
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 2.0
      viscosity = 1.0
      density0 = 1.0
    [../]
  [../]
[]

[PorousFlowUnsaturated]
  add_saturation_aux = false
  add_darcy_aux = false
  porepressure = pp
  gravity = &#x27;-1 0 0&#x27;
  fp = the_simple_fluid
  van_genuchten_alpha = 1.0
  van_genuchten_m = 0.5
  relative_permeability_type = Corey
  relative_permeability_exponent = 1.0
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 -1 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = -1
  [../]
[]

[Materials]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01c_action
  exodus = true
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="66f0ead9-6113-4a15-b46d-02ff1fb2a337"><div class="modal-content"><h4>modules/porous_flow/test/tests/heterogeneous_materials/constant_poroperm.i</h4><pre class="moose-pre"><code class="language-text"># Assign porosity and permeability variables from constant AuxVariables to create
# a heterogeneous model

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  ny = 3
  nz = 3
  xmax = 3
  ymax = 3
  zmax = 3
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 -10&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 1.5e6
  [../]
[]

[AuxVariables]
  [./poro]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzx]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzz]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./poromat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permxzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permyzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzxmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzymat]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./permzzmat]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./poromat]
    type = PorousFlowPropertyAux
    property = porosity
    variable = poromat
  [../]
  [./permxxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxxmat
    column = 0
    row = 0
  [../]
  [./permxymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxymat
    column = 1
    row = 0
  [../]
  [./permxzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permxzmat
    column = 2
    row = 0
  [../]
  [./permyxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyxmat
    column = 0
    row = 1
  [../]
  [./permyymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyymat
    column = 1
    row = 1
  [../]
  [./permyzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permyzmat
    column = 2
    row = 1
  [../]
  [./permzxmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzxmat
    column = 0
    row = 2
  [../]
  [./permzymat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzymat
    column = 1
    row = 2
  [../]
  [./permzzmat]
    type = PorousFlowPropertyAux
    property = permeability
    variable = permzzmat
    column = 2
    row = 2
  [../]
[]

[ICs]
  [./poro]
    type = RandomIC
    seed = 0
    variable = poro
    max = 0.5
    min = 0.1
  [../]
  [./permx]
    type = FunctionIC
    function = permx
    variable = permxx
  [../]
  [./permy]
    type = FunctionIC
    function = permy
    variable = permyy
  [../]
  [./permz]
    type = FunctionIC
    function = permz
    variable = permzz
  [../]
[]

[Functions]
  [./permx]
    type = ParsedFunction
    value = &#x27;(1+x)*1e-11&#x27;
  [../]
  [./permy]
    type = ParsedFunction
    value = &#x27;(1+y)*1e-11&#x27;
  [../]
  [./permz]
    type = ParsedFunction
    value = &#x27;(1+z)*1e-11&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    variable = ppwater
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      viscosity = 1e-3
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = ppwater
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = poro
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConstFromVar
    perm_xx = permxx
    perm_yy = permyy
    perm_zz = permzz
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Postprocessors]
  [./mass_ph0]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 100
  dt = 100
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9e3cc22a-4552-489e-97a1-a15a44a2f771"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_de2.i</h4><pre class="moose-pre"><code class="language-text"># testing desorption jacobian, with large mollification parameter
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 2
    max = 3
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./mollified_langmuir_params]
    type = MollifiedLangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0.813
    one_over_adsorption_time_const = 0
    langmuir_density = 0.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
    mollifier = 10.0
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="90e09c1e-8910-4c45-8149-2e0f7d0b3636"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn11.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn11
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b540acf2-e8bf-45f7-9f07-e97cd5d06113"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn20.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E6 2E6&#x27;  # cannot make too high as finitedifference constant state bums out due to precision loss
    use_mobility = false
    use_relperm = false
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn20
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="16d45c86-0943-4d50-9350-53081f2e2a7c"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_lumped_16.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# with lumped fluid mass

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsLumpedMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn_lumped_16
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6b8ee00c-2c63-4c4b-bd30-51aee212d84d"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn_lumped_18.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# almost gas saturated

# gravity = true
# supg = true
# transient = true


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 0.5E-3&#x27;
  gravity = &#x27;1 2 3&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -100.0
      max = -90.0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsLumpedMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsLumpedMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn18
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0767e842-d28c-4213-883f-3a608216655d"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/desorption/mollified_langmuir_jac_de.i</h4><pre class="moose-pre"><code class="language-text"># testing desorption jacobian
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[Variables]
  [./pressure]
  [../]
  [./conc]
  [../]
[]

[ICs]
  [./p_ic]
    type = RandomIC
    variable = pressure
    min = 2
    max = 3
  [../]
  [./conc_ic]
    type = RandomIC
    variable = conc
    min = -1
    max = 1
  [../]
[]


[Kernels]
  [./flow_from_matrix]
    type = DesorptionFromMatrix
    variable = conc
    pressure_var = pressure
  [../]
  [./flux_to_porespace]
    type = DesorptionToPorespace
    variable = pressure
    conc_var = conc
  [../]
[]

[Materials]
  [./mollified_langmuir_params]
    type = MollifiedLangmuirMaterial
    block = 0
    one_over_desorption_time_const = 0.813
    one_over_adsorption_time_const = 0
    langmuir_density = 0.34
    langmuir_pressure = 1.5
    conc_var = conc
    pressure_var = pressure
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = langmuir_jac1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b21c3c38-a643-4ec3-a99d-f502a7f9f024"><div class="modal-content"><h4>modules/porous_flow/examples/lava_lamp/1phase_convection.i</h4><pre class="moose-pre"><code class="language-text"># Two phase density-driven convection of dissolved CO2 in brine
#
# The model starts with CO2 in the liquid phase only.  The CO2 diffuses into the brine.
# As the density of the CO2-saturated brine is greater
# than the unsaturated brine, a gravitational instability arises and density-driven
# convection of CO2-rich fingers descend into the unsaturated brine.
#
# The instability is seeded by a random perturbation to the porosity field.
# Mesh adaptivity is used to refine the mesh as the fingers form.
#
# Note: this model is computationally expensive, so should be run with multiple cores.

[GlobalParams]
  PorousFlowDictator = &#x27;dictator&#x27;
  gravity = &#x27;0 -9.81 0&#x27;
[]

[Adaptivity]
  max_h_level = 2
  marker = marker
  initial_marker = initial
  initial_steps = 2
  [./Indicators]
    [./indicator]
      type = GradientJumpIndicator
      variable = zi
    [../]
  [../]
  [./Markers]
    [./marker]
      type = ErrorFractionMarker
      indicator = indicator
      refine = 0.8
    [../]
    [./initial]
      type = BoxMarker
      bottom_left = &#x27;0 1.95 0&#x27;
      top_right = &#x27;2 2 0&#x27;
      inside = REFINE
      outside = DO_NOTHING
    [../]
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  ymin = 1.5
  ymax = 2
  xmax = 2
  ny = 20
  nx = 40
  bias_y = 0.95
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.01
  [../]
  [./saturation_gas]
    order = FIRST
    family = MONOMIAL
  [../]
  [./xco2l]
    order = FIRST
    family = MONOMIAL
  [../]
  [./density_liquid]
    order = FIRST
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./xco2l]
    type = PorousFlowPropertyAux
    variable = xco2l
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./density_liquid]
    type = PorousFlowPropertyAux
    variable = density_liquid
    property = density
    phase = 0
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
    scaling = 1e4
  [../]
[]

[ICs]
  [./pressure]
    type = FunctionIC
    function = 10e6-9.81*1000*y
    variable = pgas
  [../]
  [./zi]
    type = ConstantIC
    value = 0
    variable = zi
  [../]
  [./porosity]
    type = RandomIC
    variable = porosity
    min = 0.25
    max = 0.275
    seed = 0
  [../]
[]

[BCs]
  [./top]
    type = DirichletBC
    value = 0.04
    variable = zi
    boundary = top
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pgas
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = zi
    disp_long = &#x27;0 0&#x27;
    disp_trans = &#x27;0 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2sw]
      type = CO2FluidProperties
    [../]
    [./co2]
      type = TabulatedFluidProperties
      fp = co2sw
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = &#x27;45&#x27;
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = &#x27;pgas&#x27;
    z = &#x27;zi&#x27;
    temperature_unit = Celsius
    xnacl = &#x27;xnacl&#x27;
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = porosity
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-11 0 0 0 1e-11 0 0 0 1e-11&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    phase = 0
    n = 2
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    phase = 1
    n = 2
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./diffusivity]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;2e-9 2e-9 2e-9 2e-9&#x27;
    tortuosity = &#x27;1 1&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./mumps_is_best_for_parallel_jobs]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
  [./basic]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e6
  nl_max_its = 25
  l_max_its = 100
  dtmax = 1e4
  nl_abs_tol = 1e-6
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 100
    growth_factor = 2
    cutback_factor = 0.5
  [../]
[]

[Functions]
  [./flux]
    type = ParsedFunction
    vals = &#x27;delta_xco2 dt&#x27;
    vars = &#x27;dx dt&#x27;
    value = &#x27;dx/dt&#x27;
  [../]
[]

[Postprocessors]
  [./total_co2_in_gas]
    type = PorousFlowFluidMass
    phase = 1
    fluid_component = 1
  [../]
  [./total_co2_in_liquid]
    type = PorousFlowFluidMass
    phase = 0
    fluid_component = 1
  [../]
  [./numdofs]
    type = NumDOFs
  [../]
  [./delta_xco2]
    type = ChangeOverTimePostprocessor
    postprocessor = total_co2_in_liquid
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./flux]
    type = FunctionValuePostprocessor
    function = flux
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  exodus = true
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1b8db403-3b49-45f9-a5ae-1fe3f5058bf9"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/jacobian_04.i</h4><pre class="moose-pre"><code class="language-text"># Checking the Jacobian of Flux-Limited TVD Advection, 1 phase, 1 component, unsaturated, using flux_limiter_type != none
# This is quite a heavy test, but we need a fairly big mesh to check the flux-limiting+TVD is happening correctly
#
# Here we use snes_check_jacobian instead of snes_type=test.  The former just checks the Jacobian for the
# random initial conditions, while the latter checks for u=1 and u=-1
#
# The Jacobian is correct for u=1 and u=-1, but the finite-difference scheme used by snes_type=test gives the
# wrong answer.
# For u=constant, the Kuzmin-Turek scheme adds as much antidiffusion as possible, resulting in a central-difference
# version of advection (flux_limiter = 1).  This is correct, and the Jacobian is calculated correctly.
# However, when computing the Jacobian using finite differences, u is increased or decreased at a node.
# This results in that node being at a maximum or minimum, which means no antidiffusion should be added
# (flux_limiter = 0).  This corresponds to a full-upwind scheme.  So the finite-difference computes the
# Jacobian in the full-upwind scenario, which is incorrect (the original residual = 0, after finite-differencing
# the residual comes from the full-upwind scenario).
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  xmin = 0
  xmax = 1
  ny = 4
  ymin = -1
  ymax = 2
  bias_y = 1.5
  nz = 4
  zmin = 1
  zmax = 2
  bias_z = 0.8
[]

[GlobalParams]
  gravity = &#x27;1 2 -0.5&#x27;
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
[]


[ICs]
  [./pp]
    variable = pp
    type = RandomIC
    min = -1
    max = 0
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = pp
    advective_flux_calculator = advective_flux_calculator
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.4
      viscosity = 1.1
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.5
  [../]
  [./advective_flux_calculator]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturated
    flux_limiter_type = minmod
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    phase = 0
    n = 2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.21 0 0  0 1.5 0  0 0 0.8&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_check_jacobian&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Linear # this is to force convergence even though the nonlinear residual is high: we just care about the Jacobian in this test
  end_time = 1
  num_steps = 1
  dt = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="609c746e-a355-4f23-8ed2-6bfce9eb03f9"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/exponential_decay.i</h4><pre class="moose-pre"><code class="language-text"># ExponentialDecay
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./exp_decay]
    type = PorousFlowExponentialDecay
    variable = u
    rate = rate
    reference = reference
  [../]
[]

[AuxVariables]
  [./rate]
  [../]
  [./reference]
  [../]
[]

[ICs]
  [./rate]
    type = RandomIC
    variable = rate
    min = -1
    max = 1
  [../]
  [./reference]
    type = RandomIC
    variable = reference
    min = 1
    max = 2
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="db1863e7-dfeb-4a1f-b195-9ef0ccdcdf19"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/disp03.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the dispersive contribution to the PorousFlowDisperiveFlux
# kernel by setting the diffusive component to zero (tortuosity = 0).

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 2e1
    min = 1e1
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.2
    disp_trans = 0.1
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.2
    disp_trans = 0.1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-2 1e-1&#x27;
    tortuosity = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8011c9ad-60be-4136-8303-353230367dec"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/denergy05.i</h4><pre class="moose-pre"><code class="language-text"># 2phase, 1 component, with solid displacements, time derivative of energy-density, THM porosity wth _ensure_positive = true, and compressive strains
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pgas]
  [../]
  [./pwater]
  [../]
  [./temp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.0
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.0
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.0
  [../]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 0.01
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -0.01
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas temp pwater disp_x disp_y disp_z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      cv = 0.7
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    thermal = true
    porosity_zero = 0.7
    thermal_expansion_coeff = 0.7
    biot_coefficient = 0.9
    solid_bulk = 10
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bb150a7-3616-4ca4-be31-8249b1ac41a7"><div class="modal-content"><h4>modules/richards/test/tests/darcy/jac.i</h4><pre class="moose-pre"><code class="language-text"># Test to show that DarcyFlux produces the correct jacobian

[GlobalParams]
  variable = pressure
  fluid_weight = &#x27;0 0 -1.5&#x27;
  fluid_viscosity = 1
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[Variables]
  [./pressure]
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./darcy]
    type = DarcyFlux
    variable = pressure
  [../]
[]

[Materials]
  [./solid]
    type = DarcyMaterial
    block = 0
    mat_permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jac
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f1f51526-f110-42e2-8355-d2b224259688"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto03.i</h4><pre class="moose-pre"><code class="language-text"># checking jacobian for linear plasticity (weak_plane_tensile)
# with hardening
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningCubic
    value_0 = 0
    value_residual = 1
    internal_limit = 1
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1 2&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;1 2 3  2 -4 -5  3 -5 2&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    tangent_operator = linear
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="30b55089-2e4e-4cab-bf6c-235f497e6521"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/2species.i</h4><pre class="moose-pre"><code class="language-text"># Tests the Jacobian when no secondary species are present

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    max = 10
    min = 1
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./a_ie]
    type = PrimaryTimeDerivative
    variable = a
  [../]
  [./a_diff]
    type = PrimaryDiffusion
    variable = a
  [../]
  [./a_conv]
    type = PrimaryConvection
    variable = a
    p = pressure
  [../]
  [./b_ie]
    type = PrimaryTimeDerivative
    variable = b
  [../]
  [./b_diff]
    type = PrimaryDiffusion
    variable = b
  [../]
  [./b_conv]
    type = PrimaryConvection
    variable = b
    p = pressure
  [../]
  [./pressure]
    type = DarcyFluxPressure
    variable = pressure
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c0880ffc-6a22-4172-9c33-b4a335fbaaaa"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_traction_stabilized.i</h4><pre class="moose-pre"><code class="language-text"># This input file tests the jacobians of many of the INS kernels
[GlobalParams]
  gravity = &#x27;1.1 1.1 1.1&#x27;
  u = vel_x
  v = vel_y
  w = vel_z
  p = p
  integrate_p_by_parts = false
  laplace = false
  supg = true
  pspg = true
  alpha = 1.1
[]

[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = 0
  xmax = 3.0
  ymin = 0
  ymax = 1.5
  zmax = 1.1
  nx = 1
  ny = 1
  nz = 1
  elem_type = HEX27
[]

[Variables]
  [./vel_x]
    order = SECOND
    family = LAGRANGE
  [../]
  [./vel_y]
    order = SECOND
    family = LAGRANGE
  [../]
  [./vel_z]
    order = SECOND
    family = LAGRANGE
  [../]
  [./p]
    order = SECOND
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./mass]
    type = INSMass
    variable = p
  [../]
  [./x_momentum_space]
    type = INSMomentumTractionForm
    variable = vel_x
    component = 0
  [../]
  [./y_momentum_space]
    type = INSMomentumTractionForm
    variable = vel_y
    component = 1
  [../]
  [./z_momentum_space]
    type = INSMomentumTractionForm
    variable = vel_z
    component = 2
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;0.5 1.5&#x27;
  [../]
[]

[Preconditioning]
  [./SMP_PJFNK]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  solve_type = NEWTON
  type = Steady
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
[]

[ICs]
  [./p]
    type = RandomIC
    variable = p
    min = 0.5
    max = 1.5
  [../]
  [./vel_x]
    type = RandomIC
    variable = vel_x
    min = 0.5
    max = 1.5
  [../]
  [./vel_y]
    type = RandomIC
    variable = vel_y
    min = 0.5
    max = 1.5
  [../]
  [./vel_z]
    type = RandomIC
    variable = vel_z
    min = 0.5
    max = 1.5
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c6b7483d-ce56-4ca7-9be3-19632be48653"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/line_sink01.i</h4><pre class="moose-pre"><code class="language-text"># PorousFlowPeacemanBorehole with 2-phase, 3-components, with enthalpy, internal_energy, and thermal_conductivity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
  [./temp]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp ppwater ppgas massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
  [./dummy_outflow0]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow1]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow2]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow3]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow4]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow5]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow6]
    type = PorousFlowSumQuantity
  [../]
  [./dummy_outflow7]
    type = PorousFlowSumQuantity
  [../]
[]

[ICs]
  [./temp]
    type = RandomIC
    variable = temp
    min = 1
    max = 2
  [../]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_temp]
    type = TimeDerivative
    variable = temp
  [../]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m01]
    type = TimeDerivative
    variable = massfrac_ph0_sp1
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
  [./dummy_m11]
    type = TimeDerivative
    variable = massfrac_ph1_sp1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
      cv = 1.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
      cv = 1.8
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.1 0.02 0.03 0.02 0.0 0.01 0.03 0.01 0.3&#x27;
  [../]
[]

[DiracKernels]
  [./dirac0]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = ppwater
    point_file = one_point.bh
    line_length = 1
    SumQuantityUO = dummy_outflow0
    character = 1
    bottom_p_or_t = -10
    unit_weight = &#x27;1 2 3&#x27;
    re_constant = 0.123
  [../]
  [./dirac1]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = ppgas
    line_length = 1
    line_direction = &#x27;-1 -1 -1&#x27;
    use_relative_permeability = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow1
    character = -0.5
    bottom_p_or_t = 10
    unit_weight = &#x27;1 2 -3&#x27;
    re_constant = 0.3
  [../]
  [./dirac2]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = massfrac_ph0_sp0
    line_length = 1.3
    line_direction = &#x27;1 0 1&#x27;
    use_mobility = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow2
    character = 0.6
    bottom_p_or_t = -4
    unit_weight = &#x27;-1 -2 -3&#x27;
    re_constant = 0.4
  [../]
  [./dirac3]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = massfrac_ph0_sp1
    line_length = 1.3
    line_direction = &#x27;1 1 1&#x27;
    use_enthalpy = true
    mass_fraction_component = 0
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow3
    character = -1
    bottom_p_or_t = 3
    unit_weight = &#x27;0.1 0.2 0.3&#x27;
    re_constant = 0.5
  [../]
  [./dirac4]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = massfrac_ph1_sp0
    function_of = temperature
    line_length = 0.9
    line_direction = &#x27;1 1 1&#x27;
    mass_fraction_component = 1
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow4
    character = 1.1
    bottom_p_or_t = -7
    unit_weight = &#x27;-1 2 3&#x27;
    re_constant = 0.6
  [../]
  [./dirac5]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = temp
    line_length = 0.9
    function_of = temperature
    line_direction = &#x27;1 2 3&#x27;
    mass_fraction_component = 2
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow5
    character = 0.9
    bottom_p_or_t = -8
    unit_weight = &#x27;1 2 1&#x27;
    re_constant = 0.7
  [../]
  [./dirac6]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 0
    variable = ppwater
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow6
    character = 0
    bottom_p_or_t = 10
    unit_weight = &#x27;0.0 0.0 0.0&#x27;
  [../]
  [./dirac7]
    type = PorousFlowPeacemanBorehole
    fluid_phase = 1
    variable = massfrac_ph0_sp0
    use_mobility = true
    mass_fraction_component = 1
    use_relative_permeability = true
    use_internal_energy = true
    point_file = one_point.bh
    SumQuantityUO = dummy_outflow7
    character = -1
    bottom_p_or_t = 10
    unit_weight = &#x27;0.1 0.2 0.3&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  file_base = line_sink01
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cbce4be3-d4f8-403b-bbdf-9a17452968c6"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_09.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_09
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="92da43eb-5929-4e4d-8edd-fbf85d944ede"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jnQ2P_bh1.i</h4><pre class="moose-pre"><code class="language-text"># quick two phase with production borehole

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]


[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.3 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.1
    n = 3
  [../]
  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pp]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
  [./sat]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_viscosity = 1
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 1
  diffusivity = 0
[]


[DiracKernels]
  [./bh_water]
    type = Q2PBorehole
    bottom_pressure = -2
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = sat
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
    fluid_density = DensityWater
    fluid_relperm = RelPermWater
    other_var = pp
    var_is_porepressure = false
    fluid_viscosity = 0.5
  [../]
  [./bh_gas]
    type = Q2PBorehole
    bottom_pressure = -1.5
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pp
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
    fluid_density = DensityGas
    fluid_relperm = RelPermGas
    other_var = sat
    var_is_porepressure = true
    fluid_viscosity = 0.25
  [../]
[]



[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 1E-12 # just so we get virtually no contributions from the time derivatives
    mat_permeability = &#x27;1.1E-20 0 0  0 2.2E-20 0  0 0 3.3E-20&#x27;
    gravity = &#x27;1 2 3&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jnQ2P_bh1
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c0bf41fe-1334-4d5e-89b5-fb7c72041edf"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01b.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant and large fluid-bulk, constant viscosity, constant permeability, Corey relperm
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1E3 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e3
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01b
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="301ab987-4d7c-4cd6-9866-789e8e40bcb4"><div class="modal-content"><h4>modules/phase_field/examples/cahn-hilliard/Parsed_SplitCH.i</h4><pre class="moose-pre"><code class="language-text">#
# Example problem showing how to use the DerivativeParsedMaterial with SplitCHParsed.
# The free energy is identical to that from SplitCHMath, f_bulk = 1/4*(1-c)^2*(1+c)^2.
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 150
  ny = 150
  xmax = 60
  ymax = 60
[]

[Modules]
  [./PhaseField]
    [./Conserved]
      [./c]
        free_energy = fbulk
        mobility = M
        kappa = kappa_c
        solve_type = REVERSE_SPLIT
      [../]
    [../]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[ICs]
  [./cIC]
    type = RandomIC
    variable = c
    min = -0.1
    max =  0.1
  [../]
[]

[AuxKernels]
  [./local_energy]
    type = TotalFreeEnergy
    variable = local_energy
    f_name = fbulk
    interfacial_vars = c
    kappa_names = kappa_c
    execute_on = timestep_end
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./mat]
    type = GenericConstantMaterial
    prop_names  = &#x27;M kappa_c&#x27;
    prop_values = &#x27;1.0 0.5&#x27;
  [../]
  [./free_energy]
    type = DerivativeParsedMaterial
    f_name = fbulk
    args = c
    constant_names = W
    constant_expressions = 1.0/2^2
    function = W*(1-c)^2*(1+c)^2
    enable_jit = true
    outputs = exodus
  [../]
[]

[Postprocessors]
  [./top]
    type = SideIntegralVariablePostprocessor
    variable = c
    boundary = top
  [../]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
  [../]
[]

[Preconditioning]
  [./cw_coupling]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  scheme = bdf2

  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu          &#x27;

  l_max_its = 30
  l_tol = 1e-4
  nl_max_its = 20
  nl_rel_tol = 1e-9

  dt = 2.0
  end_time = 20.0
[]

[Outputs]
  exodus = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5c5da6c6-318f-4d12-a733-3affa75bc4f1"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh15.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh15
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b4399fef-72d1-460b-b003-0de6abb7ea74"><div class="modal-content"><h4>modules/chemical_reactions/test/tests/jacobian/coupled_equilsub.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian terms for the CoupledBEEquilibriumSub Kernel

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[Variables]
  [./a]
    order = FIRST
    family = LAGRANGE
  [../]
  [./b]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pressure]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./pressure]
    type = RandomIC
    variable = pressure
    min = 1
    max = 5
  [../]
  [./a]
    type = RandomIC
    variable = a
    max = 1
    min = 0
  [../]
  [./b]
    type = RandomIC
    variable = b
    max = 1
    min = 0
  [../]
[]

[Kernels]
  [./diff]
    type = DarcyFluxPressure
    variable = pressure
  [../]
  [./diff_b]
    type = Diffusion
    variable = b
  [../]
  [./a]
    type = CoupledBEEquilibriumSub
    variable = a
    v = b
    log_k = 2
    weight = 2
    sto_v = 1.5
    sto_u = 2
  [../]
[]

[Materials]
  [./porous]
    type = GenericConstantMaterial
    prop_names = &#x27;diffusivity conductivity porosity&#x27;
    prop_values = &#x27;1e-4 1e-4 0.2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1
[]

[Outputs]
  perf_graph = true
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3e0b3457-0abf-4e1c-bd94-b9c1053fa1a5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-8
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random03
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a1d01834-350a-47d8-b5ba-e1b2a80b8572"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/jacobian_01.i</h4><pre class="moose-pre"><code class="language-text"># Checking the Jacobian of Flux-Limited TVD Advection, using flux_limiter_type = none
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  xmin = 0
  xmax = 1
  ny = 4
  ymin = -1
  ymax = 2
  bias_y = 1.5
  nz = 4
  zmin = 1
  zmax = 2
  bias_z = 0.8
[]

[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = u
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = none
    u = u
    velocity = &#x27;1 -2 1.5&#x27;
  [../]
[]


[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
  num_steps = 1
  dt = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c4c83b7c-6af0-4ac7-8dbb-054f75fa412e"><div class="modal-content"><h4>modules/combined/examples/phase_field-mechanics/LandauPhaseTrans.i</h4><pre class="moose-pre"><code class="language-text">#
# Martensitic transformation
# Chemical driving force described by Landau Polynomial
# Coupled with elasticity (Mechanics)
#

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 100
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 100

  elem_type = QUAD4
[]

[Variables]
  [./eta1]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 0.1
    [../]
  [../]
  [./eta2]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 0.1
    [../]
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    generate_output = &#x27;stress_xx stress_yy&#x27;
    eigenstrain_names = &#x27;eigenstrain1 eigenstrain2&#x27;
  [../]
[]

[Kernels]
  [./eta_bulk1]
    type = AllenCahn
    variable = eta1
    args = &#x27;eta2&#x27;
    f_name = F
  [../]
  [./eta_bulk2]
    type = AllenCahn
    variable = eta2
    args = &#x27;eta1&#x27;
    f_name = F
  [../]
  [./eta_interface1]
    type = ACInterface
    variable = eta1
    kappa_name = kappa_eta
  [../]
  [./eta_interface2]
    type = ACInterface
    variable = eta2
    kappa_name = kappa_eta
  [../]

  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
[]

[Materials]
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;L kappa_eta&#x27;
    prop_values = &#x27;1 1&#x27;
  [../]

  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    f_name = Fc
    args = &#x27;eta1 eta2&#x27;
    constant_names = &#x27;A2 A3 A4&#x27;
    constant_expressions = &#x27;0.2 -12.6 12.4&#x27;
    function = &#x27;A2/2*(eta1^2+eta2^2) + A3/3*(eta1^3+eta2^3) + A4/4*(eta1^2+eta2^2)^2&#x27;
    enable_jit = true
    derivative_order = 2
  [../]

  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;700 300 300 700 300 700 300 300 300&#x27;
    fill_method = symmetric9
  [../]

  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./var_dependence1]
    type = DerivativeParsedMaterial
    f_name = var_dep1
    args = &#x27;eta1&#x27;
    function = eta1
    enable_jit = true
    derivative_order = 2
  [../]
  [./var_dependence2]
    type = DerivativeParsedMaterial
    f_name = var_dep2
    args = &#x27;eta2&#x27;
    function = eta2
    enable_jit = true
    derivative_order = 2
  [../]

  [./eigenstrain1]
    type = ComputeVariableEigenstrain
    eigen_base = &#x27;0.1 -0.1 0 0 0 0&#x27;
    prefactor = var_dep1
    args = &#x27;eta1&#x27;
    eigenstrain_name = eigenstrain1
  [../]

  [./eigenstrain2]
    type = ComputeVariableEigenstrain
    eigen_base = &#x27;-0.1 0.1 0 0 0 0&#x27;
    prefactor = var_dep2
    args = &#x27;eta2&#x27;
    eigenstrain_name = eigenstrain2
  [../]

  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;eta1 eta2&#x27;
    derivative_order = 2
  [../]

  [./totol_free_energy]
    type = DerivativeSumMaterial
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;eta1 eta2&#x27;
    derivative_order = 2
  [../]
[]

[BCs]
  [./all_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;top bottom left right&#x27;
    value = 0
  [../]
  [./all_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;top bottom left right&#x27;
    value = 0
  [../]
[]

[Preconditioning]
  # active = &#x27; &#x27;
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  # this gives best performance on 4 cores
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type  -sub_pc_type &#x27;
  petsc_options_value = &#x27;asm       lu&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10
  start_time = 0.0
  num_steps = 10

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 9
    iteration_window = 2
    growth_factor = 1.1
    cutback_factor = 0.75
    dt = 0.3
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9312e91e-74b3-4c74-b640-66d393aed79b"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/hcond02.i</h4><pre class="moose-pre"><code class="language-text"># 2phase heat conduction
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pgas]
  [../]
  [./pwater]
  [../]
  [./temp]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 1.0
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -1.0
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]


[Kernels]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./heat_conduction]
    type = PorousFlowHeatConduction
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas temp pwater&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;1.1 0.1 0.3 0.1 2.2 0 0.3 0 3.3&#x27;
    wet_thermal_conductivity = &#x27;2.1 0.1 0.3 0.1 1.2 0 0.3 0 1.1&#x27;
    exponent = 1.7
    aqueous_phase_number = 1
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1364eed4-20fb-4447-bc58-98cc21b404d2"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh07.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh07
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="663a46e5-d931-41fb-969a-df2b4d56a724"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.4
    max = 0.6
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.4
    max = 1.6
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
    outputs = none # no reason why mass should be conserved
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
    outputs = none # no reason why mass should be conserved
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu NONZERO 1E-10 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh01
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="88f51bcc-4a5e-4ab9-af9f-1816d7088e89"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/RZ_cone/RZ_cone_stab_jac_test.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
  laplace = true
  transient_term = true
  supg = true
  pspg = true
  family = LAGRANGE
  order = SECOND
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmin = 0
  xmax = 1.1
  ymin = -1.1
  ymax = 1.1
  elem_type = QUAD9
[]

[Problem]
  coord_type = RZ
[]

[Preconditioning]
  [./SMP_PJFNK]
    type = SMP
    full = true
    solve_type = NEWTON
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 1.1
  # petsc_options = &#x27;-snes_test_display&#x27;
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
[]

[Variables]
  [./vel_x]
    # Velocity in radial (r) direction
  [../]
  [./vel_y]
    # Velocity in axial (z) direction
  [../]
  [./p]
    order = FIRST
  [../]
[]


[Kernels]
  [./x_momentum_time]
    type = INSMomentumTimeDerivative
    variable = vel_x
  [../]
  [./y_momentum_time]
    type = INSMomentumTimeDerivative
    variable = vel_y
  [../]
  [./mass]
    type = INSMassRZ
    variable = p
    u = vel_x
    v = vel_y
    p = p
  [../]
  [./x_momentum_space]
    type = INSMomentumLaplaceFormRZ
    variable = vel_x
    u = vel_x
    v = vel_y
    p = p
    component = 0
  [../]
  [./y_momentum_space]
    type = INSMomentumLaplaceFormRZ
    variable = vel_y
    u = vel_x
    v = vel_y
    p = p
    component = 1
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;1.1 1.1&#x27;
  [../]
[]

[ICs]
  [./vel_x]
    type = RandomIC
    variable = vel_x
    min = 0.1
    max = 0.9
  [../]
  [./vel_y]
    type = RandomIC
    variable = vel_y
    min = 0.1
    max = 0.9
  [../]
  [./p]
    type = RandomIC
    variable = p
    min = 0.1
    max = 0.9
  [../]
[]

[Outputs]
  dofmap = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4b8b08b0-3403-4aa1-a67c-9ebd438838b1"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_liquid.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that give a single liquid phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 5e6
    max = 8e6
    variable = pgas
  [../]
  [./z_liquid]
    type = RandomIC
    min = 0.01
    max = 0.03
    variable = zi
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9f16dfe2-8f96-40f5-9e83-c68f9b82337e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/special_joint1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# WeakPlaneTensile with strength = 1000Pa
# WeakPlaneShear with cohesion = 0.1MPa and friction angle = 25
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./wpt_str]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = wpt_str
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wps_c]
    type = TensorMechanicsHardeningConstant
    value = 1.0E5
  [../]
  [./wps_tan_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.466
  [../]
  [./wps_tan_psi]
    type = TensorMechanicsHardeningConstant
    value = 0.087
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = wps_c
    tan_friction_angle = wps_tan_phi
    tan_dilation_angle = wps_tan_psi
    smoother = 0
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;wpt wps&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;joint&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = special_joint1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7b513c34-d4f0-4a8d-a529-ed5efa3c16ab"><div class="modal-content"><h4>test/tests/kernels/conservative_advection/full_upwinding_jacobian.i</h4><pre class="moose-pre"><code class="language-text"># Test of advection with full upwinding
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 3
  ny = 2
  nz = 1
[]

[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./advection]
    type = ConservativeAdvection
    variable = u
    upwinding_type = full
    velocity = &#x27;2 -1.1 1.23&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  petsc_options_iname = &#x27;-snes_type&#x27;
  petsc_options_value = &#x27;test&#x27;
  dt = 2
  end_time = 2
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c2c6de54-b4ac-4177-9288-ba482ef54322"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_22.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true
# piecewiselinearflux = true, with fully_upwind = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
  fully_upwind = true
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
[]

[BCs]
  [./left_flux]
    type = RichardsPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # can not make too high as finite difference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    variable = pressure
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn_fu_22
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e1654795-9264-49aa-a642-3d8cc84aa973"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn04.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn04
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="591cf529-4f80-43ff-babb-a7a6476e06e2"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_03.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn03
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a22ddd4d-479e-41d3-bb63-cb6cd91cd1b1"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh16.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    preset = false
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh16
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5d5a2f0d-41ce-42df-a1bc-0e43ebae4c10"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn09.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn09
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="14b36ae0-0112-47de-9851-568d1fa50b17"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jnQ2P_sink.i</h4><pre class="moose-pre"><code class="language-text"># quick two phase with sink

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]


[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.1
    n = 3
  [../]
[]

[Variables]
  [./pp]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 1
    [../]
  [../]
  [./sat]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]

[BCs]
  [./gas_flux]
    type = Q2PPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # can not make too high as finite-difference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    fluid_density = DensityGas
    fluid_relperm = RelPermGas
    variable = pp
    other_var = sat
    var_is_porepressure = true
    fluid_viscosity = 1
  [../]
  [./water_flux]
    type = Q2PPiecewiseLinearSink
    boundary = &#x27;left right&#x27;
    pressures = &#x27;-0.9 0.9&#x27;
    bare_fluxes = &#x27;1E8 2E8&#x27;  # can not make too high as finite-difference constant state bums out due to precision loss
    use_mobility = true
    use_relperm = true
    fluid_density = DensityWater
    fluid_relperm = RelPermWater
    variable = sat
    other_var = pp
    var_is_porepressure = false
    fluid_viscosity = 1
  [../]
[]

[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_viscosity = 1
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 1
  diffusivity = 0
[]

[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1.1 0 0  0 2.2 0  0 0 3.3&#x27;
    gravity = &#x27;1 2 3&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jnQ2P_sink
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="46fff5cc-0261-4a55-87a9-ef5c6422f5ee"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_update.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_update
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f921e643-c732-4dae-a54b-b579add2d251"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh_fu_11.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGnone
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_11
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a477250-5ffa-4f46-ae49-3e2d3fb1b70a"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/disp04.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the PorousFlowDisperiveFlux kernel

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 2e1
    min = 1e1
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.2
    disp_trans = 0.1
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0.2
    disp_trans = 0.1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-2 1e-1&#x27;
    tortuosity = &#x27;0.1&#x27;
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8643304c-a195-412a-a902-0b6862be7e1d"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass08.i</h4><pre class="moose-pre"><code class="language-text"># 1phase
# vanGenuchten, constant-bulk density, HM porosity, 1component, unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = -1
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1
    max = 1
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6820be06-f435-435b-ab68-f0e079fee5f5"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/eff_stress03.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
# RZ coordinates
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]


[Kernels]
  [./grad0]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 0
    variable = ppwater
  [../]
  [./grad1]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Materials]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="34f6959a-efe2-474c-af07-c1abb0141862"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux09.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP), 3components (that exist in both phases), constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with RSC capillary
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac_ph0_sp0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureRSC
    shift = -0.1
    scale_ratio = 3
    oil_viscosity = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a6100206-37c0-4a14-8ab0-c49859a09772"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_08.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cef4c74a-f6be-4f6d-ad57-e5c46223d815"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn12.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn12
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="67e08f7d-b2af-4c77-b192-66fc5c6ddaa9"><div class="modal-content"><h4>modules/porous_flow/test/tests/heterogeneous_materials/vol_expansion_poroperm.i</h4><pre class="moose-pre"><code class="language-text"># Apply an increasing porepressure, with zero mechanical forces,
# and observe the corresponding volumetric expansion and porosity increase.
# Check that permeability is calculated correctly from porosity.
#
# P = t
# With the Biot coefficient being 1, the effective stresses should be
# stress_xx = stress_yy = stress_zz = t
# With bulk modulus = 1 then should have
# vol_strain = strain_xx + strain_yy + strain_zz = t.
#
# With the biot coefficient being 1, the porosity (phi) # at time t is:
# phi = 1 - (1 - phi0) / exp(vol_strain)
# where phi0 is the porosity at t = 0 and P = 0.
#
# The permeability (k) is
# k = k_anisotropic * f * d^2 * phi^n / (1-phi)^m

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  block = 0
  PorousFlowDictator = dictator
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./p]
  [../]
[]

[BCs]
  [./p]
    type = FunctionDirichletBC
    boundary = &#x27;bottom top&#x27;
    variable = p
    function = t
  [../]
  [./xmin]
    type = DirichletBC
    boundary = left
    variable = disp_x
    value = 0
  [../]
  [./ymin]
    type = DirichletBC
    boundary = bottom
    variable = disp_y
    value = 0
  [../]
  [./zmin]
    type = DirichletBC
    boundary = back
    variable = disp_z
    value = 0
  [../]
[]

[Kernels]
  [./p_does_not_really_diffuse]
    type = Diffusion
    variable = p
  [../]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1
    variable = disp_z
    component = 2
  [../]
[]

[AuxVariables]
  [./poro0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./poro]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_x]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_y]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[ICs]
  [./poro0]
    type = RandomIC
    seed = 0
    variable = poro0
    max = 0.15
    min = 0.05
  [../]
[]

[AuxKernels]
  [./poromat]
    type = PorousFlowPropertyAux
    property = porosity
    variable = poro
  [../]
  [./perm_x]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_x
    row = 0
    column = 0
  [../]
  [./perm_y]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_y
    row = 1
    column = 1
  [../]
  [./perm_z]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_z
    row = 2
    column = 2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;p&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    bulk_modulus = 1
    shear_modulus = 1
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = p
    capillary_pressure = pc
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = poro0
    solid_bulk = 1
    biot_coefficient = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityKozenyCarman
    k_anisotropy = &#x27;1 0 0  0 2 0  0 0 0.1&#x27;
    poroperm_function = kozeny_carman_fd2
    f = 0.1
    d = 5
    m = 2
    n = 7
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -ksp_atol -ksp_rtol&#x27;
    petsc_options_value = &#x27;gmres bjacobi 1E-10 1E-10 10 1E-15 1E-10&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  dt = 0.1
  end_time = 1
[]

[Outputs]
  exodus = true
  execute_on = &#x27;timestep_end&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="47823ed7-f2ec-47a4-97c3-be5dc132ed5d"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux05.i</h4><pre class="moose-pre"><code class="language-text"># 1phase with MD_Gaussian (var = log(mass-density) with Gaussian capillary) formulation
# constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity
# fully saturated
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./md]
  [../]
[]

[ICs]
  [./md]
    type = RandomIC
    min = 0
    max = 1 # unsaturated for md&lt;log(density_P0=0.8)=-0.223
    variable = md
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = md
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;md&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseMD_Gaussian
    mass_density = md
    al = 1.1
    density_P0 = 0.8
    bulk_modulus = 1.5
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="997b6791-c73c-42dc-91f5-9bd24b20b3a2"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn06.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn06
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5fab1c12-ab55-49bc-989a-a614505f12d9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/special_rock1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked
#
# NOTE: The yield function tolerances here are set at 100-times what i would usually use
# This is because otherwise the test fails on the &#x27;pearcey&#x27; architecture.
# This is because identical stress tensors yield slightly different eigenvalues
# (and hence return-map residuals) on &#x27;pearcey&#x27; than elsewhere, which results in
# a different number of NR iterations are needed to return to the yield surface.
# This is presumably because of compiler internals, or the BLAS routines being
# optimised differently or something similar.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    use_custom_returnMap = false
    yield_function_tolerance = 1.0E+2  # Note larger value
    shift = 1.0E+2                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./mc_smooth]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E+2  # Note larger value
    shift = 1.0E+2                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
  [./tensile_smooth]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5  # Note larger value, to match the larger yield_function_tolerances

    plastic_models = &#x27;tensile mc&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;rock&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = special_rock1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="950b2f62-2aef-49a6-b4df-ced6ded31498"><div class="modal-content"><h4>test/tests/executioners/eigen_executioners/ane.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
 type = GeneratedMesh
 dim = 2
 xmin = 0
 xmax = 10
 ymin = 0
 ymax = 10
 elem_type = QUAD4
 nx = 8
 ny = 8

 uniform_refine = 0
[]

# the minimum eigenvalue is (2*PI*(p-1)^(1/p)/a/p/sin(PI/p))^p;
# Its inverse is 35.349726539758187. Here a is equal to 10.

[Variables]
  active = &#x27;u&#x27;

  [./u]
    # second order is way better than first order
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./uic]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  active = &#x27;diff rhs&#x27;

  [./diff]
    type = PHarmonic
    variable = u
    p = 3
  [../]

  [./rhs]
    type = PMassEigenKernel
    variable = u
    p = 3
  [../]
[]

[BCs]
  active = &#x27;homogeneous&#x27;

  [./homogeneous]
    type = DirichletBC
    variable = u
    boundary = &#x27;0 2&#x27;
    value = 0
  [../]
[]

[Executioner]
  type = NonlinearEigen

  bx_norm = &#x27;unorm&#x27;

  free_power_iterations = 10
  nl_abs_tol = 1e-12
  nl_rel_tol = 1e-50
  k0 = 1.0
# important: constant initial value set by auto_initilization does not
# converge to the fundamental mode
  auto_initialization = false
  output_after_power_iterations = false

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;
  l_max_its = 100
[]

[Postprocessors]
  active = &#x27;unorm udiff&#x27;

  [./unorm]
    type = ElementIntegralVariablePostprocessor
    variable = u
    # execute on residual is important for nonlinear eigen solver!
    execute_on = linear
  [../]

  [./udiff]
    type = ElementL2Diff
    variable = u
    outputs = console
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = ane
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5584ae6d-ef24-4db6-a369-3c23e02cb639"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux02.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 3components, constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with vanGenuchten
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
  [./massfrac1]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = -0.7+x+y
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 0.3
  [../]
  [./massfrac1]
    type = RandomIC
    variable = massfrac1
    min = 0
    max = 0.4
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac1
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0 massfrac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0 massfrac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="74cafd6d-2b19-44e9-96cd-aa8b6a02df9e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</h4><pre class="moose-pre"><code class="language-text"># capped drucker-prager
# apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./shear_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tensile_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./compressive_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./shear_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = shear_yield_fcn
  [../]
  [./tensile_fcn_auxk]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = tensile_yield_fcn
  [../]
  [./compressive_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = compressive_yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./shear_max]
    type = ElementExtremeValue
    variable = shear_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./tensile_max]
    type = ElementExtremeValue
    variable = tensile_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./compressive_max]
    type = ElementExtremeValue
    variable = compressive_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero_shear]
    type = FunctionValuePostprocessor
    function = shear_should_be_zero_fcn
  [../]
  [./should_be_zero_compressive]
    type = FunctionValuePostprocessor
    function = compressive_should_be_zero_fcn
  [../]
  [./should_be_zero_tensile]
    type = FunctionValuePostprocessor
    function = tensile_should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./shear_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;shear_max&#x27;
  [../]
  [./tensile_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;tensile_max&#x27;
  [../]
  [./compressive_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;compressive_max&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = dp
    perform_finite_strain_rotations = false
  [../]
  [./dp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-3
    tip_smoother = 0.1E3
    smoothing_tol = 0.1E3
    max_NR_iterations = 1000
    small_dilation = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="842d2705-6060-4716-96e8-758e104a8ef1"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux04.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PP), 3components (that exist in both phases), constant viscosity, constant insitu permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with vanGenuchten
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp1]
  [../]
  [./massfrac_ph1_sp0]
  [../]
  [./massfrac_ph1_sp1]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph0_sp1]
    type = RandomIC
    variable = massfrac_ph0_sp1
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 0.4
  [../]
  [./massfrac_ph1_sp1]
    type = RandomIC
    variable = massfrac_ph1_sp1
    min = 0
    max = 0.4
  [../]
[]


[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = massfrac_ph0_sp0
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph0_sp1 massfrac_ph1_sp0 massfrac_ph1_sp1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="88d90d31-33ad-48ab-b074-267cbdcd11f6"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/jacobian_test/jacobian_test.i</h4><pre class="moose-pre"><code class="language-text"># This input file tests the jacobians of many of the INS kernels
[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 3.0
  ymin = 0
  ymax = 1.5
  nx = 1
  ny = 1
  elem_type = QUAD9
[]

[Variables]
  [./vel_x]
    order = SECOND
    family = LAGRANGE
  [../]
  [./vel_y]
    order = SECOND
    family = LAGRANGE
  [../]
  [./p]
    order = FIRST
    family = LAGRANGE
  [../]
  [./temp]
    order = SECOND
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./mass]
    type = INSMass
    variable = p
    u = vel_x
    v = vel_y
    p = p
  [../]
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    u = vel_x
    v = vel_y
    p = p
    component = 0
    integrate_p_by_parts = false
  [../]
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    u = vel_x
    v = vel_y
    p = p
    component = 1
    integrate_p_by_parts = false
  [../]
  [./x_mom_time]
    type = INSMomentumTimeDerivative
    variable = vel_x
  [../]
  [./y_mom_time]
    type = INSMomentumTimeDerivative
    variable = vel_y
  [../]
  [./temp]
    type = INSTemperature
    variable = temp
    u = vel_x
    v = vel_y
  [../]
  [./temp_time_deriv]
    type = INSTemperatureTimeDerivative
    variable = temp
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu k cp&#x27;
    prop_values = &#x27;0.5 1.5 0.7 1.3&#x27;
  [../]
[]

[Preconditioning]
  [./SMP_PJFNK]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  solve_type = NEWTON
  type = Transient
  num_steps = 1
[]

[ICs]
  [./p]
    type = RandomIC
    variable = p
    min = 0.5
    max = 1.5
  [../]
  [./vel_x]
    type = RandomIC
    variable = vel_x
    min = 0.5
    max = 1.5
  [../]
  [./vel_y]
    type = RandomIC
    variable = vel_y
    min = 0.5
    max = 1.5
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    min = 0.5
    max = 1.5
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1451a200-8552-4b35-854d-9d7a12c109e5"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/ics/random_ic_distribution_test/random_ic_distribution_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
[]

[Variables]
  [u]
    order = FIRST
    family = LAGRANGE
  []
[]

[AuxVariables]
  [u_aux]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Distributions]
  [uniform]
    type = Uniform
    lower_bound = 1.0
    upper_bound = 3.0
  []
[]

[ICs]
  [u_aux]
    type = RandomIC
    legacy_generator = false
    variable = u_aux
    distribution = uniform
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
  []

  [right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
  []
[]

[VectorPostprocessors]
  [histo]
    type = VolumeHistogram
    variable = u_aux
    min_value = 0
    max_value = 4
    bin_number = 80
    execute_on = initial
    outputs = initial
  []
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
  [initial]
    type = CSV
    execute_on = initial
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c727d300-9986-4adc-b193-d0e4177170fc"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh09.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh09
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6616c1cc-fa84-425a-ae28-3945df531645"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass10.i</h4><pre class="moose-pre"><code class="language-text"># 1phase
# vanGenuchten, constant-bulk density, HM porosity, 1component, unsaturated
[Mesh]
  type = GeneratedMesh
  dim = 3
  xmin = -1
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1
    max = 1
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
    strain_at_nearest_qp = true
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
    strain_at_nearest_qp = true
  [../]
  [./nearest_qp]
    type = PorousFlowNearestQp
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b48f4a04-2e87-43e0-b5cd-104ce6d32018"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection6.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with 2 porepressure as PorousFlow variables
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
  [./P0]
  [../]
  [./P1]
  [../]
[]

[ICs]
  [./P0]
    type = RandomIC
    variable = P0
    min = -1
    max = 0
  [../]
  [./P1]
    type = RandomIC
    variable = P1
    min = 0
    max = 1
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./dummy_P0]
    type = NullKernel
    variable = P0
  [../]
  [./dummy_P1]
    type = NullKernel
    variable = P1
  [../]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;P0 P1&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1
    m = 0.6
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 3
      density0 = 4
      thermal_expansion = 0
      viscosity = 150.0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 4
      density0 = 3
      thermal_expansion = 0
      viscosity = 130.0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./ppss_qp]
    type = PorousFlow2PhasePP
    phase0_porepressure = P0
    phase1_porepressure = P1
    capillary_pressure = pc
  [../]
  [./simple_fluid0_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./effective_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
    fluid = true
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityKozenyCarman
    poroperm_function = kozeny_carman_phi0
    k0 = 5
    m = 2
    n = 2
    phi0 = 0.1
  [../]
  [./relperm0_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm1_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
    s_res = 0.0
    sum_s_res = 0.1
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="95af8bb4-04cb-4ae3-938f-6d8711a19b8a"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/denergy02.i</h4><pre class="moose-pre"><code class="language-text"># 2phase, 1 component, with solid displacements, time derivative of energy-density
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 2
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pgas]
  [../]
  [./pwater]
  [../]
  [./temp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pgas]
    type = RandomIC
    variable = pgas
    max = 1.0
    min = 0.0
  [../]
  [./pwater]
    type = RandomIC
    variable = pwater
    max = 0.0
    min = -1.0
  [../]
  [./temp]
    type = RandomIC
    variable = temp
    max = 1.0
    min = 0.0
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./dummy_pgas]
    type = Diffusion
    variable = pgas
  [../]
  [./dummy_pwater]
    type = Diffusion
    variable = pwater
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas temp pwater disp_x disp_y disp_z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      cv = 0.7
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.7
    biot_coefficient = 0.9
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.1
    density = 0.5
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="61004b3c-3543-4184-8c33-8cc65b0fcb76"><div class="modal-content"><h4>modules/phase_field/test/tests/phase_field_crystal/PFCRFF/PFCRFF_cancelation_test.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  num_L = 5
  L_name_base = L
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 12
  ny = 12
  xmax = 6
  ymax = 6
[]

[Variables]
  [./PFCRFFVariables]
  [../]
  [./n]
    [./InitialCondition]
      type = RandomIC
      max = 0.8
      min = .2
      seed = 12345
    [../]
  [../]
[]

[Kernels]
  [./PFCRFFKernel]
    n_name = n
    log_approach = cancelation
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./PFC]
    type = PFCRFFMaterial
  [../]
[]

[Postprocessors]
  [./dt]
    type = TimestepSize
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
    type = SMP
    full = true
  [../]
  [./FDP]
    type = FDP
    full = true
  [../]
[]

[Executioner]
  # petsc_options = &#x27;-snes_mf_operator -ksp_monitor&#x27;
  # petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  # petsc_options_value = &#x27;hypre boomeramg 31&#x27;
  # petsc_options_iname = -pc_type
  # petsc_options_value = lu
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         101   preonly   lu      5&#x27;
  type = Transient
  num_steps = 1
  dt = 0.1
  l_max_its = 50
  nl_max_its = 20
  solve_type = NEWTON
  l_tol = 1e-04
  nl_rel_tol = 1e-9
  scheme = bdf2
[]

[Outputs]
  exodus = true
[]

[ICs]
  active = &#x27;&#x27;
  [./density_IC]
    y2 = 10.5
    lc = 6
    y1 = 1.5
    min = .8
    max = .2
    x2 = 10.5
    crystal_structure = FCC
    variable = n
    x1 = 1.5
    type = PFCFreezingIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e588d404-c42b-45d3-af3e-546b6ea9b557"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_2/gh_fu_01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = false
# supg = false
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmin = 0
  xmax = 1
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E2
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5E2
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.0
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./water_ic]
    type = RandomIC
    min = 0.4
    max = 0.6
    variable = pwater
  [../]
  [./gas_ic]
    type = RandomIC
    min = 1.4
    max = 1.6
    variable = pgas
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardsfgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFullyUpwindFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFullyUpwindFlux
    variable = pgas
  [../]
[]


[AuxVariables]
  [./seffgas]
  [../]
  [./seffwater]
  [../]
[]

[AuxKernels]
  [./seffgas_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffGas
    variable = seffgas
  [../]
  [./seffwater_kernel]
    type = RichardsSeffAux
    pressure_vars = &#x27;pwater pgas&#x27;
    seff_UO = SeffWater
    variable = seffwater
  [../]
[]

[Postprocessors]
  [./mwater_init]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mgas_init]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_begin
    outputs = none
  [../]
  [./mwater_fin]
    type = RichardsMass
    variable = pwater
    execute_on = timestep_end
    outputs = none
  [../]
  [./mgas_fin]
    type = RichardsMass
    variable = pgas
    execute_on = timestep_end
    outputs = none
  [../]

  [./mass_error_water]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_w
    outputs = none # no reason why mass should be conserved
  [../]
  [./mass_error_gas]
    type = FunctionValuePostprocessor
    function = fcn_mass_error_g
    outputs = none # no reason why mass should be conserved
  [../]

  [./pw_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./pw_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pwater
    outputs = none
  [../]
  [./error_water]
    type = FunctionValuePostprocessor
    function = fcn_error_water
  [../]

  [./pg_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./pg_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pgas
    outputs = none
  [../]
  [./error_gas]
    type = FunctionValuePostprocessor
    function = fcn_error_gas
  [../]
[]

[Functions]
  [./fcn_mass_error_w]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mwater_init mwater_fin&#x27;
  [../]
  [./fcn_mass_error_g]
    type = ParsedFunction
    value = &#x27;abs(0.5*(mi-mf)/(mi+mf))&#x27;
    vars = &#x27;mi mf&#x27;
    vals = &#x27;mgas_init mgas_fin&#x27;
  [../]
  [./fcn_error_water]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;1E2 -1 pw_left 1 pw_right&#x27;
  [../]
  [./fcn_error_gas]
    type = ParsedFunction
    value = &#x27;abs((p0-p1)/p1)&#x27;
    vars = &#x27;b gdens0 p0 xval p1&#x27;
    vals = &#x27;0.5E2 -0.5 pg_left 1 pg_right&#x27;
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_factor_shift_type&#x27;
    petsc_options_value = &#x27;nonzero&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
  nl_rel_tol = 1.e-10
  nl_max_its = 10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh_fu_01
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6132360b-865a-4695-bc41-895784b51c7e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap/random.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.  Two yield surfaces are used: one for compression and one for tension.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./cap1]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
  [./cap2]
    type = TensorMechanicsPlasticMeanCap
    a = 1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = &#x27;cap1 cap2&#x27;
    debug_fspb = crash
    deactivation_scheme = optimized
    min_stepsize = 1
    max_stepsize_for_dumb = 1
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="24d3045b-98a7-49b2-a5ee-f838ccc308f7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/random_planar.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 1250
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1250
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 1000
    value_residual = 100
    internal_limit = 4
  [../]
  [./phi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.8
    value_residual = 0.3
    internal_limit = 2
  [../]
  [./psi]
    type = TensorMechanicsHardeningConstant
    value = 15
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    yield_function_tolerance = 1E-3
    shift = 1E-10
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-10
    plastic_models = mc
    min_stepsize = 1
    max_stepsize_for_dumb = 1
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_planar
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="aa6ed176-9193-4d69-a977-0a21afb4517b"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn05.i</h4><pre class="moose-pre"><code class="language-text"># two phase
# unsaturated = true

# gravity = false
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGnone
  [../]
  [./SUPGgas]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = &#x27;DensityWater DensityGas&#x27;
    relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
    SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
    sat_UO = &#x27;SatWater SatGas&#x27;
    seff_UO = &#x27;SeffWater SeffGas&#x27;
    viscosity = &#x27;1E-3 0.5E-3&#x27;
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn05
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ed0a1bc8-a7e9-4ab8-a891-009e044619c1"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection1.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with no PorousFlow variables
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
[]

[AuxVariables]
  [./P]
  [../]
[]

[ICs]
  [./P]
    type = FunctionIC
    variable = P
    function = &#x27;2*(1-x)&#x27;
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 4
      thermal_expansion = 0
      viscosity = 150.0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./ppss_qp]
    type = PorousFlow1PhaseP
    porepressure = P
    capillary_pressure = pc
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;5 0 0 0 5 0 0 0 5&#x27;
  [../]
  [./relperm_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 0
    phase = 0
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6e138001-015a-4406-8117-c367e85b9369"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn08.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn08
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ceb0ee9a-421b-4d8e-bf3d-c6c55d553985"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_twophase.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions for two phases

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e5
    max = 5e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.06
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ed21a5e4-540b-4ff4-8e53-be4b7a83a19c"><div class="modal-content"><h4>modules/phase_field/tutorials/spinodal_decomposition/s4_mobility.i</h4><pre class="moose-pre"><code class="language-text">#
# Example simulation of an iron-chromium alloy at 500 C. Equilibrium
# concentrations are at 23.6 and 82.3 mol% Cr. Kappa value, free energy equation,
# and mobility equation were provided by Lars Hoglund. Solved using the split
# form of the Cahn-Hilliard equation.
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  elem_type = QUAD4
  nx = 25
  ny = 25
  nz = 0
  xmin = 0
  xmax = 25
  ymin = 0
  ymax = 25
  zmin = 0
  zmax = 0
  uniform_refine = 2
[]

[Variables]
  [./c]   # Mole fraction of Cr (unitless)
    order = FIRST
    family = LAGRANGE
  [../]
  [./w]   # Chemical potential (eV/mol)
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./concentrationIC]   # 46.774 mol% Cr with variations
    type = RandomIC
    min = 0.44774
    max = 0.48774
    seed = 210
    variable = c
  [../]
[]

[BCs]
  [./Periodic]
    [./c_bcs]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Kernels]
  [./w_dot]
    variable = w
    v = c
    type = CoupledTimeDerivative
  [../]
  [./coupled_res]
    variable = w
    type = SplitCHWRes
    mob_name = M
  [../]
  [./coupled_parsed]
    variable = c
    type = SplitCHParsed
    f_name = f_loc
    kappa_name = kappa_c
    w = w
  [../]
[]

[Materials]
  # d is a scaling factor that makes it easier for the solution to converge
  # without changing the results. It is defined in each of the first three
  # materials and must have the same value in each one.
  [./kappa]                  # Gradient energy coefficient (eV nm^2/mol)
    type = GenericFunctionMaterial
    prop_names = &#x27;kappa_c&#x27;
    prop_values = &#x27;8.125e-16*6.24150934e+18*1e+09^2*1e-27&#x27;
                  # kappa_c *eV_J*nm_m^2* d
  [../]
  [./mobility]               # Mobility (nm^2 mol/eV/s)
    # NOTE: This is a fitted equation, so only &#x27;Conv&#x27; has units
    type = DerivativeParsedMaterial
    f_name = M
    args = c
    constant_names =       &#x27;Acr    Bcr    Ccr    Dcr
                            Ecr    Fcr    Gcr
                            Afe    Bfe    Cfe    Dfe
                            Efe    Ffe    Gfe
                            nm_m   eV_J   d&#x27;
    constant_expressions = &#x27;-32.770969 -25.8186669 -3.29612744 17.669757
                            37.6197853 20.6941796  10.8095813
                            -31.687117 -26.0291774 0.2286581   24.3633544
                            44.3334237 8.72990497  20.956768
                            1e+09      6.24150934e+18          1e-27&#x27;
    function = &#x27;nm_m^2/eV_J/d*((1-c)^2*c*10^
                (Acr*c+Bcr*(1-c)+Ccr*c*log(c)+Dcr*(1-c)*log(1-c)+
                Ecr*c*(1-c)+Fcr*c*(1-c)*(2*c-1)+Gcr*c*(1-c)*(2*c-1)^2)
                +c^2*(1-c)*10^
                (Afe*c+Bfe*(1-c)+Cfe*c*log(c)+Dfe*(1-c)*log(1-c)+
                Efe*c*(1-c)+Ffe*c*(1-c)*(2*c-1)+Gfe*c*(1-c)*(2*c-1)^2))&#x27;
    derivative_order = 1
    outputs = exodus
  [../]
  [./local_energy]           # Local free energy function (eV/mol)
    type = DerivativeParsedMaterial
    f_name = f_loc
    args = c
    constant_names = &#x27;A   B   C   D   E   F   G  eV_J  d&#x27;
    constant_expressions = &#x27;-2.446831e+04 -2.827533e+04 4.167994e+03 7.052907e+03
                            1.208993e+04 2.568625e+03 -2.354293e+03
                            6.24150934e+18 1e-27&#x27;
    function = &#x27;eV_J*d*(A*c+B*(1-c)+C*c*log(c)+D*(1-c)*log(1-c)+
                E*c*(1-c)+F*c*(1-c)*(2*c-1)+G*c*(1-c)*(2*c-1)^2)&#x27;
    derivative_order = 2
  [../]
  [./precipitate_indicator]  # Returns 1/625 if precipitate
    type = ParsedMaterial
    f_name = prec_indic
    args = c
    function = if(c&gt;0.6,0.0016,0)
  [../]
[]

[Postprocessors]
  [./step_size]             # Size of the time step
    type = TimestepSize
  [../]
  [./iterations]            # Number of iterations needed to converge timestep
    type = NumNonlinearIterations
  [../]
  [./nodes]                 # Number of nodes in mesh
    type = NumNodes
  [../]
  [./evaluations]           # Cumulative residual calculations for simulation
    type = NumResidualEvaluations
  [../]
  [./precipitate_area]      # Fraction of surface devoted to precipitates
    type = ElementIntegralMaterialProperty
    mat_prop = prec_indic
  [../]
  [./active_time]           # Time computer spent on simulation
    type = PerfGraphData
    section_name = &quot;Root&quot;
    data_type = total
  [../]
[]

[Preconditioning]
  [./coupled]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  l_max_its = 30
  l_tol = 1e-6
  nl_max_its = 50
  nl_abs_tol = 1e-9
  end_time = 604800   # 7 days
  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type
                         -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm      31                  preonly
                         ilu          1&#x27;
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    cutback_factor = 0.8
    growth_factor = 1.5
    optimal_iterations = 7
  [../]
  [./Adaptivity]
    coarsen_fraction = 0.1
    refine_fraction = 0.7
    max_h_level = 2
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Outputs]
  exodus = true
  console = true
  csv = true
  [./console]
    type = Console
    max_rows = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="98c50e90-fdc7-4425-8f80-1775d363ac67"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/hgs01.i</h4><pre class="moose-pre"><code class="language-text"># apply a half-gaussian sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 2
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowHalfGaussianSink
    boundary = &#x27;left&#x27;
    center = 0.1
    sd = 1.1
    max = 2.2
    variable = ppwater
    mass_fraction_component = 0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowHalfGaussianSink
    boundary = &#x27;top left front&#x27;
    center = 0.5
    sd = 1.1
    max = -2.2
    mass_fraction_component = 0
    variable = ppgas
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowHalfGaussianSink
    boundary = &#x27;right&#x27;
    center = -0.1
    sd = 1.1
    max = 1.2
    mass_fraction_component = 1
    variable = massfrac_ph0_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-1.1*x*y&#x27;
  [../]
  [./flux_2]
    type = PorousFlowHalfGaussianSink
    boundary = &#x27;bottom&#x27;
    center = 3.2
    sd = 1.1
    max = 1.2
    mass_fraction_component = 1
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
[]


[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  file_base = pls03
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a6567750-d70a-46c5-8a6e-bcbe693afdf8"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/diff01.i</h4><pre class="moose-pre"><code class="language-text"># Test the Jacobian of the diffusive component of the PorousFlowDisperiveFlux kernel.
# By setting disp_long and disp_trans to zero, the purely diffusive component of the flux
# can be isolated.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 3
  xmin = 0
  xmax = 1
  ny = 1
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = RandomIC
    variable = pp
    max = 2e1
    min = 1e1
  [../]
  [./massfrac0]
    type = RandomIC
    variable = massfrac0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0
    disp_trans = 0
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    gravity = &#x27;1 0 0&#x27;
    disp_long = 0
    disp_trans = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 10
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temp]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac0&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-2 1e-1&#x27;
    tortuosity = &#x27;0.1&#x27;
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  active = smp
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b8f260ed-488c-44be-b96e-f9247ccf31f9"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01c.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, 2-component, constant fluid-bulk, constant viscosity, constant permeability
# fully saturated with fully-saturated Kernel
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
  [./frac]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux1]
    type = PorousFlowFullySaturatedDarcyFlow
    variable = pp
    fluid_component = 0
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyFlow
    variable = frac
    fluid_component = 1
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp frac&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = frac
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01c
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3be33032-e4af-4abd-92e4-477af758c661"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/basic_advection4.i</h4><pre class="moose-pre"><code class="language-text"># Basic advection with 1 porepressure and temperature as PorousFlow variables
# Constant permeability
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./u]
  [../]
  [./T]
  [../]
  [./P]
  [../]
[]

[ICs]
  [./P]
    type = RandomIC
    variable = P
    min = 2E5
    max = 4E5
  [../]
  [./T]
    type = RandomIC
    variable = T
    min = 300
    max = 900
  [../]
  [./u]
    type = RandomIC
    variable = u
  [../]
[]

[Kernels]
  [./dummy_T]
    type = NullKernel
    variable = T
  [../]
  [./dummy_P]
    type = NullKernel
    variable = P
  [../]
  [./u_advection]
    type = PorousFlowBasicAdvection
    variable = u
    phase = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;P T&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1E-5
    m = 0.6
    sat_lr = 0.1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./methane]
      type = MethaneFluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
    temperature = T
  [../]
  [./ppss_qp]
    type = PorousFlow1PhaseP
    porepressure = P
    capillary_pressure = pc
  [../]
  [./fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = methane
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;5 0 0 0 5 0 0 0 5&#x27;
  [../]
  [./relperm_qp]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./darcy_velocity_qp]
    type = PorousFlowDarcyVelocityMaterial
    gravity = &#x27;0.25 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27; test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="55535e22-077d-49b9-8dc7-f39347f252cf"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn40.i</h4><pre class="moose-pre"><code class="language-text"># two phase with RichardsPolyLineSink
#
# unsaturated = true
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 0.5E-3&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]

  [./stream_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]



[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[DiracKernels]
  [./stream_water]
    type = RichardsPolyLineSink
    pressures = &#x27;-2 2&#x27;
    fluxes = &#x27;-1E12 1E12&#x27;
    point_file = stream.xyz
    SumQuantityUO = stream_total_outflow_mass
    variable = pwater
  [../]
  [./stream_gas]
    type = RichardsPolyLineSink
    pressures = &#x27;-2 2&#x27;
    fluxes = &#x27;1E12 -1.5E12&#x27;
    point_file = stream.xyz
    SumQuantityUO = stream_total_outflow_mass
    variable = pgas
  [../]
[]



[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn30
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="baa9a97f-321b-4815-8b72-54c6024c675d"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn_fu_05.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = false
# supg = true
# transient = false

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = DensityConstBulk
  relperm_UO = RelPermPower
  SUPG_UO = SUPGstandard
  sat_UO = Saturation
  seff_UO = SeffVG
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFullyUpwindFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    viscosity = 1E-3
    gravity = &#x27;0 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn05
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b0e37bc0-bfdf-433c-a96d-97f671d62d4d"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_1/jn15.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = true
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGstandard
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn15
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a1aec19e-f58c-4fed-974d-b6a0644d301e"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/fflux08.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, 1component, constant viscosity, Kozeny-Carman permeability
# density with constant bulk, Corey relative perm, nonzero gravity, unsaturated with vanGenuchten
[Mesh]
  type = GeneratedMesh
  dim = 3
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    variable = disp_x
    min = -0.1
    max = 0.1
  [../]
  [./disp_y]
    type = RandomIC
    variable = disp_y
    min = -0.1
    max = 0.1
  [../]
  [./disp_z]
    type = RandomIC
    variable = disp_z
    min = -0.1
    max = 0.1
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    min = -1
    max = 1
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 -0.1 0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.5
    solid_bulk = 1
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityKozenyCarman
    poroperm_function = kozeny_carman_phi0
    k_anisotropy = &#x27;1 0 0 0 2 0 0 0 3&#x27;
    phi0 = 0.1
    n = 1.0
    m = 2.0
    k0 = 2
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[Preconditioning]
  active = check
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3549cef3-133e-4142-9283-f426f85c8ae0"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/hcs01.i</h4><pre class="moose-pre"><code class="language-text"># apply a half-cubic sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 2
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./ppgas]
  [../]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = -1
    max = 0
  [../]
  [./ppgas]
    type = RandomIC
    variable = ppgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./dummy_ppwater]
    type = TimeDerivative
    variable = ppwater
  [../]
  [./dummy_ppgas]
    type = TimeDerivative
    variable = ppgas
  [../]
  [./dummy_m00]
    type = TimeDerivative
    variable = massfrac_ph0_sp0
  [../]
  [./dummy_m10]
    type = TimeDerivative
    variable = massfrac_ph1_sp0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.5
      thermal_expansion = 0
      viscosity = 1.4
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
[]

[BCs]
  [./flux_w]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;left&#x27;
    center = 0.1
    cutoff = -1.1
    max = 2.2
    variable = ppwater
    mass_fraction_component = 0
    fluid_phase = 0
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;x*y&#x27;
  [../]
  [./flux_g]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;top left front&#x27;
    center = 0.5
    cutoff = -1.1
    max = -2.2
    mass_fraction_component = 0
    variable = ppgas
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-x*y&#x27;
  [../]
  [./flux_1]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;right&#x27;
    center = -0.1
    cutoff = -1.1
    max = 1.2
    mass_fraction_component = 1
    variable = massfrac_ph0_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;-1.1*x*y&#x27;
  [../]
  [./flux_2]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;bottom&#x27;
    center = 3.2
    cutoff = -1.1
    max = 1.2
    mass_fraction_component = 1
    variable = massfrac_ph1_sp0
    fluid_phase = 1
    use_relperm = true
    use_mobility = true
    flux_function = &#x27;0.5*x*y&#x27;
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  file_base = hcs01
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9840ffcb-1753-43ac-90da-5651ae08c0c0"><div class="modal-content"><h4>modules/richards/test/tests/jacobian_2/jn30.i</h4><pre class="moose-pre"><code class="language-text"># two phase with production borehole (both fully_upwind=true and fully_upwind=false)
#
# unsaturated = true
# gravity = true
# supg = true
# transient = true
# wellbore = true

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  richardsVarNames_UO = PPNames
  density_UO = &#x27;DensityWater DensityGas&#x27;
  relperm_UO = &#x27;RelPermWater RelPermGas&#x27;
  SUPG_UO = &#x27;SUPGwater SUPGgas&#x27;
  sat_UO = &#x27;SatWater SatGas&#x27;
  seff_UO = &#x27;SeffWater SeffGas&#x27;
  viscosity = &#x27;1E-3 0.5E-3&#x27;
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0 # notice small quantity, so the PETSc constant state works
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffWater]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./SeffGas]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 1 # notice small quantity, so the PETSc constant state works
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
  [./SatWater]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.15
  [../]
  [./SatGas]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.15
  [../]
  [./SUPGwater]
    type = RichardsSUPGstandard
    p_SUPG = 0.1
  [../]
  [./SUPGgas]
    type = RichardsSUPGstandard
    p_SUPG = 0.01
  [../]

  [./borehole_total_outflow_mass]
    type = RichardsSumQuantity
  [../]
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      seed = 1
      block = 0
      min = -1
      max = 0
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      seed = 2
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]



[Kernels]
  active = &#x27;richardsfwater richardstwater richardsfgas richardstgas&#x27;
  [./richardstwater]
    type = RichardsMassChange
    variable = pwater
  [../]
  [./richardsfwater]
    type = RichardsFlux
    variable = pwater
  [../]
  [./richardstgas]
    type = RichardsMassChange
    variable = pgas
  [../]
  [./richardsfgas]
    type = RichardsFlux
    variable = pgas
  [../]
[]


[DiracKernels]
  [./bh_water]
    type = RichardsBorehole
    bottom_pressure = -2
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pwater
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
  [../]
  [./bh_gas]
    type = RichardsBorehole
    bottom_pressure = 0
    point_file = jn30.bh
    SumQuantityUO = borehole_total_outflow_mass
    variable = pgas
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E12
    fully_upwind = true
  [../]
[]



[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    gravity = &#x27;1 2 3&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-5
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = jn30
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7886925d-294a-4142-9d5c-f542e0bfbf39"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/eff_stress04.i</h4><pre class="moose-pre"><code class="language-text"># 2phase (PS)
# vanGenuchten, constant-bulk density for each phase, constant porosity, 2components (that exist in both phases)
# unsaturated
# RZ coordinate system
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
  [../]
  [./sgas]
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
  [../]
  [./massfrac_ph1_sp0]
  [../]
[]

[ICs]
  [./ppwater]
    type = RandomIC
    variable = ppwater
    min = 0
    max = 1
  [../]
  [./sgas]
    type = RandomIC
    variable = sgas
    min = 0
    max = 1
  [../]
  [./massfrac_ph0_sp0]
    type = RandomIC
    variable = massfrac_ph0_sp0
    min = 0
    max = 1
  [../]
  [./massfrac_ph1_sp0]
    type = RandomIC
    variable = massfrac_ph1_sp0
    min = 0
    max = 1
  [../]
[]

[Kernels]
  [./grad0]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 0
    variable = ppwater
  [../]
  [./grad1]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 1
    variable = sgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 10
    sat_lr = 0.01
  [../]
[]

[Materials]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./p_eff]
    type = PorousFlowEffectiveFluidPressure
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-snes_type&#x27;
    petsc_options_value = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 1
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ac746f26-6985-43b6-b583-24a3163b2a62"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper5.i</h4><pre class="moose-pre"><code class="language-text"># This runs the J2+cap+hardening example model described in the &#x27;MultiSurface&#x27; plasticity paper
#
# Plasticity models:
# J2 with strength = 20MPa to 10MPa in 100% strain
# Compressive cap with strength = 15MPa to 5MPa in 100% strain
#
# Lame lambda = 1.2GPa.  Lame mu = 1.2GPa (Young = 3GPa, poisson = 0.25)
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./intnl0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl0
  [../]
  [./intnl1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = intnl1
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./max_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./yield_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 20E6
    value_residual = 10E6
    internal_limit = 1
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = yield_strength
    yield_function_tolerance = 1.0E2
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
  [../]


  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 15E6
    value_residual = 5E6
    internal_limit = 1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = compressive_strength
    yield_function_tolerance = 1.0E2
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.2E9 1.2E9&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5

    plastic_models = &#x27;j2 cap&#x27;
    max_NR_iterations = 10
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    tangent_operator = elastic # tangent operator is unimportant in this test

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10E6 0 0 0 10E6 0 0 0 10E6&#x27;
    debug_jac_at_pm = &#x27;1E-2 1E-2&#x27;
    debug_jac_at_intnl = &#x27;0.05 0.05&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper5
  exodus = false
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cdd84477-246f-4e14-9fcb-1f28200410db"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh12.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = true
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = -1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = -1
      max = 0
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh12
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="09dc9ee5-1181-426c-b77a-4441e1c18d81"><div class="modal-content"><h4>test/tests/kernels/jxw_grad_test_dep_on_displacements/jxw-spherical.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_r&#x27;
  order = SECOND
[]

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 3
  elem_type = EDGE3
[]

[Problem]
  coord_type = RSPHERICAL
[]

[Variables]
  [./disp_r]
  [../]
  [./u]
    order = FIRST
  [../]
[]

[Kernels]
  [./disp_r]
    type = Diffusion
    variable = disp_r
  [../]
  [./u]
    type = ADDiffusion
    variable = u
    use_displaced_mesh = true
  [../]
[]

[BCs]
  # BCs cannot be preset due to Jacobian tests
  [./u_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = u
  [../]
  [./u_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = u
  [../]
  [./disp_r_left]
    type = DirichletBC
    preset = false
    value = 0
    boundary = &#x27;left&#x27;
    variable = disp_r
  [../]
  [./disp_r_right]
    type = DirichletBC
    preset = false
    value = 1
    boundary = &#x27;right&#x27;
    variable = disp_r
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = NEWTON
[]

[Outputs]
  [./dofmap]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  [../]
  exodus = true
[]

[ICs]
  [./disp_r]
    type = RandomIC
    variable = disp_r
    min = 0.01
    max = 0.09
  [../]
  [./u]
    type = RandomIC
    variable = u
    min = 0.1
    max = 0.9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a876b708-d4bc-4806-b76b-2954a4d3af6c"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/mass01_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># FullySaturatedMassTimeDerivative
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.5
      bulk_modulus = 1.5
      density0 = 1.0
    [../]
  [../]
[]

[Variables]
  [./pp]
  [../]
  [./T]
  [../]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[ICs]
  [./disp_x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./disp_y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./disp_z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
  [./pp]
    type = RandomIC
    variable = pp
    min = 0
    max = 1
  [../]
  [./T]
    type = RandomIC
    variable = T
    min = 0
    max = 1
  [../]
[]

[BCs]
  # necessary otherwise volumetric strain rate will be zero
  [./disp_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./disp_z]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    variable = pp
    coupling_type = ThermoHydroMechanical
    biot_coefficient = 0.9
  [../]
  [./dummyT]
    type = TimeDerivative
    variable = T
  [../]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp disp_x disp_y disp_z T&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1E20
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    bulk_modulus = 2.0
    shear_modulus = 3.0
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./temperature]
    type = PorousFlowTemperature
    temperature = T
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst  # only the initial vaue of this is ever used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.9
    fluid_bulk_modulus = 1.5
    solid_bulk_compliance = 0.5
  [../]
  [./thermal_expansion]
    type = PorousFlowConstantThermalExpansionCoefficient
    biot_coefficient = 0.9
    fluid_coefficient = 0.5
    drained_coefficient = 0.4
  [../]
[]

[Preconditioning]
  [./check]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 2
[]

[Outputs]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="84ae79d8-eeff-4b92-87bd-9f580efaf100"><div class="modal-content"><h4>modules/richards/test/tests/gravity_head_1/gh11.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated = false
# gravity = true
# supg = false
# transient = true

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 1
  xmin = -1
  xmax = 1
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 1
    variable = pressure
  [../]
[]


[GlobalParams]
  richardsVarNames_UO = PPNames
[]

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1.0E3
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./SUPGnone]
    type = RichardsSUPGnone
  [../]
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      block = 0
      min = 0
      max = 1
    [../]
  [../]
[]


[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    variable = pressure
  [../]
[]

[Materials]
  [./rock]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    SUPG_UO = SUPGnone
    sat_UO = Saturation
    seff_UO = SeffVG
    viscosity = 1E-3
    gravity = &#x27;-1 0 0&#x27;
    linear_shape_fcns = true
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E10
  end_time = 1E10
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = gh11
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="4246c591-c194-43ef-a62f-ca6a2b7a060a" data-section-level="2" data-section-text="References"><h2 id="references">References</h2><div class="moose-bibliography"><ol></ol></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#4c76f0a6-416e-4b6c-b95c-9f23289a9091" class="tooltipped" data-position="left" data-tooltip="Class Description">Class Description</a></li><li><a href="#a93d7eb7-d622-4a31-9f6b-85bc08bd18af" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#94f04a2f-0930-4ba9-b655-ec822e14b015" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li><li><a href="#4246c591-c194-43ef-a62f-ca6a2b7a060a" class="tooltipped" data-position="left" data-tooltip="References">References</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>