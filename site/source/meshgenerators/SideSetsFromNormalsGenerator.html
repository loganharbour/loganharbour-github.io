<!DOCTYPE html><head><meta charset="UTF-8"><title>SideSetsFromNormalsGenerator.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="552e2a4d-5370-4bea-9f91-d6d057a60aea"><i class="material-icons">menu</i></a><ul class="sidenav" id="552e2a4d-5370-4bea-9f91-d6d057a60aea"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">meshgenerators</span><a href="#" class="breadcrumb">SideSetsFromNormalsGenerator</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="01cdd59b-3eba-445a-af49-a4e61b005f4c" data-section-level="1" data-section-text="SideSetsFromNormalsGenerator"><h1 id="sidesetsfromnormalsgenerator">SideSetsFromNormalsGenerator</h1><p>Adds a new named sideset to the mesh for all faces matching the specified normal.</p><p>See also: <a href="AllSideSetsByNormalsGenerator.html">AllSideSetsByNormalsGenerator</a></p><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>If the mesh contains multiple disjoint faces with the same normal, they will all be added to the sideset.</p></p></div></div></div><section class="scrollspy" id="927acc72-eba2-4e95-808c-580fc573518d" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="8b117acb-9784-4a3b-9bc8-45e0858e6ce6" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">input</span><span class="moose-parameter-header-description">The mesh we want to modify</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MeshGeneratorName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The mesh we want to modify</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">new_boundary</span><span class="moose-parameter-header-description">The name of the boundary to create</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the boundary to create</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">normals</span><span class="moose-parameter-header-description">A list of normals for which to start painting sidesets</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<libMesh::Point></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>A list of normals for which to start painting sidesets</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="6e5c2d12-8225-49ec-917f-6c66a4ff04e8" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">fixed_normal</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">This Boolean determines whether we fix our normal or allow it to vary to "paint" around curves</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>This Boolean determines whether we fix our normal or allow it to vary to "paint" around curves</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">replace</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">If true, replace the old sidesets. If false, the current sidesets (if any) will be preserved.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>If true, replace the old sidesets. If false, the current sidesets (if any) will be preserved.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">variance</span><span class="moose-parameter-header-default">0.1</span><span class="moose-parameter-header-description">The variance [0.0 - 1.0] allowed when comparing normals</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0.1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The variance [0.0 - 1.0] allowed when comparing normals</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="81dfe517-8706-4d29-b383-47e902f40b38" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="2962c753-7f8c-49a7-b072-81a1496bfd1d" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#08e7dd04-b4e6-46e7-ace7-a4f4434366ec" class="modal-trigger">test/tests/meshgenerators/sidesets_from_normals_generator/sidesets_cylinder_normals.i</a></li><li><a href="#64a60744-92ba-4156-9721-3164fe6b9f97" class="modal-trigger">test/tests/meshgenerators/sidesets_from_normals_generator/sidesets_cylinder_normals_fixed.i</a></li><li><a href="#b4f3d9e7-a7c3-436e-9248-7a6a3e562da9" class="modal-trigger">modules/tensor_mechanics/test/tests/czm/czm_patch_test.i</a></li></ul><div class="modal moose-modal" id="08e7dd04-b4e6-46e7-ace7-a4f4434366ec"><div class="modal-content"><h4>test/tests/meshgenerators/sidesets_from_normals_generator/sidesets_cylinder_normals.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./fmg]
    type = FileMeshGenerator
    file = cylinder.e
    #parallel_type = replicated
  []

  [./sidesets]
    type = SideSetsFromNormalsGenerator
    input = fmg
    normals = &#x27;0  0  1
               0  1  0
               0  0 -1&#x27;
    fixed_normal = false
    new_boundary = &#x27;top side bottom&#x27;
  []
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./bottom]
    type = DirichletBC
    variable = u
    boundary = bottom
    value = 0
  [../]
  [./top]
    type = DirichletBC
    variable = u
    boundary = top
    value = 1
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="64a60744-92ba-4156-9721-3164fe6b9f97"><div class="modal-content"><h4>test/tests/meshgenerators/sidesets_from_normals_generator/sidesets_cylinder_normals_fixed.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [./fmg]
    type = FileMeshGenerator
    file = cylinder.e
    #parallel_type = replicated
  []

  [./sidesets]
    type = SideSetsFromNormalsGenerator
    input = fmg
    normals = &#x27;0  1  0
               0 -1  0&#x27;
    fixed_normal = true
    new_boundary = &#x27;front back&#x27;
    variance = 0.5
  []
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./front]
    type = DirichletBC
    variable = u
    boundary = front
    value = 0
  [../]
  [./back]
    type = DirichletBC
    variable = u
    boundary = back
    value = 1
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b4f3d9e7-a7c3-436e-9248-7a6a3e562da9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/czm/czm_patch_test.i</h4><pre class="moose-pre"><code class="language-text"># Patch test for cohesive zone modeling to check convergence
[Mesh]
  [./msh]
  type = FileMeshGenerator
  file = patch_mesh.e
  []
  [./transform]
  type = TransformGenerator
  input = msh
  transform = TRANSLATE
  vector_value = &#x27;-0.5 -0.5 -0.5&#x27;
  []
  [./split]
    type = BreakMeshByBlockGenerator
    input = transform
  []
  [./add_surfaces]
    type = SideSetsFromNormalsGenerator
    input = split
    normals = &#x27;0  0  1
               0  1  0
               1  0  0
               0  0 -1
               0 -1  0
              -1  0  0&#x27;
    fixed_normal = true
    new_boundary = &#x27;front top right back bottom left&#x27;
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules]
  [./TensorMechanics]
    [./Master]
      [./all]
        strain = FINITE
        add_variables = true
        use_finite_deform_jacobian = true
        use_automatic_differentiation = true
      [../]
    [../]
  [../]
[]


[Functions]
  [./angles]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0&#x27;
  [../]

  [./stretch]
    type = PiecewiseLinear
    x = &#x27;0 1&#x27;
    y = &#x27;0 0.01&#x27;
  [../]

  [./move_y]
    type = ParsedFunction
    value = &#x27;y*cos(theta) - z * (1 + a)*sin(theta) - y&#x27;
    vars = &#x27;a theta&#x27;
    vals = &#x27;stretch angles&#x27;
  [../]

  [./move_z]
    type = ParsedFunction
    value = &#x27;y*sin(theta) + z*(1+a)*cos(theta) - z&#x27;
    vars = &#x27;a theta&#x27;
    vals = &#x27;stretch angles&#x27;
  [../]

  [./dt_fun]
    type = PiecewiseConstant
    x = &#x27;0 1&#x27;
    y = &#x27;0.25 0.25&#x27;
  []
[]

[BCs]
  [./fix]
    type = DirichletBC
    preset = true
    value = 0.0
    boundary = left
    variable = disp_x
  [../]

  [./front_y]
    type = FunctionDirichletBC
    boundary = front
    variable = disp_y
    function = move_y
    preset = true
  [../]

  [./back_y]
    type = FunctionDirichletBC
    boundary = back
    variable = disp_y
    function = move_y
    preset = true
  [../]

  [./front_z]
    type = FunctionDirichletBC
    boundary = front
    variable = disp_z
    function = move_z
    preset = true
  [../]

  [./back_z]
    type = FunctionDirichletBC
    boundary = back
    variable = disp_z
    function = move_z
    preset = true
  [../]

[]


[Modules/TensorMechanics/CohesiveZoneMaster]
  [./czm_ik]
    boundary = &#x27;interface&#x27;
  [../]
[]

[Materials]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
  [../]
  [./elasticity_tensor]
    type = ADComputeElasticityTensor
    fill_method = symmetric9
    C_ijkl = &#x27;1.684e5 0.176e5 0.176e5 1.684e5 0.176e5 1.684e5 0.754e5 0.754e5 0.754e5&#x27;
  [../]
  [./czm_mat]
    boundary = &#x27;interface&#x27;
  [../]
[]



[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;newton&#x27;
  line_search = none

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  l_max_its = 2
  l_tol = 1e-14
  nl_max_its = 15
  nl_rel_tol = 1e-10
  nl_abs_tol = 1e-10
  start_time = 0.0
  dt = 0.25
  end_time = 1
[]

[Postprocessors]
  [./nonlin]
    type = NumNonlinearIterations
  [../]
[]


[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#927acc72-eba2-4e95-808c-580fc573518d" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#2962c753-7f8c-49a7-b072-81a1496bfd1d" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>