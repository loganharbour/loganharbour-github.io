<!DOCTYPE html><head><meta charset="UTF-8"><title>CSV.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="b5532e42-e7df-4d45-9868-2809e560d3fc"><i class="material-icons">menu</i></a><ul class="sidenav" id="b5532e42-e7df-4d45-9868-2809e560d3fc"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">outputs</span><a href="#" class="breadcrumb">CSV</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="97ea01b6-fd2d-4143-806e-ca47f84e42f3" data-section-level="1" data-section-text="CSV"><h1 id="csv">CSV</h1><p>Output for postprocessors, vector postprocessors, and scalar variables using comma seperated values (CSV).</p><section class="scrollspy" id="e8cbcd9b-9d29-44c1-b558-a7fb48e2dd13" data-section-level="2" data-section-text="Overview"><h2 id="overview">Overview</h2><p>The CSV output object creates files containing comma separated values. Unless disabled (see [syntax/Outputs/index.md) all postprocessors and scalar variables will be written to a single file that includes a time column.</p><p>If vector postprocessors exist within the simulation an additional set of files will be created, there will be one file for every vector that exists within a VectorPostprocessor object for each timestep.</p></section><section class="scrollspy" id="92412d19-c178-4505-8d4c-d6446a5dfe70" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="dc2b24f5-3f4e-4fe7-8613-96367ed63e6c" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">file_base</span><span class="moose-parameter-header-description">The desired solution output name without an extension. If not provided, MOOSE sets it with Outputs/file_base when available. Otherwise, MOOSE uses input file name and this object name for a master input or uses master file_base, the subapp name and this object name for a subapp input to set it.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The desired solution output name without an extension. If not provided, MOOSE sets it with Outputs/file_base when available. Otherwise, MOOSE uses input file name and this object name for a master input or uses master file_base, the subapp name and this object name for a subapp input to set it.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="0e736152-8805-4f48-bc38-576dc0ee5192" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">additional_execute_on</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, FAILED, CUSTOM.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL FAILED CUSTOM</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, FAILED, CUSTOM.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">align</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Align the outputted csv data by padding the numbers with trailing whitespace</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Align the outputted csv data by padding the numbers with trailing whitespace</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">append_date</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">When true the date and time are appended to the output filename.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>When true the date and time are appended to the output filename.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">append_date_format</span><span class="moose-parameter-header-description">The format of the date/time to append, if not given UTC format is used (see http://www.cplusplus.com/reference/ctime/strftime).</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The format of the date/time to append, if not given UTC format is used (see http://www.cplusplus.com/reference/ctime/strftime).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">append_restart</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Append existing file on restart</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Append existing file on restart</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">create_final_symlink</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Enable/disable the creation of a _FINAL symlink for vector postprocessor data with 'execute_on' includes 'FINAL'.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Enable/disable the creation of a _FINAL symlink for vector postprocessor data with 'execute_on' includes 'FINAL'.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">create_latest_symlink</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Enable/disable the creation of a _LATEST symlink for vector postprocessor data.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Enable/disable the creation of a _LATEST symlink for vector postprocessor data.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">delimiter</span><span class="moose-parameter-header-default">,</span><span class="moose-parameter-header-description">Assign the delimiter (default is ','</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>,</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::string</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Assign the delimiter (default is ','</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">end_step</span><span class="moose-parameter-header-description">Time step at which this output object stop operating</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Time step at which this output object stop operating</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">INITIAL TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, FAILED, CUSTOM.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>INITIAL TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL FAILED CUSTOM</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, FAILED, CUSTOM.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">new_row_tolerance</span><span class="moose-parameter-header-default">1e-12</span><span class="moose-parameter-header-description">The independent variable tolerance for determining when a new row should be added to the table (Note: This value must be set independently for Postprocessor output to type=Console and type=CSV file separately.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1e-12</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The independent variable tolerance for determining when a new row should be added to the table (Note: This value must be set independently for Postprocessor output to type=Console and type=CSV file separately.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">output_linear</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Specifies whether output occurs on each linear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies whether output occurs on each linear residual evaluation</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">output_nonlinear</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Specifies whether output occurs on each nonlinear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies whether output occurs on each nonlinear residual evaluation</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">precision</span><span class="moose-parameter-header-default">14</span><span class="moose-parameter-header-description">Set the output precision</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>14</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the output precision</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">sort_columns</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Toggle the sorting of columns alphabetically.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Toggle the sorting of columns alphabetically.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">start_step</span><span class="moose-parameter-header-description">Time step at which this output object begins to operate</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Time step at which this output object begins to operate</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">time_column</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Whether or not the 'time' column should be written for Postprocessor CSV files</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not the 'time' column should be written for Postprocessor CSV files</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">time_data</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">When true and VecptorPostprocessor data exists, write a csv file containing the timestep and time information.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>When true and VecptorPostprocessor data exists, write a csv file containing the timestep and time information.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Enable/disable the use of the displaced mesh for outputting</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Enable/disable the use of the displaced mesh for outputting</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="9ef1dff0-d76e-467a-bbf5-c7f760e1de25" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">output_if_base_contains</span><span class="moose-parameter-header-description">If this is supplied then output will only be done in the case that the output base contains one of these strings.  This is helpful in outputting only a subset of outputs when using MultiApps.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>If this is supplied then output will only be done in the case that the output base contains one of these strings.  This is helpful in outputting only a subset of outputs when using MultiApps.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section><section id="edeceb9e-256c-45a3-b87c-1c08749fc4d3" data-section-level="3" data-section-text="Timing Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">end_time</span><span class="moose-parameter-header-description">Time at which this output object stop operating</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Time at which this output object stop operating</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">interval</span><span class="moose-parameter-header-default">1</span><span class="moose-parameter-header-description">The interval at which time steps are output to the solution file</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The interval at which time steps are output to the solution file</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">start_time</span><span class="moose-parameter-header-description">Time at which this output object begins to operate</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Time at which this output object begins to operate</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">sync_only</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Only export results at sync times</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Only export results at sync times</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">sync_times</span><span class="moose-parameter-header-description">Times at which the output and solution is forced to occur</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<double></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Times at which the output and solution is forced to occur</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">time_tolerance</span><span class="moose-parameter-header-default">1e-14</span><span class="moose-parameter-header-description">Time tolerance utilized checking start and end times</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1e-14</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Time tolerance utilized checking start and end times</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Timing Parameters</h3></summary></details></section><section id="0bef75f8-9f8b-4c7e-9195-d5adc1931727" data-section-level="3" data-section-text="Variables Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">execute_postprocessors_on</span><span class="moose-parameter-header-description">Control of when postprocessors are output</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL FAILED CUSTOM</p><p class="moose-parameter-description"><span>Description:</span>Control of when postprocessors are output</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_scalars_on</span><span class="moose-parameter-header-description">Control the output of scalar variables</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL FAILED CUSTOM</p><p class="moose-parameter-description"><span>Description:</span>Control the output of scalar variables</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_vector_postprocessors_on</span><span class="moose-parameter-header-description">Enable/disable the output of VectorPostprocessors</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL FAILED CUSTOM</p><p class="moose-parameter-description"><span>Description:</span>Enable/disable the output of VectorPostprocessors</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">hide</span><span class="moose-parameter-header-description">A list of the variables and postprocessors that should NOT be output to the Exodus file (may include Variables, ScalarVariables, and Postprocessor names).</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>A list of the variables and postprocessors that should NOT be output to the Exodus file (may include Variables, ScalarVariables, and Postprocessor names).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">show</span><span class="moose-parameter-header-description">A list of the variables and postprocessors that should be output to the Exodus file (may include Variables, ScalarVariables, and Postprocessor names).</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>A list of the variables and postprocessors that should be output to the Exodus file (may include Variables, ScalarVariables, and Postprocessor names).</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Variables Parameters</h3></summary></details></section><section id="f5197b8d-7645-42d9-bf6e-f8e21ff4857c" data-section-level="3" data-section-text="Petsc Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">linear_residual_dt_divisor</span><span class="moose-parameter-header-default">1000</span><span class="moose-parameter-header-description">Number of divisions applied to time step when outputting linear residuals</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1000</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Number of divisions applied to time step when outputting linear residuals</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">linear_residual_end_time</span><span class="moose-parameter-header-description">Specifies an end time to begin output on each linear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies an end time to begin output on each linear residual evaluation</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">linear_residual_start_time</span><span class="moose-parameter-header-description">Specifies a start time to begin output on each linear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies a start time to begin output on each linear residual evaluation</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nonlinear_residual_dt_divisor</span><span class="moose-parameter-header-default">1000</span><span class="moose-parameter-header-description">Number of divisions applied to time step when outputting non-linear residuals</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>1000</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Number of divisions applied to time step when outputting non-linear residuals</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nonlinear_residual_end_time</span><span class="moose-parameter-header-description">Specifies an end time to begin output on each nonlinear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies an end time to begin output on each nonlinear residual evaluation</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">nonlinear_residual_start_time</span><span class="moose-parameter-header-description">Specifies a start time to begin output on each nonlinear residual evaluation</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>double</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Specifies a start time to begin output on each nonlinear residual evaluation</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Petsc Parameters</h3></summary></details></section></section><section class="scrollspy" id="86f2c188-98c0-4002-aea5-0d0a5aae7056" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#0c470792-4120-49a5-b987-ad77c22d9e0b" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav02b.i</a></li><li><a href="#0fe1736f-0649-4094-adca-1be82595d34a" class="modal-trigger">modules/combined/test/tests/poro_mechanics/mandel.i</a></li><li><a href="#619ac5ab-1e21-47dc-9185-68e8d9323d7e" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_template1.i</a></li><li><a href="#4c86e933-07f0-4473-a41d-d19543561ce6" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/except2.i</a></li><li><a href="#6fc4ca7e-3deb-44dd-aab8-f1573f245d27" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_4/brick4_mu_0_2_pen.i</a></li><li><a href="#a03656a8-a863-4c19-b592-351e46168ec0" class="modal-trigger">modules/phase_field/examples/kim-kim-suzuki/kks_example_noflux.i</a></li><li><a href="#3285c6e6-f81a-4ed3-88f8-b8fca1f352f3" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform7.i</a></li><li><a href="#dff66a2d-d22e-41e4-b54c-96be25e51940" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D_blocks.i</a></li><li><a href="#a84b118e-ddd1-4120-8b7c-6e7411720af1" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard5.i</a></li><li><a href="#b7485b11-525e-4307-a622-0fb8557a0466" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial1_small_strain.i</a></li><li><a href="#5d193f8d-df51-41e1-bb18-07d753db54fb" class="modal-trigger">modules/combined/test/tests/poro_mechanics/pp_generation_unconfined.i</a></li><li><a href="#b2a74aa8-b2f2-4801-9182-ec0c33ab130a" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_noaction.i</a></li><li><a href="#c7dfa76d-279c-4ca0-b2dc-11aa4342ce25" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/half_symm_q8/hertz_cyl_half_1deg_template3.i</a></li><li><a href="#04cb569f-f8fe-45c8-bd07-2a2e7af99ccd" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation.i</a></li><li><a href="#56310677-6a8f-4660-a406-8bf2092cef06" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_update.i</a></li><li><a href="#f4ed379f-8823-47fb-89d0-d619f6a1f7bf" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</a></li><li><a href="#024ce820-e44e-462b-be3d-4da233b66070" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform_hard3.i</a></li><li><a href="#aed23194-d17d-4e7c-98ed-1c0926b81d6b" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar2.i</a></li><li><a href="#2f70fb07-d134-424b-b5bf-e9665e48dfa8" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_lode_zero.i</a></li><li><a href="#6c146daa-a931-4382-856f-ab3f1cd2ab46" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig7b.i</a></li><li><a href="#213459bd-86f7-47a6-83ff-71c2aabeb3b1" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite.i</a></li><li><a href="#07fc40b4-3391-487a-8447-7a3fd3dcf7ab" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_4/plane4_template1.i</a></li><li><a href="#86d6e401-81e0-4d09-a651-1a81f3b05332" class="modal-trigger">modules/contact/test/tests/sliding_block/in_and_out/frictionless_lm.i</a></li><li><a href="#69af972b-e0c4-4907-8576-f57fe7f3a829" class="modal-trigger">modules/porous_flow/test/tests/sinks/s08.i</a></li><li><a href="#823d056e-aa62-4447-af58-2d5d69c273fd" class="modal-trigger">modules/porous_flow/examples/thm_example/2D.i</a></li><li><a href="#8b7f6392-16e8-4f9f-af25-1b3045596542" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform5.i</a></li><li><a href="#0fed1c60-d33e-45df-b022-04e0cd70baa4" class="modal-trigger">modules/phase_field/examples/multiphase/GrandPotential3Phase.i</a></li><li><a href="#f19b8692-c025-41d6-9060-c401355b8dc9" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_2/brick2_template1.i</a></li><li><a href="#4dd30d78-0c5d-424c-a179-839fd7411cd2" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_1D.i</a></li><li><a href="#1dc245cc-1702-4924-983c-62e5c144e5e1" class="modal-trigger">modules/combined/test/tests/surface_tension_KKS/surface_tension_KKS.i</a></li><li><a href="#2551e0c3-961a-45eb-b8c2-549da6b19465" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad_locs.i</a></li><li><a href="#649a3194-d429-4d7b-a8c9-0f9b09f4fb68" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard1.i</a></li><li><a href="#7a7fbf71-012a-4c9e-ab10-49d1bc86930c" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface20.i</a></li><li><a href="#277a4991-e615-48b0-b469-425549912e86" class="modal-trigger">modules/phase_field/test/tests/Nucleation/parallel.i</a></li><li><a href="#9a7494a6-e0f6-4132-86d0-45d279432b92" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_native.i</a></li><li><a href="#60f1c32c-f322-46bd-bbca-6c21cc2ed5bc" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/rd03.i</a></li><li><a href="#160a5183-b5a8-4603-8546-671999688095" class="modal-trigger">modules/porous_flow/test/tests/heat_advection/heat_advection_1d_KT.i</a></li><li><a href="#b1d083e6-3bd5-4ad1-a7e4-01c33786eac9" class="modal-trigger">modules/combined/test/tests/poro_mechanics/unconsolidated_undrained.i</a></li><li><a href="#44f0599c-9f14-4be2-9ae0-d73df25d3582" class="modal-trigger">modules/phase_field/test/tests/conserved_noise/normal.i</a></li><li><a href="#f3a81fe6-7abd-41ee-8ab1-80cbff9e758f" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_inner_tip.i</a></li><li><a href="#75bd4152-d542-4fc7-b84d-7843a061a429" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_outer_tip.i</a></li><li><a href="#2fa8c19a-c3fa-4c9a-b797-8c4c05ae96ea" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_rr.i</a></li><li><a href="#233ffcb8-8e48-4588-9264-f6e1d29ecbf8" class="modal-trigger">test/tests/nodalkernels/constraint_enforcement/vi-bounding.i</a></li><li><a href="#4df6c5b8-259b-4705-8278-9b291d5ed83b" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/except1.i</a></li><li><a href="#1967a1fa-542e-4908-81fd-02e7036c314d" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/small.i</a></li><li><a href="#e36ed95a-a6dd-4c86-a651-1793ce9f9499" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/half_symm_q4/hertz_cyl_half_1deg_template1.i</a></li><li><a href="#8ec7470a-e6ce-4a52-908e-f163edcceb6a" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/four_surface24.i</a></li><li><a href="#f645c21c-20c4-45a1-8f93-d32717a6e8f2" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform5.i</a></li><li><a href="#76a2eff9-415b-42de-b257-a9b2bf3af434" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface16.i</a></li><li><a href="#095fca25-7873-43ea-948c-2cd24f9a6ebf" class="modal-trigger">modules/porous_flow/test/tests/sinks/s02.i</a></li><li><a href="#1c7c3074-042b-4892-8ca3-6742cc2fbf19" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D_trimesh.i</a></li><li><a href="#c17cacd1-fed6-4709-934e-893c5c71706e" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform2.i</a></li><li><a href="#879688da-b401-4b2d-967c-338741ef401a" class="modal-trigger">test/tests/vectorpostprocessors/1d_line_sampler/1d_line_sampler.i</a></li><li><a href="#59432826-4abf-490a-841c-5d6cc97c19c8" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform_hard3_update_version.i</a></li><li><a href="#456a08e5-93b4-41c5-959e-f6c5ce57d25f" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</a></li><li><a href="#f887e8ec-8388-4f66-bdd9-00fa02599243" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_1D.i</a></li><li><a href="#6ee91be2-77a4-4e5b-acf3-df3e7cdf1e2b" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_template1.i</a></li><li><a href="#26ea80c6-9081-41c0-a631-ae9b225a62e3" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_noaction.i</a></li><li><a href="#87bcfb0c-af4e-406b-bf22-c858a278c230" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/no_action.i</a></li><li><a href="#337d31fb-a311-4a9e-b638-9f2542003204" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/mandel_fully_saturated_volume.i</a></li><li><a href="#12d38fa1-7220-40d0-ba94-b97d0b35373a" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_noaction.i</a></li><li><a href="#66d3ff49-d7b2-4e58-939a-9d0d1a174337" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial3.i</a></li><li><a href="#c6a020ad-6a97-4d23-bdc2-247d69a33ff2" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_2/brick2_mu_0_2_pen.i</a></li><li><a href="#7109969b-4b2e-4bf7-8a91-7cc043b86b41" class="modal-trigger">test/tests/vectorpostprocessors/line_value_sampler/csv_delimiter.i</a></li><li><a href="#23247060-591b-4c7f-9b22-6b0868f0fb19" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</a></li><li><a href="#17b2dd38-5c7d-4fe3-a0f7-188d78863738" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/terzaghi_fully_saturated_volume.i</a></li><li><a href="#ecb6dc23-c1d9-4883-a9ca-764c3926daf4" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/rd01.i</a></li><li><a href="#d4807007-b031-4c4e-86f2-128832245351" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/random.i</a></li><li><a href="#2e4909d2-5bda-4873-90ad-54f6988916b6" class="modal-trigger">modules/richards/test/tests/uo_egs/density.i</a></li><li><a href="#e1d415ac-3ffd-43e3-8f50-9712e716e57d" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad_locs.i</a></li><li><a href="#eb385d6f-a44c-4f2d-9b06-0fa2fbf03d52" class="modal-trigger">modules/porous_flow/test/tests/sinks/s09_fully_saturated.i</a></li><li><a href="#d85a9c8c-cdb8-444a-a625-0e4be71d559c" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_template2.i</a></li><li><a href="#14308f36-d7c8-4f22-9fe4-a9e0d33a4278" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_lode_zero.i</a></li><li><a href="#592f95ab-b63f-4c79-979c-e753974e79ba" class="modal-trigger">modules/heat_conduction/test/tests/ad_convective_heat_flux/equilibrium.i</a></li><li><a href="#13859dce-c0eb-43d9-a2db-c3c5840ad48e" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_rr.i</a></li><li><a href="#c3c5b809-b598-4efd-a20b-fb0f7ad9d50b" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial1.i</a></li><li><a href="#c09eac94-4532-452b-a7ca-48ac6f566108" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_2/plane2_template1.i</a></li><li><a href="#5792bbec-78a7-4aa1-8b45-87a898d45ec9" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/six_surface14.i</a></li><li><a href="#5a732af2-cf61-472e-ac1b-9100ea591b02" class="modal-trigger">modules/porous_flow/test/tests/sinks/injection_production_eg.i</a></li><li><a href="#68bb4a51-309a-46be-9561-e9eb0b22c057" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_1/brick1_template1.i</a></li><li><a href="#5193613f-2b23-419e-beaf-2d32ed694c23" class="modal-trigger">modules/porous_flow/test/tests/energy_conservation/heat04.i</a></li><li><a href="#64d9c852-903e-4c97-98e8-39fdfcfe4eee" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_native.i</a></li><li><a href="#304c8574-d066-452f-beff-e9a1ecfb6c00" class="modal-trigger">modules/porous_flow/test/tests/newton_cooling/nc04.i</a></li><li><a href="#657b4d2f-cbf2-4651-bac4-80e5a03f002b" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/small.i</a></li><li><a href="#3d043493-dd41-4ab4-87fd-e98b679a74ea" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform10.i</a></li><li><a href="#8e9f80dd-21d6-4204-a15e-42b0cc4b618e" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite.i</a></li><li><a href="#bc3f29a2-478d-4de3-a73f-5ff0f9356795" class="modal-trigger">modules/porous_flow/test/tests/sinks/s04.i</a></li><li><a href="#d82fcd61-d650-4062-b465-76d75014d272" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface14.i</a></li><li><a href="#5f6c2192-7171-451e-8832-db99f3e4d8dc" class="modal-trigger">modules/porous_flow/test/tests/dirackernels/theis2.i</a></li><li><a href="#b08db659-ab30-4553-b3e4-53dd32c98357" class="modal-trigger">modules/porous_flow/test/tests/heat_conduction/no_fluid.i</a></li><li><a href="#2c875223-7258-4978-81ae-8e7a9d93c908" class="modal-trigger">modules/porous_flow/test/tests/sinks/s03.i</a></li><li><a href="#ff1c84a4-4d31-46df-ac1e-5d026ab2d253" class="modal-trigger">test/tests/outputs/csv/csv_sort.i</a></li><li><a href="#140e464d-c474-4289-adee-04f896ae9f46" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_3D.i</a></li><li><a href="#69fc6254-89dc-4e87-a9ee-bababc404f97" class="modal-trigger">modules/navier_stokes/test/tests/ins/mms/supg/supg_mms_test.i</a></li><li><a href="#2981b70e-8239-4219-84ad-26144dceeb35" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_mu_0_2_pen.i</a></li><li><a href="#c223a2f5-4a9d-4bcc-9e26-ec8f81011345" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_mu_0_2_pen.i</a></li><li><a href="#caa2ce1b-ef0f-4a91-95c9-8af9a0b85376" class="modal-trigger">test/tests/outputs/postprocessor_final/execute_pps_on_final.i</a></li><li><a href="#66c00337-03c6-4f78-8e7f-0f91486a15a4" class="modal-trigger">modules/level_set/test/tests/kernels/olsson_reinitialization/olsson_1d.i</a></li><li><a href="#8bcdfbe2-a73c-40f6-8072-2e63e2ff7abf" class="modal-trigger">modules/porous_flow/test/tests/sinks/s06.i</a></li><li><a href="#ef0c9580-1227-430d-a76f-01a67f440051" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/rock1.i</a></li><li><a href="#41e0afff-4bdb-48b7-8752-ff4d5ed1e585" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/bw02.i</a></li><li><a href="#1df320ac-4bbd-43eb-9431-de9736ed851f" class="modal-trigger">modules/porous_flow/test/tests/fluidstate/coldwater_injection.i</a></li><li><a href="#0bb3d1dd-7d46-49a2-b26d-6aa890ad145e" class="modal-trigger">modules/tensor_mechanics/test/tests/ics/volume_weighted_weibull/volume_weighted_weibull.i</a></li><li><a href="#abce6463-63f8-4221-8e34-afc447756817" class="modal-trigger">modules/navier_stokes/test/tests/ins/mms/pspg/pspg_mms_test.i</a></li><li><a href="#bcca11a9-d020-41c4-999f-0a300e5ccd2e" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/rsc01.i</a></li><li><a href="#c2c77591-7faf-4b77-88ce-eaf03361c115" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform3.i</a></li><li><a href="#5a156a9c-d4c7-4033-8fc0-5cbfa16cabe4" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/mandel_fully_saturated.i</a></li><li><a href="#645e4a18-4cf5-477b-a45a-4caed639c3fd" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform1_update_version.i</a></li><li><a href="#f16f57ee-7ae6-48e1-be3a-0c72107ee37f" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite.i</a></li><li><a href="#b776ae00-9227-41a1-8c46-801a0f78b2ad" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_3/plane3_mu_0_2_pen.i</a></li><li><a href="#c56bbe1e-769e-4192-8b8b-684e37aea44b" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/except3.i</a></li><li><a href="#367d6e77-f5ff-400c-8a03-264de501226d" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar5.i</a></li><li><a href="#09473070-2b3f-464a-89c2-603cac82a6ec" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</a></li><li><a href="#d3df1b6f-b3f0-40fd-99c3-7bf2c721b2b2" class="modal-trigger">modules/porous_flow/test/tests/sinks/s07.i</a></li><li><a href="#645987c5-1d80-48c3-b845-e1607b6c5e03" class="modal-trigger">modules/combined/examples/phase_field-mechanics/kks_mechanics_KHS.i</a></li><li><a href="#f9ae835b-633d-4dd6-9d9c-214884f1e8aa" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar8.i</a></li><li><a href="#dc31c0ce-972e-4680-b3cc-3d311a9634c8" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/fltvd_no_antidiffusion.i</a></li><li><a href="#181bed7d-4a4f-477b-80f7-9e2e2874a350" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_exponential.i</a></li><li><a href="#e8475410-cf1c-4f33-9d52-85e25af1e560" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_planar.i</a></li><li><a href="#093cdcaf-0423-4dca-937f-f8a2ebf07b92" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform4.i</a></li><li><a href="#32db82ea-0512-456b-b42e-6b333f89f945" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface06.i</a></li><li><a href="#0b4121d8-3388-4609-ab7e-48c529260549" class="modal-trigger">modules/porous_flow/examples/co2_intercomparison/1Dradial/1Dradial.i</a></li><li><a href="#c8cde9b2-47b3-4349-ba78-729dd3468275" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform5_update_version.i</a></li><li><a href="#657f5d62-6ddf-4d73-9942-e9e0217c6b3b" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform2.i</a></li><li><a href="#324f54e4-eeff-4967-af48-91e283e3a398" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/fully_saturated_action.i</a></li><li><a href="#9731ea38-17e3-4dd5-8968-2d09e5d97fa4" class="modal-trigger">modules/richards/test/tests/user_objects/uo1.i</a></li><li><a href="#e098fd0c-b3a3-4599-b43d-8e66e88306bd" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_Matern_half_int.i</a></li><li><a href="#5bc07bc2-cad3-4ab4-bf48-81d2998bc389" class="modal-trigger">modules/navier_stokes/test/tests/ins/mms/supg/supg_pspg_adv_dominated_mms.i</a></li><li><a href="#d6cc5c71-32a9-4254-8bf7-69683f44c4d7" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap/random.i</a></li><li><a href="#d26a77c6-7745-43b6-be43-e4bb10c7c308" class="modal-trigger">test/tests/functions/coarsened_piecewise_linear/coarsened_piecewise_linear.i</a></li><li><a href="#6d260b61-c848-41ec-8a97-a036a0bd508b" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/four_surface14.i</a></li><li><a href="#66a52f8c-6d0a-45a8-b424-b861fbe47331" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar1.i</a></li><li><a href="#2e5cfab3-a6a8-487f-b92e-00c90021022e" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01a.i</a></li><li><a href="#27484a59-2d5e-4f35-ad7f-263f67b3c52a" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig7a.i</a></li><li><a href="#682e7a86-dc9d-482b-9158-23c8964886e1" class="modal-trigger">test/tests/outputs/postprocessor_final/postprocessor_final.i</a></li><li><a href="#a6860792-222c-4665-b9e3-a56ccbfe3605" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform4.i</a></li><li><a href="#0a93f6d1-994d-4a5f-9601-8ae480905037" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_3/ring3_template2.i</a></li><li><a href="#042c3304-a26c-48bb-b4bc-764c7707632f" class="modal-trigger">modules/combined/examples/phase_field-mechanics/Pattern1.i</a></li><li><a href="#348d863e-5ec6-4893-8d99-3e9bf46f57ee" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/except2.i</a></li><li><a href="#6048bcc1-4347-470e-b2dd-5dbced49a888" class="modal-trigger">modules/porous_flow/test/tests/sinks/s01.i</a></li><li><a href="#6152d663-0543-4956-8e3d-a8791085179d" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/mandel_basicthm.i</a></li><li><a href="#1b867875-d79c-4724-bc82-5f95a602de2c" class="modal-trigger">modules/porous_flow/test/tests/fluidstate/theis_brineco2.i</a></li><li><a href="#b76399bb-ea46-4658-b8c7-15a90e2b3660" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_4/plane4_mu_0_2_pen.i</a></li><li><a href="#d22d8bd2-fff6-473b-b88a-8e44e8bae115" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform2.i</a></li><li><a href="#a1148235-ebcb-4c61-bb67-3c9db7ab75a6" class="modal-trigger">modules/heat_conduction/test/tests/ad_convective_heat_flux/coupled.i</a></li><li><a href="#e854fee4-0e8c-4c0f-b265-b34cfd45f34e" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_2/ring2_template2.i</a></li><li><a href="#1067d702-08a3-4500-b56c-7d232a771617" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_2/ring2_mu_0_2_pen.i</a></li><li><a href="#5c7ed3a9-33e3-4142-b3de-e78e3b4c06d3" class="modal-trigger">test/tests/outputs/hide_vector_pp/hide_vector_pp.i</a></li><li><a href="#bb55d647-fcd9-4850-aeae-fc1ed9a5eedd" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined.i</a></li><li><a href="#168c629e-2c75-48f1-b545-92088bca9122" class="modal-trigger">modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePS.i</a></li><li><a href="#5b7c7c9e-7c7b-42c5-b837-580b20c74779" class="modal-trigger">modules/porous_flow/test/tests/energy_conservation/heat03.i</a></li><li><a href="#77dc9e80-b8f4-4ba0-8d2c-4099c2be2dbd" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_template2.i</a></li><li><a href="#71117b7b-48b7-4f6c-b3b6-60b7b652cfac" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface03.i</a></li><li><a href="#ded50f0b-8d7d-46aa-9bab-e4a80f3fb1a5" class="modal-trigger">modules/porous_flow/test/tests/fluidstate/coldwater_injection_radial.i</a></li><li><a href="#20829e0c-94cc-4903-970f-ae918fafa051" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/large_deform2.i</a></li><li><a href="#88150bc9-dbed-47a3-a50a-beae8495b5c4" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</a></li><li><a href="#7148eb26-c462-43c2-ba6b-478c2eeccf83" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/undrained_oedometer.i</a></li><li><a href="#4e7f6b2a-26f0-4962-9509-6b004ab195ae" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/wli01.i</a></li><li><a href="#9a178b04-842e-4e96-9d92-e0be18ed8b1e" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_constM.i</a></li><li><a href="#be722c61-e4d1-48bb-b192-1ce32c66108a" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</a></li><li><a href="#b7f5b235-aa71-4bc9-81e2-9d6c2ff0f655" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/two_surface05.i</a></li><li><a href="#3c64c3bd-b4c4-420e-a08d-17875f519ce9" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_noaction.i</a></li><li><a href="#71ecacad-0f2e-4af5-8e17-0fc22809cce1" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform1.i</a></li><li><a href="#c9a559c9-8211-4932-951d-f108fda7a0a2" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_mc.i</a></li><li><a href="#d4b3ab49-07d4-4fed-bc69-9c3a7c4f6a82" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform3.i</a></li><li><a href="#352bdf6e-9907-4bcb-a036-ce21f629c696" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_outer_tip.i</a></li><li><a href="#a784135f-b311-48b0-a915-5a959c4fc3e0" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</a></li><li><a href="#ab04377d-2daa-48d7-8897-fe0b8f9c0af8" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/fltvd.i</a></li><li><a href="#49450694-46bf-48d3-b4eb-562b0fa71805" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/terzaghi_constM.i</a></li><li><a href="#abd0a0ae-937c-4a0e-9601-0e6568e21d67" class="modal-trigger">modules/tensor_mechanics/test/tests/j2_plasticity/small_deform2.i</a></li><li><a href="#443740b8-0455-4010-abae-8df5e7e8480f" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_inner_tip.i</a></li><li><a href="#bbbd9975-3c83-4b08-9dea-d4c18a5ec29b" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden2.i</a></li><li><a href="#c98efcea-3785-43a6-b896-42a0bae5cceb" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/quart_symm_q8/hertz_cyl_qsym_1deg_template1.i</a></li><li><a href="#4330e4fb-d075-43b2-859c-93993c8a4808" class="modal-trigger">test/tests/postprocessors/table_tolerance/table_tolerance_test.i</a></li><li><a href="#dcbb3ac6-3337-48f6-a839-9c6b6e4ad8db" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface11.i</a></li><li><a href="#79842dc3-8cea-4315-ae53-6d1d0585a768" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar7.i</a></li><li><a href="#86418375-d7e7-48ad-9c26-a88ad61c9c63" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform1N.i</a></li><li><a href="#0c4f8f68-6ac6-41a5-bfc9-b28380b59681" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden1.i</a></li><li><a href="#db000b86-3c21-4686-9d55-b4680566bfb2" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01b.i</a></li><li><a href="#b7c2921a-c5be-4ea5-97fb-dd2b8f6dd585" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform_harden3.i</a></li><li><a href="#1260c331-d3d1-4407-90bb-59615d456a28" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</a></li><li><a href="#ac394991-edad-4bad-b29b-2c433e0b5775" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_rr.i</a></li><li><a href="#e4ecf39c-df2e-4db8-b8e7-6e03dbf4c82b" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/random_hyperbolic.i</a></li><li><a href="#0b30962e-2efa-4718-939a-4f18aba545f4" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_template2.i</a></li><li><a href="#99c0da53-3047-49c6-a435-79b7f4473f8e" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_inner_tip.i</a></li><li><a href="#ce40baf7-5751-4d28-b9a5-9ed7b3373134" class="modal-trigger">modules/navier_stokes/test/tests/scalar_adr/supg/2d_advection_error_testing.i</a></li><li><a href="#162a3b16-e62c-4268-819a-b028277ba033" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard2.i</a></li><li><a href="#18d8c703-d148-456b-82a3-559204968d74" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</a></li><li><a href="#89158a58-db1b-40a2-8623-191a7e9d0a98" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/quart_symm_q4/hertz_cyl_qsym_1deg_template1.i</a></li><li><a href="#853c3bc7-9094-4b40-8618-644e18f4a3e2" class="modal-trigger">modules/porous_flow/test/tests/dispersion/disp01.i</a></li><li><a href="#6f482def-ddb7-4210-8ccc-df8e347f07c4" class="modal-trigger">test/tests/outputs/csv/csv_restart_part2.i</a></li><li><a href="#dd43de64-af1f-4172-b7f4-888be588d8ae" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/large_deform1.i</a></li><li><a href="#d207c21d-d855-4dac-a0e5-1566d8ed72b7" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_inner_edge.i</a></li><li><a href="#c18eb871-40da-42a6-a54e-460d53cb400e" class="modal-trigger">modules/combined/test/tests/poro_mechanics/pp_generation_unconfined_action.i</a></li><li><a href="#b8fb81ed-a284-498d-9e75-ab02f4d93017" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform1.i</a></li><li><a href="#1ff3db9a-31c0-4f1b-9773-418b4e342085" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/two_surface04.i</a></li><li><a href="#766b7d3a-3909-432c-a5be-6070a75c20da" class="modal-trigger">test/tests/outputs/csv_final_and_latest/latest.i</a></li><li><a href="#13fbc2f7-6249-4529-a931-7b9c3b1c8f1a" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_3/ring3_mu_0_2_pen.i</a></li><li><a href="#81b786f3-a1b4-481e-ae6c-4fd76d11910c" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard2.i</a></li><li><a href="#717a6987-20b3-4cec-b843-f6cbf8c40da1" class="modal-trigger">modules/combined/examples/phase_field-mechanics/kks_mechanics_VTS.i</a></li><li><a href="#4f5ba262-dddf-446c-a558-608312be4662" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_1/plane1_template1.i</a></li><li><a href="#8c8e473f-fb8f-4290-a463-96f050f59146" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform5.i</a></li><li><a href="#5bc1bf27-185d-4d7d-82fe-effe38a4c6af" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_1/plane1_mu_0_2_pen.i</a></li><li><a href="#d161415b-e09b-4986-86df-757545a5699d" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01c.i</a></li><li><a href="#cae1da26-b29c-47ea-a953-57ededb56252" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface10.i</a></li><li><a href="#9b53afd4-c0e8-4ec8-96f9-7ed44c49126d" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface05.i</a></li><li><a href="#c0d2453b-70c0-402a-bc4f-0fb1b44a23a8" class="modal-trigger">modules/combined/examples/periodic_strain/global_strain_pfm_3D.i</a></li><li><a href="#6303aa8b-c875-498f-be0c-65b9806c026a" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_4/plane4_template2.i</a></li><li><a href="#f2839642-8258-4c1a-b56d-f1bf2b8aa0c2" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap/small_deform2.i</a></li><li><a href="#fcce0724-aac8-4d59-81b8-fb99923bbcdc" class="modal-trigger">test/tests/nodalkernels/constraint_enforcement/upper-and-lower-bound.i</a></li><li><a href="#1ecd7a32-7555-4dab-94bd-065edc8a2273" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</a></li><li><a href="#4213cace-82cb-4346-8f34-515b314488f2" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform7.i</a></li><li><a href="#f0524489-a638-43fc-9562-7b4433f4fe82" class="modal-trigger">modules/combined/test/tests/poro_mechanics/pp_generation.i</a></li><li><a href="#3dbb8fc9-9fee-4a27-9d32-551ba48e6dad" class="modal-trigger">test/tests/postprocessors/execute_on_final/execute_on_final.i</a></li><li><a href="#a2b90393-37a2-49a9-8cdd-2851a3ecc2f4" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_3/brick3_template2.i</a></li><li><a href="#5828f34b-19aa-481d-b887-fd73b454145f" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_inner_edge.i</a></li><li><a href="#b2105539-9103-4855-b0a5-de1f33158370" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform4.i</a></li><li><a href="#4e15404c-21da-4ec7-83d4-93437637bc85" class="modal-trigger">modules/porous_flow/test/tests/dispersion/disp01_heavy.i</a></li><li><a href="#ded113c2-67aa-4551-8935-3dd4b826d1b0" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_lode_zero.i</a></li><li><a href="#ee3bda6b-7a08-435c-ad9f-5b102f0363d0" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_template1.i</a></li><li><a href="#4db34bcf-a91c-4f26-8938-701d6c5d1a29" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_2/plane2_template2.i</a></li><li><a href="#d377f1ce-8ad4-4aa8-82f7-c8a04faedd50" class="modal-trigger">test/tests/vectorpostprocessors/time_data/time_data.i</a></li><li><a href="#110b2d61-d4d5-4d6c-a498-fe1539f380ab" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap/small_deform1.i</a></li><li><a href="#b324b3a5-20fb-4388-aa08-c0f1263f9a36" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/small.i</a></li><li><a href="#4be5110f-8601-4a4b-8411-1ccfbf49b5b5" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/half_symm_q8/hertz_cyl_half_1deg_template1.i</a></li><li><a href="#d62fe8a4-44af-42f4-ac98-f17ff16fb400" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_1/ring1_mu_0_2_pen.i</a></li><li><a href="#8cb68b47-213f-404c-8ab1-7e9e35665370" class="modal-trigger">modules/tensor_mechanics/test/tests/initial_stress/mc_tensile.i</a></li><li><a href="#ce3e39e4-80e3-49bc-88c5-c84431235626" class="modal-trigger">modules/stochastic_tools/test/tests/multiapps/batch_commandline_control/master_multiple.i</a></li><li><a href="#1af9ac0e-4780-4dba-884a-7f556e93aadf" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</a></li><li><a href="#86caac8c-51ff-42fc-97be-a54d6f928659" class="modal-trigger">modules/porous_flow/test/tests/buckley_leverett/bl01.i</a></li><li><a href="#ae8a1feb-9739-4aaf-b906-906d2b18ab39" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_1/ring1_template1.i</a></li><li><a href="#58a9b088-e4eb-49dc-bdc0-ecbcdfc305c3" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/wli02.i</a></li><li><a href="#4dfc7873-fb2b-41e8-868e-b77013cbab12" class="modal-trigger">modules/contact/test/tests/dual_mortar/dm_mechanical_contact.i</a></li><li><a href="#110f0241-a7cf-4115-82f8-591f24c0c077" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_2/ring2_template1.i</a></li><li><a href="#f0ab9232-60d5-48a6-bece-0bd4039e7773" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface09.i</a></li><li><a href="#8d786c04-514c-4b55-9fc9-75a5566d2efd" class="modal-trigger">test/tests/nodalkernels/constraint_enforcement/lower-bound.i</a></li><li><a href="#f09f930f-e1ca-49c5-8e45-9c2af80a345c" class="modal-trigger">modules/porous_flow/examples/flow_through_fractured_media/coarse.i</a></li><li><a href="#f8f1d763-e2c6-41bd-91af-a55787808c0e" class="modal-trigger">test/tests/test_harness/csv_validation_tester_01.i</a></li><li><a href="#5095421e-7a5c-4371-abfd-d748dca8e828" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_mu_0_2_pen.i</a></li><li><a href="#3320ae69-8f1f-4f01-b225-fce25f50d226" class="modal-trigger">modules/combined/examples/mortar/eigenstrain.i</a></li><li><a href="#fc0365b3-5aa1-4853-a9ec-9000edaf3dd1" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_rr.i</a></li><li><a href="#f3fbbb2e-c254-4f40-ba1d-933d5adbbd5b" class="modal-trigger">modules/porous_flow/test/tests/newton_cooling/nc06.i</a></li><li><a href="#e03a6a51-edd4-42a5-bda3-40326eb6f88f" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_2/brick2_aug.i</a></li><li><a href="#2f601833-bd8a-4138-87c0-ac4d96db51ec" class="modal-trigger">test/tests/outputs/iterative/iterative_csv.i</a></li><li><a href="#b00aa6ad-7d3e-492a-a1fc-394aa13a0e11" class="modal-trigger">test/tests/multiapps/grid-sequencing/vi-fine.i</a></li><li><a href="#f4fa2042-142c-40e7-b57a-071e856d10a9" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</a></li><li><a href="#cc56faf1-4874-4eca-a81d-33c2fd331b81" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar3.i</a></li><li><a href="#87b3cf87-ca90-4c11-a7e6-eaed4be8733a" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial2_planar.i</a></li><li><a href="#32c3cdcf-d752-4c5e-b6fe-44e6ad4fbc86" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard3.i</a></li><li><a href="#4c608d06-1440-40a5-88ed-161abf138689" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/two_surface01.i</a></li><li><a href="#5a28d3b4-6217-47f2-9b73-ac671d749ff2" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/two_surface03.i</a></li><li><a href="#2ca0f162-c61b-4ccb-8374-0a7ee4e1044e" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_3D.i</a></li><li><a href="#79c69e42-9410-434d-8ed9-a704d476d99c" class="modal-trigger">modules/porous_flow/test/tests/fluidstate/theis.i</a></li><li><a href="#046c3c4f-9dfa-4655-9edd-a4371c1f87e4" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform8_update_version.i</a></li><li><a href="#9011bfd3-9e03-432a-a0a2-22167b6412a9" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/bw01.i</a></li><li><a href="#ee72731d-e7bd-4eb1-b59c-4c2020b2a870" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_lode_zero.i</a></li><li><a href="#0a5b1120-40a1-4c53-a6ef-5adf28ebe580" class="modal-trigger">modules/richards/test/tests/user_objects/uo2.i</a></li><li><a href="#fe278236-3933-4f87-9ac0-bb758ced5521" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_1/brick1_aug.i</a></li><li><a href="#c6e045b2-7bdb-48b7-9f7a-2b4379257c5a" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform1.i</a></li><li><a href="#4eac32db-eaa0-46fc-ae9b-7b3649b2641c" class="modal-trigger">python/peacock/tests/common/time_data.i</a></li><li><a href="#35f0abe2-4b77-4215-8bec-1595676ead3f" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad.i</a></li><li><a href="#0b1681a2-6203-4d6c-8767-aab7a76f2593" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_squared_exponential.i</a></li><li><a href="#4fd10936-d793-4b9e-abf6-6060ec775ae9" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform2_update_version.i</a></li><li><a href="#9972a66d-5aa2-4ece-84be-29104f726d03" class="modal-trigger">test/tests/mesh/nemesis/nemesis_repartitioning_test.i</a></li><li><a href="#36f46448-933e-41ed-b483-a41a956ce3f8" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard4.i</a></li><li><a href="#ab286ce3-fe46-4985-b0fd-49dd94c9df7a" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_outer_tip.i</a></li><li><a href="#f2e99cc9-ba04-4480-adb4-bc539b303284" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav02a.i</a></li><li><a href="#247a5fad-b6c9-4fcd-9489-92cd112479d5" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig6.i</a></li><li><a href="#ff932172-f173-4247-972c-816551ca3380" class="modal-trigger">modules/navier_stokes/test/tests/scalar_adr/supg/advection_error_testing.i</a></li><li><a href="#43a698ae-895d-4a3e-947b-90c693d0ccd8" class="modal-trigger">modules/porous_flow/test/tests/newton_cooling/nc08.i</a></li><li><a href="#81b8efa1-29fc-4a71-acdc-1114d6b58744" class="modal-trigger">modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePSVG2.i</a></li><li><a href="#83875a57-47f7-4534-91a4-6644e375ea2b" class="modal-trigger">modules/navier_stokes/test/tests/ins/stagnation/stagnation.i</a></li><li><a href="#c67a770b-e4ab-41d4-8080-955cdf071f4b" class="modal-trigger">modules/combined/test/tests/poro_mechanics/undrained_oedometer.i</a></li><li><a href="#53f2f97e-11f4-46be-8a7c-452a6cf6b729" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/load_store/evaluate.i</a></li><li><a href="#f3c018d8-747b-4087-aa64-067875616e53" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_3/ring3_template1.i</a></li><li><a href="#2584bf58-2881-47a6-8d96-626ec5d91854" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard1.i</a></li><li><a href="#3a18d76e-5791-4eff-bf9c-e0bcac327878" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_4/ring4_template1.i</a></li><li><a href="#de081a09-999e-4146-bf2d-6375d92c0ecb" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/small.i</a></li><li><a href="#f6a7e3ef-69c6-44d0-b90a-c33345812326" class="modal-trigger">modules/porous_flow/test/tests/heat_advection/heat_advection_1d_fully_saturated.i</a></li><li><a href="#2a3a406f-adcd-48a5-9ea4-15a2749a55b2" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_3/plane3_template1.i</a></li><li><a href="#6575bd5f-bb48-4a27-93e7-d31d7ec224bf" class="modal-trigger">test/tests/outputs/csv/csv_no_time.i</a></li><li><a href="#091ca73e-acb6-4c24-b3df-55810f83d76e" class="modal-trigger">modules/porous_flow/test/tests/dispersion/diff01.i</a></li><li><a href="#c70b7046-ed4d-4cc7-a1c1-1dca6574bde4" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface21.i</a></li><li><a href="#94298aec-526e-4fd9-8afb-2444e202cf17" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard_cubic.i</a></li><li><a href="#9b182416-b051-45b4-9a65-680e4cdedbc7" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_1/ring1_template2.i</a></li><li><a href="#d333b371-a28e-48e6-808b-1a8a6df3d283" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/except1.i</a></li><li><a href="#a2f9a45a-48c7-4dc3-a690-e958fe1a5a54" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform1_uo.i</a></li><li><a href="#ddb4cec1-61ef-4a7d-be16-657a72d27a53" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/mandel_constM.i</a></li><li><a href="#4018ac90-4452-44fc-84ed-fd6bfdd43f04" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard3.i</a></li><li><a href="#4a183883-2402-4319-96be-c5a09244df30" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform3.i</a></li><li><a href="#6df1d637-0a56-4322-a3aa-16b926242da8" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform3.i</a></li><li><a href="#0887e126-870b-465d-bedd-0f3c5309fbd6" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface07.i</a></li><li><a href="#aa2fb361-13fe-43a5-b9db-8d8666344d8f" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_mu_0_2_pen.i</a></li><li><a href="#1cead6de-5532-400c-b120-88a0af368920" class="modal-trigger">modules/porous_flow/test/tests/sinks/s09.i</a></li><li><a href="#d79d9703-a664-4942-8319-66dc47fae660" class="modal-trigger">modules/stochastic_tools/test/tests/multiapps/batch_commandline_control/master_single.i</a></li><li><a href="#d791a72f-3304-47d2-b108-d9c25552b279" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav02d.i</a></li><li><a href="#24e0f2f1-8708-43ca-9862-dc0bd3afe50b" class="modal-trigger">test/tests/multiapps/grid-sequencing/vi-coarser.i</a></li><li><a href="#cd8b65cd-1dab-4d16-95df-ed47ed1a0bfb" class="modal-trigger">modules/porous_flow/test/tests/dirackernels/theis1.i</a></li><li><a href="#e7a332bf-2ba9-44a8-ad62-06a8b55f581b" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</a></li><li><a href="#4808bb22-c75e-4e70-b1cc-eced18943642" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/mc_wpt_1.i</a></li><li><a href="#cebd04e6-c40a-4fa3-935a-877fc6aa0f58" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_4/ring4_template2.i</a></li><li><a href="#3fa73aee-7c62-4d81-a321-ff5538c0e16e" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_3/plane3_template2.i</a></li><li><a href="#97d413c5-0ecf-4229-a257-024e2445fae2" class="modal-trigger">modules/porous_flow/test/tests/heat_conduction/two_phase.i</a></li><li><a href="#804fc470-5dc0-4ebe-8c50-3cb8bc7e2bf9" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_native.i</a></li><li><a href="#8f22fe98-99c2-4ed3-8e0e-fd8e7ac7551b" class="modal-trigger">modules/richards/test/tests/sinks/q2p01.i</a></li><li><a href="#3bd2fc90-f559-4c18-9ab9-3a9963ea40ae" class="modal-trigger">modules/richards/test/tests/uo_egs/seff2.i</a></li><li><a href="#976341af-46e8-46ca-8bca-3740dd229f21" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface01.i</a></li><li><a href="#43448fc0-8623-4ebf-b6ef-dfa0ff9a2155" class="modal-trigger">modules/combined/test/tests/poro_mechanics/selected_qp.i</a></li><li><a href="#285f97b7-e835-4fc0-8dc9-0b6e652de438" class="modal-trigger">modules/porous_flow/test/tests/newton_cooling/nc02.i</a></li><li><a href="#ffa3835c-fd6f-4893-a8da-b52f79d8a722" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/pffltvd_action.i</a></li><li><a href="#2269d4e3-e9c0-433a-a1b1-a2cc851f1a8e" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/mandel.i</a></li><li><a href="#fcb1a7c3-3261-433c-a18e-acf4dbfb9f3b" class="modal-trigger">modules/richards/test/tests/user_objects/uo4.i</a></li><li><a href="#85e18b23-0a3b-4b38-b549-e0afdd33d4e8" class="modal-trigger">test/tests/postprocessors/relative_difference/relative_difference.i</a></li><li><a href="#a3dbfde5-a1cd-45a9-966b-d6ff634405cc" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform6_update_version.i</a></li><li><a href="#0bec8ffb-54dd-4e0e-b48b-a8259f4a316f" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform9_update_version.i</a></li><li><a href="#e8970915-95b4-46a3-84d7-8b0d4b65f692" class="modal-trigger">modules/combined/test/tests/poro_mechanics/borehole_lowres.i</a></li><li><a href="#22cb83c5-74b4-4873-a09a-e8e69cf27024" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</a></li><li><a href="#36b16e9b-8689-4a44-9896-820a6206e1c8" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/two_surface02.i</a></li><li><a href="#ddae59b2-0d28-446b-9985-71f86e174dee" class="modal-trigger">modules/porous_flow/test/tests/sinks/s05.i</a></li><li><a href="#5b0f3fd1-3319-496d-9b24-fdce125a9ce6" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_4/brick4_template2.i</a></li><li><a href="#70f10912-f29a-48cf-86d9-18c8c609751e" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</a></li><li><a href="#56c2ff33-d4d0-4767-8d70-8c357b8e52ff" class="modal-trigger">modules/combined/test/tests/poro_mechanics/terzaghi.i</a></li><li><a href="#a9d0d3e5-3cd4-46e5-84a1-21422e2294f3" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_2D_trimesh.i</a></li><li><a href="#1760ca30-c4a8-43c3-9331-bf50bde35eaf" class="modal-trigger">modules/porous_flow/test/tests/dirackernels/theis3.i</a></li><li><a href="#6000a640-8a3c-4016-bfd8-7a93028701f2" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar6.i</a></li><li><a href="#376eca12-8922-4a63-89aa-9371f21c9f12" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/many_deforms_cap.i</a></li><li><a href="#113d4f3b-06c8-49c0-b76e-b73a9e4774a2" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform1.i</a></li><li><a href="#d54ba31f-cb61-4e3a-bb54-f6462a6a9b5d" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform4.i</a></li><li><a href="#9a5f0015-e923-4e0d-989b-4e61ed48b217" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform4.i</a></li><li><a href="#e779faf9-1275-4ca6-a7c6-218a4a1e95fa" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_4/brick4_template1.i</a></li><li><a href="#95ec91b2-f068-42b1-ac54-4d7a9d4cda25" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_1/plane1_template2.i</a></li><li><a href="#06175835-9365-4c94-87d3-c201546023b6" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_template2.i</a></li><li><a href="#3f9e6848-d7f4-4fb0-8e90-a19055946531" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden3.i</a></li><li><a href="#7eb6e507-cd62-47c9-9cd6-fac67e542be1" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_inner_edge.i</a></li><li><a href="#f7515014-768b-445a-93ba-8dc6df40a6ae" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden4.i</a></li><li><a href="#a38a3ee6-3b8d-41ed-a2e6-b9e31b9e97a6" class="modal-trigger">modules/porous_flow/test/tests/heat_advection/heat_advection_1d.i</a></li><li><a href="#93215981-6f92-4050-976f-844eebeed3bf" class="modal-trigger">test/tests/vectorpostprocessors/distributed/input.i</a></li><li><a href="#c4cf38d8-4bf9-491f-809d-b8c985f6ae0e" class="modal-trigger">test/tests/postprocessors/function_sideintegral/function_sideintegral.i</a></li><li><a href="#07e0fb27-4b15-4a23-8af8-dce3ed8ed6d5" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface00.i</a></li><li><a href="#42585f2a-6a27-48f8-aeff-36cb52a9432b" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_2D.i</a></li><li><a href="#65aefc50-da08-4faf-b91d-9098909ccf78" class="modal-trigger">test/tests/outputs/csv_final_and_latest/final.i</a></li><li><a href="#a5349fb8-46ae-4953-8c68-2ebdaff46dcb" class="modal-trigger">modules/porous_flow/test/tests/dirackernels/theis_rz.i</a></li><li><a href="#904f9863-7a37-43bd-906d-1af032e5c907" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_2/brick2_template2.i</a></li><li><a href="#20b77c12-3d6a-4ae0-b25e-a0d628dabbf5" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform6.i</a></li><li><a href="#126e78c8-5a51-4034-9cea-a65d42ea5e6a" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/ring_4/ring4_mu_0_2_pen.i</a></li><li><a href="#15e6d4ad-98ee-4b0f-86f8-b7f8750d792d" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface22.i</a></li><li><a href="#0c8dbf54-5230-4731-bb35-d23b8da20b6f" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_fully_saturated_volume.i</a></li><li><a href="#124ca996-8372-4c50-b29f-2e7a5d4e2e6f" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01c.i</a></li><li><a href="#d3966609-812f-4296-80fe-657f7008109c" class="modal-trigger">test/tests/nodalkernels/constraint_enforcement/upper-bound.i</a></li><li><a href="#5908015f-0f78-4bda-beda-9d67a4108b7b" class="modal-trigger">modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePS_KT.i</a></li><li><a href="#eff40dec-a8ca-4d29-97ef-e9af6b8e4132" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_shear/except1.i</a></li><li><a href="#2c10c63e-8acd-4464-9635-504038de2fc6" class="modal-trigger">test/tests/multiapps/grid-sequencing/vi-coarse.i</a></li><li><a href="#bc642637-4176-4e6b-9578-ce32e0daf351" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_fully_saturated.i</a></li><li><a href="#7bcce78c-4f5c-4e28-9180-8692d9b8048a" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_1/brick1_template2.i</a></li><li><a href="#5d0f9572-8513-4836-9099-6fb5c883a726" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite.i</a></li><li><a href="#662193c9-5db9-476d-9ba3-259ab0242b19" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/pffltvd.i</a></li><li><a href="#2bfae22e-803a-46f0-b0f4-0915d0d4ce46" class="modal-trigger">modules/porous_flow/test/tests/gravity/fully_saturated_grav01b.i</a></li><li><a href="#196d6320-4ec1-4e70-ab90-0372fbf2e3c0" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/rsc02.i</a></li><li><a href="#7e73ab1c-3d01-4adc-872b-e656612ccf3e" class="modal-trigger">modules/porous_flow/test/tests/infiltration_and_drainage/rd02.i</a></li><li><a href="#8e4acf08-c1b2-4578-b203-b2f95ae7f6ff" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/except4.i</a></li><li><a href="#393b82b5-d739-4ee6-9ce4-beac97a79b4a" class="modal-trigger">modules/phase_field/test/tests/conserved_noise/normal_masked.i</a></li><li><a href="#7bef21b6-e990-4465-bb05-d1b1ff324077" class="modal-trigger">modules/stochastic_tools/test/tests/vectorpostprocessors/multiple_stochastic_results/master.i</a></li><li><a href="#88c4d2b9-e30f-4e48-a856-14d4bc539179" class="modal-trigger">test/tests/executioners/arbitrary_execute_flag/arbitrary_execute.i</a></li><li><a href="#8acf5ab3-1670-44f1-8c13-e9e32f951072" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad_moment.i</a></li><li><a href="#867cb49a-7368-4963-90cd-379a14ad60d4" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_1D_adaptivity.i</a></li><li><a href="#0d484fc8-c3dd-4345-b59c-f5f3d1fb05c1" class="modal-trigger">modules/navier_stokes/test/tests/ins/mms/supg/supg_adv_dominated_mms.i</a></li><li><a href="#fedd61ec-63e0-4daa-b29e-fb9ef50cbe20" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_3/brick3_mu_0_2_pen.i</a></li><li><a href="#54930cdd-e1a8-4160-b379-ebf690d67071" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad.i</a></li><li><a href="#129352c2-4c2d-401d-93f4-5972a2185fd7" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/random_planar.i</a></li><li><a href="#97205a90-73db-49ee-803b-7fb4a7032b6f" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform9.i</a></li><li><a href="#2f55482e-f1c5-4cb5-a88f-09f488c6f397" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_inner_edge.i</a></li><li><a href="#e141d2c3-d5c9-4cfc-acdc-8a61716dd898" class="modal-trigger">modules/combined/test/tests/poro_mechanics/borehole_highres.i</a></li><li><a href="#1e040f2d-2c2d-4613-807e-f078ccfe3bec" class="modal-trigger">modules/tensor_mechanics/test/tests/j2_plasticity/hard2.i</a></li><li><a href="#48d44a80-f280-4fdf-91ca-066c3fd01b3a" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig8.i</a></li><li><a href="#c084afb1-3c9b-47a0-a354-66152230a5df" class="modal-trigger">test/tests/outputs/csv/csv_align.i</a></li><li><a href="#5615e22f-1e14-4daa-b124-0141d6e860c4" class="modal-trigger">test/tests/partitioners/petsc_partitioner/petsc_partitioner.i</a></li><li><a href="#a094c2fe-4a22-4151-953f-33233f27ac2c" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_basicthm.i</a></li><li><a href="#4cd798ce-2a33-468d-a312-4295d72d3de8" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_outer_tip.i</a></li><li><a href="#e4961441-c25c-4990-b7bf-1ecb34645165" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard1.i</a></li><li><a href="#ad5f5aaa-6011-409f-82fc-dfdbd64d6ca2" class="modal-trigger">test/tests/multiapps/grid-sequencing/vi-fine-alone.i</a></li><li><a href="#7dc8654f-c07b-4a5c-929c-b050bc5c29ed" class="modal-trigger">test/tests/time_integrators/explicit_ssp_runge_kutta/explicit_ssp_runge_kutta.i</a></li><li><a href="#6695fb1a-aa78-4758-b774-2adc166d3ed6" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface13.i</a></li><li><a href="#349a98c5-7633-445f-9335-c592d7ee671b" class="modal-trigger">modules/combined/examples/mortar/eigenstrain_action.i</a></li><li><a href="#6f9eab2b-2847-4478-be25-964c92bc5d58" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad_moment.i</a></li><li><a href="#848885b4-b305-4ef5-9580-8c2b399bb70b" class="modal-trigger">modules/tensor_mechanics/test/tests/j2_plasticity/small_deform1.i</a></li><li><a href="#6b482622-fef5-4468-a4ba-e857a3f3e93c" class="modal-trigger">modules/stochastic_tools/test/tests/vectorpostprocessors/stochastic_results_complete_history/master.i</a></li><li><a href="#46051ebb-a9bf-46a5-aead-30ea6072a7f6" class="modal-trigger">modules/porous_flow/test/tests/dirackernels/bh07.i</a></li><li><a href="#f06198a1-dca4-43e3-aac7-5091b94c557d" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01c_action.i</a></li><li><a href="#8069cbe7-52d9-474c-8c98-5831bdd0e991" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform2_small_strain.i</a></li><li><a href="#8138b6e3-ea83-4aa8-8f57-efe15163d490" class="modal-trigger">modules/contact/test/tests/sliding_block/in_and_out/frictional_lm.i</a></li><li><a href="#222dd74f-d83f-429c-a9ba-01bc12fc7ac2" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/terzaghi.i</a></li><li><a href="#37667c63-fd05-44a3-b47d-14a7ba88647c" class="modal-trigger">modules/stochastic_tools/test/tests/vectorpostprocessors/stochastic_results/master.i</a></li><li><a href="#d43582a3-f65e-43da-a927-8c5744982977" class="modal-trigger">modules/porous_flow/test/tests/mass_conservation/mass04.i</a></li><li><a href="#22e38b9a-c2fd-4cb3-ae8d-a470fa70cb1d" class="modal-trigger">modules/heat_conduction/test/tests/convective_heat_flux/coupled.i</a></li><li><a href="#fc6845a1-c086-43b7-a4f9-cc94ae17c721" class="modal-trigger">modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_squared_exponential_testing.i</a></li><li><a href="#17d36329-512b-4a3d-a557-00239ac086a4" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav01a.i</a></li><li><a href="#1ae61210-9705-4971-852c-39c8f9c33a3e" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform6.i</a></li><li><a href="#f6d5cb20-1c0a-4466-8f02-49d57985ebae" class="modal-trigger">modules/combined/examples/periodic_strain/global_strain_pfm.i</a></li><li><a href="#7ee8b9ff-16d4-47de-aeb7-92bae29d7322" class="modal-trigger">modules/porous_flow/examples/flow_through_fractured_media/coarse_3D.i</a></li><li><a href="#145a9047-dc5a-4f59-ab65-1e92effffb9b" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</a></li><li><a href="#e3dffce6-87f6-47e0-9b12-216d506c6d1b" class="modal-trigger">modules/tensor_mechanics/test/tests/j2_plasticity/small_deform3.i</a></li><li><a href="#a9d9f992-b5d0-4893-a697-8a02f0d41445" class="modal-trigger">modules/tensor_mechanics/test/tests/j2_plasticity/hard1.i</a></li><li><a href="#b8791e7d-f6cd-4460-9fd2-8d1efd377070" class="modal-trigger">modules/phase_field/examples/multiphase/DerivativeMultiPhaseMaterial.i</a></li><li><a href="#5dc428b1-8c21-469f-aaa7-821c71f939e3" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_3/brick3_template1.i</a></li><li><a href="#b4214091-3581-4661-af58-54403191f3bb" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform3.i</a></li><li><a href="#633f2f76-c61e-47f2-8fdf-15fe0d0c85ff" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/planar3.i</a></li><li><a href="#6fdd052c-bd78-40e3-98af-3d795158ca9c" class="modal-trigger">modules/porous_flow/test/tests/gravity/grav02c.i</a></li><li><a href="#18857447-f452-4b1e-8ba0-c243ba14118d" class="modal-trigger">modules/phase_field/test/tests/conserved_noise/uniform.i</a></li><li><a href="#c6756149-7332-47c7-9c64-e141cdc8137b" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard3.i</a></li><li><a href="#785113af-7366-4ea4-b1e2-ee9003a0b958" class="modal-trigger">modules/richards/test/tests/uo_egs/seff1.i</a></li><li><a href="#9332540d-12f6-472e-945f-2397e1836b3b" class="modal-trigger">modules/heat_conduction/test/tests/convective_heat_flux/equilibrium.i</a></li><li><a href="#f27bd604-0697-4644-9ae6-bcd5e4fa6968" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform2.i</a></li><li><a href="#9d8ad442-0619-430b-81e1-9ba6a8b3e00f" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/brick_1/brick1_mu_0_2_pen.i</a></li><li><a href="#ef5a2ab5-af1c-4f84-be14-48522daf59fd" class="modal-trigger">modules/porous_flow/test/tests/poro_elasticity/terzaghi_basicthm.i</a></li><li><a href="#d4144685-8c48-4dec-b9f5-e723d096214c" class="modal-trigger">modules/richards/test/tests/uo_egs/relperm.i</a></li><li><a href="#912da78b-e0b5-4601-ae45-702bd2fa9157" class="modal-trigger">test/tests/outputs/postprocessor/show_hide.i</a></li><li><a href="#7f24f075-1c16-46a7-8cb6-fdcca01ddff6" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar1.i</a></li><li><a href="#bfc2acac-f105-4f75-a280-6966507ebb54" class="modal-trigger">modules/porous_flow/test/tests/dispersion/diff01_action.i</a></li><li><a href="#4b27e3f2-6d38-4250-b2cb-342df443d995" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D.i</a></li><li><a href="#38f0b05c-e28b-4b5d-9215-13daa986c4fe" class="modal-trigger">modules/porous_flow/test/tests/numerical_diffusion/framework.i</a></li><li><a href="#1d8babaf-6679-48fb-a906-910e103f4316" class="modal-trigger">modules/contact/test/tests/verification/hertz_cyl/half_symm_q4/hertz_cyl_half_1deg_template3.i</a></li><li><a href="#67bbf3cf-13c4-4dad-a72a-6fef5dfcc8ca" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface12.i</a></li><li><a href="#9163fe89-22a8-4f21-b5b2-78d1d1a2461c" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial2.i</a></li><li><a href="#5c33d667-e505-4cea-8a57-1b5741844c07" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface02.i</a></li><li><a href="#3a511be8-e57d-42b3-a5ca-759c523190fa" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</a></li><li><a href="#d80fcee0-d13d-48c9-9335-35d6fe024f59" class="modal-trigger">modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard_cubic.i</a></li><li><a href="#c89313f0-02f6-42c2-b141-2d88e9e8bf68" class="modal-trigger">modules/porous_flow/test/tests/heat_advection/heat_advection_1d_fully_saturated_action.i</a></li><li><a href="#c67589d2-64ce-426f-afba-facad6054e2e" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform1.i</a></li><li><a href="#9f99a8c1-1023-47bd-a44f-f80aad0d90d5" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface15.i</a></li><li><a href="#224c7d37-432c-4ee5-9ab9-8b3b29d4977b" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform2.i</a></li><li><a href="#f9e4a008-7fe0-4de3-abb6-a6d6e0ec50c2" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface04.i</a></li><li><a href="#a42f2f39-c2d3-4c7f-a90f-a12ceb21256d" class="modal-trigger">test/tests/vectorpostprocessors/side_value_sampler/side_value_sampler.i</a></li><li><a href="#657473b8-de73-42a9-bb91-98b6bb562ff6" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform11.i</a></li><li><a href="#f7179473-ca71-43e3-8247-2246631612e7" class="modal-trigger">modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePSVG.i</a></li><li><a href="#0d75b1e3-b451-4226-95bc-829f157a0024" class="modal-trigger">modules/stochastic_tools/test/tests/ics/random_ic_distribution_test/random_ic_distribution_test.i</a></li><li><a href="#efa71d9d-0fac-4ebd-bfce-60fe137461df" class="modal-trigger">modules/porous_flow/test/tests/fluidstate/theis_tabulated.i</a></li><li><a href="#fd437afd-3a94-4a1d-8b27-ab1e1b4d1ddc" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/planar4.i</a></li><li><a href="#49453456-c86d-48ed-bd25-8afc8b8edc46" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_native.i</a></li><li><a href="#7a83c437-4ccb-4f82-b63f-66104df8d24c" class="modal-trigger">modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_1D_adaptivity.i</a></li><li><a href="#ecfdbfb5-1c60-4537-8761-7c1c6732bfe5" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial3_planar.i</a></li><li><a href="#8a791d0a-ce49-4317-83f8-583c459f2b71" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard2.i</a></li><li><a href="#62941e77-4d55-4af6-a085-4e4c94cc2b65" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_template1.i</a></li><li><a href="#b84e11a9-c905-4094-a61f-8e4c093a3813" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/three_surface08.i</a></li><li><a href="#8935073b-31c6-4d72-a68d-8677ee225567" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/eight_surface14.i</a></li><li><a href="#fd748a3f-3de1-4dc0-9bca-f454912fde3b" class="modal-trigger">modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_inner_tip.i</a></li><li><a href="#47e7fb21-d678-4d9b-8da0-6013df2b4613" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</a></li><li><a href="#77f3cc1d-0cca-4bee-93e1-76e95156e3e0" class="modal-trigger">modules/richards/test/tests/dirac/q2p01.i</a></li><li><a href="#a09b4eec-e500-42c8-9c87-d2858f008b0a" class="modal-trigger">modules/contact/test/tests/verification/patch_tests/plane_2/plane2_mu_0_2_pen.i</a></li><li><a href="#7c48393a-7a48-4535-9a71-5d41f0fdd6c2" class="modal-trigger">modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform2.i</a></li><li><a href="#31b2402f-d60c-4a1c-a47e-e1b8c0c23aed" class="modal-trigger">modules/porous_flow/test/tests/newton_cooling/nc01.i</a></li><li><a href="#53fe2df6-cd50-4703-8360-5204f488bafb" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform6.i</a></li><li><a href="#9e7a71ed-0f88-4f32-b93b-9a17b09cfd3d" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/small_deform3_update_version.i</a></li><li><a href="#f7158452-b34e-4892-9a3d-e5481cdaecfa" class="modal-trigger">modules/richards/test/tests/user_objects/uo3.i</a></li></ul><div class="modal moose-modal" id="0c470792-4120-49a5-b987-ad77c22d9e0b"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav02b.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established in the steady-state situation when 0&lt;saturation&lt;1 (note the strictly less-than).
# 2phase (PP), 2components, vanGenuchten, constant fluid bulk-moduli for each phase, constant viscosity, constant permeability, Corey relative perm
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
    initial_condition = -1.0
  [../]
  [./ppgas]
    initial_condition = 0
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[BCs]
  [./ppwater]
    type = DirichletBC
    boundary = right
    variable = ppwater
    value = -1
  [../]
  [./ppgas]
    type = DirichletBC
    boundary = right
    variable = ppgas
    value = 0
  [../]
[]

[Functions]
  [./ana_ppwater]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 pp_water_top 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
  [./ana_ppgas]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1 pp_gas_top 0.1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.1
      viscosity = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[Postprocessors]
  [./pp_water_top]
    type = PointValue
    variable = ppwater
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_water_base]
    type = PointValue
    variable = ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_water_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_gas_top]
    type = PointValue
    variable = ppgas
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_gas_base]
    type = PointValue
    variable = ppgas
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_gas_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppgas
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  file_base = grav02b
  [./csv]
    type = CSV
  [../]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0fe1736f-0649-4094-adca-1be82595d34a"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/mandel.i</h4><pre class="moose-pre"><code class="language-text"># Mandel&#x27;s problem of consolodation of a drained medium
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]


[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]



[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
    [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./darcy_flow]
    type = CoefDiffusion
    variable = porepressure
    coef = 1.5
  [../]
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.6
    solid_bulk_compliance = 1
    fluid_bulk_compliance = 0.125
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="619ac5ab-1e21-47dc-9185-68e8d9323d7e"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl4_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./stress_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4c86e933-07f0-4473-a41d-d19543561ce6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/except2.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 8E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 6E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = z_disp
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.1111077
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 0
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]
[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 0&#x27;
    ep_plastic_tolerance = 1E-3
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6fc4ca7e-3deb-44dd-aab8-f1573f245d27"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_4/brick4_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick4_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
  [./tang_force_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_x
  [../]
  [./disp_x64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_x
  [../]
  [./disp_y59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_y
  [../]
  [./disp_y64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  file_base = brick4_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = brick4_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x59 disp_y59 disp_x64 disp_y64 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+6
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a03656a8-a863-4c19-b592-351e46168ec0"><div class="modal-content"><h4>modules/phase_field/examples/kim-kim-suzuki/kks_example_noflux.i</h4><pre class="moose-pre"><code class="language-text">#
# KKS simple example in the split form
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 150
  ny = 15
  nz = 0
  xmin = -25
  xmax = 25
  ymin = -2.5
  ymax = 2.5
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[AuxVariables]
  [./Fglobal]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Variables]
  # order parameter
  [./eta]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute concentration
  [./c]
    order = FIRST
    family = LAGRANGE
  [../]

  # chemical potential
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]

  # Liquid phase solute concentration
  [./cl]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.1
  [../]
  # Solid phase solute concentration
  [./cs]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.9
  [../]
[]

[Functions]
  [./ic_func_eta]
    type = ParsedFunction
    value = &#x27;0.5*(1.0-tanh((x)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_c]
    type = ParsedFunction
    value = &#x27;0.9*(0.5*(1.0-tanh(x/sqrt(2.0))))^3*(6*(0.5*(1.0-tanh(x/sqrt(2.0))))^2-15*(0.5*(1.0-tanh(x/sqrt(2.0))))+10)+0.1*(1-(0.5*(1.0-tanh(x/sqrt(2.0))))^3*(6*(0.5*(1.0-tanh(x/sqrt(2.0))))^2-15*(0.5*(1.0-tanh(x/sqrt(2.0))))+10))&#x27;
  [../]
[]


[ICs]
  [./eta]
    variable = eta
    type = FunctionIC
    function = ic_func_eta
  [../]
  [./c]
    variable = c
    type = FunctionIC
    function = ic_func_c
  [../]
[]

[Materials]
  # Free energy of the liquid
  [./fl]
    type = DerivativeParsedMaterial
    f_name = fl
    args = &#x27;cl&#x27;
    function = &#x27;(0.1-cl)^2&#x27;
  [../]

  # Free energy of the solid
  [./fs]
    type = DerivativeParsedMaterial
    f_name = fs
    args = &#x27;cs&#x27;
    function = &#x27;(0.9-cs)^2&#x27;
  [../]

  # h(eta)
  [./h_eta]
    type = SwitchingFunctionMaterial
    h_order = HIGH
    eta = eta
  [../]

  # g(eta)
  [./g_eta]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta
  [../]

  # constant properties
  [./constants]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   eps_sq&#x27;
    prop_values = &#x27;0.7 0.7 1.0  &#x27;
  [../]
[]

[Kernels]
  active = &#x27;PhaseConc ChemPotSolute CHBulk ACBulkF ACBulkC ACInterface dcdt detadt ckernel&#x27;

  # enforce c = (1-h(eta))*cl + h(eta)*cs
  [./PhaseConc]
    type = KKSPhaseConcentration
    ca       = cl
    variable = cs
    c        = c
    eta      = eta
  [../]

  # enforce pointwise equality of chemical potentials
  [./ChemPotSolute]
    type = KKSPhaseChemicalPotential
    variable = cl
    cb       = cs
    fa_name  = fl
    fb_name  = fs
  [../]

  #
  # Cahn-Hilliard Equation
  #
  [./CHBulk]
    type = KKSSplitCHCRes
    variable = c
    ca       = cl
    fa_name  = fl
    w        = w
  [../]

  [./dcdt]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./ckernel]
    type = SplitCHWRes
    mob_name = M
    variable = w
  [../]

  #
  # Allen-Cahn Equation
  #
  [./ACBulkF]
    type = KKSACBulkF
    variable = eta
    fa_name  = fl
    fb_name  = fs
    w        = 1.0
    args = &#x27;cl cs&#x27;
  [../]
  [./ACBulkC]
    type = KKSACBulkC
    variable = eta
    ca       = cl
    cb       = cs
    fa_name  = fl
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    kappa_name = eps_sq
  [../]
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
[]

[AuxKernels]
  [./GlobalFreeEnergy]
    variable = Fglobal
    type = KKSGlobalFreeEnergy
    fa_name = fl
    fb_name = fs
    w = 1.0
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;asm      ilu          nonzero&#x27;

  l_max_its = 100
  nl_max_its = 100

  num_steps = 50
  dt = 0.1
[]

#
# Precondition using handcoded off-diagonal terms
#
[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]


[VectorPostprocessors]
  [./c]
    type =  LineValueSampler
    start_point = &#x27;-25 0 0&#x27;
    end_point = &#x27;25 0 0&#x27;
    variable = c
    num_points = 151
    sort_by =  id
    execute_on = timestep_end
  [../]
  [./eta]
    type =  LineValueSampler
    start_point = &#x27;-25 0 0&#x27;
    end_point = &#x27;25 0 0&#x27;
    variable = eta
    num_points = 151
    sort_by =  id
    execute_on = timestep_end
  [../]

[]

[Outputs]
  exodus = true
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3285c6e6-f81a-4ed3-88f8-b8fca1f352f3"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform7.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is incrementally stretched in the in the z direction
# This causes the return direction to be along the hypersurface sigma_II = sigma_III,
# and the resulting stresses are checked to lie on the expected yield surface
#
# tensile_strength is set to 1Pa,
# cap smoothing is used with tip_smoother = 0.0, cap_start = 0.5, cap_rate = 2.0
# Lode angle = -30degrees


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*z*t*t&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tip_scheme = cap
    tensile_tip_smoother = 0.0
    cap_start = -0.5
    cap_rate = 2
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    max_NR_iterations = 1000
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 9
  dt = 0.9
  type = Transient
[]


[Outputs]
  file_base = small_deform7
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dff66a2d-d22e-41e4-b54c-96be25e51940"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D_blocks.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek
# 2D version with blocks
# Top block: tracer is defined here, with velocity = (0.1, 0, 0)
# Central block: tracer is not defined here
# Bottom block: tracer is defined here, with velocity = (-0.1, 0, 0)

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 10
    xmin = 0
    xmax = 1
    ny = 5
    ymin = 0
    ymax = 1
  []
  [./top]
    input = gen
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0 0.6 0&#x27;
    top_right = &#x27;1 1 0&#x27;
    block_id = 1
  [../]
  [./center]
    input = bottom
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0 0.4 0&#x27;
    top_right = &#x27;1 0.6 0&#x27;
    block_id = 2
  [../]
  [./bottom]
    input = top
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0 0 0&#x27;
    top_right = &#x27;1 0.6 0&#x27;
    block_id = 3
  [../]
  [./split_bdys]
    type = BreakBoundaryOnSubdomainGenerator
    input = center
    boundaries = &#x27;left right&#x27;
  [../]
[]

[GlobalParams]
  block = &#x27;1 2 3&#x27;
[]

[Variables]
  [./tracer]
    block = &#x27;1 3&#x27;
  [../]
  [./dummy]
  [../]
[]

[ICs]
  [./tracer_top]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1 | x&gt;0.3, 0, 1)&#x27;
    block = &#x27;1&#x27;
  [../]
  [./tracer_bot]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.7 | x &gt; 0.9, 0, 1)&#x27;
    block = &#x27;3&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
    block = &#x27;1 3&#x27;
  [../]
  [./flux_top]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo_top
    block = &#x27;1&#x27;
  [../]
  [./flux_bot]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo_bot
    block = &#x27;3&#x27;
  [../]
  [.dummy]
    type = TimeDerivative
    variable = dummy
  [../]
[]

[UserObjects]
  [./fluo_top]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
    block = &#x27;1&#x27;
  [../]
  [./fluo_bot]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;-0.1 0 0&#x27;
    block = &#x27;3&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left_top]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = &#x27;left_to_1&#x27;
  [../]
  [./remove_tracer_top]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = &#x27;right_to_1&#x27;
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
  [./no_tracer_on_left_bot]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = &#x27;left_to_3&#x27;
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
  [./remove_tracer_bot]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = &#x27;right_to_3&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer_bot]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
  [./tracer_top]
    type = LineValueSampler
    start_point = &#x27;0 1 0&#x27;
    end_point = &#x27;1 1 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a84b118e-ddd1-4120-8b7c-6e7411720af1"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard5.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in z direction, and smaller stretches along the y direction, and compression along x direction
# Both return to the plane and edge (lode angle = 30deg, ie 010100) are experienced.
#
# It is checked that the yield functions are less than their tolerance values
# It is checked that the cohesion hardens correctly

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.05E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if((a&lt;1E-5)&amp;(b&lt;1E-5)&amp;(c&lt;1E-5)&amp;(d&lt;1E-5)&amp;(g&lt;1E-5)&amp;(h&lt;1E-5),0,abs(a)+abs(b)+abs(c)+abs(d)+abs(g)+abs(h))&#x27;
    vars = &#x27;a b c d g h&#x27;
    vals = &#x27;f0 f1 f2 f3 f4 f5&#x27;
  [../]
  [./coh_analytic]
    type = ParsedFunction
    value = &#x27;20-10*exp(-1E6*intnl)&#x27;
    vars = intnl
    vals = internal
  [../]
  [./coh_from_yieldfcns]
    type = ParsedFunction
    value = &#x27;(f0+f1-(sxx+syy)*sin(phi))/(-2)/cos(phi)&#x27;
    vars = &#x27;f0 f1 sxx syy phi&#x27;
    vals = &#x27;f0 f1 s_xx s_yy 0.8726646&#x27;
  [../]
  [./should_be_zero_coh]
    type = ParsedFunction
    value = &#x27;if(abs(a-b)&lt;1E-6,0,1E6*abs(a-b))&#x27;
    vars = &#x27;a b&#x27;
    vals = &#x27;Coh_analytic Coh_moose&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn5]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn0]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn0
  [../]
  [./yield_fcn1]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = yield_fcn1
  [../]
  [./yield_fcn2]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = yield_fcn2
  [../]
  [./yield_fcn3]
    type = MaterialStdVectorAux
    index = 3
    property = plastic_yield_function
    variable = yield_fcn3
  [../]
  [./yield_fcn4]
    type = MaterialStdVectorAux
    index = 4
    property = plastic_yield_function
    variable = yield_fcn4
  [../]
  [./yield_fcn5]
    type = MaterialStdVectorAux
    index = 5
    property = plastic_yield_function
    variable = yield_fcn5
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn3
  [../]
  [./f4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn4
  [../]
  [./f5]
   type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn5
  [../]
  [./yfcns_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./Coh_analytic]
    type = FunctionValuePostprocessor
    function = coh_analytic
  [../]
  [./Coh_moose]
    type = FunctionValuePostprocessor
    function = coh_from_yieldfcns
  [../]
  [./cohesion_difference_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_coh
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 20
    rate = 1E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.8726646
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 1 #0.8726646 # 50deg
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    use_custom_returnMap = true
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
  [../]
[]


[Executioner]
  end_time = 5
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar_hard5
  exodus = false
  [./csv]
    type = CSV
    hide = &#x27;f0 f1 f2 f3 f4 f5 s_xy s_xz s_yz Coh_analytic Coh_moose&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b7485b11-525e-4307-a622-0fb8557a0466"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial1_small_strain.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  # back = zmin
  # front = zmax
  # bottom = ymin
  # top = ymax
  # left = xmin
  # right = xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = &#x27;0&#x27;
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;back&#x27;
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front&#x27;
    function = &#x27;-1E-3*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./mc_int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.6981317 # 40deg
    rate = 10000
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-10
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;5.77E10 3.85E10&#x27; # young = 100Gpa, poisson = 0.3
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-10
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 0.5
  dt = 0.05
  solve_type = NEWTON
  type = Transient

  line_search = &#x27;none&#x27;
  nl_rel_tol = 1E-10
  l_tol = 1E-3
  l_max_its = 200
  nl_max_its = 10

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]



[Outputs]
  file_base = uni_axial1_small_strain
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5d193f8d-df51-41e1-bb18-07d753db54fb"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/pp_generation_unconfined.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie m^3/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# Source = s  (units = 1/second)
#
# Expect:
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_xx = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# Parameters:
# Biot coefficient = 0.3
# Porosity = 0.1
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1/0.3 = 3.333333
# 1/Biot modulus = (1 - 0.3)*(0.3 - 0.1)/2 + 0.1*0.3 = 0.1. BiotModulus = 10
#
# s = 0.1
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.3
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b2a74aa8-b2f2-4801-9182-ec0c33ab130a"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_noaction&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c7dfa76d-279c-4ca0-b2dc-11aa4342ce25"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/half_symm_q8/hertz_cyl_half_1deg_template3.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  volumetric_locking_correction = false
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_half_1deg.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 11.&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_horz]
    type = PiecewiseLinear
    x = &#x27;0. 1. 11.&#x27;
    y = &#x27;0. 0.0 0.0014&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 2
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 2
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 4
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 4
  [../]
  [./disp_x639]
    type = NodalVariableValue
    nodeid = 638
    variable = disp_x
  [../]
  [./disp_y639]
    type = NodalVariableValue
    nodeid = 638
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disp_ramp_vert
  [../]
  [./top_x_disp]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = disp_ramp_horz
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
  [./stuff5_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;5&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff5_strain]
    type = ComputeFiniteStrain
    block = &#x27;5&#x27;
  [../]
  [./stuff5_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;5&#x27;
  [../]
  [./stuff6_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;6&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff6_strain]
    type = ComputeFiniteStrain
    block = &#x27;6&#x27;
  [../]
  [./stuff6_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;6&#x27;
  [../]
  [./stuff7_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;7&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff7_strain]
    type = ComputeFiniteStrain
    block = &#x27;7&#x27;
  [../]
  [./stuff7_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;7&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 200

  start_time = 0.0
  end_time = 2.0
  l_tol = 5e-4
  dt = 0.1
  dtmin = 0.1
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./chkfile2]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x639 disp_y639 top_react_x top_react_y&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 2
    secondary = 3
    model = coulomb
    friction_coefficient = 0.0
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]

[Dampers]
  [./contact_slip]
    type = ContactSlipDamper
    primary = &#x27;2&#x27;
    secondary = &#x27;3&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="04cb569f-f8fe-45c8-bd07-2a2e7af99ccd"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie kg/second per cubic meter), and the
# rise in porepressure is observed.
#
# Source = s  (units = kg/m^3/second)
#
# Expect:
# fluid_mass = mass0 + s*t
# stress = 0 (remember this is effective stress)
# Porepressure = fluid_bulk*log(fluid_mass_density/density_P0), where fluid_mass_density = fluid_mass*porosity
# porosity = biot+(phi0-biot)*exp(pp(biot-1)/solid_bulk)
#
# Parameters:
# Biot coefficient = 0.3
# Phi0 = 0.1
# Solid Bulk modulus = 2
# fluid_bulk = 13
# density_P0 = 1


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./porosity]
    type = PorousFlowPropertyAux
    variable = porosity
    property = porosity
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 13
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.3
    solid_bulk = 2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0   0 1 0   0 0 1&#x27; # unimportant
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Functions]
  [./porosity_analytic]
    type = ParsedFunction
    value = &#x27;biot+(phi0-biot)*exp(pp*(biot-1)/bulk)&#x27;
    vars = &#x27;biot phi0 pp bulk&#x27;
    vals = &#x27;0.3 0.1 p0 2&#x27;
  [../]
[]

[Postprocessors]
  [./fluid_mass]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
  [../]
  [./porosity]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    point = &#x27;0 0 0&#x27;
    variable = porosity
  [../]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./porosity_analytic]
    type = FunctionValuePostprocessor
    function = porosity_analytic
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_max_it -snes_stol&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 10000 1E-11&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="56310677-6a8f-4660-a406-8bf2092cef06"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_update.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_update
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f4ed379f-8823-47fb-89d0-d619f6a1f7bf"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="024ce820-e44e-462b-be3d-4da233b66070"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform_hard3.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation, with cubic hardening
# A single element is repeatedly stretched by in z direction
# tensile_strength is set to 1Pa, tensile_strength_residual = 0.5Pa, and limit value = 1E-5
# This allows the hardening of the tensile strength to be observed

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1.0
    value_residual = 0.5
    internal_0 = 0
    internal_limit = 1E-5
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.0
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = 0.8
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-8
    debug_pm_change = 1E-5
    debug_intnl_change = 1E-5
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1.0
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="aed23194-d17d-4e7c-98ed-1c0926b81d6b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar2.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in all directions, with lame mu = 1E6, so trial stress is 2Pa in principal directions
# tensile_strength is set to 1Pa
# Then the final stress should return to the all principal stresses being 1.0 (up to tolerance), and internal parameter = (0.5+0.5+0.5)E-6 = 1.5E-6
# Using &#x27;planar&#x27; Tensile plasticity

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
    outputs = console
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = tens
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2f70fb07-d134-424b-b5bf-e9665e48dfa8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_lode_zero.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = lode_zero
    internal_constraint_tolerance = 1 # irrelevant here
    yield_function_tolerance = 1      # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    block = 0
    lambda = 0.0
    shear_modulus = 1.0e7
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = cdp
    perform_finite_strain_rotations = false
  [../]
  [./cdp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 4
    smoothing_tol = 1E-5
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_lode_zero
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6c146daa-a931-4382-856f-ab3f1cd2ab46"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig7b.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 7 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Dashed black curve (2)
# Eigenstrain is globally applied. Single global elastic free energies.
# Supply the RADIUS parameter (10-35) on the command line to generate data
# for all curves in the plot.
#

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 32
  xmin = 0
  xmax = 100
  second_order = true
[]

[Problem]
  coord_type = RSPHERICAL
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Functions]
  [./diff]
    type = ParsedFunction
    value = &#x27;${RADIUS}-pos_c&#x27;
    vars = pos_c
    vals = pos_c
  [../]
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]
  [./w]
  [../]

  # Phase order parameter
  [./eta]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]

  [./Fe_fit]
    order = SECOND
  [../]
[]

[Modules/TensorMechanics/Master/all]
  add_variables = true
  eigenstrain_names = eigenstrain
[]

[Kernels]
  # Split Cahn-Hilliard kernels
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    args = &#x27;eta&#x27;
    kappa_name = kappa_c
    w = w
  [../]
  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta
    args = &#x27;c&#x27;
    mob_name = L
    f_name = F
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    mob_name = L
    kappa_name = kappa_eta
  [../]

  [./Fe]
    type = MaterialPropertyValue
    prop_name = Fe
    variable = Fe_fit
  [../]

  [./autoadjust]
    type = MaskedBodyForce
    variable = w
    function = diff
    mask = mask
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa_c kappa_eta&#x27;
    prop_values = &#x27;1.0 1.0 0.5     1&#x27;
  [../]

  # forcing function mask
  [./mask]
    type = ParsedMaterial
    f_name = mask
    function = grad/dt
    material_property_names = &#x27;grad dt&#x27;
  [../]
  [./grad]
    type = VariableGradientMaterial
    variable = c
    prop = grad
  [../]
  [./time]
    type = TimeStepMaterial
  [../]

  # global mechanical properties
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # eigenstrain as a function of phase
  [./eigenstrain]
    type = ComputeVariableEigenstrain
    eigen_base = &#x27;0.05 0.05 0.05 0 0 0&#x27;
    prefactor = h
    args = eta
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching]
    type = SwitchingFunctionMaterial
    function_name = h
    eta = eta
    h_order = SIMPLE
  [../]
  [./barrier]
    type = BarrierFunctionMaterial
    eta = eta
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(1-c)^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global chemical free energy
  [./chemical_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = Fc
    fa_name = Fc1
    fb_name = Fc2
    eta = eta
    args = &#x27;c&#x27;
    W = 4
  [../]

  # global elastic free energy
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;eta&#x27;
    output_properties = Fe
    derivative_order = 2
  [../]

  # free energy
  [./free_energy]
    type = DerivativeSumMaterial
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c eta&#x27;
    derivative_order = 2
  [../]
[]

[BCs]
  [./left_r]
    type = DirichletBC
    variable = disp_r
    boundary = &#x27;left&#x27;
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_c]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = c
    target = 0.582
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_eta]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = eta
    target = 0.5
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./c_min]
    type = ElementExtremeValue
    value_type = min
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    variable = &#x27;Fe_fit c w&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point =   &#x27;100 0 0&#x27;
    num_points = 5000
    sort_by = x
    outputs = vpp
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu&#x27;

  l_max_its = 30
  nl_max_its = 15
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 2.0e-9
  start_time = 0.0
  end_time = 100000.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 8
    iteration_window = 1
    dt = 1
  [../]

  [./Adaptivity]
    initial_adaptivity = 5
    interval = 10
    max_h_level = 5
    refine_fraction = 0.9
    coarsen_fraction = 0.1
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = radius_${RADIUS}/eigenstrain_pp
  [../]
  [./vpp]
    type = CSV
    delimiter = &#x27; &#x27;
    sync_times = &#x27;10 50 100 500 1000 5000 10000 50000 100000&#x27;
    sync_only = true
    time_data = true
    file_base = radius_${RADIUS}/eigenstrain_vpp
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="213459bd-86f7-47a6-83ff-71c2aabeb3b1"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="07fc40b4-3391-487a-8447-7a3fd3dcf7ab"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_4/plane4_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane4_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86d6e401-81e0-4d09-a651-1a81f3b05332"><div class="modal-content"><h4>modules/contact/test/tests/sliding_block/in_and_out/frictionless_lm.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  patch_size = 80
  [file]
    type = FileMeshGenerator
    file = sliding_elastic_blocks_2d.e
  []
  [secondary]
    input = file
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;3&#x27;
    new_block_id = &#x27;30&#x27;
  []
  [primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;2&#x27;
    new_block_id = &#x27;20&#x27;
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = false
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    strain = FINITE
    block = &#x27;1 2&#x27;
  [../]
[]

[Variables]
  [normal_lm]
    block = &#x27;30&#x27;
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = horizontal_movement
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = vertical_movement
  [../]
[]

[Materials]
  [./left]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1 2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1 2&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_ksp_ew&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 15
  dt = 0.1
  dtmin = 0.01
  l_max_its = 30
  nl_max_its = 20
  line_search = &#x27;none&#x27;
  timestep_tolerance = 1e-6
[]

[Debug]
  show_var_residual_norms = true
[]

[Outputs]
  sync_times = &#x27;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15&#x27;
  [out]
    type = Exodus
    sync_only = true
  []
  [dof]
    execute_on = &#x27;initial&#x27;
    type = DOFMap
  []
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
[]

[Functions]
  [./vertical_movement]
    type = ParsedFunction
    value = -t
  [../]
  [./horizontal_movement]
    type = ParsedFunction
    value = -0.04*sin(4*t)+0.02
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = 3
    primary = 2
    variable = normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
  [normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
[]

[Postprocessors]
  [./num_nl]
    type = NumNonlinearIterations
  [../]
  [lin]
    type = NumLinearIterations
  []
  [contact]
    type = ContactDOFSetSize
    variable = normal_lm
    subdomain = &#x27;30&#x27;
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="69af972b-e0c4-4907-8576-f57fe7f3a829"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s08.i</h4><pre class="moose-pre"><code class="language-text"># apply a sink flux on just one component of a 3-component, 2-phase system and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pwater frac_ph0_c0 pgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1.1
  [../]
[]

[Variables]
  [./pwater]
  [../]
  [./frac_ph0_c0]
    initial_condition = 0.3
  [../]
  [./pgas]
  [../]
[]

[ICs]
  [./pwater]
    type = FunctionIC
    variable = pwater
    function = y
  [../]
  [./pgas]
    type = FunctionIC
    variable = pgas
    function = y+3
  [../]
[]

[Kernels]
  [./mass_c0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = frac_ph0_c0
  [../]
  [./mass_c1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = pwater
  [../]
  [./mass_c2]
    type = PorousFlowMassTimeDerivative
    fluid_component = 2
    variable = pgas
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2.3
      density0 = 1.5
      thermal_expansion = 0
      viscosity = 2.1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;frac_ph0_c0 frac_ph0_c1 frac_ph1_c0 frac_ph1_c1&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.2 0 0 0 0.1 0 0 0 0.1&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
  [./frac_ph0_c1]
    initial_condition = 0.35
  [../]
  [./frac_ph1_c0]
    initial_condition = 0.1
  [../]
  [./frac_ph1_c1]
    initial_condition = 0.8
  [../]
[]

[Functions]
  [./mass1_00]
    type = ParsedFunction
    value = &#x27;fgas*vol*por*dens0gas*exp(pgas/bulkgas)*(1-pow(1+pow(al*(pgas-pwater),1.0/(1-m)),-m))+fwater*vol*por*dens0water*exp(pwater/bulkwater)*(pow(1+pow(al*(pgas-pwater),1.0/(1-m)),-m))&#x27;
    vars = &#x27;vol  por dens0gas pgas    pwater    bulkgas al  m   dens0water bulkwater fgas           fwater&#x27;
    vals = &#x27;0.25 0.1 1.1      pgas_00 pwater_00 1.3     1.1 0.5 1.5        2.3       frac_ph1_c1_00 frac_ph0_c1_00&#x27;
  [../]
  [./expected_mass_change1_00]
    type = ParsedFunction
    value = &#x27;frac*fcn*area*dt*pow(1-pow(1+pow(al*(pgas-pwater),1.0/(1-m)),-m), 2)&#x27;
    vars = &#x27;frac           fcn area dt  pgas    pwater    al m&#x27;
    vals = &#x27;frac_ph1_c1_00 100 0.5 1E-3 pgas_00 pwater_00 1.1 0.5&#x27;
  [../]
  [./mass1_00_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m1_00_prev  del_m1_00&#x27;
  [../]
[]

[Postprocessors]
  [./total_mass_comp0]
    type = PorousFlowFluidMass
    fluid_component = 0
  [../]
  [./total_mass_comp1]
    type = PorousFlowFluidMass
    fluid_component = 1
  [../]
  [./total_mass_comp2]
    type = PorousFlowFluidMass
    fluid_component = 2
  [../]
  [./frac_ph1_c1_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = frac_ph1_c1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./frac_ph0_c1_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = frac_ph0_c1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./flux_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = flux_out
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./pgas_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pgas
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./pwater_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pwater
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_00]
    type = FunctionValuePostprocessor
    function = mass1_00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_00_prev]
    type = FunctionValuePostprocessor
    function = mass1_00
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m1_00]
    type = FunctionValuePostprocessor
    function = expected_mass_change1_00
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m1_00_expect]
    type = FunctionValuePostprocessor
    function = mass1_00_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux_ph1_c1]
    type = PorousFlowSink
    boundary = &#x27;left&#x27;
    variable = pwater # sink applied to the mass_c1 Kernel
    use_mobility = false
    use_relperm = true
    mass_fraction_component = 1
    fluid_phase = 1
    flux_function = 100
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 100 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 0.01
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s08
  exodus = true
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="823d056e-aa62-4447-af58-2d5d69c273fd"><div class="modal-content"><h4>modules/porous_flow/examples/thm_example/2D.i</h4><pre class="moose-pre"><code class="language-text"># Two phase, temperature-dependent, with mechanics, radial with fine mesh, constant injection of cold co2 into a overburden-reservoir-underburden containing mostly water
# species=0 is water
# species=1 is co2
# phase=0 is liquid, and since massfrac_ph0_sp0 = 1, this is all water
# phase=1 is gas, and since massfrac_ph1_sp0 = 0, this is all co2
#
# The mesh used below has very high resolution, so the simulation takes a long time to complete.
# Some suggested meshes of different resolution:
# nx=50, bias_x=1.2
# nx=100, bias_x=1.1
# nx=200, bias_x=1.05
# nx=400, bias_x=1.02
# nx=1000, bias_x=1.01
# nx=2000, bias_x=1.003
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2000
  bias_x = 1.003
  xmin = 0.1
  xmax = 5000
  ny = 1
  ymin = 0
  ymax = 11
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  displacements = &#x27;disp_r disp_z&#x27;
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
  biot_coefficient = 1.0
[]

[Variables]
  [./pwater]
    initial_condition = 18.3e6
  [../]
  [./sgas]
    initial_condition = 0.0
  [../]
  [./temp]
    initial_condition = 358
  [../]
  [./disp_r]
  [../]
[]

[AuxVariables]
  [./rate]
  [../]
  [./disp_z]
  [../]
  [./massfrac_ph0_sp0]
    initial_condition = 1 # all H20 in phase=0
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0 # no H2O in phase=1
  [../]
  [./pgas]
    family = MONOMIAL
    order = FIRST
  [../]
  [./swater]
    family = MONOMIAL
    order = FIRST
  [../]
  [./stress_rr]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_tt]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[Kernels]
  [./mass_water_dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    use_displaced_mesh = false
    variable = pwater
  [../]
  [./flux_water]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    use_displaced_mesh = false
    variable = pwater
  [../]
  [./mass_co2_dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    use_displaced_mesh = false
    variable = sgas
  [../]
  [./flux_co2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    use_displaced_mesh = false
    variable = sgas
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    use_displaced_mesh = false
    variable = temp
  [../]
  [./advection]
    type = PorousFlowHeatAdvection
    use_displaced_mesh = false
    variable = temp
  [../]
  [./conduction]
    type = PorousFlowExponentialDecay
    use_displaced_mesh = false
    variable = temp
    reference = 358
    rate = rate
  [../]
  [./grad_stress_r]
    type = StressDivergenceRZTensors
    temperature = temp
    eigenstrain_names = thermal_contribution
    variable = disp_r
    use_displaced_mesh = false
    component = 0
  [../]
  [./poro_r]
    type = PorousFlowEffectiveStressCoupling
    variable = disp_r
    use_displaced_mesh = false
    component = 0
  [../]
[]

[AuxKernels]
  [./rate]
    type = FunctionAux
    variable = rate
    execute_on = timestep_begin
    function = decay_rate
  [../]
  [./pgas]
    type = PorousFlowPropertyAux
    property = pressure
    phase = 1
    variable = pgas
  [../]
  [./swater]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 0
    variable = swater
  [../]
  [./stress_rr]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_rr
    index_i = 0
    index_j = 0
  [../]
  [./stress_tt]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_tt
    index_i = 2
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 1
    index_j = 1
  [../]
[]

[Functions]
  [./decay_rate]
# Eqn(26) of the first paper of LaForce et al.
# Ka * (rho C)_a = 10056886.914
# h = 11
    type = ParsedFunction
    value = &#x27;sqrt(10056886.914/t)/11.0&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pwater sgas disp_r&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./water]
      type = SimpleFluidProperties
      bulk_modulus = 2.27e14
      density0 = 970.0
      viscosity = 0.3394e-3
      cv = 4149.0
      cp = 4149.0
      porepressure_coefficient = 0.0
      thermal_expansion = 0
    [../]
    [./co2]
      type = SimpleFluidProperties
      bulk_modulus = 2.27e14
      density0 = 516.48
      viscosity = 0.0393e-3
      cv = 2920.5
      cp = 2920.5
      porepressure_coefficient = 0.0
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = pwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./water]
    type = PorousFlowSingleComponentFluid
    fp = water
    phase = 0
  [../]
  [./gas]
    type = PorousFlowSingleComponentFluid
    fp = co2
    phase = 1
  [../]
  [./porosity_reservoir]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability_reservoir]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;2e-12 0 0  0 0 0  0 0 0&#x27;
  [../]
  [./relperm_liquid]
    type = PorousFlowRelativePermeabilityCorey
    n = 4
    phase = 0
    s_res = 0.200
    sum_s_res = 0.405
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityBC
    phase = 1
    s_res = 0.205
    sum_s_res = 0.405
    nw_phase = true
    lambda = 2
  [../]
  [./thermal_conductivity_reservoir]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0 0 0  0 1.320 0  0 0 0&#x27;
    wet_thermal_conductivity = &#x27;0 0 0  0 3.083 0  0 0 0&#x27;
  [../]
  [./internal_energy_reservoir]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1100
    density = 2350.0
  [../]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    shear_modulus = 6.0E9
    poissons_ratio = 0.2
  [../]
  [./strain]
    type = ComputeAxisymmetricRZSmallStrain
    eigenstrain_names = &#x27;thermal_contribution ini_stress&#x27;
  [../]
  [./ini_strain]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;-12.8E6 0 0  0 -51.3E6 0  0 0 -12.8E6&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./thermal_contribution]
    type = ComputeThermalExpansionEigenstrain
    temperature = temp
    stress_free_temperature = 358
    thermal_expansion_coeff = 5E-6
    eigenstrain_name = thermal_contribution
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
[]

[BCs]
  [./outer_pressure_fixed]
    type = DirichletBC
    boundary = right
    value = 18.3e6
    variable = pwater
  [../]
  [./outer_saturation_fixed]
    type = DirichletBC
    boundary = right
    value = 0.0
    variable = sgas
  [../]
  [./outer_temp_fixed]
    type = DirichletBC
    boundary = right
    value = 358
    variable = temp
  [../]
  [./fixed_outer_r]
    type = DirichletBC
    variable = disp_r
    value = 0
    boundary = right
  [../]
  [./co2_injection]
    type = PorousFlowSink
    boundary = left
    variable = sgas
    use_mobility = false
    use_relperm = false
    fluid_phase = 1
    flux_function = &#x27;min(t/100.0,1)*(-2.294001475)&#x27; # 5.0E5 T/year = 15.855 kg/s, over area of 2Pi*0.1*11
  [../]
  [./cold_co2]
    type = DirichletBC
    boundary = left
    variable = temp
    value = 294
  [../]
  [./cavity_pressure_x]
    type = Pressure
    boundary = left
    variable = disp_r
    component = 0
    postprocessor = p_bh # note, this lags
    use_displaced_mesh = false
  [../]
[]

[Postprocessors]
  [./p_bh]
    type = PointValue
    variable = pwater
    point = &#x27;0.1 0 0&#x27;
    execute_on = timestep_begin
    use_displaced_mesh = false
  [../]
[]

[VectorPostprocessors]
  [./ptsuss]
    type = LineValueSampler
    use_displaced_mesh = false
    start_point = &#x27;0.1 0 0&#x27;
    end_point = &#x27;5000 0 0&#x27;
    sort_by = x
    num_points = 50000
    outputs = csv
    variable = &#x27;pwater temp sgas disp_r stress_rr stress_tt&#x27;
  [../]
[]

[Preconditioning]
  active = &#x27;mumps&#x27;
  [./smp]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E2       1E-5        500&#x27;
  [../]
  [./mumps]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -pc_factor_mat_solver_package -pc_factor_shift_type -snes_rtol -snes_atol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      lu       mumps                         NONZERO               1E-5       1E2       50&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1.5768e8
  #dtmax = 1e6
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 1
    growth_factor = 1.1
  [../]
[]

[Outputs]
  print_linear_residuals = false
  sync_times = &#x27;3600 86400 2.592E6 1.5768E8&#x27;
  perf_graph = true
  exodus = true
  [./csv]
    type = CSV
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8b7f6392-16e8-4f9f-af25-1b3045596542"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform5.i</h4><pre class="moose-pre"><code class="language-text"># apply nonuniform stretch in x, y and z directions using
# Lame lambda = 0.7E7, Lame mu = 1.0E7,
# trial_stress(0, 0) = 2.9
# trial_stress(1, 1) = 10.9
# trial_stress(2, 2) = 14.9
# With tensile_strength = 2, decaying to zero at internal parameter = 4E-7
# via a Cubic, the algorithm should return to:
# internal parameter = 2.26829E-7
# trace(stress) = 0.799989 = tensile_strength
# stress(0, 0) = -6.4
# stress(1, 1) = 1.6
# stress(2, 2) = 5.6

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 2
    value_residual = 0
    internal_limit = 4E-7
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1
    value_residual = 0
    internal_limit = 1E-8
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-11
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform5
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0fed1c60-d33e-45df-b022-04e0cd70baa4"><div class="modal-content"><h4>modules/phase_field/examples/multiphase/GrandPotential3Phase.i</h4><pre class="moose-pre"><code class="language-text"># This is an example of implementation of the multi-phase, multi-order parameter
# grand potential based phase-field model described in Phys. Rev. E, 98, 023309
# (2019). It includes 3 phases with 1 grain of each phase. This example was used
# to generate the results shown in Fig. 3 of the paper.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 60
  xmin = -15
  xmax = 15
[]

[Variables]
  [./w]
  [../]
  [./etaa0]
  [../]
  [./etab0]
  [../]
  [./etad0]
  [../]
[]

[ICs]
  [./IC_etaa0]
    type = FunctionIC
    variable = etaa0
    function = ic_func_etaa0
  [../]
  [./IC_etab0]
    type = FunctionIC
    variable = etab0
    function = ic_func_etab0
  [../]
  [./IC_etad0]
    type = ConstantIC
    variable = etad0
    value = 0.1
  [../]
  [./IC_w]
    type = FunctionIC
    variable = w
    function = ic_func_w
  [../]
[]

[Functions]
  [./ic_func_etaa0]
    type = ParsedFunction
    value = &#x27;0.9*0.5*(1.0-tanh((x)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_etab0]
    type = ParsedFunction
    value = &#x27;0.9*0.5*(1.0+tanh((x)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_w]
    type = ParsedFunction
    value = 0
  [../]
[]

[Kernels]
# Order parameter eta_alpha0
  [./ACa0_bulk]
    type = ACGrGrMulti
    variable = etaa0
    v =           &#x27;etab0 etad0&#x27;
    gamma_names = &#x27;gab   gad&#x27;
  [../]
  [./ACa0_sw]
    type = ACSwitching
    variable = etaa0
    Fj_names  = &#x27;omegaa omegab omegad&#x27;
    hj_names  = &#x27;ha     hb     hd&#x27;
    args = &#x27;etab0 etad0 w&#x27;
  [../]
  [./ACa0_int]
    type = ACInterface
    variable = etaa0
    kappa_name = kappa
  [../]
  [./ea0_dot]
    type = TimeDerivative
    variable = etaa0
  [../]
# Order parameter eta_beta0
  [./ACb0_bulk]
    type = ACGrGrMulti
    variable = etab0
    v =           &#x27;etaa0 etad0&#x27;
    gamma_names = &#x27;gab   gbd&#x27;
  [../]
  [./ACb0_sw]
    type = ACSwitching
    variable = etab0
    Fj_names  = &#x27;omegaa omegab omegad&#x27;
    hj_names  = &#x27;ha     hb     hd&#x27;
    args = &#x27;etaa0 etad0 w&#x27;
  [../]
  [./ACb0_int]
    type = ACInterface
    variable = etab0
    kappa_name = kappa
  [../]
  [./eb0_dot]
    type = TimeDerivative
    variable = etab0
  [../]
# Order parameter eta_delta0
  [./ACd0_bulk]
    type = ACGrGrMulti
    variable = etad0
    v =           &#x27;etaa0 etab0&#x27;
    gamma_names = &#x27;gad   gbd&#x27;
  [../]
  [./ACd0_sw]
    type = ACSwitching
    variable = etad0
    Fj_names  = &#x27;omegaa omegab omegad&#x27;
    hj_names  = &#x27;ha     hb     hd&#x27;
    args = &#x27;etaa0 etab0 w&#x27;
  [../]
  [./ACd0_int]
    type = ACInterface
    variable = etad0
    kappa_name = kappa
  [../]
  [./ed0_dot]
    type = TimeDerivative
    variable = etad0
  [../]
#Chemical potential
  [./w_dot]
    type = SusceptibilityTimeDerivative
    variable = w
    f_name = chi
    args = &#x27;etaa0 etab0 etad0&#x27;
  [../]
  [./Diffusion]
    type = MatDiffusion
    variable = w
    diffusivity = Dchi
    args = &#x27;&#x27;
  [../]
  [./coupled_etaa0dot]
    type = CoupledSwitchingTimeDerivative
    variable = w
    v = etaa0
    Fj_names = &#x27;rhoa rhob rhod&#x27;
    hj_names = &#x27;ha   hb   hd&#x27;
    args = &#x27;etaa0 etab0 etad0&#x27;
  [../]
  [./coupled_etab0dot]
    type = CoupledSwitchingTimeDerivative
    variable = w
    v = etab0
    Fj_names = &#x27;rhoa rhob rhod&#x27;
    hj_names = &#x27;ha   hb   hd&#x27;
    args = &#x27;etaa0 etab0 etad0&#x27;
  [../]
  [./coupled_etad0dot]
    type = CoupledSwitchingTimeDerivative
    variable = w
    v = etad0
    Fj_names = &#x27;rhoa rhob rhod&#x27;
    hj_names = &#x27;ha   hb   hd&#x27;
    args = &#x27;etaa0 etab0 etad0&#x27;
  [../]
[]

[Materials]
  [./ha_test]
    type = SwitchingFunctionMultiPhaseMaterial
    h_name = ha
    all_etas = &#x27;etaa0 etab0 etad0&#x27;
    phase_etas = &#x27;etaa0&#x27;
  [../]
  [./hb_test]
    type = SwitchingFunctionMultiPhaseMaterial
    h_name = hb
    all_etas = &#x27;etaa0 etab0 etad0&#x27;
    phase_etas = &#x27;etab0&#x27;
  [../]
  [./hd_test]
    type = SwitchingFunctionMultiPhaseMaterial
    h_name = hd
    all_etas = &#x27;etaa0 etab0 etad0&#x27;
    phase_etas = &#x27;etad0&#x27;
  [../]
  [./omegaa]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = omegaa
    material_property_names = &#x27;Vm ka caeq&#x27;
    function = &#x27;-0.5*w^2/Vm^2/ka-w/Vm*caeq&#x27;
    derivative_order = 2
  [../]
  [./omegab]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = omegab
    material_property_names = &#x27;Vm kb cbeq&#x27;
    function = &#x27;-0.5*w^2/Vm^2/kb-w/Vm*cbeq&#x27;
    derivative_order = 2
  [../]
  [./omegad]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = omegad
    material_property_names = &#x27;Vm kd cdeq&#x27;
    function = &#x27;-0.5*w^2/Vm^2/kd-w/Vm*cdeq&#x27;
    derivative_order = 2
  [../]
  [./rhoa]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = rhoa
    material_property_names = &#x27;Vm ka caeq&#x27;
    function = &#x27;w/Vm^2/ka + caeq/Vm&#x27;
    derivative_order = 2
  [../]
  [./rhob]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = rhob
    material_property_names = &#x27;Vm kb cbeq&#x27;
    function = &#x27;w/Vm^2/kb + cbeq/Vm&#x27;
    derivative_order = 2
  [../]
  [./rhod]
    type = DerivativeParsedMaterial
    args = &#x27;w&#x27;
    f_name = rhod
    material_property_names = &#x27;Vm kd cdeq&#x27;
    function = &#x27;w/Vm^2/kd + cdeq/Vm&#x27;
    derivative_order = 2
  [../]
  [./c]
    type = ParsedMaterial
    material_property_names = &#x27;Vm rhoa rhob rhod ha hb hd&#x27;
    function = &#x27;Vm * (ha * rhoa + hb * rhob + hd * rhod)&#x27;
    f_name = c
  [../]
  [./const]
    type = GenericConstantMaterial
    prop_names =  &#x27;kappa_c  kappa   L   D    Vm   ka    caeq kb    cbeq  kd    cdeq  gab gad gbd  mu  tgrad_corr_mult&#x27;
    prop_values = &#x27;0        1       1.0 1.0  1.0  10.0  0.1  10.0  0.9   10.0  0.5   1.5 1.5 1.5  1.0 0.0&#x27;
  [../]
  [./Mobility]
    type = DerivativeParsedMaterial
    f_name = Dchi
    material_property_names = &#x27;D chi&#x27;
    function = &#x27;D*chi&#x27;
    derivative_order = 2
  [../]
  [./chi]
    type = DerivativeParsedMaterial
    f_name = chi
    material_property_names = &#x27;Vm ha(etaa0,etab0,etad0) ka hb(etaa0,etab0,etad0) kb hd(etaa0,etab0,etad0) kd&#x27;
    function = &#x27;(ha/ka + hb/kb + hd/kd) / Vm^2&#x27;
    args = &#x27;etaa0 etab0 etad0&#x27;
    derivative_order = 2
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[VectorPostprocessors]
  [./etaa0]
    type = LineValueSampler
    variable = etaa0
    start_point = &#x27;-15 0 0&#x27;
    end_point = &#x27;15 0 0&#x27;
    num_points = 61
    sort_by = x
    execute_on = &#x27;initial timestep_end final&#x27;
  [../]
  [./etab0]
    type = LineValueSampler
    variable = etab0
    start_point = &#x27;-15 0 0&#x27;
    end_point = &#x27;15 0 0&#x27;
    num_points = 61
    sort_by = x
    execute_on = &#x27;initial timestep_end final&#x27;
  [../]
  [./etad0]
    type = LineValueSampler
    variable = etad0
    start_point = &#x27;-15 0 0&#x27;
    end_point = &#x27;15 0 0&#x27;
    num_points = 61
    sort_by = x
    execute_on = &#x27;initial timestep_end final&#x27;
  [../]
[]

[Executioner]
  type = Transient
  nl_max_its = 15
  scheme = bdf2
  solve_type = PJFNK
  petsc_options_iname = -pc_type
  petsc_options_value = asm
  l_max_its = 15
  l_tol = 1.0e-3
  nl_rel_tol = 1.0e-8
  start_time = 0.0
  num_steps = 20
  nl_abs_tol = 1e-10
  dt = 1.0
[]

[Outputs]
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial timestep_end final&#x27;
    interval = 1
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;initial timestep_end final&#x27;
    interval = 1
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f19b8692-c025-41d6-9060-c401355b8dc9"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_2/brick2_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick2_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_x26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_x
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./disp_y26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5

[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x7 disp_y7 disp_x26 disp_y26 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4dd30d78-0c5d-424c-a179-839fd7411cd2"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_1D.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
# 1D version
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 1
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1dc245cc-1702-4924-983c-62e5c144e5e1"><div class="modal-content"><h4>modules/combined/test/tests/surface_tension_KKS/surface_tension_KKS.i</h4><pre class="moose-pre"><code class="language-text">#
# KKS coupled with elasticity. Physical parameters for matrix and precipitate phases
# are gamma and gamma-prime phases, respectively, in the Ni-Al system.
# Parameterization is as described in L.K. Aagesen et al., Computational Materials
# Science, 140, 10-21 (2017), with isotropic elastic properties in both phases
# and without eigenstrain.
#

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 200
  xmax = 200
[]

[Problem]
  coord_type = RSPHERICAL
[]

[GlobalParams]
  displacements = &#x27;disp_x&#x27;
[]

[Variables]
  # order parameter
  [./eta]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute concentration
  [./c]
    order = FIRST
    family = LAGRANGE
  [../]

  # chemical potential
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute phase concentration (matrix)
  [./cm]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.13
  [../]
  # solute phase concentration (precipitate)
  [./cp]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.235
  [../]
[]

[AuxVariables]
  [./energy_density]
    family = MONOMIAL
  [../]
  [./extra_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./extra_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./extra_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./strain_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[ICs]
  [./eta_ic]
    variable = eta
    type = FunctionIC
    function = ic_func_eta
  [../]
  [./c_ic]
    variable = c
    type = FunctionIC
    function = ic_func_c
  [../]
[]

[Functions]
  [./ic_func_eta]
    type = ParsedFunction
    value = &#x27;r:=sqrt(x^2+y^2+z^2);0.5*(1.0-tanh((r-r0)/delta_eta/sqrt(2.0)))&#x27;
    vars = &#x27;delta_eta r0&#x27;
    vals = &#x27;6.431     100&#x27;
  [../]
  [./ic_func_c]
    type = ParsedFunction
    value = &#x27;r:=sqrt(x^2+y^2+z^2);eta_an:=0.5*(1.0-tanh((r-r0)/delta/sqrt(2.0)));0.235*eta_an^3*(6*eta_an^2-15*eta_an+10)+0.13*(1-eta_an^3*(6*eta_an^2-15*eta_an+10))&#x27;
    vars = &#x27;delta r0&#x27;
    vals = &#x27;6.431 100&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    generate_output = &#x27;hydrostatic_stress stress_xx stress_yy stress_zz&#x27;
  [../]
[]


[Kernels]

  # enforce c = (1-h(eta))*cm + h(eta)*cp
  [./PhaseConc]
    type = KKSPhaseConcentration
    ca       = cm
    variable = cp
    c        = c
    eta      = eta
  [../]

  # enforce pointwise equality of chemical potentials
  [./ChemPotVacancies]
    type = KKSPhaseChemicalPotential
    variable = cm
    cb       = cp
    fa_name  = f_total_matrix
    fb_name  = f_total_ppt
  [../]

  #
  # Cahn-Hilliard Equation
  #
  [./CHBulk]
    type = KKSSplitCHCRes
    variable = c
    ca       = cm
    fa_name  = f_total_matrix
    w        = w
  [../]

  [./dcdt]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./ckernel]
    type = SplitCHWRes
    mob_name = M
    variable = w
  [../]

  #
  # Allen-Cahn Equation
  #
  [./ACBulkF]
    type = KKSACBulkF
    variable = eta
    fa_name  = f_total_matrix
    fb_name  = f_total_ppt
    w        = 0.0033
    args = &#x27;cp cm&#x27;
  [../]
  [./ACBulkC]
    type = KKSACBulkC
    variable = eta
    ca       = cm
    cb       = cp
    fa_name  = f_total_matrix
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    kappa_name = kappa
  [../]
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
[]

[AuxKernels]
  [./extra_xx]
    type = RankTwoAux
    rank_two_tensor = extra_stress
    index_i = 0
    index_j = 0
    variable = extra_xx
  [../]
  [./extra_yy]
    type = RankTwoAux
    rank_two_tensor = extra_stress
    index_i = 1
    index_j = 1
    variable = extra_yy
  [../]
  [./extra_zz]
    type = RankTwoAux
    rank_two_tensor = extra_stress
    index_i = 2
    index_j = 2
    variable = extra_zz
  [../]
  [./strain_xx]
    type = RankTwoAux
    rank_two_tensor = mechanical_strain
    index_i = 0
    index_j = 0
    variable = strain_xx
  [../]
  [./strain_yy]
    type = RankTwoAux
    rank_two_tensor = mechanical_strain
    index_i = 1
    index_j = 1
    variable = strain_yy
  [../]
  [./strain_zz]
    type = RankTwoAux
    rank_two_tensor = mechanical_strain
    index_i = 2
    index_j = 2
    variable = strain_zz
  [../]
[]

[Materials]
  # Chemical free energy of the matrix
  [./fm]
    type = DerivativeParsedMaterial
    f_name = fm
    args = &#x27;cm&#x27;
    function = &#x27;6.55*(cm-0.13)^2&#x27;
  [../]
# Elastic energy of the matrix
  [./elastic_free_energy_m]
    type = ElasticEnergyMaterial
    base_name = matrix
    f_name = fe_m
    args = &#x27; &#x27;
  [../]
# Total free energy of the matrix
  [./Total_energy_matrix]
    type = DerivativeSumMaterial
    f_name = f_total_matrix
    sum_materials = &#x27;fm fe_m&#x27;
    args = &#x27;cm&#x27;
  [../]

  # Free energy of the precipitate phase
  [./fp]
    type = DerivativeParsedMaterial
    f_name = fp
    args = &#x27;cp&#x27;
    function = &#x27;6.55*(cp-0.235)^2&#x27;
  [../]

# Elastic energy of the precipitate
  [./elastic_free_energy_p]
    type = ElasticEnergyMaterial
    base_name = ppt
    f_name = fe_p
    args = &#x27; &#x27;
  [../]

# Total free energy of the precipitate
  [./Total_energy_ppt]
    type = DerivativeSumMaterial
    f_name = f_total_ppt
    sum_materials = &#x27;fp fe_p&#x27;
    args = &#x27;cp&#x27;
  [../]

# Total elastic energy
  [./Total_elastic_energy]
    type = DerivativeTwoPhaseMaterial
    eta = eta
    f_name = f_el_mat
    fa_name = fe_m
    fb_name = fe_p
    outputs = exodus
    W = 0
  [../]

  # h(eta)
  [./h_eta]
    type = SwitchingFunctionMaterial
    h_order = HIGH
    eta = eta
  [../]

  # g(eta)
  [./g_eta]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta
    outputs = exodus
  [../]

  # constant properties
  [./constants]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa&#x27;
    prop_values = &#x27;0.7 0.7 0.1365&#x27;
  [../]

  #Mechanical properties
  [./Stiffness_matrix]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;74.25 14.525&#x27;
    base_name = matrix
    fill_method = symmetric_isotropic
  [../]
  [./Stiffness_ppt]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;74.25 14.525&#x27;
    base_name = ppt
    fill_method = symmetric_isotropic
  [../]
  [./strain_matrix]
    type = ComputeRSphericalSmallStrain
    base_name = matrix
  [../]
  [./strain_ppt]
    type = ComputeRSphericalSmallStrain
    base_name = ppt
  [../]
  [./stress_matrix]
    type = ComputeLinearElasticStress
    base_name = matrix
  [../]
  [./stress_ppt]
    type = ComputeLinearElasticStress
    base_name = ppt
  [../]
  [./global_stress]
    type = TwoPhaseStressMaterial
    base_A = matrix
    base_B = ppt
  [../]
  [./interface_stress]
    type = ComputeSurfaceTensionKKS
    v = eta
    kappa_name = kappa
    w = 0.0033
  [../]
[]

[BCs]
  [./left_r]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
[]

#
# Precondition using handcoded off-diagonal terms
#
[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type   -sub_pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;asm       lu            nonzero&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-9
  nl_abs_tol = 1.0e-10

  num_steps = 2
  dt = 0.5
[]

[Outputs]
  exodus = true
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2551e0c3-961a-45eb-b8c2-549da6b19465"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad_locs.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
  [S_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
[]

[Samplers]
  [grid]
    type = CartesianProduct
    linear_space_items = &#x27;2.5 0.5 10  2.5 0.5 10&#x27;
  []
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [local_sense]
    type = PolynomialChaosLocalSensitivity
    pc_name = poly_chaos
    local_points_sampler = grid
    local_points = &#x27;3.14159 3.14159 2.7182 3.14159 3.14159 2.7182 2.7182 2.7182&#x27;
    output_points = true
    sensitivity_parameters = &#x27;0 1&#x27;
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="649a3194-d429-4d7b-a8c9-0f9b09f4fb68"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard1.i</h4><pre class="moose-pre"><code class="language-text"># Checking internal-parameter evolution
# A single element is stretched by 1E-6*t in z directions.
#
# Young&#x27;s modulus = 20 MPa.  Tensile strength = 10 Pa
#
# There are two time steps.
# In the first
# trial stress_zz = Youngs Modulus*Strain = 2E7*1E-6 = 20 Pa
# so this returns to stress_zz = 10 Pa, and half of the deformation
# goes to plastic strain, yielding ep_zz_plastic = 0.5E-6
# In the second
# trial stress_zz = 10 + Youngs Modulus*(Strain increment) = 10 + 2E7*1E-6 = 30 Pa
# so this returns to stress_zz = 10 Pa, and all of the deformation
# goes to plastic strain, yielding ep_zz_plastic increment = 1E-6,
# so total plastic strain_zz = 1.5E-6.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 0
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 0
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = 1E-6*t
  [../]
[]

[AuxVariables]
  [./wpt_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./wpt_internal]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wpt_internal
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./wpt_internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wpt_internal
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-11
  [../]
[]


[Executioner]
  end_time = 2
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7a7fbf71-012a-4c9e-ab10-49d1bc86930c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface20.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.1E-6m in y direction and 1.7E-6 in z direction.
# trial stress_yy = 1.1 and stress_zz = 1.7
#
# Then all yield functions will activate
# However, there is linear dependence.  SimpleTester1 will be rutned off.
# The algorithm will return to
# stress_yy=0.5 and stress_zz=1
# internal0=0.1, internal2=0.6


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.7E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface20
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="277a4991-e615-48b0-b469-425549912e86"><div class="modal-content"><h4>modules/phase_field/test/tests/Nucleation/parallel.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 100
  nz = 0
  xmin = 0
  xmax = 20
  ymin = 0
  ymax = 20
[]

[GlobalParams]
  derivative_order = 2
[]

[Variables]
  [./c]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Kernels]
  [./c]
    type = Diffusion
    variable = c
  [../]
  [./dt]
    type = TimeDerivative
    variable = c
  [../]
[]

[Materials]
  [./nucleation]
    type = DiscreteNucleation
    op_names  = c
    op_values = 1
    map = map
  [../]
[]

[UserObjects]
  [./inserter]
    type = DiscreteNucleationInserter
    hold_time = 1
    probability = 0.01
  [../]
  [./map]
    type = DiscreteNucleationMap
    radius = 4
    periodic = c
    inserter = inserter
  [../]
[]

[Postprocessors]
  [./sum]
    type = ElementIntegralMaterialProperty
    mat_prop = F
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  num_steps = 10
  dt = 0.1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./out]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9a7494a6-e0f6-4132-86d0-45d279432b92"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_native.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = native
    internal_constraint_tolerance = 1 # irrelevant here
    yield_function_tolerance = 1      # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = cdp
    perform_finite_strain_rotations = false
  [../]
  [./cdp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 4
    smoothing_tol = 1E-5
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_native
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="60f1c32c-f322-46bd-bbca-6c21cc2ed5bc"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/rd03.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  file = gold/rd02.e
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;2E4 1E6&#x27;
    x = &#x27;0 1E6&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.336
    alpha = 1.43e-4
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      viscosity = 1.01e-3
      density0 = 1000
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityVG
    m = 0.336
    seff_turnover = 0.99
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.33
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.295E-12 0 0  0 0.295E-12 0  0 0 0.295E-12&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_from_file_timestep = LATEST
    initial_from_file_var = pressure
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-10 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./base]
    type = DirichletBC
    boundary = left
    value = 0.0
    variable = pressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;6 0 0&#x27;
    sort_by = x
    num_points = 121
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 8.2944E6

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = rd03
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
  [./along_line]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="160a5183-b5a8-4603-8546-671999688095"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_advection/heat_advection_1d_KT.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, heat advecting with a moving fluid
# Using the Kuzmin-Turek stabilization scheme
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 50
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./temp]
    initial_condition = 200
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = &#x27;1-x&#x27;
  [../]
[]

[BCs]
  [./pp0]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1
  [../]
  [./pp1]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
  [./spit_heat]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 300
  [../]
  [./suck_heat]
    type = DirichletBC
    variable = temp
    boundary = right
    value = 200
  [../]
[]

[Kernels]
  [./mass_dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./fluid_advection]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = pp
    advective_flux_calculator = fluid_advective_flux
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./heat_advection]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = temp
    advective_flux_calculator = heat_advective_flux
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 1.3
  [../]
  [./fluid_advective_flux]
    type = PorousFlowAdvectiveFluxCalculatorSaturated
    flux_limiter_type = superbee
  [../]
  [./heat_advective_flux]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedHeat
    flux_limiter_type = superbee
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 100
      density0 = 1000
      viscosity = 4.4
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.0
    density = 125
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./PS]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.01
  end_time = 0.6
[]

[VectorPostprocessors]
  [./T]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 51
    sort_by = x
    variable = temp
  [../]
[]

[Outputs]
  file_base = heat_advection_1d_KT
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.6&#x27;
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b1d083e6-3bd5-4ad1-a7e4-01c33786eac9"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/unconsolidated_undrained.i</h4><pre class="moose-pre"><code class="language-text"># An unconsolidated-undrained test is performed.
# A sample&#x27;s boundaries are impermeable.  The sample is
# squeezed by a uniform mechanical pressure, and the
# rise in porepressure is observed.
#
# Expect:
# volumetricstrain = -MechanicalPressure/UndrainedBulk
# porepressure = SkemptonCoefficient*MechanicalPressure
# stress_zz = -MechanicalPresure + BiotCoefficient*porepressure
#
# Parameters:
# Biot coefficient = 0.3
# Porosity = 0.1
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1/0.3 = 3.333333
# 1/Biot modulus = (1 - 0.3)*(0.3 - 0.1)/2 + 0.1*0.3 = 0.1. BiotModulus = 10
# Undrained Bulk modulus = 2 + 0.3^2*10 = 2.9
# Skempton coefficient = 0.3*10/2.9 = 1.034483
#
# The mechanical pressure is applied using Neumann BCs,
# since the Neumann BCs are setting stressTOTAL.
#
# MechanicalPressure = 0.1*t  (ie, totalstress_zz = total_stress_xx = totalstress_yy = -0.1*t)
#
# Expect:
# disp_z = volumetricstrain/3 = -MechanicalPressure/3/2.9 = -0.1149*0.1*t
# prorepressure = 1.034483*0.1*t
# stress_zz = -0.1*t + 0.3*1.034483*0.1*t = -0.68966*0.1*t


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./pressure_x]
    type = FunctionNeumannBC
    variable = disp_x
    function = -0.1*t
    boundary = &#x27;right&#x27;
  [../]
  [./pressure_y]
    type = FunctionNeumannBC
    variable = disp_y
    function = -0.1*t
    boundary = &#x27;top&#x27;
  [../]
  [./pressure_z]
    type = FunctionNeumannBC
    variable = disp_z
    function = -0.1*t
    boundary = &#x27;front&#x27;
  [../]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.3
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = unconsolidated_undrained
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="44f0599c-9f14-4be2-9ae0-d73df25d3582"><div class="modal-content"><h4>modules/phase_field/test/tests/conserved_noise/normal.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmin = 0.0
  xmax = 10.0
  ymin = 0.0
  ymax = 10.0
  elem_type = QUAD4
[]

[Variables]
  [./c]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.9
  [../]
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
   type = SMP
   off_diag_row = &#x27;w c&#x27;
   off_diag_column = &#x27;c w&#x27;
  [../]
[]

[Kernels]
  [./cres]
    type = SplitCHMath
    variable = c
    kappa_name = kappa_c
    w = w
  [../]

  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]

  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  [./conserved_langevin]
    type = ConservedLangevinNoise
    amplitude = 0.5
    variable = w
    noise = normal_noise
  []
[]

[BCs]
  [./Periodic]
    [./all]
      variable = &#x27;c w&#x27;
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./constant]
    type = GenericConstantMaterial
    prop_names  = &#x27;M kappa_c&#x27;
    prop_values = &#x27;1.0 2.0&#x27;
  [../]
[]

[UserObjects]
  [./normal_noise]
    type = ConservedNormalNoise
  [../]
[]

[Postprocessors]
  [./total_c]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial timestep_end&#x27;
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = &#x27;BDF2&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  l_max_its = 30
  l_tol = 1.0e-3

  nl_max_its = 30
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  dt = 10.0
  num_steps = 4
[]

[Outputs]
  file_base = normal
  exodus = true
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f3a81fe6-7abd-41ee-8ab1-80cbff9e758f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_inner_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = inner_tip
    internal_constraint_tolerance = 1 # irrelevant here
    yield_function_tolerance = 1      # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = cdp
    perform_finite_strain_rotations = false
  [../]
  [./cdp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 4
    smoothing_tol = 1E-5
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_inner_tip
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="75bd4152-d542-4fc7-b84d-7843a061a429"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_outer_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 8
    mc_interpolation_scheme = outer_tip
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-13
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_outer_tip
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2fa8c19a-c3fa-4c9a-b797-8c4c05ae96ea"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="233ffcb8-8e48-4588-9264-f6e1d29ecbf8"><div class="modal-content"><h4>test/tests/nodalkernels/constraint_enforcement/vi-bounding.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=100
num_steps=10

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
[]

[AuxVariables]
  [bounds][]
[]

[Bounds]
  [./u_upper_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = upper
    bound_value = ${l}
  [../]
  [./u_lower_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = lower
    bound_value = 0
  [../]
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type -snes_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic                 vinewtonrsls&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4df6c5b8-259b-4705-8278-9b291d5ed83b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/except1.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 45
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 1
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1967a1fa-542e-4908-81fd-02e7036c314d"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e36ed95a-a6dd-4c86-a651-1793ce9f9499"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/half_symm_q4/hertz_cyl_half_1deg_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_half_1deg.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 3.5&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_horz]
    type = PiecewiseLinear
    x = &#x27;0. 1. 3.5&#x27;
    y = &#x27;0. 0.0 0.0014&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 2
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 2
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 4
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 4
  [../]
  [./disp_x226]
    type = NodalVariableValue
    nodeid = 225
    variable = disp_x
  [../]
  [./disp_y226]
    type = NodalVariableValue
    nodeid = 225
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disp_ramp_vert
  [../]
  [./top_x_disp]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = disp_ramp_horz
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
  [./stuff5_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;5&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff5_strain]
    type = ComputeFiniteStrain
    block = &#x27;5&#x27;
  [../]
  [./stuff5_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;5&#x27;
  [../]
  [./stuff6_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;6&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff6_strain]
    type = ComputeFiniteStrain
    block = &#x27;6&#x27;
  [../]
  [./stuff6_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;6&#x27;
  [../]
  [./stuff7_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;7&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff7_strain]
    type = ComputeFiniteStrain
    block = &#x27;7&#x27;
  [../]
  [./stuff7_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;7&#x27;
  [../]
[]

[Executioner]
  type = Transient

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-6
  nl_rel_tol = 1e-5
  l_max_its = 100
  nl_max_its = 200

  start_time = 0.0
  end_time = 3.5
  l_tol = 1e-3
  dt = 0.1
  dtmin = 0.1
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./chkfile2]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x226 disp_y226 top_react_x top_react_y&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 2
    secondary = 3
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8ec7470a-e6ce-4a52-908e-f163edcceb6a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/four_surface24.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 2 and strength = 3.1
# SimpleTester3 with a = 2 and b = 1 and strength = 3.1
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.1E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 2.1 and stress_zz = 3.0
#
# This is similar to four_surface14.i, and a description is found there.
# The result should be stress_zz=1=stress_yy, with internal0=2
# and internal1=1.1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f3
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
  [./int3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int3
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 2
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple3]
    type = TensorMechanicsPlasticSimpleTester
    a = 2
    b = 1
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2 simple3&#x27;
    deactivation_scheme = &#x27;optimized_to_safe&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = four_surface24
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f645c21c-20c4-45a1-8f93-d32717a6e8f2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform5.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out
# Use &#x27;cap&#x27; smoothing


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.9E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 50
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.8726646 # 50deg
    rate = 3000.0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    tip_scheme = cap
    mc_tip_smoother = 0
    cap_start = 3
    cap_rate = 0.8
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-8
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 150
  dt = 5
  type = Transient
[]


[Outputs]
  file_base = small_deform5
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="76a2eff9-415b-42de-b257-a9b2bf3af434"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface16.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 3.0E-6m in y direction and 2.1E-6 in z direction.
# trial stress_yy = 3.0 and stress_zz = 2.1
#
# A complicated return will follow, with various contraints being
# deactivated, kuhn-tucker failing, line-searching, etc, but
# the result should be
# stress_yy=1=stress_zz, and internal0=1.1 internal1=2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface16
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="095fca25-7873-43ea-948c-2cd24f9a6ebf"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s02.i</h4><pre class="moose-pre"><code class="language-text"># apply a sink flux with use_mobility=true and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = y+1
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.2 0 0 0 0.1 0 0 0 0.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
  [./xval]
  [../]
  [./yval]
  [../]
[]

[ICs]
  [./xval]
    type = FunctionIC
    variable = xval
    function = x
  [../]
  [./yval]
    type = FunctionIC
    variable = yval
    function = y
  [../]
[]

[Functions]
  [./mass00]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p00 1.3&#x27;
  [../]
  [./mass01]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p01 1.3&#x27;
  [../]
  [./expected_mass_change00]
    type = ParsedFunction
    value = &#x27;fcn*perm*dens0*exp(pp/bulk)/visc*area*dt&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt&#x27;
    vals = &#x27;6   0.2  1.1  p00 1.3  1.1  0.5  1E-3&#x27;
  [../]
  [./expected_mass_change01]
    type = ParsedFunction
    value = &#x27;fcn*perm*dens0*exp(pp/bulk)/visc*area*dt&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt&#x27;
    vals = &#x27;6   0.2  1.1  p01 1.3  1.1  0.5  1E-3&#x27;
  [../]
  [./mass00_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m00_prev  del_m00&#x27;
  [../]
  [./mass01_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m01_prev  del_m01&#x27;
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m00]
    type = FunctionValuePostprocessor
    function = mass00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m00_prev]
    type = FunctionValuePostprocessor
    function = mass00
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m00]
    type = FunctionValuePostprocessor
    function = expected_mass_change00
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m00_expect]
    type = FunctionValuePostprocessor
    function = mass00_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m01]
    type = FunctionValuePostprocessor
    function = mass01
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m01_prev]
    type = FunctionValuePostprocessor
    function = mass01
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m01]
    type = FunctionValuePostprocessor
    function = expected_mass_change01
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m01_expect]
    type = FunctionValuePostprocessor
    function = mass01_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowSink
    boundary = &#x27;left&#x27;
    variable = pp
    use_mobility = true
    use_relperm = true
    fluid_phase = 0
    flux_function = 6
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 0.03
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s02
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
    interval = 30
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
    interval = 3
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1c7c3074-042b-4892-8ca3-6742cc2fbf19"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D_trimesh.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
# 2D version
[Mesh]
  type = FileMesh
  file = trimesh.msh
[]

[GlobalParams]
  block = &#x27;50&#x27;
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.305,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.04 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c17cacd1-fed6-4709-934e-893c5c71706e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># apply a pure tension, then some shear with compression
# the BCs are designed to map out the yield function, showing
# the affect of the small_smoother parameter
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,3*t)&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,5*(t-0.01E-6))&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,t,2E-6-t)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.01745506
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 500
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-4
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 2E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="879688da-b401-4b2d-967c-338741ef401a"><div class="modal-content"><h4>test/tests/vectorpostprocessors/1d_line_sampler/1d_line_sampler.i</h4><pre class="moose-pre"><code class="language-text"># Tests the ability of a line sampler to correctly sample a coincident line. In
# 1-D, it was found that sometimes only the first few elements would be found,
# due to floating point precision error in equality tests for the points. This
# test uses a mesh configuration for which this has occurred and ensures that
# the output CSV file contains all points for the LineMaterialRealSampler vector
# postprocessor.

my_xmax = 1.2

[Mesh]
  type = GeneratedMesh
  parallel_type = replicated # Until RayTracing.C is fixed
  dim = 1
  nx = 10
  xmin = 0
  xmax = ${my_xmax}
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Materials]
  [./my_mat]
    type = GenericConstantMaterial
    prop_names = &#x27;my_prop&#x27;
    prop_values = 5
  [../]
[]

[VectorPostprocessors]
  [./my_vpp]
    type = LineMaterialRealSampler
    property = my_prop
    start = &#x27;0 0 0&#x27;
    end = &#x27;${my_xmax} 0 0&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_vector_postprocessors_on = &#x27;timestep_end&#x27;
    show = &#x27;my_vpp&#x27;
    precision = 5
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="59432826-4abf-490a-841c-5d6cc97c19c8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform_hard3_update_version.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation, with cubic hardening
# A single element is repeatedly stretched by in z direction
# tensile_strength is set to 1Pa, tensile_strength_residual = 0.5Pa, and limit value = 1E-5
# This allows the hardening of the tensile strength to be observed

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1.0
    value_residual = 0.5
    internal_0 = 0
    internal_limit = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.0
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1.0
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard3_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="456a08e5-93b4-41c5-959e-f6c5ce57d25f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-8
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random03
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f887e8ec-8388-4f66-bdd9-00fa02599243"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_1D.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, mploying PorousFlow Kernels and UserObjects, with superbee flux-limiter
# 1D version
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6ee91be2-77a4-4e5b-acf3-df3e7cdf1e2b"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_template1.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl1_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="26ea80c6-9081-41c0-a631-ae9b225a62e3"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_noaction&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="87bcfb0c-af4e-406b-bf22-c858a278c230"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/no_action.i</h4><pre class="moose-pre"><code class="language-text"># Using upwinded and mass-lumped PorousFlow Kernels
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = tracer
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = porepressure
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-1
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="337d31fb-a311-4a9e-b638-9f2542003204"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/mandel_fully_saturated_volume.i</h4><pre class="moose-pre"><code class="language-text"># Mandel&#x27;s problem of consolodation of a drained medium
# Using the FullySaturatedDarcyBase and FullySaturatedFullySaturatedMassTimeDerivative kernels
# with multiply_by_density = false, so that this problem becomes linear
# Note the use of consistent_with_displaced_mesh = false in the calculation of volumetric strain
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]

[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    biot_coefficient = 0.6
    multiply_by_density = false
    coupling_type = HydroMechanical
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowFullySaturatedDarcyBase
    multiply_by_density = false
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure_qp]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
    consistent_with_displaced_mesh = false
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # only the initial value of this is ever used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.6
    solid_bulk_compliance = 1
    fluid_bulk_modulus = 8
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel_fully_saturated_volume
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="12d38fa1-7220-40d0-ba94-b97d0b35373a"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_noaction&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="66d3ff49-d7b2-4e58-939a-9d0d1a174337"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial3.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = quarter_hole.e
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;zmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymax_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;ymax&#x27;
    function = &#x27;-1E-4*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 40
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 40
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0.01E6
    mc_edge_smoother = 29
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 1
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 5E9&#x27; # young = 10Gpa, poisson = 0.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 1
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 1
    ep_plastic_tolerance = 1E-11
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
[]

# Preconditioning and Executioner options kindly provided by Andrea
[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 1.05
  dt = 0.1
  solve_type = NEWTON
  type = Transient

  nl_abs_tol = 1E-10
  nl_rel_tol = 1E-12
  l_tol = 1E-2
  l_max_its = 50
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = uni_axial3
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c6a020ad-6a97-4d23-bdc2-247d69a33ff2"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_2/brick2_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick2_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
  [./tang_force_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_x26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_x
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./disp_y26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5

[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  file_base = brick2_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = brick2_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x7 disp_y7 disp_x26 disp_y26 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+7
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7109969b-4b2e-4bf7-8a91-7cc043b86b41"><div class="modal-content"><h4>test/tests/vectorpostprocessors/line_value_sampler/csv_delimiter.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[AuxVariables]
  [./v]
    initial_condition = 1.23456789
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[VectorPostprocessors]
  [./line_sample]
    type = LineValueSampler
    variable = &#x27;u v&#x27;
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = id
  [../]
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
    precision = 5
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="23247060-591b-4c7f-9b22-6b0868f0fb19"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random01
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="17b2dd38-5c7d-4fe3-a0f7-188d78863738"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/terzaghi_fully_saturated_volume.i</h4><pre class="moose-pre"><code class="language-text"># Terzaghi&#x27;s problem of consolodation of a drained medium
# The FullySaturated Kernels are used, with multiply_by_density = false
# so that this becomes a linear problem with constant Biot Modulus
# Also, since the FullySaturated Kernels are used, we have to
# use consistent_with_displaced_mesh = false in the calculation of volumetric strain
#
# A saturated soil sample sits in a bath of water.
# It is constrained on its sides, and bottom.
# Its sides and bottom are also impermeable.
# Initially it is unstressed.
# A normal stress, q, is applied to the soil&#x27;s top.
# The soil then slowly compresses as water is squeezed
# out from the sample from its top (the top BC for
# the porepressure is porepressure = 0).
#
# See, for example.  Section 2.2 of the online manuscript
# Arnold Verruijt &quot;Theory and Problems of Poroelasticity&quot; Delft University of Technology 2013
# but note that the &quot;sigma&quot; in that paper is the negative
# of the stress in TensorMechanics
#
# Here are the problem&#x27;s parameters, and their values:
# Soil height.  h = 10
# Soil&#x27;s Lame lambda.  la = 2
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = 3
# Soil bulk modulus.  K = la + 2*mu/3 = 4
# Soil confined compressibility.  m = 1/(K + 4mu/3) = 0.125
# Soil bulk compliance.  1/K = 0.25
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Soil initial storativity, which is the reciprocal of the initial Biot modulus.  S = phi0/Kf + (alpha - phi0)(1 - alpha)/K = 0.0625
# Consolidation coefficient.  c = k/(S + alpha^2 m) = 13.95348837
# Normal stress on top.  q = 1
# Initial porepressure, resulting from instantaneous application of q, assuming corresponding instantaneous increase of porepressure (Note that this is calculated by MOOSE: we only need it for the analytical solution).  p0 = alpha*m*q/(S + alpha^2 m) = 0.69767442
# Initial vertical displacement (down is positive), resulting from instantaneous application of q (Note this is calculated by MOOSE: we only need it for the analytical solution).  uz0 = q*m*h*S/(S + alpha^2 m)
# Final vertical displacement (down in positive) (Note this is calculated by MOOSE: we only need it for the analytical solution).  uzinf = q*m*h
#
# The solution for porepressure is
# P = 4*p0/\pi \sum_{k=1}^{\infty} \frac{(-1)^{k-1}}{2k-1} \cos ((2k-1)\pi z/(2h)) \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
# This series converges very slowly for ct/h^2 small, so in that domain
# P = p0 erf( (1-(z/h))/(2 \sqrt(ct/h^2)) )
#
# The degree of consolidation is defined as
# U = (uz - uz0)/(uzinf - uz0)
# where uz0 and uzinf are defined above, and
# uz = the vertical displacement of the top (down is positive)
# U = 1 - (8/\pi^2)\sum_{k=1}^{\infty} \frac{1}{(2k-1)^2} \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 10
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = 0
  zmax = 10
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./topdrained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = front
  [../]
  [./topload]
    type = NeumannBC
    variable = disp_z
    value = -1
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    coupling_type = HydroMechanical
    biot_coefficient = 0.6
    multiply_by_density = false
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowFullySaturatedDarcyBase
    multiply_by_density = false
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 0.96
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    # bulk modulus is lambda + 2*mu/3 = 2 + 2*3/3 = 4
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure_qp]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
    consistent_with_displaced_mesh = false
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # only the initial value of this is used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.6
    fluid_bulk_modulus = 8
    solid_bulk_compliance = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 1&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 2&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 3&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 4&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 5&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 6&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 7&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 8&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 9&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = disp_z
    use_displaced_mesh = false
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.5*t&lt;0.1,0.5*t,0.1)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.0001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = terzaghi_fully_saturated_volume
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ecb6dc23-c1d9-4883-a9ca-764c3926daf4"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/rd01.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 120
  ny = 1
  xmin = 0
  xmax = 6
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1 10 500 5000 5000&#x27;
    x = &#x27;0 10 100 1000 10000 100000&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.336
    alpha = 1.43e-4
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      viscosity = 1.01e-3
      density0 = 1000
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityVG
    m = 0.336
    seff_turnover = 0.99
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.33
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.295E-12 0 0  0 0.295E-12 0  0 0 0.295E-12&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = -72620.4
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-10 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./base]
    type = PorousFlowSink
    boundary = right
    flux_function = -2.315E-3
    variable = pressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;6 0 0&#x27;
    sort_by = x
    num_points = 121
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 359424

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = rd01
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
  [./along_line]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d4807007-b031-4c4e-86f2-128832245351"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/random.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0.1E3
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-6
    min_stepsize = 1E-3
    plastic_models = mc
    debug_fspb = crash
    deactivation_scheme = safe
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2e4909d2-5bda-4873-90ad-54f6988916b6"><div class="modal-content"><h4>modules/richards/test/tests/uo_egs/density.i</h4><pre class="moose-pre"><code class="language-text"># Outputs a density relationship into an exodus file
# and into a CSV file.
# In the exodus file, the density will be a function of &quot;x&quot;, and
# this &quot;x&quot; is actually porepressure
# In the CSV file you will find the density at the &quot;x&quot; point
# specified by you below.
#
# You may specify:
#  - the &quot;type&quot; of density in the UserObjects block
#  - the parameters of this density function in the UserObjects block
#  - the &quot;x&quot; point (which is porepressure) that you want to extract
#       the density at, if you want a value at a particular point
#  - the range of &quot;x&quot; values (which is porepressure values) may be
#       changed in the Mesh block, below


[UserObjects]
  [./density]
    type = RichardsDensityVDW
    a = 0.2303
    b = 4.31E-5
    molar_mass = 16.04246E-3
    temperature = 293
  [../]
[]

[Postprocessors]
  [./point_val]
    type = PointValue
    execute_on = timestep_begin
    # note this point must lie inside the mesh below
    point = &#x27;1 0 0&#x27;
    variable = density
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  # the following specify the range of porepressure
  xmin = -1E6
  xmax = 1E7
[]

############################
# You should not need to change any of the stuff below
############################


[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u_init]
    type = FunctionIC
    variable = u
    function = x
  [../]
[]

[AuxVariables]
  [./density]
  [../]
[]

[AuxKernels]
  [./density_AuxK]
    type = RichardsDensityAux
    variable = density
    density_UO = density
    execute_on = timestep_begin
    pressure_var = u
  [../]
[]

[Kernels]
  [./dummy]
    type = Diffusion
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 0
[]

[Outputs]
  file_base = density
  [./csv]
    type = CSV
  [../]
  [./exodus]
    type = Exodus
    hide = u
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e1d415ac-3ffd-43e3-8f50-9712e716e57d"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad_locs.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Normal
    mean = 5
    standard_deviation = 0.5
  []
  [S_dist]
    type = Normal
    mean = 8
    standard_deviation = 0.7
  []
[]

[Samplers]
  [grid]
    type = CartesianProduct
    linear_space_items = &#x27;2.5 0.5 10  3 1 10&#x27;
  []
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [local_sense]
    type = PolynomialChaosLocalSensitivity
    pc_name = poly_chaos
    local_points_sampler = grid
    local_points = &#x27;3.14159 3.14159 2.7182 3.14159 3.14159 2.7182 2.7182 2.7182&#x27;
    output_points = true
    sensitivity_parameters = &#x27;0 1&#x27;
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="eb385d6f-a44c-4f2d-9b06-0fa2fbf03d52"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s09_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># Apply a piecewise-linear sink flux to the right-hand side and watch fluid flow to it
#
# This test has a single phase with two components.  The test initialises with
# the porous material fully filled with component=1.  The left-hand side is fixed
# at porepressure=1 and mass-fraction of the zeroth component being unity.
# The right-hand side has a very strong piecewise-linear flux that keeps the
# porepressure~0 at that side.  Fluid mass is extracted by this flux in proportion
# to the fluid component mass fraction.
#
# Therefore, the zeroth fluid component will flow from left to right (down the
# pressure gradient).
#
# The important DE is
# porosity * dc/dt = (perm / visc) * grad(P) * grad(c)
# which is true for c = mass-fraction, and very large bulk modulus of the fluid.
# For grad(P) constant in time and space (as in this example) this is just the
# advection equation for c, with velocity = perm / visc / porosity.  The parameters
# are chosen to velocity = 1 m/s.
# In the numerical world, and especially with full upwinding, the advection equation
# suffers from diffusion.  In this example, the diffusion is obvious when plotting
# the mass-fraction along the line, but the average velocity of the front is still
# correct at 1 m/s.
# This test uses the FullySaturated version of the flow Kernel.  This does not
# suffer from as much numerical diffusion as the standard PorousFlow Kernel since
# it does not employ any upwinding.
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp frac&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
  [./frac]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = 1-x
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = frac
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = pp
  [../]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyFlow
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = frac
  [../]
  [./flux1]
    type = PorousFlowFullySaturatedDarcyFlow
    fluid_component = 1
    gravity = &#x27;0 0 0&#x27;
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e10 # need large in order for constant-velocity advection
      density0 = 1 # almost irrelevant, except that the ability of the right BC to keep P fixed at zero is related to density_P0
      thermal_expansion = 0
      viscosity = 11
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = frac
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 1.1 0 0 0 1.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2 # irrelevant in this fully-saturated situation
    phase = 0
  [../]
[]

[BCs]
  [./lhs_fixed_a]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    variable = frac
    value = 1
  [../]
  [./lhs_fixed_b]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    variable = pp
    value = 1
  [../]
  [./flux0]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;-100 100&#x27;
    multipliers = &#x27;-1 1&#x27;
    variable = frac # the zeroth comonent
    mass_fraction_component = 0
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1E4
  [../]
  [./flux1]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;-100 100&#x27;
    multipliers = &#x27;-1 1&#x27;
    variable = pp # comonent 1
    mass_fraction_component = 1
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1E4
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-2
  end_time = 1
  nl_rel_tol = 1E-11
  nl_abs_tol = 1E-11
[]

[VectorPostprocessors]
  [./mf]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 100
    sort_by = x
    variable = frac
  [../]
[]

[Outputs]
  file_base = s09_fully_saturated
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.5 1&#x27;
    sync_only = true
  [../]
  interval = 10
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d85a9c8c-cdb8-444a-a625-0e4be71d559c"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_template2.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl1_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="14308f36-d7c8-4f22-9fe4-a9e0d33a4278"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_lode_zero.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 4
    mc_interpolation_scheme = lode_zero
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_lode_zero
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="592f95ab-b63f-4c79-979c-e753974e79ba"><div class="modal-content"><h4>modules/heat_conduction/test/tests/ad_convective_heat_flux/equilibrium.i</h4><pre class="moose-pre"><code class="language-text">
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
[]

[Variables]
  [./temp]
    initial_condition = 200.0
  [../]
[]

[Kernels]
  [./heat_dt]
    type = ADTimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = ADDiffusion
    variable = temp
  [../]
[]

[BCs]
  [./right]
    type = ADConvectiveHeatFluxBC
    variable = temp
    boundary = &#x27;right&#x27;
    T_infinity = 100.0
    heat_transfer_coefficient = 1
  [../]
[]

[Postprocessors]
  [./left_temp]
    type = SideAverageValue
    variable = temp
    boundary = left
    execute_on = &#x27;TIMESTEP_END initial&#x27;
  [../]
  [./right_temp]
    type = SideAverageValue
    variable = temp
    boundary = right
  [../]
  [./right_flux]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = 1
  [../]
[]

[Executioner]
  type = Transient

  num_steps = 10
  dt = 1e1

  nl_abs_tol = 1e-12
[]

[Outputs]
  [./out]
    type = CSV
    interval = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="13859dce-c0eb-43d9-a2db-c3c5840ad48e"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c3c5b809-b598-4efd-a20b-fb0f7ad9d50b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial1.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  # back = zmin
  # front = zmax
  # bottom = ymin
  # top = ymax
  # left = xmin
  # right = xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = &#x27;0&#x27;
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;back&#x27;
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front&#x27;
    function = &#x27;-1E-3*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./mc_int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.6981317 # 40deg
    rate = 10000
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-10
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;5.77E10 3.85E10&#x27; # young = 100Gpa, poisson = 0.3
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-10
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 0.5
  dt = 0.05
  solve_type = PJFNK  # cannot use NEWTON because we are using ComputeFiniteStrain, and hence the Jacobian contributions will not be correct, even though ComputeMultiPlasticityStress will compute the correct consistent tangent operator for small strains
  type = Transient

  line_search = &#x27;none&#x27;
  nl_rel_tol = 1E-10
  l_tol = 1E-3
  l_max_its = 200
  nl_max_its = 10

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]



[Outputs]
  file_base = uni_axial1
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c09eac94-4532-452b-a7ca-48ac6f566108"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_2/plane2_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane2_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5792bbec-78a7-4aa1-8b45-87a898d45ec9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/six_surface14.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
# SimpleTester3 with a = 0 and b = 1 and strength = 1.1
# SimpleTester4 with a = 1 and b = 0 and strength = 1.1
# SimpleTester5 with a = 1 and b = 1 and strength = 3.1
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.1E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 2.1 and stress_zz = 3.0
#
# This is similar to three_surface14.i, and a description is found there.
# The result should be stress_zz=1=stress_yy, with internal0=2
# and internal1=1.1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int5]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 4
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 5
    variable = f5
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
  [./int4]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 4
    variable = int4
  [../]
  [./int5]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 5
    variable = int5
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f3
  [../]
  [./f4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f4
  [../]
  [./f5]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f5
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
  [./int3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int3
  [../]
  [./int4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int4
  [../]
  [./int5]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int5
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple3]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple4]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple5]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2 simple3 simple4 simple5&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = six_surface14
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5a732af2-cf61-472e-ac1b-9100ea591b02"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/injection_production_eg.i</h4><pre class="moose-pre"><code class="language-text"># phase = 0 is liquid phase
# phase = 1 is gas phase
# fluid_component = 0 is water
# fluid_component = 1 is CO2

# Constant rate of CO2 injection into the left boundary
# 1D mesh
# The PorousFlowPiecewiseLinearSinks remove the correct water and CO2 from the right boundary

# Note i take pretty big timesteps here so the system is quite nonlinear

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmax = 20
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./saturation_gas]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./frac_water_in_liquid]
    initial_condition = 1.0
  [../]
  [./frac_water_in_gas]
    initial_condition = 0.0
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = timestep_end
  [../]
[]

[Variables]
  [./pwater]
    initial_condition = 20E6
  [../]
  [./pgas]
    initial_condition = 20.1E6
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pwater
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = pgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = pgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas pwater&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 1E-6
    m = 0.6
  [../]
[]

[Modules]
  [./FluidProperties]
    [./true_water]
      type = Water97FluidProperties
    [../]
    [./tabulated_water]
      type = TabulatedFluidProperties
      fp = true_water
      temperature_min = 275
      pressure_max = 1E8
      interpolated_properties = &#x27;density viscosity enthalpy internal_energy&#x27;
      fluid_property_file = water97_tabulated_11.csv
    [../]
    [./true_co2]
      type = CO2FluidProperties
    [../]
    [./tabulated_co2]
      type = TabulatedFluidProperties
      fp = true_co2
      temperature_min = 275
      pressure_max = 1E8
      interpolated_properties = &#x27;density viscosity enthalpy internal_energy&#x27;
      fluid_property_file = co2_tabulated_11.csv
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 293.15
  [../]
  [./saturation_calculator]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = pgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;frac_water_in_liquid frac_water_in_gas&#x27;
  [../]
  [./water]
    type = PorousFlowSingleComponentFluid
    fp = tabulated_water
    phase = 0
  [../]
  [./co2]
    type = PorousFlowSingleComponentFluid
    fp = tabulated_co2
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.2
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityBC
    nw_phase = true
    lambda = 2
    s_res = 0.1
    sum_s_res = 0.2
    phase = 1
  [../]
[]

[BCs]
  [./co2_injection]
    type = PorousFlowSink
    boundary = left
    variable = pgas # pgas is associated with the CO2 mass balance (fluid_component = 1 in its Kernels)
    flux_function = -1E-2 # negative means a source, rather than a sink
  [../]

  [./right_water]
    type = PorousFlowPiecewiseLinearSink
    boundary = right

    # a sink of water, since the Kernels given to pwater are for fluid_component = 0 (the water)
    variable = pwater

    # this Sink is a function of liquid porepressure
    # Also, all the mass_fraction, mobility and relperm are referenced to the liquid phase now
    fluid_phase = 0

    # Sink strength = (Pwater - 20E6)
    pt_vals = &#x27;0 1E9&#x27;
    multipliers = &#x27;0 1E9&#x27;
    PT_shift = 20E6

    # multiply Sink strength computed above by mass fraction of water at the boundary
    mass_fraction_component = 0

    # also multiply Sink strength by mobility of the liquid
    use_mobility = true

    # also multiply Sink strength by the relperm of the liquid
    use_relperm = true

    # also multiplly Sink strength by 1/L, where L is the distance to the fixed-porepressure external environment
    flux_function = 10 # 1/L
  [../]

  [./right_co2]
    type = PorousFlowPiecewiseLinearSink
    boundary = right
    variable = pgas
    fluid_phase = 1
    pt_vals = &#x27;0 1E9&#x27;
    multipliers = &#x27;0 1E9&#x27;
    PT_shift = 20.1E6
    mass_fraction_component = 1
    use_mobility = true
    use_relperm = true
    flux_function = 10 # 1/L
  [../]
[]

[Preconditioning]
  active = &#x27;basic&#x27;
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu NONZERO 2&#x27;
  [../]
  [./preferred]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27;lu mumps&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  nl_abs_tol = 1E-13
  nl_rel_tol = 1E-10
  end_time = 1e4
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 1E4
    growth_factor = 1.1
  [../]
[]

[VectorPostprocessors]
  [./pps]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;20 0 0&#x27;
    num_points = 20
    sort_by = x
    variable = &#x27;pgas pwater saturation_gas&#x27;
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="68bb4a51-309a-46be-9561-e9eb0b22c057"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_1/brick1_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick1_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_x
  [../]
  [./disp_x13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_y
  [../]
  [./disp_y13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_x8 disp_x13 disp_x16 disp_y5 disp_y8 disp_y13 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5193613f-2b23-419e-beaf-2d32ed694c23"><div class="modal-content"><h4>modules/porous_flow/test/tests/energy_conservation/heat04.i</h4><pre class="moose-pre"><code class="language-text"># The sample is a single unit element, with fixed displacements on
# all sides.  A heat source of strength S (J/m^3/s) is applied into
# the element.  There is no fluid flow or heat flow.  The rise
# in temperature, porepressure and stress, and the change in porosity is
# matched with theory.
#
# In this case, fluid mass must be conserved, and there is no
# volumetric strain, so
# porosity * fluid_density = constant
# Also, the energy-density in the rock-fluid system increases with S:
# d/dt [(1 - porosity) * rock_density * rock_heat_cap * T + porosity * fluid_density * fluid_heat_cap * T] = S
# Also, the porosity evolves according to THM as
# porosity = biot + (porosity0 - biot) * exp( (biot - 1) * P / fluid_bulk + rock_thermal_exp * T)
# Finally, the effective stress must be exactly zero (as there is
# no strain).
#
# Let us assume that
# fluid_density = dens0 * exp(P / fluid_bulk - fluid_thermal_exp * T)
# Then the conservation of fluid mass means
# porosity = por0 * exp(- P / fluid_bulk + fluid_thermal_exp * T)
# where dens0 * por0 = the initial fluid mass.
# The last expression for porosity, combined with the THM one,
# and assuming that biot = 1 for simplicity, gives
# porosity = 1 + (porosity0 - 1) * exp(rock_thermal_exp * T) = por0 * exp(- P / fluid_bulk + fluid_thermal_exp * T) .... (A)
#
# This stuff may be substituted into the heat energy-density equation:
# S = d/dt [(1 - porosity0) * exp(rock_thermal_exp * T) * rock_density * rock_heat_cap * T + porosity * fluid_density * fluid_heat_cap * T]
#
# If S is constant then
# S * t = (1 - porosity0) * exp(rock_thermal_exp * T) * rock_density * rock_heat_cap * T + porosity * fluid_density * fluid_heat_cap * T
# with T(t=0) = 0 then Eqn(A) implies that por0 = porosity0 and
# P / fluid_bulk = fluid_thermal_exp * T - log(1 + (por0 - 1) * exp(rock_thermal_exp * T)) + log(por0)
#
# Parameters:
# A = 2
# fluid_bulk = 2.0
# dens0 = 3.0
# fluid_thermal_exp = 0.5
# fluid_heat_cap = 2
# por0 = 0.5
# rock_thermal_exp = 0.25
# rock_density = 5
# rock_heat_capacity = 0.2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.5
      cv = 2
      cp = 2
      bulk_modulus = 2.0
      density0 = 3.0
    [../]
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
  [../]
  [./temp]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1.0
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1.0
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 1.0
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = pp
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./temp]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./poro_vol_exp_temp]
    type = PorousFlowHeatVolumetricExpansion
    variable = temp
  [../]
  [./heat_source]
    type = BodyForce
    function = 1
    variable = temp
  [../]
[]

[Functions]
  [./err_T_fcn]
    type = ParsedFunction
    vars = &#x27;por0 rte temp rd rhc m0 fhc source&#x27;
    vals = &#x27;0.5 0.25 t0   5  0.2 1.5 2  1&#x27;
    value = &#x27;((1-por0)*exp(rte*temp)*rd*rhc*temp+m0*fhc*temp-source*t)/(source*t)&#x27;
  [../]
  [./err_pp_fcn]
    type = ParsedFunction
    vars = &#x27;por0 rte temp rd rhc m0 fhc source bulk pp fte&#x27;
    vals = &#x27;0.5 0.25 t0   5  0.2 1.5 2  1      2    p0 0.5&#x27;
    value = &#x27;(bulk*(fte*temp-log(1+(por0-1)*exp(rte*temp))+log(por0))-pp)/pp&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./porosity]
    type = PorousFlowPropertyAux
    property = porosity
    variable = porosity
  [../]
[]


[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./porosity]
    type = PorousFlowPorosity
    thermal = true
    fluid = true
    mechanical = true
    ensure_positive = false
    biot_coefficient = 1.0
    porosity_zero = 0.5
    thermal_expansion_coeff = 0.25
    solid_bulk = 2
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 0.2
    density = 5.0
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    temperature_unit = Kelvin
    fp = the_simple_fluid
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = pp
  [../]
  [./t0]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = temp
  [../]
  [./porosity]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = porosity
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./fluid_mass]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
  [./total_heat]
    type = PorousFlowHeatEnergy
    phase = 0
    execute_on = &#x27;timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
  [./err_T]
    type = FunctionValuePostprocessor
    function = err_T_fcn
  [../]
  [./err_P]
    type = FunctionValuePostprocessor
    function = err_pp_fcn
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1
  end_time = 5
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  file_base = heat04
  exodus = true
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="64d9c852-903e-4c97-98e8-39fdfcfe4eee"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_native.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.35E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = native
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 8
    smoothing_tol = 1E-7
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_native
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="304c8574-d066-452f-beff-e9a1ecfb6c00"><div class="modal-content"><h4>modules/porous_flow/test/tests/newton_cooling/nc04.i</h4><pre class="moose-pre"><code class="language-text"># Newton cooling from a bar.  Heat conduction
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp&#x27;
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
[]

[Variables]
  [./temp]
  [../]
[]

[ICs]
  [./temp]
    type = FunctionIC
    variable = temp
    function = &#x27;2-x/100&#x27;
  [../]
[]

[Kernels]
  [./conduction]
    type = PorousFlowHeatConduction
    variable = temp
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./thermal_conductivity_irrelevant]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;1E2 0 0 0 1E2 0 0 0 1E2&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 2
  [../]
  [./newton]
    type = PorousFlowPiecewiseLinearSink
    variable = temp
    boundary = right
    pt_vals = &#x27;0 1 2&#x27;
    multipliers = &#x27;-1 0 1&#x27;
    flux_function = 1
  [../]
[]

[VectorPostprocessors]
  [./temp]
    type = LineValueSampler
    variable = temp
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 11
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol &#x27;
    petsc_options_value = &#x27;gmres asm lu 100 NONZERO 2 1E-14 1E-12&#x27;
  [../]
[]

[Executioner]
  type = Steady
[]

[Outputs]
  file_base = nc04
  execute_on = timestep_end
  exodus = false
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = timestep_end
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="657b4d2f-cbf2-4651-bac4-80e5a03f002b"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3d043493-dd41-4ab4-87fd-e98b679a74ea"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform10.i</h4><pre class="moose-pre"><code class="language-text"># apply a shear deformation and tensile stretch to observe all hardening.
# Here p_trial=12, q_trial=2*Sqrt(20)
# MOOSE yields:
# q_returned = 1.696
# p_returned = 0.100
# intnl_shear = 1.81
# intnl_tens = 0.886
# These give, at the returned point
# cohesion = 1.84
# tanphi = 0.513
# tanpsi = 0.058
# tensile = 0.412
# This means that
# f_shear = -0.0895
# f_tensile = -0.312
# Note that these are within smoothing_tol (=1) of each other
# Hence, smoothing must be used:
# ismoother = 0.0895
# (which gives the yield function value = 0)
# smoother = 0.328
# This latter gives dg/dq = 0.671, dg/dp = 0.368
# for the flow directions.  Finally ga = 2.70, and
# the returned point satisfies the normality conditions.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz plastic_strain_xx plastic_strain_xy plastic_strain_xz plastic_strain_yy plastic_strain_yz plastic_strain_zz strain_xx strain_xy strain_xz strain_yy strain_yz strain_zz&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;t&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;2*t&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;t&#x27;
  [../]
[]


[AuxVariables]
  [./f_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_compressive]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ls]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f_shear]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f_shear
  [../]
  [./f_tensile]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f_tensile
  [../]
  [./f_compressive]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = intnl_tensile
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./ls]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = ls
  [../]
[]

[Postprocessors]
  [./stress_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./stress_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./stress_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./stress_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./strainp_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xx
  [../]
  [./strainp_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xy
  [../]
  [./strainp_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xz
  [../]
  [./strainp_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yy
  [../]
  [./strainp_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yz
  [../]
  [./strainp_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_zz
  [../]
  [./straint_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xx
  [../]
  [./straint_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xy
  [../]
  [./straint_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xz
  [../]
  [./straint_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yy
  [../]
  [./straint_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yz
  [../]
  [./straint_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_zz
  [../]
  [./f_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_shear
  [../]
  [./f_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_tensile
  [../]
  [./f_compressive]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_tensile
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./ls]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = ls
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 2
    rate = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0
    value_residual = 0.5
    rate = 2
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.1
    value_residual = 0.05
    rate = 1
  [../]
  [./t_strength]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 0
    rate = 1
  [../]
  [./c_strength]
    type = TensorMechanicsHardeningConstant
    value = 1E8
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;4 4&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = stress
    perform_finite_strain_rotations = false
  [../]
  [./stress]
    type = CappedWeakPlaneStressUpdate
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tensile_strength = t_strength
    compressive_strength = c_strength
    max_NR_iterations = 20
    tip_smoother = 0
    smoothing_tol = 1
    yield_function_tol = 1E-3
    perfect_guess = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform10
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8e9f80dd-21d6-4204-a15e-42b0cc4b618e"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bc3f29a2-478d-4de3-a73f-5ff0f9356795"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s04.i</h4><pre class="moose-pre"><code class="language-text"># apply a piecewise-linear sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = y+1
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0 0 1E-5 0 0 0 1E-5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
  [./xval]
  [../]
  [./yval]
  [../]
  [./pt_shift]
    initial_condition = 0.3
  [../]
[]

[ICs]
  [./xval]
    type = FunctionIC
    variable = xval
    function = x
  [../]
  [./yval]
    type = FunctionIC
    variable = yval
    function = y
  [../]
[]

[Functions]
  [./mass10]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p10 1.3&#x27;
  [../]
  [./rate10]
    type = ParsedFunction
    value = &#x27;fcn*if(pp&gt;0.8,1,if(pp&lt;0.3,0.5,0.2+pp))&#x27;
    vars = &#x27;fcn pp&#x27;
    vals = &#x27;8   p10&#x27;
  [../]
  [./mass10_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m10_prev  m10_rate 0.5 1E-3&#x27;
  [../]
  [./mass11]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p11 1.3&#x27;
  [../]
  [./rate11]
    type = ParsedFunction
    value = &#x27;fcn*if(pp&gt;0.8,1,if(pp&lt;0.3,0.5,0.2+pp))&#x27;
    vars = &#x27;fcn pp&#x27;
    vals = &#x27;8   p11&#x27;
  [../]
  [./mass11_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m11_prev  m11_rate 0.5 1E-3&#x27;
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10_prev]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m10_rate]
    type = FunctionValuePostprocessor
    function = rate10
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m10_expect]
    type = FunctionValuePostprocessor
    function = mass10_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11_prev]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m11_rate]
    type = FunctionValuePostprocessor
    function = rate11
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m11_expect]
    type = FunctionValuePostprocessor
    function = mass11_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    PT_shift = pt_shift
    pt_vals = &#x27;0.0 0.5&#x27;
    multipliers = &#x27;0.5 1&#x27;
    variable = pp
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 8
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 1E-2
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s04
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d82fcd61-d650-4062-b465-76d75014d272"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface14.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.1E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 2.1 and stress_zz = 3.0
#
# Then all three will be active, but there is linear-dependence.
# SimpleTester1 will turn off, since it is closest,
# and the algorithm will return to stress_zz=1, stress_yy=2, but
# then SimpleTester1 will be positive, so it will be turned back
# on, and then SimpleTester0 or SimpleTester2 will be turned off
# (a random choice will be made).
# If SimpleTester2 is turned
# off then algorithm returns to stress_zz=1=stress_yy, but then
# SimpleTester2 violates Kuhn-Tucker (f&lt;0 and pm&gt;0), so the algorithm
# will restart, and return to stress_zz=1=stress_yy, with internal0=2
# and internal1=1.1
# If SimpleTester0 is turned off then the algorithm will return to
# stress_zz=2, stress_yy=1, where f0&gt;0.  Once again, a random choice
# of turning off SimpleTester1 or SimpleTester2 can be made.  Hence,
# oscillations can occur.  If too many oscillations occur then the algorithm
# will fail

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface14
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5f6c2192-7171-451e-8832-db99f3e4d8dc"><div class="modal-content"><h4>modules/porous_flow/test/tests/dirackernels/theis2.i</h4><pre class="moose-pre"><code class="language-text"># Theis problem: Flow to single sink
# Constant rate injection between 200 and 1000 s.
# Cartesian mesh with logarithmic distribution in x and y.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
  bias_x = 1.1
  bias_y = 1.1
  ymax = 100
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  compute_enthalpy = false
  compute_internal_energy = false
[]

[Variables]
  [./pp]
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = pp
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e-7
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      viscosity = 0.001
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-14 0 0 0 1E-14 0 0 0 1E-14&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0
    phase = 0
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 200
  end_time = 1000
  nl_abs_tol = 1e-10
[]

[Outputs]
  perf_graph = true
  file_base = theis2
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]

[ICs]
  [./PressureIC]
    variable = pp
    type = ConstantIC
    value = 20e6
  [../]
[]

[DiracKernels]
  [./sink]
    type = PorousFlowSquarePulsePointSource
    start_time = 200
    end_time = 1000
    point = &#x27;0 0 0&#x27;
    mass_flux = -0.04
    variable = pp
  [../]
[]

[BCs]
  [./right]
    type = DirichletBC
    variable = pp
    value = 20e6
    boundary = right
  [../]
  [./top]
    type = DirichletBC
    variable = pp
    value = 20e6
    boundary = top
  [../]
[]

[VectorPostprocessors]
  [./pressure]
    type = SideValueSampler
    variable = pp
    sort_by = x
    execute_on = timestep_end
    boundary = bottom
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b08db659-ab30-4553-b3e4-53dd32c98357"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_conduction/no_fluid.i</h4><pre class="moose-pre"><code class="language-text"># 0phase heat conduction.
# apply a boundary condition of T=300 to a bar that
# is initially at T=200, and observe the expected
# error-function response
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./temp]
    initial_condition = 200
  [../]
[]

[Kernels]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = PorousFlowHeatConduction
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp&#x27;
    number_fluid_phases = 0
    number_fluid_components = 0
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;2.2 0 0  0 0 0  0 0 0&#x27;
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 2.2
    density = 0.5
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 300
    variable = temp
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E1
  end_time = 1E2
[]

[Postprocessors]
  [./t000]
    type = PointValue
    variable = temp
    point = &#x27;0 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t010]
    type = PointValue
    variable = temp
    point = &#x27;10 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t020]
    type = PointValue
    variable = temp
    point = &#x27;20 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t030]
    type = PointValue
    variable = temp
    point = &#x27;30 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t040]
    type = PointValue
    variable = temp
    point = &#x27;40 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t050]
    type = PointValue
    variable = temp
    point = &#x27;50 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t060]
    type = PointValue
    variable = temp
    point = &#x27;60 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t070]
    type = PointValue
    variable = temp
    point = &#x27;70 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t080]
    type = PointValue
    variable = temp
    point = &#x27;80 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t090]
    type = PointValue
    variable = temp
    point = &#x27;90 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t100]
    type = PointValue
    variable = temp
    point = &#x27;100 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Outputs]
  file_base = no_fluid
  [./csv]
    type = CSV
  [../]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2c875223-7258-4978-81ae-8e7a9d93c908"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s03.i</h4><pre class="moose-pre"><code class="language-text"># apply a sink flux with use_relperm=true and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1.1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = -y
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.2 0 0 0 0.1 0 0 0 0.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
  [./xval]
  [../]
  [./yval]
  [../]
[]

[ICs]
  [./xval]
    type = FunctionIC
    variable = xval
    function = x
  [../]
  [./yval]
    type = FunctionIC
    variable = yval
    function = y
  [../]
[]

[Functions]
  [./mass00]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p00 1.3 1.1 0.5&#x27;
  [../]
  [./sat00]
    type = ParsedFunction
    value = &#x27;pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;pp al m&#x27;
    vals = &#x27;p00 1.1 0.5&#x27;
  [../]
  [./mass01]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p01 1.3 1.1 0.5&#x27;
  [../]
  [./expected_mass_change00]
    type = ParsedFunction
    value = &#x27;fcn*pow(pow(1+pow(-al*pp,1.0/(1-m)),-m),2)*area*dt&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt   al  m&#x27;
    vals = &#x27;6   0.2  1.1  p00 1.3  1.1  0.5  1E-3 1.1 0.5&#x27;
  [../]
  [./expected_mass_change01]
    type = ParsedFunction
    value = &#x27;fcn*pow(pow(1+pow(-al*pp,1.0/(1-m)),-m),2)*area*dt&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt   al  m&#x27;
    vals = &#x27;6   0.2  1.1  p01 1.3  1.1  0.5  1E-3 1.1 0.5&#x27;
  [../]
  [./mass00_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m00_prev  del_m00&#x27;
  [../]
  [./mass01_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m01_prev  del_m01&#x27;
  [../]
  [./sat01]
    type = ParsedFunction
    value = &#x27;pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;pp al m&#x27;
    vals = &#x27;p01 1.1 0.5&#x27;
  [../]
  [./expected_mass_change_rate]
    type = ParsedFunction
    value = &#x27;fcn*pow(pow(1+pow(-al*pp,1.0/(1-m)),-m),2)*area&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt   al  m&#x27;
    vals = &#x27;6   0.2  1.1  p00 1.3  1.1  0.5  1E-3 1.1 0.5&#x27;
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m00]
    type = FunctionValuePostprocessor
    function = mass00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m00_prev]
    type = FunctionValuePostprocessor
    function = mass00
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m00]
    type = FunctionValuePostprocessor
    function = expected_mass_change00
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m00_expect]
    type = FunctionValuePostprocessor
    function = mass00_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m01]
    type = FunctionValuePostprocessor
    function = mass01
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m01_prev]
    type = FunctionValuePostprocessor
    function = mass01
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m01]
    type = FunctionValuePostprocessor
    function = expected_mass_change01
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m01_expect]
    type = FunctionValuePostprocessor
    function = mass01_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./s00]
    type = FunctionValuePostprocessor
    function = sat00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./mass00_rate]
    type = FunctionValuePostprocessor
    function = expected_mass_change_rate
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowSink
    boundary = &#x27;left&#x27;
    variable = pp
    use_mobility = false
    use_relperm = true
    fluid_phase = 0
    flux_function = 6
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 0.018
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s03
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
    interval = 5
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
    interval = 2
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ff1c84a4-4d31-46df-ac1e-5d026ab2d253"><div class="modal-content"><h4>test/tests/outputs/csv/csv_sort.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[AuxVariables]
  [./aux0]
    order = SECOND
    family = SCALAR
  [../]
  [./aux1]
    family = SCALAR
    initial_condition = 5
  [../]
  [./aux2]
    family = SCALAR
    initial_condition = 10
  [../]
[]

[Kernels]
  [./diff_u]
    type = Diffusion
    variable = u
  [../]
  [./diff_v]
    type = CoefDiffusion
    variable = v
    coef = 2
  [../]
[]

[BCs]
  [./right_u]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
  [./left_u]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right_v]
    type = DirichletBC
    variable = v
    boundary = right
    value = 3
  [../]
  [./left_v]
    type = DirichletBC
    variable = v
    boundary = left
    value = 2
  [../]
[]

[Postprocessors]
  [./num_vars]
    type = NumVars
    system = &#x27;NL&#x27;
  [../]
  [./num_aux]
    type = NumVars
    system = &#x27;AUX&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./out]
    type = CSV
    sort_columns = true
  [../]
[]

[ICs]
  [./aux0_IC]
    variable = aux0
    values = &#x27;12 13&#x27;
    type = ScalarComponentIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="140e464d-c474-4289-adee-04f896ae9f46"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_3D.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, employing PorousFlow Kernels and UserObjects, with superbee flux-limiter
# 3D version
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  xmin = 0
  xmax = 1
  ny = 4
  ymin = 0
  ymax = 0.5
  nz = 3
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.5 2&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 0.3
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="69fc6254-89dc-4e87-a9ee-bababc404f97"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/mms/supg/supg_mms_test.i</h4><pre class="moose-pre"><code class="language-text">mu=1.5
rho=2.5

[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
  supg = true
  convective_term = true
  integrate_p_by_parts = false
  laplace = true
  u = vel_x
  v = vel_y
  p = p
  alpha = 1
  order = SECOND
  family = LAGRANGE
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 1.0
    ymin = 0
    ymax = 1.0
    elem_type = QUAD9
    nx = 4
    ny = 4
  []
  [./corner_node]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;pinned_node&#x27;
    nodes = &#x27;0&#x27;
    input = gen
  [../]
[]

[Variables]
  [./vel_x]
  [../]

  [./vel_y]
  [../]

  [./p]
    order = FIRST
  [../]
[]

[Kernels]
  # mass
  [./mass]
    type = INSMass
    variable = p
  [../]

  # x-momentum, space
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    component = 0
    forcing_func = vel_x_source_func
  [../]

  # y-momentum, space
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    component = 1
    forcing_func = vel_y_source_func
  [../]

  [./p_source]
    type = BodyForce
    function = p_source_func
    variable = p
  [../]
[]

[BCs]
  [./vel_x]
    type = FunctionDirichletBC
    preset = false
    boundary = &#x27;left right top bottom&#x27;
    function = vel_x_func
    variable = vel_x
  [../]
  [./vel_y]
    type = FunctionDirichletBC
    preset = false
    boundary = &#x27;left right top bottom&#x27;
    function = vel_y_func
    variable = vel_y
  [../]
  [./p]
    type = FunctionDirichletBC
    preset = false
    boundary = &#x27;left right top bottom&#x27;
    function = p_func
    variable = p
  [../]
[]

[Functions]
  [./vel_x_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.028*pi^2*x^2*sin(0.2*pi*x*y) - 0.028*pi^2*y^2*sin(0.2*pi*x*y) - 0.1*pi^2*sin(0.5*pi*x) - 0.4*pi^2*sin(pi*y)) + ${rho}*(0.14*pi*x*cos(0.2*pi*x*y) + 0.4*pi*cos(pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*y*cos(0.2*pi*x*y) + 0.25*pi*cos(0.5*pi*x)&#x27;
  [../]
  [./vel_y_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.018*pi^2*x^2*sin(0.3*pi*x*y) - 0.018*pi^2*y^2*sin(0.3*pi*x*y) - 0.384*pi^2*sin(0.8*pi*x) - 0.027*pi^2*sin(0.3*pi*y)) + ${rho}*(0.06*pi*x*cos(0.3*pi*x*y) + 0.09*pi*cos(0.3*pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.06*pi*y*cos(0.3*pi*x*y) + 0.48*pi*cos(0.8*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*x*cos(0.2*pi*x*y) + 0.3*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./p_source_func]
    type = ParsedFunction
    value = &#x27;-0.06*pi*x*cos(0.3*pi*x*y) - 0.14*pi*y*cos(0.2*pi*x*y) - 0.2*pi*cos(0.5*pi*x) - 0.09*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./vel_x_func]
    type = ParsedFunction
    value = &#x27;0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vel_y_func]
    type = ParsedFunction
    value = &#x27;0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3&#x27;
  [../]
  [./p_func]
    type = ParsedFunction
    value = &#x27;0.5*sin(0.5*pi*x) + 1.0*sin(0.3*pi*y) + 0.5*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vxx_func]
    type = ParsedFunction
    value = &#x27;0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)&#x27;
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;${rho}  ${mu}&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    solve_type = &#x27;NEWTON&#x27;
  [../]
[]

[Executioner]
  type = Steady
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu NONZERO&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-13
  nl_max_its = 6
  l_tol = 1e-6
  l_max_its = 500
[]

[Outputs]
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2vel_x]
    type = ElementL2Error
    variable = vel_x
    function = vel_x_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vel_y]
    variable = vel_y
    function = vel_y_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2p]
    variable = p
    function = p_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vxx]
    variable = vxx
    function = vxx_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./vxx]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./vxx]
    type = VariableGradientComponent
    component = x
    variable = vxx
    gradient_variable = vel_x
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2981b70e-8239-4219-84ad-26144dceeb35"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl3_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = cyl3_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = cyl3_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c223a2f5-4a9d-4bcc-9e26-ec8f81011345"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_1/cyl1_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl1_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = cyl1_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = cyl1_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="caa2ce1b-ef0f-4a91-95c9-8af9a0b85376"><div class="modal-content"><h4>test/tests/outputs/postprocessor_final/execute_pps_on_final.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./pp1]
    type = ElementAverageValue
    variable = u
  [../]

  [./pp2]
    type = ElementExtremeValue
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  [./out]
    type = CSV
    execute_postprocessors_on = final
    show = &#x27;pp1&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="66c00337-03c6-4f78-8e7f-0f91486a15a4"><div class="modal-content"><h4>modules/level_set/test/tests/kernels/olsson_reinitialization/olsson_1d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 8
  ny = 8
  uniform_refine = 2
[]

[Variables]
  [./phi]
  [../]
[]

[AuxVariables]
  [./phi_0]
    family = MONOMIAL
    order = FIRST
  [../]
  [./phi_exact]
  [../]
[]

[AuxKernels]
  [./phi_exact]
    type = FunctionAux
    function = phi_exact
    variable = phi_exact
  [../]
[]

[Functions]
  [./phi_initial]
    type = ParsedFunction
    value = &#x27;1-x&#x27;
  [../]
  [./phi_exact]
    type = ParsedFunction
    vars = epsilon
    vals = 0.05
    value = &#x27;1 / (1+exp((x-0.5)/epsilon))&#x27;
  [../]
[]

[ICs]
  [./phi_ic]
    type = FunctionIC
    function = phi_initial
    variable = phi
  [../]
  [./phi_0_ic]
    type = FunctionIC
    function = phi_initial
    variable = phi_0
  [../]
[]

[Kernels]
  [./time]
    type = TimeDerivative
    variable = phi
  [../]

  [./reinit]
    type = LevelSetOlssonReinitialization
    variable = phi
    phi_0 = phi_0
    epsilon = 0.05
  [../]
[]

[UserObjects]
  [./arnold]
    type = LevelSetOlssonTerminator
    tol = 0.1
  [../]
[]

[Postprocessors]
  [./error]
    type = ElementL2Error
    variable = phi
    function = phi_exact
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./ndofs]
    type = NumDOFs
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    start_point = &#x27;0 0.5 0&#x27;
    end_point =  &#x27;1 0.5 0&#x27;
    variable = phi
    num_points = 100
    sort_by = x
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Executioner]
  type = Transient
  l_max_its = 100
  nl_max_its = 100
  solve_type = PJFNK
  num_steps = 10
  start_time = 0
  nl_abs_tol = 1e-13
  scheme = implicit-euler
  dt = 0.05
  petsc_options_iname = &#x27;-pc_type -pc_sub_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;hypre    boomeramg    300&#x27;
[]

[Outputs]
  exodus = true
  [./out]
    type = CSV
    time_data = true
    file_base = output/olsson_1d_out
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8bcdfbe2-a73c-40f6-8072-2e63e2ff7abf"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s06.i</h4><pre class="moose-pre"><code class="language-text"># apply a half-cubic sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1.1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = x*(y+1)
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0 0 1E-5 0 0 0 1E-5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
[]

[Functions]
  [./mass10]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*if(pp&gt;=0,1,pow(1+pow(-al*pp,1.0/(1-m)),-m))&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p10 1.3 1.1 0.5&#x27;
  [../]
  [./rate10]
    type = ParsedFunction
    value = &#x27;fcn*if(pp&gt;center,m,if(pp&lt;themin,0,m/c/c/c*(2*(pp-center)+c)*((pp-center)-c)*((pp-center)-c)))&#x27;
    vars = &#x27;m fcn pp  center sd  themin c&#x27;
    vals = &#x27;2 3   p10 0.9    0.5 0.1   -0.8&#x27;
  [../]
  [./mass10_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m10_prev  m10_rate 0.5 2E-3&#x27;
  [../]
  [./mass11]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*if(pp&gt;=0,1,pow(1+pow(-al*pp,1.0/(1-m)),-m))&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p11 1.3 1.1 0.5&#x27;
  [../]
  [./rate11]
    type = ParsedFunction
    value = &#x27;fcn*if(pp&gt;center,m,if(pp&lt;themin,0,m/c/c/c*(2*(pp-center)+c)*((pp-center)-c)*((pp-center)-c)))&#x27;
    vars = &#x27;m fcn pp  center sd  themin c&#x27;
    vals = &#x27;2 3   p11 0.9    0.5 0.1   -0.8&#x27;
  [../]
  [./mass11_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m11_prev  m11_rate 0.5 2E-3&#x27;
  [../]
[]

[Postprocessors]
  [./flux00]
    type = PointValue
    variable = flux_out
    point = &#x27;0 0 0&#x27;
  [../]
  [./flux01]
    type = PointValue
    variable = flux_out
    point = &#x27;0 1 0&#x27;
  [../]
  [./flux10]
    type = PointValue
    variable = flux_out
    point = &#x27;1 0 0&#x27;
  [../]
  [./flux11]
    type = PointValue
    variable = flux_out
    point = &#x27;1 1 0&#x27;
  [../]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10_prev]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m10_rate]
    type = FunctionValuePostprocessor
    function = rate10
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m10_expect]
    type = FunctionValuePostprocessor
    function = mass10_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11_prev]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m11_rate]
    type = FunctionValuePostprocessor
    function = rate11
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m11_expect]
    type = FunctionValuePostprocessor
    function = mass11_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowHalfCubicSink
    boundary = &#x27;left right&#x27;
    max = 2
    cutoff = -0.8
    center = 0.9
    variable = pp
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 3
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 2E-3
  end_time = 6E-2
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s06
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
    interval = 5
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
    interval = 3
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ef0c9580-1227-430d-a76f-01a67f440051"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/rock1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 10deg
# Tensile with strength = 1MPa
# WeakPlaneShear with cohesion = 1MPa, friction angle = 25deg, dilation angle = 25deg
# WeakPlaneTensile with strength = 0.01MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 0.01E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;mc tensile wps wpt&#x27;
    deactivation_scheme = &#x27;optimized_to_safe_to_dumb&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = rock1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="41e0afff-4bdb-48b7-8752-ff4d5ed1e585"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/bw02.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 200
  ny = 1
  xmin = -10
  xmax = 10
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-1 5E-1 5E-1&#x27;
    x = &#x27;0 1 10&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureBW
    Sn = 0.0
    Ss = 1.0
    C = 1.5
    las = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      viscosity = 4
      density0 = 10
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityBW
    Sn = 0.0
    Ss = 1.0
    Kn = 0
    Ks = 1
    C = 1.5
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 1 0  0 0 1&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = -9E2
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-0.1 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./recharge]
    type = PorousFlowSink
    variable = pressure
    boundary = right
    flux_function = -1.25 # corresponds to Rstar being 0.5 because i have to multiply by density*porosity
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 2

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;-10 0 0&#x27;
    end_point = &#x27;10 0 0&#x27;
    sort_by = x
    num_points = 80
    execute_on = timestep_end
  [../]
[]

[Outputs]
  file_base = bw02
  sync_times = &#x27;0.5 2 8&#x27;
  [./exodus]
    type = Exodus
    sync_only = true
  [../]
  [./along_line]
    type = CSV
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1df320ac-4bbd-43eb-9431-de9736ed851f"><div class="modal-content"><h4>modules/porous_flow/test/tests/fluidstate/coldwater_injection.i</h4><pre class="moose-pre"><code class="language-text"># Cold water injection into 1D hot reservoir (Avdonin, 1964)
#
# To generate results presented in documentation for this problem,
# set xmax = 50 and nx = 250 in the Mesh block, and dtmax = 100 and
# end_time = 1.3e5 in the Executioner block.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 25
  xmax = 20
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./temperature]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./temperature]
    type = PorousFlowPropertyAux
    variable = temperature
    property = temperature
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Variables]
  [./pliquid]
    initial_condition = 5e6
  [../]
  [./h]
    scaling = 1e-6
  [../]
[]

[ICs]
  [./hic]
    type = PorousFlowFluidPropertyIC
    variable = h
    porepressure = pliquid
    property = enthalpy
    temperature = 170
    temperature_unit = Celsius
    fp = water
  [../]
[]

[BCs]
  [./pleft]
    type = DirichletBC
    variable = pliquid
    value = 5.05e6
    boundary = left
  [../]
  [./pright]
    type = DirichletBC
    variable = pliquid
    value = 5e6
    boundary = right
  [../]
  [./hleft]
    type = DirichletBC
    variable = h
    value = 678.52e3
    boundary = left
  [../]
  [./hright]
    type = DirichletBC
    variable = h
    value = 721.4e3
    boundary = right
  [../]
[]

[Kernels]
  [./mass]
    type = PorousFlowMassTimeDerivative
    variable = pliquid
  [../]
  [./massflux]
    type = PorousFlowAdvectiveFlux
    variable = pliquid
  [../]
  [./heat]
    type = PorousFlowEnergyTimeDerivative
    variable = h
  [../]
  [./heatflux]
    type = PorousFlowHeatAdvection
    variable = h
  [../]
  [./heatcond]
    type = PorousFlowHeatConduction
    variable = h
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pliquid h&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    pc_max = 1e6
    sat_lr = 0.1
    m = 0.5
    alpha = 1e-5
  [../]
  [./fs]
    type = PorousFlowWaterVapor
    water_fp = water
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./watervapor]
    type = PorousFlowFluidStateSingleComponent
    porepressure = pliquid
    enthalpy = h
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.8e-11 0 0 0 1.8e-11 0 0 0 1.8e-11&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
    sum_s_res = 0.1
  [../]
  [./internal_energy]
    type = PorousFlowMatrixInternalEnergy
    density = 2900
    specific_heat_capacity = 740
  [../]
  [./rock_thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;20 0 0  0 20 0  0 0 20&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 5e3
  nl_abs_tol = 1e-10
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 100
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = ElementValueSampler
    sort_by = x
    variable = temperature
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Outputs]
  perf_graph = true
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0bb3d1dd-7d46-49a2-b26d-6aa890ad145e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ics/volume_weighted_weibull/volume_weighted_weibull.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 100
[]

[Problem]
  solve = false
[]

[AuxVariables]
  [u_vww]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[ICs]
  [u_vww]
    type = VolumeWeightedWeibull
    variable = u_vww
    reference_volume = 0.0001 #This is the volume of an element for a 100x100 mesh
    weibull_modulus = 15.0
    median = 1.0
# When the reference_volume is equal to the element volume (so that there is no volume correction),
# this combination of Weibull modulus and median gives the same distribution that you would get with
# the following parameters in a WeibullDistribution:
#    weibull_modulus = 15.0
#    location = 0
#    scale = 1.024735156 #median * (-1/log(0.5))^(1/weibull_modulus)
  []
[]

[VectorPostprocessors]
  [./histo]
    type = VolumeHistogram
    variable = u_vww
    min_value = 0
    max_value = 2
    bin_number = 100
    execute_on = initial
    outputs = initial
  [../]
[]

[Executioner]
  type = Steady
[]

[Outputs]
  [./initial]
    type = CSV
    execute_on = initial
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="abce6463-63f8-4221-8e34-afc447756817"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/mms/pspg/pspg_mms_test.i</h4><pre class="moose-pre"><code class="language-text">mu=1.5
rho=2.5

[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
  pspg = true
  convective_term = true
  integrate_p_by_parts = true
  laplace = true
  u = vel_x
  v = vel_y
  p = p
  alpha = 1e-6
  order = FIRST
  family = LAGRANGE
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 1.0
    ymin = 0
    ymax = 1.0
    elem_type = QUAD9
    nx = 4
    ny = 4
  []
  [./corner_node]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;pinned_node&#x27;
    nodes = &#x27;0&#x27;
    input = gen
  [../]
[]

[Variables]
  [./vel_x]
  [../]

  [./vel_y]
  [../]

  [./p]
  [../]
[]

[Kernels]
  # mass
  [./mass]
    type = INSMass
    variable = p
    x_vel_forcing_func = vel_x_source_func
    y_vel_forcing_func = vel_y_source_func
  [../]

  # x-momentum, space
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    component = 0
    forcing_func = vel_x_source_func
  [../]

  # y-momentum, space
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    component = 1
    forcing_func = vel_y_source_func
  [../]

  [./p_source]
    type = BodyForce
    function = p_source_func
    variable = p
  [../]
[]

[BCs]
  [./vel_x]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_x_func
    variable = vel_x
  [../]
  [./vel_y]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_y_func
    variable = vel_y
  [../]
  [./p]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = p_func
    variable = p
  [../]
[]

[Functions]
  [./vel_x_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.028*pi^2*x^2*sin(0.2*pi*x*y) - 0.028*pi^2*y^2*sin(0.2*pi*x*y) - 0.1*pi^2*sin(0.5*pi*x) - 0.4*pi^2*sin(pi*y)) + ${rho}*(0.14*pi*x*cos(0.2*pi*x*y) + 0.4*pi*cos(pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*y*cos(0.2*pi*x*y) + 0.25*pi*cos(0.5*pi*x)&#x27;
  [../]
  [./vel_y_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.018*pi^2*x^2*sin(0.3*pi*x*y) - 0.018*pi^2*y^2*sin(0.3*pi*x*y) - 0.384*pi^2*sin(0.8*pi*x) - 0.027*pi^2*sin(0.3*pi*y)) + ${rho}*(0.06*pi*x*cos(0.3*pi*x*y) + 0.09*pi*cos(0.3*pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.06*pi*y*cos(0.3*pi*x*y) + 0.48*pi*cos(0.8*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*x*cos(0.2*pi*x*y) + 0.3*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./p_source_func]
    type = ParsedFunction
    value = &#x27;-0.06*pi*x*cos(0.3*pi*x*y) - 0.14*pi*y*cos(0.2*pi*x*y) - 0.2*pi*cos(0.5*pi*x) - 0.09*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./vel_x_func]
    type = ParsedFunction
    value = &#x27;0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vel_y_func]
    type = ParsedFunction
    value = &#x27;0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3&#x27;
  [../]
  [./p_func]
    type = ParsedFunction
    value = &#x27;0.5*sin(0.5*pi*x) + 1.0*sin(0.3*pi*y) + 0.5*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vxx_func]
    type = ParsedFunction
    value = &#x27;0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)&#x27;
  [../]
  [./px_func]
    type = ParsedFunction
    value = &#x27;0.1*pi*y*cos(0.2*pi*x*y) + 0.25*pi*cos(0.5*pi*x)&#x27;
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;${rho}  ${mu}&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    solve_type = &#x27;NEWTON&#x27;
  [../]
[]

[Executioner]
  type = Steady
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu NONZERO&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-12
  nl_abs_tol = 1e-13
  nl_max_its = 6
  l_tol = 1e-6
  l_max_its = 500
[]

[Outputs]
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2vel_x]
    type = ElementL2Error
    variable = vel_x
    function = vel_x_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vel_y]
    variable = vel_y
    function = vel_y_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2p]
    variable = p
    function = p_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vxx]
    variable = vxx
    function = vxx_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2px]
    variable = px
    function = px_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./vxx]
    family = MONOMIAL
    order = FIRST
  [../]
  [./px]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./vxx]
    type = VariableGradientComponent
    component = x
    variable = vxx
    gradient_variable = vel_x
  [../]
  [./px]
    type = VariableGradientComponent
    component = x
    variable = px
    gradient_variable = p
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bcca11a9-d020-41c4-999f-0a300e5ccd2e"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/rsc01.i</h4><pre class="moose-pre"><code class="language-text"># RSC test with high-res time and spatial resolution
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 600
  ny = 1
  xmin = 0
  xmax = 10 # x is the depth variable, called zeta in RSC
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;3E-3 3E-2 0.05&#x27;
    x = &#x27;0 1 5&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pwater poil&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureRSC
    oil_viscosity = 2E-3
    scale_ratio = 2E3
    shift = 10
  [../]
[]

[Modules]
  [./FluidProperties]
    [./water]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 10
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./oil]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 20
      thermal_expansion = 0
      viscosity = 2e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = poil
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./water]
    type = PorousFlowSingleComponentFluid
    fp = water
    phase = 0
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./oil]
    type = PorousFlowSingleComponentFluid
    fp = oil
    phase = 1
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_oil]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
  [../]
[]

[Variables]
  [./pwater]
  [../]
  [./poil]
  [../]
[]

[ICs]
  [./water_init]
    type = ConstantIC
    variable = pwater
    value = 0
  [../]
  [./oil_init]
    type = ConstantIC
    variable = poil
    value = 15
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pwater
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = poil
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = poil
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./SOil]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
  [./SOil]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 1
    variable = SOil
  [../]
[]

[BCs]
# we are pumping water into a system that has virtually incompressible fluids, hence the pressures rise enormously.  this adversely affects convergence because of almost-overflows and precision-loss problems.  The fixed things help keep pressures low and so prevent these awful behaviours.   the movement of the saturation front is the same regardless of the fixed things.
  active = &#x27;recharge fixedoil fixedwater&#x27;
  [./recharge]
    type = PorousFlowSink
    variable = pwater
    boundary = &#x27;left&#x27;
    flux_function = -1.0
  [../]
  [./fixedwater]
    type = DirichletBC
    variable = pwater
    boundary = &#x27;right&#x27;
    value = 0
  [../]
  [./fixedoil]
    type = DirichletBC
    variable = poil
    boundary = &#x27;right&#x27;
    value = 15
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;7 0 0&#x27;
    sort_by = x
    num_points = 21
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 5
  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = rsc01
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = final
  [../]
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c2c77591-7faf-4b77-88ce-eaf03361c115"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform3.i</h4><pre class="moose-pre"><code class="language-text"># apply a number of &quot;random&quot; configurations and
# check that the algorithm returns to the yield surface
#
# must be careful here - we cannot put in arbitrary values of C_ijkl, otherwise the condition
# df/dsigma * C * flow_dirn &lt; 0 for some stresses
# The important features that must be obeyed are:
# 0 = C_0222 = C_1222  (holds for transversely isotropic, for instance)
# C_0212 &lt; C_0202 = C_1212 (holds for transversely isotropic)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  # the following are &quot;random&quot; deformations
  # each is O(1E-1) to provide large deformations
  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;(sin(0.1*t)+x)/1E1&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;(cos(t)+x*y)/1E1&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;sin(0.4321*t)*x*y*z/1E1&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.577350269
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.08748866
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 100
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    # the following is transversely isotropic, i think.
    fill_method = symmetric9
    C_ijkl = &#x27;3E9 1E9 3E9 3E9 3E9 6E9 1E9 1E9 9E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    max_NR_iterations = 100
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E4
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5a156a9c-d4c7-4033-8fc0-5cbfa16cabe4"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/mandel_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># Mandel&#x27;s problem of consolodation of a drained medium
# Using the FullySaturatedDarcyBase and FullySaturatedMassTimeDerivative kernels
# Note the use of consistent_with_displaced_mesh = false in the calculation of volumetric strain
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]

[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    biot_coefficient = 0.6
    coupling_type = HydroMechanical
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowFullySaturatedDarcyBase
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure_qp]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
    consistent_with_displaced_mesh = false
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # only the initial value of this is ever used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.6
    solid_bulk_compliance = 1
    fluid_bulk_modulus = 8
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel_fully_saturated
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="645e4a18-4cf5-477b-a45a-4caed639c3fd"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform1_update_version.i</h4><pre class="moose-pre"><code class="language-text"># Using TensileStressUpdate
# checking for small deformation
# A single element is stretched by 1E-6m in z direction, and by small amounts in x and y directions
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and the maximum principal stress value should be 1pa.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

  [GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.2E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.0
    yield_function_tol = 1.0E-9
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1_update_version
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f16f57ee-7ae6-48e1-be3a-0c72107ee37f"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  l_max_its = 30
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b776ae00-9227-41a1-8c46-801a0f78b2ad"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_3/plane3_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane3_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = plane3_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = plane3_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c56bbe1e-769e-4192-8b8b-684e37aea44b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/except3.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages on the edge smoothing
# here edge_smoother=5deg, which means the friction_angle must be &lt;= 35.747
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 36
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 1
    mc_edge_smoother = 5
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="367d6e77-f5ff-400c-8a03-264de501226d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar5.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by 1E-6m in z direction.
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_zz = 2.6 Pa
# stress_xx = 0.6 Pa
# stress_yy = 0.6 Pa
# tensile_strength is set to 0.5Pa with cubic hardening to 1Pa at intnl=1E-6
#
# The return should be to a plane (but the algorithm
# will try tip-return first), with, according to mathematica
# plastic_multiplier = 6.655327991E-7
# stress_zz = 0.869613817289
# stress_xx = 0.20068032054

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.5
    value_residual = 1
    internal_limit = 1E-6
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = tens
    debug_fspb = none
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar5
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="09473070-2b3f-464a-89c2-603cac82a6ec"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d3df1b6f-b3f0-40fd-99c3-7bf2c721b2b2"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s07.i</h4><pre class="moose-pre"><code class="language-text"># apply a sink flux on just one component of a 3-component system and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp frac0 frac1&#x27;
    number_fluid_phases = 1
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1.1
  [../]
[]

[Variables]
  [./pp]
  [../]
  [./frac0]
    initial_condition = 0.1
  [../]
  [./frac1]
    initial_condition = 0.6
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = y
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = frac0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = frac1
  [../]
  [./mass2]
    type = PorousFlowMassTimeDerivative
    fluid_component = 2
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;frac0 frac1&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.2 0 0 0 0.1 0 0 0 0.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
[]

[Functions]
  [./mass1_00]
    type = ParsedFunction
    value = &#x27;frac*vol*por*dens0*exp(pp/bulk)*pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;frac  vol  por dens0 pp bulk al m&#x27;
    vals = &#x27;f1_00 0.25 0.1 1.1  p00 1.3 1.1 0.5&#x27;
  [../]
  [./expected_mass_change1_00]
    type = ParsedFunction
    value = &#x27;frac*fcn*area*dt&#x27;
    vars = &#x27;frac fcn area dt&#x27;
    vals = &#x27;f1_00 6  0.5  1E-3&#x27;
  [../]
  [./mass1_00_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m1_00_prev  del_m1_00&#x27;
  [../]
  [./mass1_01]
    type = ParsedFunction
    value = &#x27;frac*vol*por*dens0*exp(pp/bulk)*pow(1+pow(-al*pp,1.0/(1-m)),-m)&#x27;
    vars = &#x27;frac  vol  por dens0 pp bulk al m&#x27;
    vals = &#x27;f1_01 0.25 0.1 1.1  p01 1.3 1.1 0.5&#x27;
  [../]
  [./expected_mass_change1_01]
    type = ParsedFunction
    value = &#x27;frac*fcn*area*dt&#x27;
    vars = &#x27;frac fcn area dt&#x27;
    vals = &#x27;f1_01 6  0.5  1E-3&#x27;
  [../]
  [./mass1_01_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-mass_change&#x27;
    vars = &#x27;mass_prev mass_change&#x27;
    vals = &#x27;m1_01_prev  del_m1_01&#x27;
  [../]
[]

[Postprocessors]
  [./f1_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = frac1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./flux_00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = flux_out
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_00]
    type = FunctionValuePostprocessor
    function = mass1_00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_00_prev]
    type = FunctionValuePostprocessor
    function = mass1_00
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m1_00]
    type = FunctionValuePostprocessor
    function = expected_mass_change1_00
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m1_00_expect]
    type = FunctionValuePostprocessor
    function = mass1_00_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./f1_01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = frac1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./flux_01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = flux_out
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_01]
    type = FunctionValuePostprocessor
    function = mass1_01
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m1_01_prev]
    type = FunctionValuePostprocessor
    function = mass1_01
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./del_m1_01]
    type = FunctionValuePostprocessor
    function = expected_mass_change1_01
    execute_on = &#x27;timestep_end&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m1_01_expect]
    type = FunctionValuePostprocessor
    function = mass1_01_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./f1_11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = frac1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./flux_11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = flux_out
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowSink
    boundary = &#x27;left&#x27;
    variable = frac1
    use_mobility = false
    use_relperm = false
    mass_fraction_component = 1
    fluid_phase = 0
    flux_function = 6
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 0.01
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s07
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="645987c5-1d80-48c3-b845-e1607b6c5e03"><div class="modal-content"><h4>modules/combined/examples/phase_field-mechanics/kks_mechanics_KHS.i</h4><pre class="moose-pre"><code class="language-text"># KKS phase-field model coupled with elasticity using Khachaturyan&#x27;s scheme as
# described in L.K. Aagesen et al., Computational Materials Science, 140, 10-21 (2017)
# Original run #170403a

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 640
  ny = 1
  nz = 1
  xmin = -10
  xmax = 10
  ymin = 0
  ymax = 0.03125
  zmin = 0
  zmax = 0.03125
  elem_type = HEX8
[]


[Variables]
  # order parameter
  [./eta]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute concentration
  [./c]
    order = FIRST
    family = LAGRANGE
  [../]

  # chemical potential
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute phase concentration (matrix)
  [./cm]
    order = FIRST
    family = LAGRANGE
  [../]
  # solute phase concentration (precipitate)
  [./cp]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./eta_ic]
    variable = eta
    type = FunctionIC
    function = ic_func_eta
    block = 0
  [../]
  [./c_ic]
    variable = c
    type = FunctionIC
    function = ic_func_c
    block = 0
  [../]
  [./w_ic]
    variable = w
    type = ConstantIC
    value = 0.00991
    block = 0
  [../]
  [./cm_ic]
    variable = cm
    type = ConstantIC
    value = 0.131
    block = 0
  [../]
  [./cp_ic]
    variable = cp
    type = ConstantIC
    value = 0.236
    block = 0
  [../]
[]

[Functions]
  [./ic_func_eta]
    type = ParsedFunction
    value = &#x27;0.5*(1.0+tanh((x)/delta_eta/sqrt(2.0)))&#x27;
    vars = &#x27;delta_eta&#x27;
    vals = &#x27;0.8034&#x27;
  [../]
  [./ic_func_c]
    type = ParsedFunction
    value = &#x27;0.2389*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^3*(6*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^2-15*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))+10)+0.1339*(1-(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^3*(6*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^2-15*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))+10))&#x27;
    vars = &#x27;delta&#x27;
    vals = &#x27;0.8034&#x27;
  [../]
  [./psi_eq_int]
    type = ParsedFunction
    value = &#x27;volume*psi_alpha&#x27;
    vars = &#x27;volume psi_alpha&#x27;
    vals = &#x27;volume psi_alpha&#x27;
  [../]
  [./gamma]
    type = ParsedFunction
    value = &#x27;(psi_int - psi_eq_int) / dy / dz&#x27;
    vars = &#x27;psi_int psi_eq_int dy       dz&#x27;
    vals = &#x27;psi_int psi_eq_int 0.03125  0.03125&#x27;
  [../]
[]

[AuxVariables]
  [./sigma11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./sigma22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./sigma33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./eigen_strain00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./Fglobal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./psi]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./matl_sigma11]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = sigma11
  [../]
  [./matl_sigma22]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = sigma22
  [../]
  [./matl_sigma33]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = sigma33
  [../]
  [./matl_e11]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
    variable = e11
  [../]
  [./f_el]
    type = MaterialRealAux
    variable = f_el
    property = f_el_mat
    execute_on = timestep_end
  [../]
  [./GlobalFreeEnergy]
    variable = Fglobal
    type = KKSGlobalFreeEnergy
    fa_name = fm
    fb_name = fp
    w = 0.0264
    kappa_names = kappa
    interfacial_vars = eta
  [../]
  [./psi_potential]
    variable = psi
    type = ParsedAux
    args = &#x27;Fglobal w c f_el sigma11 e11&#x27;
    function = &#x27;Fglobal - w*c + f_el - sigma11*e11&#x27;
  [../]
[]


[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0
  [../]
  [./front_y]
    type = DirichletBC
    variable = disp_y
    boundary = front
    value = 0
  [../]
  [./back_y]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0
  [../]
  [./top_z]
    type = DirichletBC
    variable = disp_z
    boundary = top
    value = 0
  [../]
  [./bottom_z]
    type = DirichletBC
    variable = disp_z
    boundary = bottom
    value = 0
  [../]
[]

[Materials]
  # Chemical free energy of the matrix
  [./fm]
    type = DerivativeParsedMaterial
    f_name = fm
    args = &#x27;cm&#x27;
    function = &#x27;6.55*(cm-0.13)^2&#x27;
  [../]

  # Chemical Free energy of the precipitate phase
  [./fp]
    type = DerivativeParsedMaterial
    f_name = fp
    args = &#x27;cp&#x27;
    function = &#x27;6.55*(cp-0.235)^2&#x27;
  [../]

# Elastic energy of the precipitate
  [./elastic_free_energy_p]
    type = ElasticEnergyMaterial
    f_name = f_el_mat
    args = &#x27;eta&#x27;
    outputs = exodus
  [../]


  # h(eta)
  [./h_eta]
    type = SwitchingFunctionMaterial
    h_order = HIGH
    eta = eta
  [../]

  # 1- h(eta), putting in function explicitly
  [./one_minus_h_eta_explicit]
    type = DerivativeParsedMaterial
    f_name = one_minus_h_explicit
    args = eta
    function = 1-eta^3*(6*eta^2-15*eta+10)
    outputs = exodus
  [../]

  # g(eta)
  [./g_eta]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta
  [../]

  # constant properties
  [./constants]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa      misfit&#x27;
    prop_values = &#x27;0.7 0.7 0.01704    0.00377&#x27;
  [../]

  #Mechanical properties
  [./Stiffness_matrix]
    type = ComputeElasticityTensor
    base_name = C_matrix
    C_ijkl = &#x27;103.3 74.25 74.25 103.3 74.25 103.3 46.75 46.75 46.75&#x27;
    fill_method = symmetric9
  [../]
  [./Stiffness_ppt]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;100.7 71.45 71.45 100.7 71.45 100.7 50.10 50.10 50.10&#x27;
    base_name = C_ppt
    fill_method = symmetric9
  [../]
  [./C]
    type = CompositeElasticityTensor
    args = eta
    tensors = &#x27;C_matrix               C_ppt&#x27;
    weights = &#x27;one_minus_h_explicit   h&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = &#x27;eigenstrain_ppt&#x27;
  [../]
  [./eigen_strain]
    type = ComputeVariableEigenstrain
    eigen_base = &#x27;0.00377 0.00377 0.00377 0 0 0&#x27;
    prefactor = h
    args = eta
    eigenstrain_name = &#x27;eigenstrain_ppt&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]

  # enforce c = (1-h(eta))*cm + h(eta)*cp
  [./PhaseConc]
    type = KKSPhaseConcentration
    ca       = cm
    variable = cp
    c        = c
    eta      = eta
  [../]

  # enforce pointwise equality of chemical potentials
  [./ChemPotVacancies]
    type = KKSPhaseChemicalPotential
    variable = cm
    cb       = cp
    fa_name  = fm
    fb_name  = fp
  [../]

  #
  # Cahn-Hilliard Equation
  #
  [./CHBulk]
    type = KKSSplitCHCRes
    variable = c
    ca       = cm
    fa_name  = fm
    w        = w
  [../]

  [./dcdt]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./ckernel]
    type = SplitCHWRes
    mob_name = M
    variable = w
  [../]

  #
  # Allen-Cahn Equation
  #
  [./ACBulkF]
    type = KKSACBulkF
    variable = eta
    fa_name  = fm
    fb_name  = fp
    w        = 0.0264
    args = &#x27;cp cm&#x27;
  [../]
  [./ACBulkC]
    type = KKSACBulkC
    variable = eta
    ca       = cm
    cb       = cp
    fa_name  = fm
  [../]
  [./ACBulk_el] #This adds df_el/deta for strain interpolation
    type = AllenCahn
    variable = eta
    f_name = f_el_mat
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    kappa_name = kappa
  [../]
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type   -sub_pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;asm       ilu            nonzero&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-11
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.5
  [../]
[]

[Postprocessors]
  [./f_el_int]
    type = ElementIntegralMaterialProperty
    mat_prop = f_el_mat
  [../]
  [./c_alpha]
    type =  SideAverageValue
    boundary = left
    variable = c
  [../]
  [./c_beta]
    type =  SideAverageValue
    boundary = right
    variable = c
  [../]
  [./e11_alpha]
    type =  SideAverageValue
    boundary = left
    variable = e11
  [../]
  [./e11_beta]
    type =  SideAverageValue
    boundary = right
    variable = e11
  [../]
  [./s11_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma11
  [../]
  [./s22_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma22
  [../]
  [./s33_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma33
  [../]
  [./s11_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma11
  [../]
  [./s22_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma22
  [../]
  [./s33_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma33
  [../]
  [./f_el_alpha]
    type =  SideAverageValue
    boundary = left
    variable = f_el
  [../]
  [./f_el_beta]
    type =  SideAverageValue
    boundary = right
    variable = f_el
  [../]
  [./f_c_alpha]
    type =  SideAverageValue
    boundary = left
    variable = Fglobal
  [../]
  [./f_c_beta]
    type =  SideAverageValue
    boundary = right
    variable = Fglobal
  [../]
  [./chem_pot_alpha]
    type =  SideAverageValue
    boundary = left
    variable = w
  [../]
  [./chem_pot_beta]
    type =  SideAverageValue
    boundary = right
    variable = w
  [../]
  [./psi_alpha]
    type =  SideAverageValue
    boundary = left
    variable = psi
  [../]
  [./psi_beta]
    type =  SideAverageValue
    boundary = right
    variable = psi
  [../]
  [./total_energy]
    type = ElementIntegralVariablePostprocessor
    variable = Fglobal
  [../]
  # Get simulation cell size from postprocessor
  [./volume]
    type = ElementIntegralMaterialProperty
    mat_prop = 1
  [../]
  [./psi_eq_int]
    type = FunctionValuePostprocessor
    function = psi_eq_int
  [../]
  [./psi_int]
    type = ElementIntegralVariablePostprocessor
    variable = psi
  [../]
  [./gamma]
    type = FunctionValuePostprocessor
    function = gamma
  [../]
  [./int_position]
    type = FindValueOnLine
    start_point = &#x27;-10 0 0&#x27;
    end_point = &#x27;10 0 0&#x27;
    v = eta
    target = 0.5
  [../]
[]

#
# Precondition using handcoded off-diagonal terms
#
[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]


[Outputs]
  [./exodus]
    type = Exodus
    interval = 20
  [../]
  checkpoint = true
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f9ae835b-633d-4dd6-9d9c-214884f1e8aa"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar8.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by (0.5, 0.4, 0.3)E-6m
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_xx = 1.72 Pa
# stress_yy = 1.52 Pa
# stress_zz = 1.32 Pa
# tensile_strength is set to 1.3Pa hardening to 2Pa over intnl=1E-6
#
# The return should be to the edge (the algorithm will first try the tip) with
# according to mathematica
# internal = 1.67234152669E-7
# stress_xx = stress_yy = 1.3522482794
# stress_zz = 1.2195929084

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.4E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.3E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 1.3
    value_residual = 2
    internal_limit = 1E-6
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = tens
    debug_fspb = none
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar8
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dc31c0ce-972e-4680-b3cc-3d311a9634c8"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/fltvd_no_antidiffusion.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, but without any antidiffusion
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = none
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-1
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="181bed7d-4a4f-477b-80f7-9e2e2874a350"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_exponential.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [k_dist]
    type = Uniform
    lower_bound = 1
    upper_bound = 10
  []
  [q_dist]
    type = Uniform
    lower_bound = 9000
    upper_bound = 11000
  []
[]

[Samplers]
  [train_sample]
    type = MonteCarlo
    num_rows = 10
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
  [test_sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
[]

[MultiApps]
  [sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = train_sample
  []
[]

[Controls]
  [cmdline]
    type = MultiAppCommandLineControl
    multi_app = sub
    sampler = train_sample
    param_names = &#x27;Materials/conductivity/prop_values Kernels/source/value&#x27;
  []
[]

[Transfers]
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = train_sample
    to_vector_postprocessor = results
    from_postprocessor = &#x27;avg&#x27;
  []
[]

[VectorPostprocessors]
  [results]
    type = StochasticResults
  []
  [samp_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = test_sample
    output_samples = true
    execute_on = final
  []
  [train_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = train_sample
    output_samples = true
    execute_on = final
  []
[]

[Trainers]
  [GP_avg_trainer]
    type = GaussianProcessTrainer
    execute_on = timestep_end
    covariance_function = &#x27;covar&#x27;           #Choose an exponential for the kernel
    standardize_params = &#x27;true&#x27;               #Center and scale the training params
    standardize_data = &#x27;true&#x27;                 #Center and scale the training data
    distributions = &#x27;k_dist q_dist&#x27;
    sampler = train_sample
    results_vpp = results
    results_vector = data:avg
  []
[]

[Surrogates]
  [GP_avg]
    type = GaussianProcess
    trainer = GP_avg_trainer
  []
[]

[Covariance]
  [covar]
    type=ExponentialCovariance
    gamma = 1                                 #Define the exponential factor
    signal_variance = 1                       #Use a signal variance of 1 in the kernel
    noise_variance = 1e-6                     #A small amount of noise can help with numerical stability
    length_factor = &#x27;0.551133 0.551133&#x27;       #Select a length factor for each parameter (k and q)
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e8475410-cf1c-4f33-9d52-85e25af1e560"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_planar.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1250
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1250
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    yield_function_tolerance = 1.0E-1
    shift = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    deactivation_scheme = &#x27;safe_to_dumb&#x27;
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    min_stepsize = 1E-3
    max_stepsize_for_dumb = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_planar
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="093cdcaf-0423-4dca-937f-f8a2ebf07b92"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform4.i</h4><pre class="moose-pre"><code class="language-text"># apply a pure tension, then some shear
# the BCs are designed to map out the yield function, showing
# the affect of &#x27;cap&#x27; smoothing
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,3*(t-1E-6)*(t-1E-6)*1E6)&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,5*(t-1E-6)*(t-1E-6)*1E6)&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,t,1E-6)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]

[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.08748866
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tip_scheme = cap
    smoother = 0
    cap_rate = 0.001
    cap_start = -1000.0
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-4
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1E4 2E4 3E4 2E4 -4E4 5E4 3E4 5E4 6E8&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-3
    debug_pm_change = 1E-5
    debug_intnl_change = 1E-5
  [../]
[]


[Executioner]
  end_time = 2E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform4
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="32db82ea-0512-456b-b42e-6b333f89f945"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface06.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.1E-6m in y direction and 1.0E-6 in z direction.
# trial stress_yy = 1.1 and stress_zz = 1.0
#
# Then SimpleTester1 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=1.0, stress_zz=0.5
# However, this will mean internal1 &lt; 0, so SimpleTester1 will be deactivated and
# then the algorithm will return to
# stress_yy=0.8, stress_zz=0.7
# internal1 should be 0.0, and internal2 should be 0.3

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface06
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0b4121d8-3388-4609-ab7e-48c529260549"><div class="modal-content"><h4>modules/porous_flow/examples/co2_intercomparison/1Dradial/1Dradial.i</h4><pre class="moose-pre"><code class="language-text"># Intercomparison problem 3: Radial flow from an injection well
#
# From Pruess et al, Code intercomparison builds confidence in
# numerical simulation models for geologic disposal of CO2, Energy 29 (2004)
#
# A variation with zero salinity can be run by changing the initial condition
# of the AuxVariable xnacl

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 500
  xmax = 10000
  bias_x = 1.01
[]

[Problem]
  type = FEProblem
  coord_type = &#x27;RZ&#x27;
  rz_coord_axis = Y
[]

[GlobalParams]
  PorousFlowDictator = &#x27;dictator&#x27;
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [pressure_liquid]
    order = CONSTANT
    family = MONOMIAL
  []
  [saturation_gas]
    order = CONSTANT
    family = MONOMIAL
  []
  [x1]
    order = CONSTANT
    family = MONOMIAL
  []
  [y0]
    order = CONSTANT
    family = MONOMIAL
  []
  [xnacl]
    initial_condition = 0.15
  []
[]

[AuxKernels]
  [pressure_liquid]
    type = PorousFlowPropertyAux
    variable = pressure_liquid
    property = pressure
    phase = 0
    execute_on = &#x27;timestep_end&#x27;
  []
  [saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = &#x27;timestep_end&#x27;
  []
  [x1]
    type = PorousFlowPropertyAux
    variable = x1
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = &#x27;timestep_end&#x27;
  []
  [y0]
    type = PorousFlowPropertyAux
    variable = y0
    property = mass_fraction
    phase = 1
    fluid_component = 0
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Variables]
  [pgas]
    initial_condition = 12e6
  []
  [zi]
    initial_condition = 0
    scaling = 1e4
  []
[]

[Kernels]
  [mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  []
  [flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  []
  [mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  []
  [flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  []
[]

[UserObjects]
  [dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  []
  [pc]
    type = PorousFlowCapillaryPressureVG
    alpha = 5.099e-5
    m = 0.457
    sat_lr = 0.0
    pc_max = 1e7
  []
  [fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  []
[]

[Modules]
  [FluidProperties]
    [co2sw]
      type = CO2FluidProperties
    []
    [co2]
      type = TabulatedFluidProperties
      fp = co2sw
    []
    [water]
      type = Water97FluidProperties
    []
    [watertab]
      type = TabulatedFluidProperties
      fp = water
      temperature_min = 273.15
      temperature_max = 573.15
      fluid_property_file = water_fluid_properties.csv
      save_file = false
    []
    [brine]
      type = BrineFluidProperties
      water_fp = watertab
    []
  []
[]

[Materials]
  [temperature]
    type = PorousFlowTemperature
    temperature = &#x27;45&#x27;
  []
  [brineco2]
    type = PorousFlowFluidState
    gas_porepressure = &#x27;pgas&#x27;
    z = &#x27;zi&#x27;
    temperature_unit = Celsius
    xnacl = &#x27;xnacl&#x27;
    capillary_pressure = pc
    fluid_state = fs
  []
  [porosity]
    type = PorousFlowPorosityConst
    porosity = &#x27;0.12&#x27;
  []
  [permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-13 0 0 0 1e-13 0 0 0 1e-13&#x27;
  []
  [relperm_water]
    type = PorousFlowRelativePermeabilityVG
    m = 0.457
    phase = 0
    s_res = 0.3
    sum_s_res = 0.35
  []
  [relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
    s_res = 0.05
    sum_s_res = 0.35
  []
[]

[BCs]
  [rightwater]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    variable = pgas
    use_mobility = true
    PorousFlowDictator = dictator
    fluid_phase = 0
    multipliers = &#x27;0 1e9&#x27;
    PT_shift = &#x27;12e6&#x27;
    pt_vals = &#x27;0 1e9&#x27;
    mass_fraction_component = 0
    use_relperm = true
  []
  [rightco2]
    type = PorousFlowPiecewiseLinearSink
    variable = zi
    boundary = &#x27;right&#x27;
    use_mobility = true
    PorousFlowDictator = dictator
    fluid_phase = 1
    multipliers = &#x27;0 1e9&#x27;
    PT_shift = &#x27;12e6&#x27;
    pt_vals = &#x27;0 1e9&#x27;
    mass_fraction_component = 1
    use_relperm = true
  []
[]

[DiracKernels]
  [source]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = 1
    variable = zi
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type&#x27;
    petsc_options_value = &#x27;gmres bjacobi lu NONZERO&#x27;
  []
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 8.64e8
  nl_max_its = 25
  l_max_its = 100
  dtmax = 5e6
  [TimeStepper]
    type = IterationAdaptiveDT
    dt = 100
  []
[]

[VectorPostprocessors]
  [vars]
    type = NodalValueSampler
    sort_by = x
    variable = &#x27;pgas zi xnacl&#x27;
    execute_on = &#x27;timestep_end&#x27;
    outputs = spatial
  []
  [auxvars]
    type = ElementValueSampler
    sort_by = x
    variable = &#x27;saturation_gas x1 y0&#x27;
    execute_on = &#x27;timestep_end&#x27;
    outputs = spatial
  []
[]

[Postprocessors]
  [pgas]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = pgas
    outputs = time
  []
  [sgas]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = saturation_gas
    outputs = time
  []
  [zi]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = zi
    outputs = time
  []
  [massgas]
    type = PorousFlowFluidMass
    fluid_component = 1
    outputs = time
  []
  [x1]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = x1
    outputs = time
  []
  [y0]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = y0
    outputs = time
  []
  [xnacl]
    type = PointValue
    point = &#x27;25.25 0 0&#x27;
    variable = xnacl
    outputs = time
  []
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  sync_times = &#x27;2.592e6 8.64e6 8.64e7 8.64e8&#x27;
  [time]
    type = CSV
  []
  [spatial]
    type = CSV
    sync_only = true
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c8cde9b2-47b3-4349-ba78-729dd3468275"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform5_update_version.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is incrementally stretched in the in the z and x directions
# This causes the return direction to be along the hypersurface sigma_I = sigma_II,
# and the resulting stresses are checked to lie on the expected yield surface

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;4*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;z*(t-0.5)&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.5
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 0.1
  type = Transient
[]


[Outputs]
  file_base = small_deform5_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="657f5d62-6ddf-4d73-9942-e9e0217c6b3b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform2.i</h4><pre class="moose-pre"><code class="language-text"># large strain with weak-plane normal rotating with mesh
# First rotate mesh 45deg about x axis
# Then apply stretch in the y=z direction.
# This should create a pure tensile load (no shear), which
# should return to the yield surface.
#
# Since cohesion=1E6 and tan(friction_angle)=1, and
# wps_smoother = 0.5E6, the apex of the weak-plane cone is
# at normal_stress = 0.5E6.  So, the result should be
# s_yy = s_yz = s_zz = 0.25E6
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  # rotate:
  # ynew = c*y + s*z.  znew = -s*y + c*z
  [./bottomx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = back
    function = &#x27;0&#x27;
  [../]
  [./bottomy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = back
    function = &#x27;0.70710678*y+0.70710678*z-y&#x27;
  [../]
  [./bottomz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = back
    function = &#x27;-0.70710678*y+0.70710678*z-z&#x27;
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;0.70710678*y+0.70710678*z-y+if(t&gt;0,1,0)&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;-0.70710678*y+0.70710678*z-z+if(t&gt;0,1,0)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.111107723
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 0.5E6
    yield_function_tolerance = 1E-9
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-8
    debug_fspb = crash
  [../]
[]


[Executioner]
  start_time = -1
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="324f54e4-eeff-4967-af48-91e283e3a398"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/fully_saturated_action.i</h4><pre class="moose-pre"><code class="language-text"># Using the fully-saturated action, which does mass lumping but no upwinding
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[PorousFlowFullySaturated]
  porepressure = porepressure
  coupling_type = Hydro
  gravity = &#x27;0 0 0&#x27;
  fp = the_simple_fluid
  mass_fraction_vars = tracer
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[Materials]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-1
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9731ea38-17e3-4dd5-8968-2d09e5d97fa4"><div class="modal-content"><h4>modules/richards/test/tests/user_objects/uo1.i</h4><pre class="moose-pre"><code class="language-text"># Relative-permeability User objects give the correct value
# (note that here p is x, where x runs between 0.01 and 0.99
# and that seff is p in the aux vars)
#
# If you want to add another test for another UserObject
# then add the UserObject, add a Function defining the expected result,
# add an AuxVariable and AuxKernel that will record the UserObjects value
# and finally add a NodalL2Error that compares this with the Function.

[UserObjects]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermPower5]
    type = RichardsRelPermPower
    simm = 0.0
    n = 5
  [../]
  [./RelPermVG]
    type = RichardsRelPermVG
    simm = 0.0
    m = 0.8
  [../]
  [./RelPermVG1]
    type = RichardsRelPermVG1
    simm = 0.0
    m = 0.8
    scut = 1E-6 # then we get a cubic
  [../]
  [./RelPermBW]
    type = RichardsRelPermBW
    Sn = 0.05
    Ss = 0.95
    Kn = 0.0
    Ks = 1.0
    C = 1.5
  [../]
  [./RelPermMonomial]
    type = RichardsRelPermMonomial
    simm = 0.0
    n = 3
  [../]
  [./RelPermPowerGas]
    type = RichardsRelPermPowerGas
    simm = 0.0
    n = 5
  [../]
  [./Q2PRelPermPowerGas]
    type = Q2PRelPermPowerGas
    simm = 0.0
    n = 5
  [../]
  [./RelPermMonomial_zero]
    type = RichardsRelPermMonomial
    simm = 0.1
    n = 0
    zero_to_the_zero = 0
  [../]

  # following are unimportant in this test
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1000
    bulk_mod = 2E6
  [../]
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1E-6
  [../]
  [./RelPermPower_unimportant]
    type = RichardsRelPermPower
    simm = 0.10101
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.054321
    sum_s_res = 0.054321
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 1E5
  [../]
[]

[Functions]
  [./initial_pressure]
    type = ParsedFunction
    value = x
  [../]

  [./answer_RelPermPower]
    type = ParsedFunction
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;2&#x27;
  [../]
  [./answer_dRelPermPower]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;2&#x27;
  [../]
  [./answer_d2RelPermPower]
    type = Grad2ParsedFunction
    direction = &#x27;1E-3 0 0&#x27;
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;2&#x27;
  [../]

  [./answer_RelPermPower5]
    type = ParsedFunction
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_dRelPermPower5]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_d2RelPermPower5]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = ((n+1)*(x^n))-(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]

  [./answer_RelPermVG]
    type = ParsedFunction
    value = (x^(0.5))*(1-(1-(x^(1.0/m)))^m)^2
    vars = &#x27;m&#x27;
    vals = &#x27;0.8&#x27;
  [../]
  [./answer_dRelPermVG]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = (x^(0.5))*(1-(1-(x^(1.0/m)))^m)^2
    vars = &#x27;m&#x27;
    vals = &#x27;0.8&#x27;
  [../]
  [./answer_d2RelPermVG]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = (x^(0.5))*(1-(1-(x^(1.0/m)))^m)^2
    vars = &#x27;m&#x27;
    vals = &#x27;0.8&#x27;
  [../]

  [./answer_RelPermVG1]
    type = ParsedFunction
    value = x^3
  [../]
  [./answer_dRelPermVG1]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = x^3
  [../]
  [./answer_d2RelPermVG1]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = x^3
  [../]

  [./answer_RelPermBW]
    type = ParsedFunction
    value = if(x&gt;ss,1,if(x&lt;sn,0,kn+(((x-sn)/(ss-sn))^2)*(c-1)*(ks-kn)/(c-((x-sn)/(ss-sn)))))
    vars = &#x27;kn ks c sn ss&#x27;
    vals = &#x27;0 1 1.5 0.05 0.95&#x27;
  [../]
  [./answer_dRelPermBW]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = if(x&gt;ss,1,if(x&lt;sn,0,kn+(((x-sn)/(ss-sn))^2)*(c-1)*(ks-kn)/(c-((x-sn)/(ss-sn)))))
    vars = &#x27;kn ks c sn ss&#x27;
    vals = &#x27;0 1 1.5 0.05 0.95&#x27;
  [../]
  [./answer_d2RelPermBW]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = if(x&gt;ss,1,if(x&lt;sn,0,kn+(((x-sn)/(ss-sn))^2)*(c-1)*(ks-kn)/(c-((x-sn)/(ss-sn)))))
    vars = &#x27;kn ks c sn ss&#x27;
    vals = &#x27;0 1 1.5 0.05 0.95&#x27;
  [../]

  [./answer_RelPermMonomial]
    type = ParsedFunction
    value = x^n
    vars = &#x27;n&#x27;
    vals = &#x27;3&#x27;
  [../]
  [./answer_dRelPermMonomial]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = x^n
    vars = &#x27;n&#x27;
    vals = &#x27;3&#x27;
  [../]
  [./answer_d2RelPermMonomial]
    type = Grad2ParsedFunction
    direction = &#x27;1E-3 0 0&#x27;
    value = x^n
    vars = &#x27;n&#x27;
    vals = &#x27;3&#x27;
  [../]

  [./answer_RelPermMonomial_zero]
    type = ParsedFunction
    value = if(x&gt;simm,1,0)
    vars = &#x27;simm&#x27;
    vals = &#x27;0.1&#x27;
  [../]
  [./answer_dRelPermMonomial_zero]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = if(x&gt;simm,1,0)
    vars = &#x27;simm&#x27;
    vals = &#x27;0.1&#x27;
  [../]
  [./answer_d2RelPermMonomial_zero]
    type = Grad2ParsedFunction
    direction = &#x27;1E-3 0 0&#x27;
    value = if(x&gt;simm,1,0)
    vars = &#x27;simm&#x27;
    vals = &#x27;0.1&#x27;
  [../]

  [./answer_RelPermPowerGas]
    type = ParsedFunction
    value = 1-((n+1)*((1-x)^n))+(n*((1-x)^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_dRelPermPowerGas]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = 1-((n+1)*((1-x)^n))+(n*((1-x)^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_d2RelPermPowerGas]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = 1-((n+1)*((1-x)^n))+(n*((1-x)^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]

  [./answer_Q2PRelPermPowerGas]
    type = ParsedFunction
    value = 1-((n+1)*(x^n))+(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_dQ2PRelPermPowerGas]
    type = GradParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = 1-((n+1)*(x^n))+(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
  [./answer_d2Q2PRelPermPowerGas]
    type = Grad2ParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = 1-((n+1)*(x^n))+(n*(x^(n+1)))
    vars = &#x27;n&#x27;
    vals = &#x27;5&#x27;
  [../]
[]

[AuxVariables]
  [./RelPermPower_Aux]
  [../]
  [./dRelPermPower_Aux]
  [../]
  [./d2RelPermPower_Aux]
  [../]

  [./RelPermPower5_Aux]
  [../]
  [./dRelPermPower5_Aux]
  [../]
  [./d2RelPermPower5_Aux]
  [../]

  [./RelPermVG_Aux]
  [../]
  [./dRelPermVG_Aux]
  [../]
  [./d2RelPermVG_Aux]
  [../]

  [./RelPermVG1_Aux]
  [../]
  [./dRelPermVG1_Aux]
  [../]
  [./d2RelPermVG1_Aux]
  [../]

  [./RelPermBW_Aux]
  [../]
  [./dRelPermBW_Aux]
  [../]
  [./d2RelPermBW_Aux]
  [../]

  [./RelPermMonomial_Aux]
  [../]
  [./dRelPermMonomial_Aux]
  [../]
  [./d2RelPermMonomial_Aux]
  [../]

  [./RelPermPowerGas_Aux]
  [../]
  [./dRelPermPowerGas_Aux]
  [../]
  [./d2RelPermPowerGas_Aux]
  [../]

  [./Q2PRelPermPowerGas_Aux]
  [../]
  [./dQ2PRelPermPowerGas_Aux]
  [../]
  [./d2Q2PRelPermPowerGas_Aux]
  [../]

  [./RelPermMonomial_zero_Aux]
  [../]
  [./dRelPermMonomial_zero_Aux]
  [../]
  [./d2RelPermMonomial_zero_Aux]
  [../]

  [./check_Aux]
  [../]
[]

[AuxKernels]
  [./RelPermPower_AuxK]
    type = RichardsRelPermAux
    variable = RelPermPower_Aux
    relperm_UO = RelPermPower
    seff_var = pressure
  [../]
  [./dRelPermPower_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermPower_Aux
    relperm_UO = RelPermPower
    seff_var = pressure
  [../]
  [./d2RelPermPower_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermPower_Aux
    relperm_UO = RelPermPower
    seff_var = pressure
  [../]

  [./RelPermPower5_AuxK]
    type = RichardsRelPermAux
    variable = RelPermPower5_Aux
    relperm_UO = RelPermPower5
    seff_var = pressure
  [../]
  [./dRelPermPower5_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermPower5_Aux
    relperm_UO = RelPermPower5
    seff_var = pressure
  [../]
  [./d2RelPermPower5_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermPower5_Aux
    relperm_UO = RelPermPower5
    seff_var = pressure
  [../]

  [./RelPermVG_AuxK]
    type = RichardsRelPermAux
    variable = RelPermVG_Aux
    relperm_UO = RelPermVG
    seff_var = pressure
  [../]
  [./dRelPermVG_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermVG_Aux
    relperm_UO = RelPermVG
    seff_var = pressure
  [../]
  [./d2RelPermVG_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermVG_Aux
    relperm_UO = RelPermVG
    seff_var = pressure
  [../]

  [./RelPermVG1_AuxK]
    type = RichardsRelPermAux
    variable = RelPermVG1_Aux
    relperm_UO = RelPermVG1
    seff_var = pressure
  [../]
  [./dRelPermVG1_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermVG1_Aux
    relperm_UO = RelPermVG1
    seff_var = pressure
  [../]
  [./d2RelPermVG1_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermVG1_Aux
    relperm_UO = RelPermVG1
    seff_var = pressure
  [../]

  [./RelPermBW_AuxK]
    type = RichardsRelPermAux
    variable = RelPermBW_Aux
    relperm_UO = RelPermBW
    seff_var = pressure
  [../]
  [./dRelPermBW_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermBW_Aux
    relperm_UO = RelPermBW
    seff_var = pressure
  [../]
  [./d2RelPermBW_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermBW_Aux
    relperm_UO = RelPermBW
    seff_var = pressure
  [../]

  [./RelPermMonomial_AuxK]
    type = RichardsRelPermAux
    variable = RelPermMonomial_Aux
    relperm_UO = RelPermMonomial
    seff_var = pressure
  [../]
  [./dRelPermMonomial_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermMonomial_Aux
    relperm_UO = RelPermMonomial
    seff_var = pressure
  [../]
  [./d2RelPermMonomial_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermMonomial_Aux
    relperm_UO = RelPermMonomial
    seff_var = pressure
  [../]

  [./RelPermPowerGas_AuxK]
    type = RichardsRelPermAux
    variable = RelPermPowerGas_Aux
    relperm_UO = RelPermPowerGas
    seff_var = pressure
  [../]
  [./dRelPermPowerGas_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermPowerGas_Aux
    relperm_UO = RelPermPowerGas
    seff_var = pressure
  [../]
  [./d2RelPermPowerGas_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermPowerGas_Aux
    relperm_UO = RelPermPowerGas
    seff_var = pressure
  [../]

  [./Q2PRelPermPowerGas_AuxK]
    type = RichardsRelPermAux
    variable = Q2PRelPermPowerGas_Aux
    relperm_UO = Q2PRelPermPowerGas
    seff_var = pressure
  [../]
  [./dQ2PRelPermPowerGas_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dQ2PRelPermPowerGas_Aux
    relperm_UO = Q2PRelPermPowerGas
    seff_var = pressure
  [../]
  [./d2Q2PRelPermPowerGas_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2Q2PRelPermPowerGas_Aux
    relperm_UO = Q2PRelPermPowerGas
    seff_var = pressure
  [../]

  [./RelPermMonomial_zero_AuxK]
    type = RichardsRelPermAux
    variable = RelPermMonomial_zero_Aux
    relperm_UO = RelPermMonomial_zero
    seff_var = pressure
  [../]
  [./dRelPermMonomial_zero_AuxK]
    type = RichardsRelPermPrimeAux
    variable = dRelPermMonomial_zero_Aux
    relperm_UO = RelPermMonomial_zero
    seff_var = pressure
  [../]
  [./d2RelPermMonomial_zero_AuxK]
    type = RichardsRelPermPrimePrimeAux
    variable = d2RelPermMonomial_zero_Aux
    relperm_UO = RelPermMonomial_zero
    seff_var = pressure
  [../]

  [./check_AuxK]
    type = FunctionAux
    variable = check_Aux
    function = answer_RelPermBW
  [../]
[]

[Postprocessors]
  [./cf_RelPermPower]
    type = NodalL2Error
    function = answer_RelPermPower
    variable = RelPermPower_Aux
  [../]
  [./cf_dRelPermPower]
    type = NodalL2Error
    function = answer_dRelPermPower
    variable = dRelPermPower_Aux
  [../]
  [./cf_d2RelPermPower]
    type = NodalL2Error
    function = answer_d2RelPermPower
    variable = d2RelPermPower_Aux
  [../]

  [./cf_RelPermPower5]
    type = NodalL2Error
    function = answer_RelPermPower5
    variable = RelPermPower5_Aux
  [../]
  [./cf_dRelPermPower5]
    type = NodalL2Error
    function = answer_dRelPermPower5
    variable = dRelPermPower5_Aux
  [../]
  [./cf_d2RelPermPower5]
    type = NodalL2Error
    function = answer_d2RelPermPower5
    variable = d2RelPermPower5_Aux
  [../]

  [./cf_RelPermVG]
    type = NodalL2Error
    function = answer_RelPermVG
    variable = RelPermVG_Aux
  [../]
  [./cf_dRelPermVG]
    type = NodalL2Error
    function = answer_dRelPermVG
    variable = dRelPermVG_Aux
  [../]
  [./cf_d2RelPermVG]
    type = NodalL2Error
    function = answer_d2RelPermVG
    variable = d2RelPermVG_Aux
  [../]

  [./cf_RelPermVG1]
    type = NodalL2Error
    function = answer_RelPermVG1
    variable = RelPermVG1_Aux
  [../]
  [./cf_dRelPermVG1]
    type = NodalL2Error
    function = answer_dRelPermVG1
    variable = dRelPermVG1_Aux
  [../]
  [./cf_d2RelPermVG1]
    type = NodalL2Error
    function = answer_d2RelPermVG1
    variable = d2RelPermVG1_Aux
  [../]

  [./cf_RelPermBW]
    type = NodalL2Error
    function = answer_RelPermBW
    variable = RelPermBW_Aux
  [../]
  [./cf_dRelPermBW]
    type = NodalL2Error
    function = answer_dRelPermBW
    variable = dRelPermBW_Aux
  [../]
  [./cf_d2RelPermBW]
    type = NodalL2Error
    function = answer_d2RelPermBW
    variable = d2RelPermBW_Aux
  [../]

  [./cf_RelPermMonomial]
    type = NodalL2Error
    function = answer_RelPermMonomial
    variable = RelPermMonomial_Aux
  [../]
  [./cf_dRelPermMonomial]
    type = NodalL2Error
    function = answer_dRelPermMonomial
    variable = dRelPermMonomial_Aux
  [../]
  [./cf_d2RelPermMonomial]
    type = NodalL2Error
    function = answer_d2RelPermMonomial
    variable = d2RelPermMonomial_Aux
  [../]

  [./cf_RelPermPowerGas]
    type = NodalL2Error
    function = answer_RelPermPowerGas
    variable = RelPermPowerGas_Aux
  [../]
  [./cf_dRelPermPowerGas]
    type = NodalL2Error
    function = answer_dRelPermPowerGas
    variable = dRelPermPowerGas_Aux
  [../]
  [./cf_d2RelPermPowerGas]
    type = NodalL2Error
    function = answer_d2RelPermPowerGas
    variable = d2RelPermPowerGas_Aux
  [../]

  [./cf_Q2PRelPermPowerGas]
    type = NodalL2Error
    function = answer_Q2PRelPermPowerGas
    variable = Q2PRelPermPowerGas_Aux
  [../]
  [./cf_dQ2PRelPermPowerGas]
    type = NodalL2Error
    function = answer_dQ2PRelPermPowerGas
    variable = dQ2PRelPermPowerGas_Aux
  [../]
  [./cf_d2Q2PRelPermPowerGas]
    type = NodalL2Error
    function = answer_d2Q2PRelPermPowerGas
    variable = d2Q2PRelPermPowerGas_Aux
  [../]

  [./cf_RelPermMonomial_zero]
    type = NodalL2Error
    function = answer_RelPermMonomial_zero
    variable = RelPermMonomial_zero_Aux
  [../]
  [./cf_dRelPermMonomial_zero]
    type = NodalL2Error
    function = answer_dRelPermMonomial_zero
    variable = dRelPermMonomial_zero_Aux
  [../]
  [./cf_d2RelPermMonomial_zero]
    type = NodalL2Error
    function = answer_d2RelPermMonomial_zero
    variable = d2RelPermMonomial_zero_Aux
  [../]

[]



#############################################################################
#
# Following is largely unimportant as we are not running an actual similation
#
#############################################################################
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0.01
  xmax = 0.99
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = initial_pressure
    [../]
  [../]
[]

[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
[]

[Materials]
  [./unimportant_material]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-20 0 0  0 1E-20 0  0 0 1E-20&#x27;
    richardsVarNames_UO = PPNames
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower_unimportant
    sat_UO = Saturation
    seff_UO = SeffVG
    SUPG_UO = SUPGstandard
    viscosity = 1E-3
    gravity = &#x27;0 0 -10&#x27;
    linear_shape_fcns = true
  [../]
[]

[Preconditioning]
  [./does_nothing]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E50 1E50 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 1
  dt = 1E-100
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  active = &#x27;csv&#x27;
  file_base = uo1
  [./csv]
    type = CSV
    [../]
  [./exodus]
    type = Exodus
    hide = pressure
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e098fd0c-b3a3-4599-b43d-8e66e88306bd"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_Matern_half_int.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [k_dist]
    type = Uniform
    lower_bound = 1
    upper_bound = 10
  []
  [q_dist]
    type = Uniform
    lower_bound = 9000
    upper_bound = 11000
  []
[]

[Samplers]
  [train_sample]
    type = MonteCarlo
    num_rows = 10
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
  [test_sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
[]

[MultiApps]
  [sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = train_sample
  []
[]

[Controls]
  [cmdline]
    type = MultiAppCommandLineControl
    multi_app = sub
    sampler = train_sample
    param_names = &#x27;Materials/conductivity/prop_values Kernels/source/value&#x27;
  []
[]

[Transfers]
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = train_sample
    to_vector_postprocessor = results
    from_postprocessor = &#x27;avg&#x27;
  []
[]

[VectorPostprocessors]
  [results]
    type = StochasticResults
  []
  [samp_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = test_sample
    output_samples = true
    execute_on = final
  []
  [train_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = train_sample
    output_samples = true
    execute_on = final
  []
[]

[Trainers]
  [GP_avg_trainer]
    type = GaussianProcessTrainer
    execute_on = timestep_end
    covariance_function = &#x27;covar&#x27;   #Choose a Matern with half-integer argument for the kernel
    standardize_params = &#x27;true&#x27;           #Center and scale the training params
    standardize_data = &#x27;true&#x27;             #Center and scale the training data
    distributions = &#x27;k_dist q_dist&#x27;
    sampler = train_sample
    results_vpp = results
    results_vector = data:avg
  []
[]

[Surrogates]
  [GP_avg]
    type = GaussianProcess
    trainer = GP_avg_trainer
  []
[]

[Covariance]
  [covar]
    type=MaternHalfIntCovariance
    p = 2                                 #Define the exponential factor
    signal_variance = 1                       #Use a signal variance of 1 in the kernel
    noise_variance = 1e-6                     #A small amount of noise can help with numerical stability
    length_factor = &#x27;0.551133 0.551133&#x27;       #Select a length factor for each parameter (k and q)
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bc07bc2-cad3-4ab4-bf48-81d2998bc389"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/mms/supg/supg_pspg_adv_dominated_mms.i</h4><pre class="moose-pre"><code class="language-text">mu=1.5e-4
rho=2.5

[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
  supg = true
  pspg = true
  convective_term = true
  integrate_p_by_parts = false
  transient_term = true
  laplace = true
  u = vel_x
  v = vel_y
  p = p
  alpha = 1e0
  order = FIRST
  family = LAGRANGE
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 1.0
    ymin = 0
    ymax = 1.0
    elem_type = QUAD9
    nx = 4
    ny = 4
  []
  [./corner_node]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;pinned_node&#x27;
    nodes = &#x27;0&#x27;
    input = gen
  [../]
[]

[Variables]
  [./vel_x]
  [../]

  [./vel_y]
  [../]

  [./p]
    order = FIRST
  [../]
[]

[Kernels]
  # mass
  [./mass]
    type = INSMass
    variable = p
    x_vel_forcing_func = vel_x_source_func
    y_vel_forcing_func = vel_y_source_func
  [../]

  [./x_time]
    type = INSMomentumTimeDerivative
    variable = vel_x
  [../]
  [./y_time]
    type = INSMomentumTimeDerivative
    variable = vel_y
  [../]

  # x-momentum, space
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    component = 0
    forcing_func = vel_x_source_func
  [../]

  # y-momentum, space
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    component = 1
    forcing_func = vel_y_source_func
  [../]

  [./p_source]
    type = BodyForce
    function = p_source_func
    variable = p
  [../]
[]

[BCs]
  [./vel_x]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_x_func
    variable = vel_x
  [../]
  [./vel_y]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_y_func
    variable = vel_y
  [../]
  [./p]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = p_func
    variable = p
  [../]
[]

[Functions]
  [./vel_x_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.028*pi^2*x^2*sin(0.2*pi*x*y) - 0.028*pi^2*y^2*sin(0.2*pi*x*y) - 0.1*pi^2*sin(0.5*pi*x) - 0.4*pi^2*sin(pi*y)) + ${rho}*(0.14*pi*x*cos(0.2*pi*x*y) + 0.4*pi*cos(pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*y*cos(0.2*pi*x*y) + 0.25*pi*cos(0.5*pi*x)&#x27;
  [../]
  [./vel_y_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.018*pi^2*x^2*sin(0.3*pi*x*y) - 0.018*pi^2*y^2*sin(0.3*pi*x*y) - 0.384*pi^2*sin(0.8*pi*x) - 0.027*pi^2*sin(0.3*pi*y)) + ${rho}*(0.06*pi*x*cos(0.3*pi*x*y) + 0.09*pi*cos(0.3*pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.06*pi*y*cos(0.3*pi*x*y) + 0.48*pi*cos(0.8*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*x*cos(0.2*pi*x*y) + 0.3*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./p_source_func]
    type = ParsedFunction
    value = &#x27;-0.06*pi*x*cos(0.3*pi*x*y) - 0.14*pi*y*cos(0.2*pi*x*y) - 0.2*pi*cos(0.5*pi*x) - 0.09*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./vel_x_func]
    type = ParsedFunction
    value = &#x27;0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vel_y_func]
    type = ParsedFunction
    value = &#x27;0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3&#x27;
  [../]
  [./p_func]
    type = ParsedFunction
    value = &#x27;0.5*sin(0.5*pi*x) + 1.0*sin(0.3*pi*y) + 0.5*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vxx_func]
    type = ParsedFunction
    value = &#x27;0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)&#x27;
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;${rho}  ${mu}&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    solve_type = &#x27;NEWTON&#x27;
  [../]
[]

[Executioner]
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_view&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu NONZERO superlu_dist&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-12
  nl_max_its = 10
  l_tol = 1e-6
  l_max_its = 10
  # To run to steady-state, set num-steps to some large number (1000000 for example)
  type = Transient
  num_steps = 10
  steady_state_detection = true
  steady_state_tolerance = 1e-10
  [./TimeStepper]
    dt = .1
    type = IterationAdaptiveDT
    cutback_factor = 0.4
    growth_factor = 1.2
    optimal_iterations = 20
  [../]
[]

[Outputs]
  execute_on = &#x27;final&#x27;
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2vel_x]
    type = ElementL2Error
    variable = vel_x
    function = vel_x_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vel_y]
    variable = vel_y
    function = vel_y_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2p]
    variable = p
    function = p_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vxx]
    variable = vxx
    function = vxx_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./vxx]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./vxx]
    type = VariableGradientComponent
    component = x
    variable = vxx
    gradient_variable = vel_x
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d6cc5c71-32a9-4254-8bf7-69683f44c4d7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap/random.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.  Two yield surfaces are used: one for compression and one for tension.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./cap1]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
  [./cap2]
    type = TensorMechanicsPlasticMeanCap
    a = 1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = &#x27;cap1 cap2&#x27;
    debug_fspb = crash
    deactivation_scheme = optimized
    min_stepsize = 1
    max_stepsize_for_dumb = 1
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d26a77c6-7745-43b6-be43-e4bb10c7c308"><div class="modal-content"><h4>test/tests/functions/coarsened_piecewise_linear/coarsened_piecewise_linear.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
[]

[Variables]
  [./dummy]
  [../]
[]

[Problem]
  solve = false
  kernel_coverage_check = false
[]

[Functions]
  [./input]
    type = CoarsenedPiecewiseLinear
    data_file = input.csv
    format = columns
    epsilon = 0.1
    x_scale = 0.03
  [../]
[]

[VectorPostprocessors]
  [./F]
    type = PiecewiseFunctionTabulate
    function = input
    execute_on = INITIAL
    outputs = vpp
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 1
[]

[Outputs]
  [./vpp]
    type = CSV
    execute_vector_postprocessors_on = INITIAL
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6d260b61-c848-41ec-8a97-a036a0bd508b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/four_surface14.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
# SimpleTester3 with a = 0 and b = 1 and strength = 1.1
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.1E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 2.1 and stress_zz = 3.0
#
# This is similar to three_surface14.i, and a description is found there.
# The result should be stress_zz=1=stress_yy, with internal0=2
# and internal1=1.1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f3
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
  [./int3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int3
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple3]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2 simple3&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = four_surface14
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="66a52f8c-6d0a-45a8-b424-b861fbe47331"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar1.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretch in x, y and z directions.
# With cohesion = 10, friction_angle = 60deg, the
# algorithm should return to
# sigma_m = 10*Cos(60)/Sin(60) = 5.773503
# using planar surfaces (not smoothed)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.2E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./phi]
    type = TensorMechanicsHardeningConstant
    value = 1.04719756
  [../]
  [./psi]
    type = TensorMechanicsHardeningConstant
    value = 0.1
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    yield_function_tolerance = 1E-3
    shift = 1E-12
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-10
    deactivation_scheme = safe
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2e5cfab3-a6a8-487f-b92e-00c90021022e"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01a.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, constant fluid-bulk, constant viscosity, constant permeability
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyBase
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01a
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="27484a59-2d5e-4f35-ad7f-263f67b3c52a"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig7a.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 7 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Solid gray curve (1)
# Eigenstrain and elastic energies ar computed per phase and then interpolated.
# Supply the RADIUS parameter (10-35) on the command line to generate data
# for all curves in the plot.
#

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 32
  xmin = 0
  xmax = 100
  second_order = true
[]

[Problem]
  coord_type = RSPHERICAL
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Functions]
  [./diff]
    type = ParsedFunction
    value = &#x27;${RADIUS}-pos_c&#x27;
    vars = pos_c
    vals = pos_c
  [../]
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]
  [./w]
  [../]

  # Phase order parameter
  [./eta]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]

  # Mesh displacement
  [./disp_r]
    order = SECOND
  [../]

  [./Fe_fit]
    order = SECOND
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Split Cahn-Hilliard kernels
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    args = &#x27;eta&#x27;
    kappa_name = kappa_c
    w = w
  [../]
  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta
    args = &#x27;c&#x27;
    mob_name = L
    f_name = F
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    mob_name = L
    kappa_name = kappa_eta
  [../]

  [./Fe]
    type = MaterialPropertyValue
    prop_name = Fe
    variable = Fe_fit
  [../]

  [./autoadjust]
    type = MaskedBodyForce
    variable = w
    function = diff
    mask = mask
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa_c kappa_eta&#x27;
    prop_values = &#x27;1.0 1.0 0.5     1&#x27;
  [../]

  # forcing function mask
  [./mask]
    type = ParsedMaterial
    f_name = mask
    function = grad/dt
    material_property_names = &#x27;grad dt&#x27;
  [../]
  [./grad]
    type = VariableGradientMaterial
    variable = c
    prop = grad
  [../]
  [./time]
    type = TimeStepMaterial
  [../]

  # global mechanical properties
  [./elasticity_tensor_1]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    base_name = phase1
    fill_method = symmetric_isotropic
  [../]
  [./elasticity_tensor_2]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    base_name = phase2
    fill_method = symmetric_isotropic
  [../]
  [./strain_1]
    type = ComputeRSphericalSmallStrain
    base_name = phase1
  [../]
  [./strain_2]
    type = ComputeRSphericalSmallStrain
    base_name = phase2
    eigenstrain_names = eigenstrain
  [../]
  [./stress_1]
    type = ComputeLinearElasticStress
    base_name = phase1
  [../]
  [./stress_2]
    type = ComputeLinearElasticStress
    base_name = phase2
  [../]

  # eigenstrain per phase
  [./eigenstrain2]
    type = ComputeEigenstrain
    eigen_base = &#x27;0.05 0.05 0.05 0 0 0&#x27;
    base_name = phase2
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching]
    type = SwitchingFunctionMaterial
    function_name = h
    eta = eta
    h_order = SIMPLE
  [../]
  [./barrier]
    type = BarrierFunctionMaterial
    eta = eta
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(1-c)^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # elastic free energies
  [./elastic_free_energy_1]
    type = ElasticEnergyMaterial
    f_name = Fe1
    args = &#x27;&#x27;
    base_name = phase1
    derivative_order = 2
  [../]
  [./elastic_free_energy_2]
    type = ElasticEnergyMaterial
    f_name = Fe2
    args = &#x27;&#x27;
    base_name = phase2
    derivative_order = 2
  [../]

  # per phase free energies
  [./free_energy_1]
    type = DerivativeSumMaterial
    f_name = F1
    sum_materials = &#x27;Fc1 Fe1&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./free_energy_2]
    type = DerivativeSumMaterial
    f_name = F2
    sum_materials = &#x27;Fc2 Fe2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global chemical free energy
  [./global_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = F
    fa_name = F1
    fb_name = F2
    eta = eta
    args = &#x27;c&#x27;
    W = 4
  [../]

  # global stress
  [./global_stress]
    type = TwoPhaseStressMaterial
    base_A = phase1
    base_B = phase2
  [../]

  [./elastic_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = Fe
    fa_name = Fe1
    fb_name = Fe2
    eta = eta
    args = &#x27;c&#x27;
    W = 0
  [../]
[]

[BCs]
  [./left_r]
    type = DirichletBC
    variable = disp_r
    boundary = &#x27;left&#x27;
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_c]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = c
    target = 0.582
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_eta]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = eta
    target = 0.5
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./c_min]
    type = ElementExtremeValue
    value_type = min
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    variable = &#x27;Fe_fit c w&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point =   &#x27;100 0 0&#x27;
    num_points = 5000
    sort_by = x
    outputs = vpp
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu&#x27;

  l_max_its = 30
  nl_max_its = 15
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 2.0e-9
  start_time = 0.0
  end_time = 100000.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 7
    iteration_window = 1
    dt = 1
  [../]

  [./Adaptivity]
    initial_adaptivity = 5
    interval = 10
    max_h_level = 5
    refine_fraction = 0.9
    coarsen_fraction = 0.1
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = radius_${RADIUS}/energy_pp
  [../]
  [./vpp]
    type = CSV
    delimiter = &#x27; &#x27;
    sync_times = &#x27;10 50 100 500 1000 5000 10000 50000 100000&#x27;
    sync_only = true
    time_data = true
    file_base = radius_${RADIUS}/energy_vpp
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="682e7a86-dc9d-482b-9158-23c8964886e1"><div class="modal-content"><h4>test/tests/outputs/postprocessor_final/postprocessor_final.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[VectorPostprocessors]
  [./vpp]
    type = LineValueSampler
    variable = u
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 1 0&#x27;
    outputs = test
    num_points = 10
    sort_by = id
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  [./test]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a6860792-222c-4665-b9e3-a56ccbfe3605"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform4.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 0.75E-6m in the z and x directions
# This causes the return direction to be along the hypersurface sigma_I = sigma_II
# tensile_strength is set to 1Pa, tip_smoother = 0, edge_smoother = 25degrees
# Then A + B + C = 0.609965
#
# The final stress should have meanstress = 0.680118 and bar(sigma) = 0.52443, and sigma_zz = sigma_xx = 0.982896

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.75E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.75E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.0
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform4
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0a93f6d1-994d-4a5f-9601-8ae480905037"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_3/ring3_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring3_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;
#  petsc_options = &#x27;-mat_superlu_dist_iterrefine -mat_superlu_dist_replacetinypivot&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="042c3304-a26c-48bb-b4bc-764c7707632f"><div class="modal-content"><h4>modules/combined/examples/phase_field-mechanics/Pattern1.i</h4><pre class="moose-pre"><code class="language-text">#
# Pattern example 1
#
# Phase changes driven by a combination mechanical (elastic) and chemical
# driving forces. In this three phase system a matrix phase, an oversized and
# an undersized precipitate phase compete. The chemical free energy favors a
# phase separation into either precipitate phase. A mix of both precipitate
# emerges to balance lattice expansion and contraction.
#
# This example demonstrates the use of
# * ACMultiInterface
# * SwitchingFunctionConstraintEta and SwitchingFunctionConstraintLagrange
# * DerivativeParsedMaterial
# * ElasticEnergyMaterial
# * DerivativeMultiPhaseMaterial
# * MultiPhaseStressMaterial
# which are the components to se up a phase field model with an arbitrary number
# of phases
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 80
  ny = 80
  nz = 0
  xmin = -20
  xmax = 20
  ymin = -20
  ymax = 20
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[GlobalParams]
  # CahnHilliard needs the third derivatives
  derivative_order = 3
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    additional_free_energy = cross_energy
  [../]
  [./cross_terms]
    type = CrossTermGradientFreeEnergy
    variable = cross_energy
    interfacial_vars = &#x27;eta1 eta2 eta3&#x27;
    kappa_names = &#x27;kappa11 kappa12 kappa13
                   kappa21 kappa22 kappa23
                   kappa31 kappa32 kappa33&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 0.8
      seed = 1235
    [../]
  [../]

  # Order parameter for the Matrix
  [./eta1]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.5
  [../]
  # Order parameters for the 2 different inclusion orientations
  [./eta2]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.1
  [../]
  [./eta3]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.1
  [../]

  # Mesh displacement
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]

  # Lagrange-multiplier
  [./lambda]
    order = FIRST
    family = LAGRANGE
    initial_condition = 1.0
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_res]
    type = CahnHilliard
    variable = c
    f_name = F
    args = &#x27;eta1 eta2 eta3&#x27;
  [../]
  [./time]
    type = TimeDerivative
    variable = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta1
    args = &#x27;eta2 eta3 c&#x27;
    mob_name = L1
    f_name = F
  [../]
  [./ACInterface1]
    type = ACMultiInterface
    variable = eta1
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L1
    kappa_names = &#x27;kappa11 kappa12 kappa13&#x27;
  [../]
  [./lagrange1]
    type = SwitchingFunctionConstraintEta
    variable = eta1
    h_name   = h1
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 2
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
  [./ACBulk2]
    type = AllenCahn
    variable = eta2
    args = &#x27;eta1 eta3 c&#x27;
    mob_name = L2
    f_name = F
  [../]
  [./ACInterface2]
    type = ACMultiInterface
    variable = eta2
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L2
    kappa_names = &#x27;kappa21 kappa22 kappa23&#x27;
  [../]
  [./lagrange2]
    type = SwitchingFunctionConstraintEta
    variable = eta2
    h_name   = h2
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 3
  [./deta3dt]
    type = TimeDerivative
    variable = eta3
  [../]
  [./ACBulk3]
    type = AllenCahn
    variable = eta3
    args = &#x27;eta1 eta2 c&#x27;
    mob_name = L3
    f_name = F
  [../]
  [./ACInterface3]
    type = ACMultiInterface
    variable = eta3
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L3
    kappa_names = &#x27;kappa31 kappa32 kappa33&#x27;
  [../]
  [./lagrange3]
    type = SwitchingFunctionConstraintEta
    variable = eta3
    h_name   = h3
    lambda = lambda
  [../]

  # Lagrange-multiplier constraint kernel for lambda
  [./lagrange]
    type = SwitchingFunctionConstraintLagrange
    variable = lambda
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
    epsilon = 1e-6
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c  L1 L2 L3  kappa11 kappa12 kappa13 kappa21 kappa22 kappa23 kappa31 kappa32 kappa33&#x27;
    prop_values = &#x27;0.2 0        1  1  1   2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00   &#x27;
  [../]

  # We use this to output the level of constraint enforcement
  # ideally it should be 0 everywhere, if the constraint is fully enforced
  [./etasummat]
    type = ParsedMaterial
    f_name = etasum
    args = &#x27;eta1 eta2 eta3&#x27;
    material_property_names = &#x27;h1 h2 h3&#x27;
    function = &#x27;h1+h2+h3-1&#x27;
    outputs = exodus
  [../]

  # This parsed material creates a single property for visualization purposes.
  # It will be 0 for phase 1, -1 for phase 2, and 1 for phase 3
  [./phasemap]
    type = ParsedMaterial
    f_name = phase
    args = &#x27;eta2 eta3&#x27;
    function = &#x27;if(eta3&gt;0.5,1,0)-if(eta2&gt;0.5,1,0)&#x27;
    outputs = exodus
  [../]

  # matrix phase
  [./elasticity_tensor_1]
    type = ComputeElasticityTensor
    base_name = phase1
    C_ijkl = &#x27;3 3&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_1]
    type = ComputeSmallStrain
    base_name = phase1
    displacements = &#x27;disp_x disp_y&#x27;
  [../]
  [./stress_1]
    type = ComputeLinearElasticStress
    base_name = phase1
  [../]

  # oversized phase
  [./elasticity_tensor_2]
    type = ComputeElasticityTensor
    base_name = phase2
    C_ijkl = &#x27;7 7&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_2]
    type = ComputeSmallStrain
    base_name = phase2
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]
  [./stress_2]
    type = ComputeLinearElasticStress
    base_name = phase2
  [../]
  [./eigenstrain_2]
    type = ComputeEigenstrain
    base_name = phase2
    eigen_base = &#x27;0.02&#x27;
    eigenstrain_name = eigenstrain
  [../]

  # undersized phase
  [./elasticity_tensor_3]
    type = ComputeElasticityTensor
    base_name = phase3
    C_ijkl = &#x27;7 7&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain_3]
    type = ComputeSmallStrain
    base_name = phase3
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]
  [./stress_3]
    type = ComputeLinearElasticStress
    base_name = phase3
  [../]
  [./eigenstrain_3]
    type = ComputeEigenstrain
    base_name = phase3
    eigen_base = &#x27;-0.05&#x27;
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching1]
    type = SwitchingFunctionMaterial
    function_name = h1
    eta = eta1
    h_order = SIMPLE
  [../]
  [./switching2]
    type = SwitchingFunctionMaterial
    function_name = h2
    eta = eta2
    h_order = SIMPLE
  [../]
  [./switching3]
    type = SwitchingFunctionMaterial
    function_name = h3
    eta = eta3
    h_order = SIMPLE
  [../]

  [./barrier]
    type = MultiBarrierFunctionMaterial
    etas = &#x27;eta1 eta2 eta3&#x27;
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;4*c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(c-0.9)^2-0.4&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_3]
    type = DerivativeParsedMaterial
    f_name = Fc3
    function = &#x27;(c-0.9)^2-0.5&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # elastic free energies
  [./elastic_free_energy_1]
    type = ElasticEnergyMaterial
    base_name = phase1
    f_name = Fe1
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]
  [./elastic_free_energy_2]
    type = ElasticEnergyMaterial
    base_name = phase2
    f_name = Fe2
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]
  [./elastic_free_energy_3]
    type = ElasticEnergyMaterial
    base_name = phase3
    f_name = Fe3
    derivative_order = 2
    args = &#x27;c&#x27; # should be empty
  [../]

  # phase free energies (chemical + elastic)
  [./phase_free_energy_1]
    type = DerivativeSumMaterial
    f_name = F1
    sum_materials = &#x27;Fc1 Fe1&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./phase_free_energy_2]
    type = DerivativeSumMaterial
    f_name = F2
    sum_materials = &#x27;Fc2 Fe2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./phase_free_energy_3]
    type = DerivativeSumMaterial
    f_name = F3
    sum_materials = &#x27;Fc3 Fe3&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global free energy
  [./free_energy]
    type = DerivativeMultiPhaseMaterial
    f_name = F
    fi_names = &#x27;F1  F2  F3&#x27;
    hi_names = &#x27;h1  h2  h3&#x27;
    etas     = &#x27;eta1 eta2 eta3&#x27;
    args = &#x27;c&#x27;
    W = 3
  [../]

  # Generate the global stress from the phase stresses
  [./global_stress]
    type = MultiPhaseStressMaterial
    phase_base = &#x27;phase1 phase2 phase3&#x27;
    h          = &#x27;h1     h2     h3&#x27;
  [../]
[]

[BCs]
  # the boundary conditions on the displacement enforce periodicity
  # at zero total shear and constant volume
  [./bottom_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;bottom&#x27;
    value = 0
  [../]
  [./top_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;top&#x27;
    value = 0
  [../]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;left&#x27;
    value = 0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;right&#x27;
    value = 0
  [../]

  [./Periodic]
    [./disp_x]
      auto_direction = &#x27;y&#x27;
    [../]
    [./disp_y]
      auto_direction = &#x27;x&#x27;
    [../]

    # all other phase field variables are fully periodic
    [./c]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta1]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta2]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./eta3]
      auto_direction = &#x27;x y&#x27;
    [../]
    [./lambda]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      ilu&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10
  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.1
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]

[Debug]
  # show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="348d863e-5ec6-4893-8d99-3e9bf46f57ee"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/except2.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 1
    mc_edge_smoother = 25
    mc_lode_cutoff = -1.0E-6
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6048bcc1-4347-470e-b2dd-5dbced49a888"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s01.i</h4><pre class="moose-pre"><code class="language-text"># apply a sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = y+1
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0 0 1E-5 0 0 0 1E-5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
  [./xval]
  [../]
  [./yval]
  [../]
[]

[ICs]
  [./xval]
    type = FunctionIC
    variable = xval
    function = x
  [../]
  [./yval]
    type = FunctionIC
    variable = yval
    function = y
  [../]
[]

[Functions]
  [./mass00]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p00 1.3&#x27;
  [../]
  [./mass01]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)&#x27;
    vars = &#x27;vol por dens0 pp bulk&#x27;
    vals = &#x27;0.25 0.1 1.1 p01 1.3&#x27;
  [../]
  [./expected_mass_change00]
    type = ParsedFunction
    value = &#x27;fcn*perm*dens0*exp(pp/bulk)/visc*area*dt&#x27;
    vars = &#x27;fcn perm dens0 pp bulk visc area dt&#x27;
    vals = &#x27;6   1    1      0  1.3  1  0.5  1E-3&#x27;
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m00]
    type = FunctionValuePostprocessor
    function = mass00
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./del_m00]
    type = FunctionValuePostprocessor
    function = expected_mass_change00
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m01]
    type = FunctionValuePostprocessor
    function = mass01
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowSink
    boundary = &#x27;left&#x27;
    variable = pp
    use_mobility = false
    use_relperm = true
    fluid_phase = 0
    flux_function = 6
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-3
  end_time = 1E-2
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s01
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6152d663-0543-4956-8e3d-a8791085179d"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/mandel_basicthm.i</h4><pre class="moose-pre"><code class="language-text"># using a BasicTHM Action
#
# Mandel&#x27;s problem of consolodation of a drained medium
# Using the FullySaturatedDarcyBase and FullySaturatedFullySaturatedMassTimeDerivative kernels
# with multiply_by_density = false, so that this problem becomes linear
# Note the use of consistent_with_displaced_mesh = false in the calculation of volumetric strain
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]

[AuxVariables]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 8.0
      viscosity = 1.0
      density0 = 1.0
    [../]
  [../]
[]

[PorousFlowBasicTHM]
  coupling_type = HydroMechanical
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  multiply_by_density = false
  porepressure = porepressure
  biot_coefficient = 0.6
  gravity = &#x27;0 0 0&#x27;
  fp = the_simple_fluid
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # only the initial value of this is ever used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.6
    solid_bulk_compliance = 1
    fluid_bulk_modulus = 8
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel_basicthm
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1b867875-d79c-4724-bc82-5f95a602de2c"><div class="modal-content"><h4>modules/porous_flow/test/tests/fluidstate/theis_brineco2.i</h4><pre class="moose-pre"><code class="language-text"># Two phase Theis problem: Flow from single source.
# Constant rate injection 2 kg/s
# 1D cylindrical mesh
# Initially, system has only a liquid phase, until enough gas is injected
# to form a gas phase, in which case the system becomes two phase.
#
# This test takes a few minutes to run, so is marked heavy

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2000
  xmax = 2000
[]

[Problem]
  type = FEProblem
  coord_type = RZ
  rz_coord_axis = Y
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./saturation_gas]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./x1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./y0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = timestep_end
  [../]
  [./x1]
    type = PorousFlowPropertyAux
    variable = x1
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = timestep_end
  [../]
  [./y0]
    type = PorousFlowPropertyAux
    variable = y0
    property = mass_fraction
    phase = 1
    fluid_component = 0
    execute_on = timestep_end
  [../]
[]

[Variables]
  [./pgas]
    initial_condition = 20e6
  [../]
  [./zi]
    initial_condition = 0
  [../]
  [./xnacl]
    initial_condition = 0.1
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  [../]
  [./mass2]
    type = PorousFlowMassTimeDerivative
    fluid_component = 2
    variable = xnacl
  [../]
  [./flux2]
    type = PorousFlowAdvectiveFlux
    fluid_component = 2
    variable = xnacl
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi xnacl&#x27;
    number_fluid_phases = 2
    number_fluid_components = 3
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2sw]
      type = CO2FluidProperties
    [../]
    [./co2]
      type = TabulatedFluidProperties
      fp = co2sw
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
    [./watertab]
      type = TabulatedFluidProperties
      fp = water
      temperature_min = 273.15
      temperature_max = 573.15
      fluid_property_file = water_fluid_properties.csv
      save_file = false
    [../]
    [./brine]
      type = BrineFluidProperties
      water_fp = watertab
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
[]

[BCs]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 20e6
    variable = pgas
  [../]
[]

[DiracKernels]
  [./source]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = 2
    variable = zi
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e5
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 1
    growth_factor = 1.5
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    sort_by = x
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;2000 0 0&#x27;
    num_points = 10000
    variable = &#x27;pgas zi xnacl x1 saturation_gas&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Postprocessors]
  [./pgas]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = pgas
  [../]
  [./sgas]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = saturation_gas
  [../]
  [./zi]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = zi
  [../]
  [./massgas]
    type = PorousFlowFluidMass
    fluid_component = 1
  [../]
  [./x1]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = x1
  [../]
  [./y0]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = y0
  [../]
  [./xnacl]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = xnacl
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  [./csvout]
    type = CSV
    execute_on = timestep_end
    execute_vector_postprocessors_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b76399bb-ea46-4658-b8c7-15a90e2b3660"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_4/plane4_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane4_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = plane4_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = plane4_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d22d8bd2-fff6-473b-b88a-8e44e8bae115"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in x,y and z directions.
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# wpt_tensile_strength is set to 5Pa
# Since maximum stress which is 2Pa is less than tension cutoff, plastic yeilding shoud not be observed.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 1E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 1E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = z_disp
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 5
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a1148235-ebcb-4c61-bb67-3c9db7ab75a6"><div class="modal-content"><h4>modules/heat_conduction/test/tests/ad_convective_heat_flux/coupled.i</h4><pre class="moose-pre"><code class="language-text">
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
[]

[Variables]
  [./temp]
    initial_condition = 200.0
  [../]
[]

[Kernels]
  [./heat_dt]
    type = ADTimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = Diffusion
    variable = temp
  [../]
  [./heat]
    type = ADBodyForce
    variable = temp
    value = 0
  [../]
[]

[BCs]
  [./right]
    type = ADConvectiveHeatFluxBC
    variable = temp
    boundary = &#x27;right&#x27;
    T_infinity = T_inf
    heat_transfer_coefficient = htc
  [../]
[]

[Materials]
  [chf_mat]
    type = ADConvectiveHeatFluxTest
    temperature = temp
    boundary = &#x27;right&#x27;
  []
[]

[Postprocessors]
  [./left_temp]
    type = SideAverageValue
    variable = temp
    boundary = left
    execute_on = &#x27;TIMESTEP_END initial&#x27;
  [../]
  [./right_temp]
    type = SideAverageValue
    variable = temp
    boundary = right
  [../]
  [./right_flux]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = 1
  [../]
[]

[Executioner]
  type = Transient

  num_steps = 10
  dt = 1

  nl_abs_tol = 1e-12
[]

[Outputs]
  [./out]
    type = CSV
    interval = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e854fee4-0e8c-4c0f-b265-b34cfd45f34e"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_2/ring2_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring2_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1067d702-08a3-4500-b56c-7d232a771617"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_2/ring2_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring2_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = ring2_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = ring2_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5c7ed3a9-33e3-4142-b3de-e78e3b4c06d3"><div class="modal-content"><h4>test/tests/outputs/hide_vector_pp/hide_vector_pp.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./pp]
    type = NumElems
    outputs = csv
  [../]
[]

[VectorPostprocessors]
  [./vpp]
    type = LineValueSampler
    variable = u
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 1 0&#x27;
    num_points = 10
    sort_by = id
    outputs = &#x27;test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  csv = true
  [./test]
    type = CSV
    execute_on = &#x27;FINAL&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bb55d647-fcd9-4850-aeae-fc1ed9a5eedd"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie kg/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# In the standard poromechanics scenario, the Biot Modulus is held
# fixed and the source has units 1/time.  Then the expected result
# is
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# In porous_flow, however, the source has units kg/s/m^3 and the
# Biot Modulus is not held fixed.  This means that disp_z, porepressure,
# etc are not linear functions of t.  Nevertheless, the ratios remain
# fixed:
# stress_xx/strain_zz = (bulk - 2*shear/3) = 1 (for the parameters used here)
# stress_zz/strain_zz = (bulk + 4*shear/3) = 4 (for the parameters used here)
# porepressure/strain_zz = 13.3333333 (for the parameters used here)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3.3333333333
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    porosity_zero = 0.1
    biot_coefficient = 0.3
    solid_bulk = 2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0   0 1 0   0 0 1&#x27; # unimportant
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = none
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = none
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = none
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = none
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = none
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./stress_xx_over_strain]
    type = FunctionValuePostprocessor
    function = stress_xx_over_strain_fcn
    outputs = csv
  [../]
  [./stress_zz_over_strain]
    type = FunctionValuePostprocessor
    function = stress_zz_over_strain_fcn
    outputs = csv
  [../]
  [./p_over_strain]
    type = FunctionValuePostprocessor
    function = p_over_strain_fcn
    outputs = csv
  [../]
[]

[Functions]
  [./stress_xx_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_xx zdisp&#x27;
  [../]
  [./stress_zz_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_zz zdisp&#x27;
  [../]
  [./p_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;p0 zdisp&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="168c629e-2c75-48f1-b545-92088bca9122"><div class="modal-content"><h4>modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePS.i</h4><pre class="moose-pre"><code class="language-text"># Pressure pulse in 1D with 2 phases, 2components - transient

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 2e6
  [../]
  [./sgas]
    initial_condition = 0.3
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
  [./ppgas]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    variable = ppwater
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = sgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    variable = sgas
    fluid_component = 1
  [../]
[]

[AuxKernels]
  [./ppgas]
    type = PorousFlowPropertyAux
    property = pressure
    phase = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 1e5
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 1e-5
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-15 0 0 0 1e-15 0 0 0 1e-15&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[BCs]
  [./leftwater]
    type = DirichletBC
    boundary = left
    value = 3e6
    variable = ppwater
  [../]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 2e6
    variable = ppwater
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-20 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1e3
  end_time = 1e4
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    sort_by = x
    variable = &#x27;ppwater ppgas&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    num_points = 11
  [../]
[]

[Outputs]
  file_base = pressure_pulse_1d_2phasePS
  print_linear_residuals = false
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5b7c7c9e-7c7b-42c5-b837-580b20c74779"><div class="modal-content"><h4>modules/porous_flow/test/tests/energy_conservation/heat03.i</h4><pre class="moose-pre"><code class="language-text"># The sample is a single unit element, with roller BCs on the sides
# and bottom.  A constant displacement is applied to the top: disp_z = -0.01*t.
# There is no fluid flow or heat flow.
# Heat energy conservation is checked.
#
# Under these conditions (here L is the height of the sample: L=1 in this case):
# porepressure = porepressure(t=0) - (Fluid bulk modulus)*log(1 - 0.01*t)
# stress_xx = (bulk - 2*shear/3)*disp_z/L (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*disp_z/L (remember this is effective stress)
# Also, the total heat energy must be conserved: this is
# fluid_mass * fluid_heat_cap * temperature + (1 - porosity) * rock_density * rock_heat_cap * temperature * volume
# Since fluid_mass is conserved, and volume = (1 - 0.01*t), this can be solved for temperature:
# temperature = initial_heat_energy / (fluid_mass * fluid_heat_cap + (1 - porosity) * rock_density * rock_heat_cap * (1 - 0.01*t))
#
# Parameters:
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 0.5
# initial porepressure = 0.1
# initial temperature = 10
#
# Desired output:
# zdisp = -0.01*t
# p0 = 0.1 - 0.5*log(1-0.01*t)
# stress_xx = stress_yy = -0.01*t
# stress_zz = -0.04*t
# t0 =  11.5 / (0.159 + 0.99 * (1 - 0.01*t))
#
# Regarding the &quot;log&quot; - it comes from preserving fluid mass
#
# Note that the PorousFlowMassVolumetricExpansion and PorousFlowHeatVolumetricExpansion Kernels are used
# Note too that the Postprocessors have use_displaced_mesh = true
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./pp]
    initial_condition = 0.1
  [../]
  [./temp]
    initial_condition = 10
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = pp
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./temp]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./poro_vol_exp_temp]
    type = PorousFlowHeatVolumetricExpansion
    variable = temp
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
      cv = 1.3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 2.2
    density = 0.5
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.5 0 0   0 0.5 0   0 0 0.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = pp
  [../]
  [./t0]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = temp
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./fluid_mass]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
  [./total_heat]
    type = PorousFlowHeatEnergy
    phase = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
  [./rock_heat]
    type = PorousFlowHeatEnergy
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
  [./fluid_heat]
    type = PorousFlowHeatEnergy
    include_porous_skeleton = false
    phase = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-8 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 2
  end_time = 10
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  file_base = heat03
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="77dc9e80-b8f4-4ba0-8d2c-4099c2be2dbd"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl4_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./stress_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="71117b7b-48b7-4f6c-b3b6-60b7b652cfac"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface03.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 0.5E-6m in y direction and 2.0E-6 in z direction.
# trial stress_yy = 0.5 and stress_zz = 2.0
#
# Then SimpleTester0 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=0.5, stress_zz=1
# internal0 should be 1.0, and others zero

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface03
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ded50f0b-8d7d-46aa-9bab-e4a80f3fb1a5"><div class="modal-content"><h4>modules/porous_flow/test/tests/fluidstate/coldwater_injection_radial.i</h4><pre class="moose-pre"><code class="language-text"># Cold water injection into 1D radial hot reservoir (Avdonin, 1964)
#
# To generate results presented in documentation for this problem,
# set xmax = 1000 and nx = 200 in the Mesh block, and dtmax = 1e4
# and end_time = 1e6 in the Executioner block.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 50
  xmin = 0.1
  xmax = 5
  bias_x = 1.05
[]

[Problem]
  rz_coord_axis = Y
  coord_type = RZ
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./temperature]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./temperature]
    type = PorousFlowPropertyAux
    variable = temperature
    property = temperature
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Variables]
  [./pliquid]
    initial_condition = 5e6
  [../]
  [./h]
    scaling = 1e-6
  [../]
[]

[ICs]
  [./hic]
    type = PorousFlowFluidPropertyIC
    variable = h
    porepressure = pliquid
    property = enthalpy
    temperature = 170
    temperature_unit = Celsius
    fp = water
  [../]
[]

[Functions]
  [./injection_rate]
    type = ParsedFunction
    vals = injection_area
    vars = area
    value = &#x27;-0.1/area&#x27;
  [../]
[]

[BCs]
  [./source]
    type = PorousFlowSink
    variable = pliquid
    flux_function = injection_rate
    boundary = left
  [../]
  [./pright]
    type = DirichletBC
    variable = pliquid
    value = 5e6
    boundary = right
  [../]
  [./hleft]
    type = DirichletBC
    variable = h
    value = 678.52e3
    boundary = left
  [../]
  [./hright]
    type = DirichletBC
    variable = h
    value = 721.4e3
    boundary = right
  [../]
[]

[Kernels]
  [./mass]
    type = PorousFlowMassTimeDerivative
    variable = pliquid
  [../]
  [./massflux]
    type = PorousFlowAdvectiveFlux
    variable = pliquid
  [../]
  [./heat]
    type = PorousFlowEnergyTimeDerivative
    variable = h
  [../]
  [./heatflux]
    type = PorousFlowHeatAdvection
    variable = h
  [../]
  [./heatcond]
    type = PorousFlowHeatConduction
    variable = h
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pliquid h&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    pc_max = 1e6
    sat_lr = 0.1
    m = 0.5
    alpha = 1e-5
  [../]
  [./fs]
    type = PorousFlowWaterVapor
    water_fp = water
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./watervapor]
    type = PorousFlowFluidStateSingleComponent
    porepressure = pliquid
    enthalpy = h
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.8e-11 0 0 0 1.8e-11 0 0 0 1.8e-11&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
    sum_s_res = 0.1
  [../]
  [./internal_energy]
    type = PorousFlowMatrixInternalEnergy
    density = 2900
    specific_heat_capacity = 740
  [../]
  [./rock_thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;20 0 0  0 20 0  0 0 20&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e3
  nl_abs_tol = 1e-8
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 100
  [../]
[]

[Postprocessors]
  [./injection_area]
    type = AreaPostprocessor
    boundary = left
    execute_on = initial
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = ElementValueSampler
    sort_by = x
    variable = temperature
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Outputs]
  perf_graph = true
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="20829e0c-94cc-4903-970f-ae918fafa051"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/large_deform2.i</h4><pre class="moose-pre"><code class="language-text"># large strain with weak-plane normal rotating with mesh
# First rotate mesh 45deg about x axis
# Then apply stretch in the y=z direction.
# This should create a pure tensile load (no shear), which
# should return to the yield surface.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[BCs]
  # rotate:
  # ynew = c*y + s*z.  znew = -s*y + c*z
  [./bottomx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = back
    function = &#x27;0&#x27;
  [../]
  [./bottomy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = back
    function = &#x27;0.70710678*y+0.70710678*z-y&#x27;
  [../]
  [./bottomz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = back
    function = &#x27;-0.70710678*y+0.70710678*z-z&#x27;
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;0.70710678*y+0.70710678*z-y+if(t&gt;0,1,0)&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;-0.70710678*y+0.70710678*z-z+if(t&gt;0,1,0)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1.0E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-9
  [../]
[]


[Executioner]
  start_time = -1
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="88150bc9-dbed-47a3-a50a-beae8495b5c4"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7148eb26-c462-43c2-ba6b-478c2eeccf83"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/undrained_oedometer.i</h4><pre class="moose-pre"><code class="language-text"># An undrained oedometer test on a saturated poroelastic sample.
#
# The sample is a single unit element, with roller BCs on the sides
# and bottom.  A constant displacement is applied to the top: disp_z = -0.01*t.
# There is no fluid flow.
#
# Under these conditions
# porepressure = -(Fluid bulk modulus)*log(1 - 0.01t)
# stress_xx = (bulk - 2*shear/3)*disp_z/L (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*disp_z/L (remember this is effective stress)
# where L is the height of the sample (L=1 in this test)
#
# Parameters:
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1
#
# Desired output:
# zdisp = -0.01*t
# p0 = 1*log(1-0.01t)
# stress_xx = stress_yy = -0.01*t
# stress_zz = -0.04*t
#
# Regarding the &quot;log&quot; - it just comes from conserving fluid mass

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1
  [../]
[]

[Postprocessors]
  [./fluid_mass]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
  [../]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-8 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = undrained_oedometer
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4e7f6b2a-26f0-4962-9509-6b004ab195ae"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/wli01.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1000
  ny = 1
  xmin = -10000
  xmax = 0
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureBW
    Sn = 0.0
    Ss = 1.0
    C = 1.5
    las = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      viscosity = 4
      density0 = 10
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityBW
    Sn = 0.0
    Ss = 1.0
    Kn = 0
    Ks = 1
    C = 1.5
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 1 0  0 0 1&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = -1E-4
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-0.1 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./base]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    value = -1E-4
    variable = pressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;-5000 0 0&#x27;
    end_point = &#x27;0 0 0&#x27;
    sort_by = x
    num_points = 71
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 1000
  dt = 1
[]

[Outputs]
  file_base = wli01
  sync_times = &#x27;100 500 1000&#x27;
  [./exodus]
    type = Exodus
    sync_only = true
  [../]
  [./along_line]
    type = CSV
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9a178b04-842e-4e96-9d92-e0be18ed8b1e"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_constM.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie kg/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# In the standard poromechanics scenario, the Biot Modulus is held
# fixed and the source, s, has units m^3/second/m^3.  Then the expected result
# is
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# In porous_flow, however, the source has units kg/second/m^3.  The ratios remain
# fixed:
# stress_xx/strain_zz = (bulk - 2*shear/3) = 1 (for the parameters used here)
# stress_zz/strain_zz = (bulk + 4*shear/3) = 4 (for the parameters used here)
# porepressure/strain_zz = 13.3333333 (for the parameters used here)
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t
# The relationship between the constant poroelastic source
# s (m^3/second/m^3) and the PorousFlow source, S (kg/second/m^3) is
# S = fluid_density * s = s * exp(porepressure/fluid_bulk)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
  [./source]
    type = BodyForce
    function = &#x27;0.1*exp(8.163265306*0.1*t/3.3333333333)&#x27;
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3.3333333333
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityHMBiotModulus
    porosity_zero = 0.1
    biot_coefficient = 0.3
    solid_bulk = 2
    constant_fluid_bulk_modulus = 3.3333333333
    constant_biot_modulus = 10.0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0   0 1 0   0 0 1&#x27; # unimportant
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[Functions]
  [./stress_xx_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_xx zdisp&#x27;
  [../]
  [./stress_zz_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_zz zdisp&#x27;
  [../]
  [./p_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;p0 zdisp&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined_constM
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="be722c61-e4d1-48bb-b192-1ce32c66108a"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b7f5b235-aa71-4bc9-81e2-9d6c2ff0f655"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/two_surface05.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester with a = 0 and b = 1 and strength = 1
# SimpleTester with a = 1 and b = 1 and strength = 2
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 3E-6m in y directions and 1.0E-6 in z direction.
# trial stress_zz = 1 and stress_yy = 3
#
# Then SimpleTester2 should activate and the algorithm will return to
# stress_zz = 0, stress_yy = 2
# internal0 should be zero, and internal1 should be 1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
[]

[UserObjects]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 2
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = two_surface05
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3c64c3bd-b4c4-420e-a08d-17875f519ce9"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_noaction&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="71ecacad-0f2e-4af5-8e17-0fc22809cce1"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in z direction, and by small amounts in x and y directions
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and the maximum principal stress value should be 1pa.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.2E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.0
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = 0.8
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-8
    debug_pm_change = 1E-5
    debug_intnl_change = 1E-5
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c9a559c9-8211-4932-951d-f108fda7a0a2"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_mc.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
  [S_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = initial
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = sample
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = sample
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = sample
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [pc_coeff]
    type = PolynomialChaosData
    pc_name = poly_chaos
    execute_on = final
  []
  [pc_samp]
    type = EvaluateSurrogate
    model = poly_chaos
    sampler = sample
    output_samples = true
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = sample
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d4b3ab49-07d4-4fed-bc69-9c3a7c4f6a82"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform3.i</h4><pre class="moose-pre"><code class="language-text"># apply nonuniform compression in x, y and z directions such that
# trial_stress(0, 0) = 2
# trial_stress(1, 1) = -8
# trial_stress(2, 2) = -10
# With compressive_strength = -1, the algorithm should return to trace(stress) = -1, or
# stress(0, 0) = 7
# stress(1, 1) = -3
# stress(2, 2) = -5

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-4E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="352bdf6e-9907-4bcb-a036-ce21f629c696"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_outer_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = outer_tip
    internal_constraint_tolerance = 1 # irrelevant here
    yield_function_tolerance = 1      # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = cdp
    perform_finite_strain_rotations = false
  [../]
  [./cdp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 4
    smoothing_tol = 1E-5
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_outer_tip
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a784135f-b311-48b0-a915-5a959c4fc3e0"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ab04377d-2daa-48d7-8897-fe0b8f9c0af8"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/fltvd.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="49450694-46bf-48d3-b4eb-562b0fa71805"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/terzaghi_constM.i</h4><pre class="moose-pre"><code class="language-text"># Terzaghi&#x27;s problem of consolodation of a drained medium
#
# A saturated soil sample sits in a bath of water.
# It is constrained on its sides, and bottom.
# Its sides and bottom are also impermeable.
# Initially it is unstressed.
# A normal stress, q, is applied to the soil&#x27;s top.
# The soil then slowly compresses as water is squeezed
# out from the sample from its top (the top BC for
# the porepressure is porepressure = 0).
#
# See, for example.  Section 2.2 of the online manuscript
# Arnold Verruijt &quot;Theory and Problems of Poroelasticity&quot; Delft University of Technology 2013
# but note that the &quot;sigma&quot; in that paper is the negative
# of the stress in TensorMechanics
#
# Here are the problem&#x27;s parameters, and their values:
# Soil height.  h = 10
# Soil&#x27;s Lame lambda.  la = 2
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = 3
# Soil bulk modulus.  K = la + 2*mu/3 = 4
# Soil confined compressibility.  m = 1/(K + 4mu/3) = 0.125
# Soil bulk compliance.  1/K = 0.25
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Soil initial storativity, which is the reciprocal of the initial Biot modulus.  S = phi0/Kf + (alpha - phi0)(1 - alpha)/K = 0.0625
# Consolidation coefficient.  c = k/(S + alpha^2 m) = 13.95348837
# Normal stress on top.  q = 1
# Initial porepressure, resulting from instantaneous application of q, assuming corresponding instantaneous increase of porepressure (Note that this is calculated by MOOSE: we only need it for the analytical solution).  p0 = alpha*m*q/(S + alpha^2 m) = 0.69767442
# Initial vertical displacement (down is positive), resulting from instantaneous application of q (Note this is calculated by MOOSE: we only need it for the analytical solution).  uz0 = q*m*h*S/(S + alpha^2 m)
# Final vertical displacement (down in positive) (Note this is calculated by MOOSE: we only need it for the analytical solution).  uzinf = q*m*h
#
# The solution for porepressure is
# P = 4*p0/\pi \sum_{k=1}^{\infty} \frac{(-1)^{k-1}}{2k-1} \cos ((2k-1)\pi z/(2h)) \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
# This series converges very slowly for ct/h^2 small, so in that domain
# P = p0 erf( (1-(z/h))/(2 \sqrt(ct/h^2)) )
#
# The degree of consolidation is defined as
# U = (uz - uz0)/(uzinf - uz0)
# where uz0 and uzinf are defined above, and
# uz = the vertical displacement of the top (down is positive)
# U = 1 - (8/\pi^2)\sum_{k=1}^{\infty} \frac{1}{(2k-1)^2} \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 10
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = 0
  zmax = 10
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./topdrained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = front
  [../]
  [./topload]
    type = NeumannBC
    variable = disp_z
    value = -1
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 0.96
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    # bulk modulus is lambda + 2*mu/3 = 2 + 2*3/3 = 4
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityHMBiotModulus
    porosity_zero = 0.1
    biot_coefficient = 0.6
    solid_bulk = 4
    constant_fluid_bulk_modulus = 8
    constant_biot_modulus = 16
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 1&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 2&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 3&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 4&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 5&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 6&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 7&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 8&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 9&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = disp_z
    use_displaced_mesh = false
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.5*t&lt;0.1,0.5*t,0.1)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.0001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = terzaghi_constM
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="abd0a0ae-937c-4a0e-9601-0e6568e21d67"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/j2_plasticity/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># UserObject J2 test
# apply uniform stretch in z direction to give
# trial stress_zz = 7, so sqrt(3*J2) = 7
# with zero Poisson&#x27;s ratio, this should return to
# stress_zz = 3, stress_xx = 2 = stress_yy
# (note that stress_zz - stress_xx = stress_zz - stress_yy = 1, so sqrt(3*j2) = 1,
#  and that the mean stress remains = 7/3)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = str
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = j2
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="443740b8-0455-4010-abae-8df5e7e8480f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_inner_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 4
    mc_interpolation_scheme = inner_tip
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_inner_tip
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bbbd9975-3c83-4b08-9dea-d4c18a5ec29b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden2.i</h4><pre class="moose-pre"><code class="language-text"># apply a pure tension, then some shear with compression
# the BCs are designed to map out the yield function, showing
# the affect of the hardening
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,3*t)&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,0,5*(t-0.01E-6))&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;if(t&lt;1E-6,t,2E-6-t)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wps_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./wps_internal_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wps_internal
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wps_internal
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningGaussian
    value_0 = 1E3
    value_residual = 700
    rate = 2E16
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningGaussian
    value_0 = 1
    value_residual = 0.577350269
    rate = 2E16
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningGaussian
    value_0 = 0.0874886635
    value_residual = 0.01745506
    rate = 2E16
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 500
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-3
    max_NR_iterations = 100
    min_stepsize = 1
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 2E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform_harden2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c98efcea-3785-43a6-b896-42a0bae5cceb"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/quart_symm_q8/hertz_cyl_qsym_1deg_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  volumetric_locking_correction = false
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_qsym_1deg_q8.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_zero]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 0.0 0.0&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 4
    paired_boundary = 3
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./disp_x281]
    type = NodalVariableValue
    nodeid = 280
    variable = disp_x
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 3&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2 3&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 5
    function = disp_ramp_vert
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100

  start_time = 0.0
  dt = 0.1
  dtmin = 0.1
  num_steps = 10
  end_time = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;4&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x281 top_react_x top_react_y x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 3
    secondary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+11
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4330e4fb-d075-43b2-859c-93993c8a4808"><div class="modal-content"><h4>test/tests/postprocessors/table_tolerance/table_tolerance_test.i</h4><pre class="moose-pre"><code class="language-text"># This test verifies that the row tolerance for outputting and displaying postprocessors
# can be controlled via the new_row_tolerance parameter. Normally new rows are only added
# if they are above a given tolerance.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[AuxVariables]
  [./aux]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxKernels]
  [./func]
    type = FunctionAux
    function = &#x27;sin(x + 1e12*t)&#x27;
    variable = aux
    execute_on = timestep_begin
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20

  # Very small timestep size
  dt = 1e-13
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Postprocessors]
  [./integral]
    type = ElementIntegralVariablePostprocessor
    variable = aux
  [../]
[]

[Problem]
  kernel_coverage_check = false
  solve = false
[]

[Outputs]
  exodus = false
  [./out]
    type = CSV
    new_row_tolerance = 1e-14
  [../]
  [./console]
    type = Console
    new_row_tolerance = 1e-14
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dcbb3ac6-3337-48f6-a839-9c6b6e4ad8db"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface11.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 0E-6m in y direction and 2E-6 in z direction.
# trial stress_yy = 0 and stress_zz = 2.0
#
# Then SimpleTester0 should activate and the algorithm will return to
# stress_zz=1
# internal0 should be 1.0

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface11
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="79842dc3-8cea-4315-ae53-6d1d0585a768"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar7.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by (0.5, 0.4, 0.3)E-6m
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_xx = 1.72 Pa
# stress_yy = 1.52 Pa
# stress_zz = 1.32 Pa
# tensile_strength is set to 1.3Pa
#
# The return should be to the edge (the algorithm will first try the tip) with
# plastic_multiplier0 = 0, plastic_multiplier1 = 5E-8, plastic_multiplier2 = 1.5E-7
# internal = 2E-7
# stress_xx = stress_yy = 1.3
# stress_zz = 1.2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.4E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.3E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningConstant
    value = 1.3
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = tens
    debug_fspb = none
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar7
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86418375-d7e7-48ad-9c26-a88ad61c9c63"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform1N.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in x,y and z directions.
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# wpt_tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and its value should be 1pa.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = disp_x
    boundary = front
    value = 0E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = disp_y
    boundary = front
    value = 0E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = disp_z
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensileN
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
    normal_vector = &#x27;0 0 1&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    ep_plastic_tolerance = 1E-5
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1N
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0c4f8f68-6ac6-41a5-bfc9-b28380b59681"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden1.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches to observe cohesion hardening
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;2*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wps_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./wps_internal_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wps_internal
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wps_internal
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1E3
    value_residual = 2E3
    rate = 4E4
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 1.0
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.01745506
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 500
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform_harden1
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="db000b86-3c21-4686-9d55-b4680566bfb2"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01b.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant and large fluid-bulk, constant viscosity, constant permeability, Corey relperm
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1E3 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e3
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01b
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b7c2921a-c5be-4ea5-97fb-dd2b8f6dd585"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform_harden3.i</h4><pre class="moose-pre"><code class="language-text"># apply a number of &quot;random&quot; configurations and
# check that the algorithm returns to the yield surface
#
# must be careful here - we cannot put in arbitrary values of C_ijkl, otherwise the condition
# df/dsigma * C * flow_dirn &lt; 0 for some stresses
# The important features that must be obeyed are:
# 0 = C_0222 = C_1222  (holds for transversely isotropic, for instance)
# C_0212 &lt; C_0202 = C_1212 (holds for transversely isotropic)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  # the following are &quot;random&quot; deformations
  # each is O(1E-5) to keep deformations small
  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;(sin(0.1*t)+x)/1E1&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;(cos(t)+x*y)/1E1&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;sin(0.4321*t)*x*y*z/1E1&#x27;
  [../]
[]

[AuxVariables]
  [./wps_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./wps_internal_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wps_internal
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wps_internal
    outputs = &#x27;console&#x27;
  [../]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1E3
    value_residual = 0
    rate = 0.01
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 0.577350269
    rate = 0.01
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.08748866
    value_residual = 0.03492077
    rate = 0.01
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 100
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    # the following is transversely isotropic, i think.
    fill_method = symmetric9
    C_ijkl = &#x27;3E9 1E9 3E9 3E9 3E9 6E9 1E9 1E9 9E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E4
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform_harden3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1260c331-d3d1-4407-90bb-59615d456a28"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</h4><pre class="moose-pre"><code class="language-text"># capped drucker-prager
# apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./shear_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tensile_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./compressive_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./shear_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = shear_yield_fcn
  [../]
  [./tensile_fcn_auxk]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = tensile_yield_fcn
  [../]
  [./compressive_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = compressive_yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./shear_max]
    type = ElementExtremeValue
    variable = shear_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./tensile_max]
    type = ElementExtremeValue
    variable = tensile_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./compressive_max]
    type = ElementExtremeValue
    variable = compressive_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero_shear]
    type = FunctionValuePostprocessor
    function = shear_should_be_zero_fcn
  [../]
  [./should_be_zero_compressive]
    type = FunctionValuePostprocessor
    function = compressive_should_be_zero_fcn
  [../]
  [./should_be_zero_tensile]
    type = FunctionValuePostprocessor
    function = tensile_should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./shear_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;shear_max&#x27;
  [../]
  [./tensile_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;tensile_max&#x27;
  [../]
  [./compressive_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;compressive_max&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = dp
    perform_finite_strain_rotations = false
  [../]
  [./dp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-3
    tip_smoother = 0.1E3
    smoothing_tol = 0.1E3
    max_NR_iterations = 1000
    small_dilation = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ac394991-edad-4bad-b29b-2c433e0b5775"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4ecf39c-df2e-4db8-b8e7-6e03dbf4c82b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/random_hyperbolic.i</h4><pre class="moose-pre"><code class="language-text"># drucker-prager hyperbolic.
# apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 125
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 0.1E3
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
    use_custom_returnMap = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./dp]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-6
    min_stepsize = 1E-3
    plastic_models = dp
    debug_fspb = crash
    deactivation_scheme = safe
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_hyperbolic
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0b30962e-2efa-4718-939a-4f18aba545f4"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_template2.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl2_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="99c0da53-3047-49c6-a435-79b7f4473f8e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_inner_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = inner_tip
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 8
    smoothing_tol = 1E-7
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_inner_tip
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ce40baf7-5751-4d28-b9a5-9ed7b3373134"><div class="modal-content"><h4>modules/navier_stokes/test/tests/scalar_adr/supg/2d_advection_error_testing.i</h4><pre class="moose-pre"><code class="language-text">ax=1
ay=1

[GlobalParams]
  u = ${ax}
  v = ${ay}
  p = 0
  tau_type = mod
  transient_term = true
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  xmax = 1
  ymax = 1
  elem_type = QUAD9
[]

[Variables]
  [./c]
    family = LAGRANGE
    order = SECOND
  [../]
[]

[Kernels]
  [./adv]
    type = Advection
    variable = c
    forcing_func = &#x27;ffn&#x27;
  [../]
[]

[BCs]
  [./all]
    type = FunctionDirichletBC
    variable = c
    boundary = &#x27;left right top bottom&#x27;
    function = &#x27;c_func&#x27;
  [../]
[]

[Materials]
  [./mat]
    type = GenericConstantMaterial
    prop_names = &#x27;mu rho&#x27;
    prop_values = &#x27;0 1&#x27;
  [../]
[]

[Functions]
  [./ffn]
    type = ParsedFunction
    value = &#x27;${ax}*(0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)) + ${ay}*(0.14*pi*x*cos(0.2*pi*x*y) + 0.4*pi*cos(pi*y))&#x27;
  [../]
  [./c_func]
    type = ParsedFunction
    value = &#x27;0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./cx_func]
    type = ParsedFunction
    value = &#x27;0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)&#x27;
  [../]
[]

# [Executioner]
#   type = Steady
#   petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
#   petsc_options_value = &#x27;lu NONZERO&#x27;
# []

[Executioner]
  type = Transient
  num_steps = 10
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_view&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu NONZERO superlu_dist&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-12
  nl_max_its = 10
  l_tol = 1e-6
  l_max_its = 10
  [./TimeStepper]
    dt = .05
    type = IterationAdaptiveDT
    cutback_factor = 0.4
    growth_factor = 1.2
    optimal_iterations = 20
  [../]
[]

[Outputs]
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2c]
    type = ElementL2Error
    variable = c
    function = c_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2cx]
    type = ElementL2Error
    variable = cx
    function = cx_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./cx]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./cx_aux]
    type = VariableGradientComponent
    component = x
    variable = cx
    gradient_variable = c
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="162a3b16-e62c-4268-819a-b028277ba033"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard2.i</h4><pre class="moose-pre"><code class="language-text"># Checking solution of hardening
# A single element is stretched by 1E-6 in z direction.
#
# Young&#x27;s modulus = 20 MPa.  Tensile strength = 10 Exp(-1E6*q) Pa
#
# The trial stress is
# trial_stress_zz = Youngs Modulus*Strain = 2E7*1E-6 = 20 Pa
#
# Therefore the equations we have to solve are
# 0 = f = stress_zz - 10 Exp(-1E6*q)
# 0 = epp = ga - (20 - stress_zz)/2E7
# 0 = intnl = q - ga
#
# The result is
# q = 0.76803905E-6
# stress_zz = 4.6392191 Pa


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 0
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 0
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = 1E-6*t
  [../]
[]

[AuxVariables]
  [./wpt_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./wpt_internal]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wpt_internal
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./wpt_internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wpt_internal
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 0
    rate = 1E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-11
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="18d8c703-d148-456b-82a3-559204968d74"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="89158a58-db1b-40a2-8623-191a7e9d0a98"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/quart_symm_q4/hertz_cyl_qsym_1deg_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_qsym_1deg_q4.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_zero]
    type = PiecewiseLinear
    x = &#x27;0. 1. 2.&#x27;
    y = &#x27;0. 0.0 0.0&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 4
    paired_boundary = 3
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./disp_x281]
    type = NodalVariableValue
    nodeid = 280
    variable = disp_x
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 3&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2 3&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 5
    function = disp_ramp_vert
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-6
  nl_rel_tol = 1e-5
  l_max_its = 50
  nl_max_its = 100

  start_time = 0.0
  dt = 0.1
  dtmin = 0.1
  num_steps = 10
  end_time = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;4&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x281 top_react_x top_react_y x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 3
    secondary = 4
    model = glued
    formulation = kinematic
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="853c3bc7-9094-4b40-8618-644e18f4a3e2"><div class="modal-content"><h4>modules/porous_flow/test/tests/dispersion/disp01.i</h4><pre class="moose-pre"><code class="language-text"># Test dispersive part of PorousFlowDispersiveFlux kernel by setting diffusion
# coefficients to zero. A pressure gradient is applied over the mesh to give a
# uniform velocity. Gravity is set to zero.
# Mass fraction is set to 1 on the left hand side and 0 on the right hand side.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmax = 10
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./velocity]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./velocity]
    type = PorousFlowDarcyVelocityComponent
    variable = velocity
    component = x
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = pic
  [../]
  [./massfrac0]
    type = ConstantIC
    variable = massfrac0
    value = 0
  [../]
[]

[Functions]
  [./pic]
    type = ParsedFunction
    value = 1.1e5-x*1e3
  [../]
[]

[BCs]
  [./xleft]
    type = DirichletBC
    value = 1
    variable = massfrac0
    boundary = left
  [../]
  [./xright]
    type = DirichletBC
    value = 0
    variable = massfrac0
    boundary = right
  [../]
  [./pright]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 1e5
  [../]
  [./pleft]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1.1e5
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    variable = pp
    disp_trans = 0
    disp_long = 0.2
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = massfrac0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    disp_trans = 0
    disp_long = 0.2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e9
      density0 = 1000
      viscosity = 0.001
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = massfrac0
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.3
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;0 0&#x27;
    tortuosity = 0.1
  [../]
  [./relp]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-9 0 0 0 1e-9 0 0 0 1e-9&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e3
  dtmax = 50
  [./TimeStepper]
    type = IterationAdaptiveDT
    growth_factor = 1.5
    cutback_factor = 0.5
    dt = 1
  [../]
[]

[VectorPostprocessors]
  [./xmass]
    type = NodalValueSampler
    sort_by = id
    variable = massfrac0
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6f482def-ddb7-4210-8ccc-df8e347f07c4"><div class="modal-content"><h4>test/tests/outputs/csv/csv_restart_part2.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./mid]
    type = PointValue
    variable = u
    point = &#x27;0.5 0.5 0&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./csv]
    type = CSV
    file_base = csv_restart_part2_out
  [../]
[]

[Problem]
  restart_file_base = csv_restart_part1_out_cp/0010
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dd43de64-af1f-4172-b7f4-888be588d8ae"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/large_deform1.i</h4><pre class="moose-pre"><code class="language-text"># rotate the mesh by 90degrees
# then pull in the z direction - should be no plasticity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  # rotate:
  # ynew = c*y + s*z.  znew = -s*y + c*z
  [./bottomx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = back
    function = &#x27;0&#x27;
  [../]
  [./bottomy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = back
    function = &#x27;0*y+1*z-y&#x27;
  [../]
  [./bottomz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = back
    function = &#x27;-1*y+0*z-z+if(t&gt;0,0.5-y,0)&#x27; # note that this uses original nodal values of (x,y,z)
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;0*y+1*z-y&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;-1*y+0*z-z+if(t&gt;0,0.5-y,0)&#x27; # note that this uses original nodal values of (x,y,z)
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]


[Executioner]
  start_time = -1
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform1
  [./csv]
    type = CSV
    [../]
  [./exodus]
    type = Exodus
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d207c21d-d855-4dac-a0e5-1566d8ed72b7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_inner_edge.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 4
    mc_interpolation_scheme = inner_edge
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_inner_edge
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c18eb871-40da-42a6-a54e-460d53cb400e"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/pp_generation_unconfined_action.i</h4><pre class="moose-pre"><code class="language-text"># This is identical to pp_generation_unconfined.i but it uses
# and action instead of explicitly writing all the Kernels out
#
# A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie m^3/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# Source = s  (units = 1/second)
#
# Expect:
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_xx = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# Parameters:
# Biot coefficient = 0.3
# Porosity = 0.1
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1/0.3 = 3.333333
# 1/Biot modulus = (1 - 0.3)*(0.3 - 0.1)/2 + 0.1*0.3 = 0.1. BiotModulus = 10
#
# s = 0.1
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]


[Kernels]
  [./PoroMechanics]
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.3
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined_action
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b8fb81ed-a284-498d-9e75-ab02f4d93017"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># deformations are applied so that the trial stress is
# shear = 10, normalstress = 2
#
# Cohesion is chosen to be 1, and friction angle = 26.565, so tan(friction_angle) = 1/2
# This means that (shear, normalstress) = (0, 2) is the apex
# of the shear envelope
#
# Poisson&#x27;s ratio is chosen to be zero, and Lame mu = 1E6,
# so the return must solve
# f = 0
# shear = shear_trial - (1/2)*mu*ga = 10 - 0.5E6*ga
# normalstress = normalstress - mu*tan(dilation)*ga
#
# Finally, tan(dilation) = 2/18 is chosen.
#
# Then the returned value should have
# shear = 1, normalstress = 0
#
# Here shear = sqrt(s_yz^2 + s_xz^2)
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 8E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 6E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = z_disp
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.1111077
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 0
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1ff3db9a-31c0-4f1b-9773-418b4e342085"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/two_surface04.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester with a = 0 and b = 1 and strength = 1
# SimpleTester with a = 1 and b = 1 and strength = 2
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 4.0E-6m in y directions and 2.0E-6 in z direction.
# trial stress_zz = 2 and stress_yy = 4
#
# Then both  SimpleTesters should activate initially and return to the &quot;corner&quot; point
# (stress_zz = 1 = stress_yy), but then the plastic multiplier for SimpleTester1 will
# be negative, and so it will be deactivated, and the algorithm will return to
# stress_zz = 0, stress_yy = 2
# internal1 should be zero, internal2 should be 2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;4E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
[]

[UserObjects]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 2
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = two_surface04
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="766b7d3a-3909-432c-a5be-6070a75c20da"><div class="modal-content"><h4>test/tests/outputs/csv_final_and_latest/latest.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.25
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

# Vector Postprocessor System
[VectorPostprocessors]
  [./line_sample]
    type = LineValueSampler
    execute_on = &#x27;timestep_end&#x27;
    variable = &#x27;u&#x27;
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = id
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = &#x27;TIMESTEP_END&#x27;
    create_latest_symlink = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="13fbc2f7-6249-4529-a931-7b9c3b1c8f1a"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_3/ring3_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring3_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = ring3_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = ring3_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="81b786f3-a1b4-481e-ae6c-4fd76d11910c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard2.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretches in x, y and z directions.
# let friction_angle = 60deg, friction_angle_residual=10deg, friction_angle_rate = 0.5E4
# With cohesion = C, friction_angle = phi, the
# algorithm should return to
# sigma_m = C*Cos(phi)/Sin(phi)
# Or, when T=C,
# phi = arctan(C/sigma_m)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.04719755 # 60deg
    value_residual = 0.17453293 # 10deg
    rate = 0.5E4
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    shift = 1E-12
    use_custom_returnMap = true
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.0E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar_hard2
  exodus = false
  [./csv]
    type = CSV
    execute_on = timestep_end
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="717a6987-20b3-4cec-b843-f6cbf8c40da1"><div class="modal-content"><h4>modules/combined/examples/phase_field-mechanics/kks_mechanics_VTS.i</h4><pre class="moose-pre"><code class="language-text"># KKS phase-field model coupled with elasticity using the Voigt-Taylor scheme as
# described in L.K. Aagesen et al., Computational Materials Science, 140, 10-21 (2017)
# Original run #170329e

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 640
  ny = 1
  nz = 1
  xmin = -10
  xmax = 10
  ymin = 0
  ymax = 0.03125
  zmin = 0
  zmax = 0.03125
  elem_type = HEX8
[]


[Variables]
  # order parameter
  [./eta]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute concentration
  [./c]
    order = FIRST
    family = LAGRANGE
  [../]

  # chemical potential
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]

  # solute phase concentration (matrix)
  [./cm]
    order = FIRST
    family = LAGRANGE
  [../]
  # solute phase concentration (precipitate)
  [./cp]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[ICs]
  [./eta_ic]
    variable = eta
    type = FunctionIC
    function = ic_func_eta
    block = 0
  [../]
  [./c_ic]
    variable = c
    type = FunctionIC
    function = ic_func_c
    block = 0
  [../]
  [./w_ic]
    variable = w
    type = ConstantIC
    value = 0.00991
    block = 0
  [../]
  [./cm_ic]
    variable = cm
    type = ConstantIC
    value = 0.131
    block = 0
  [../]
  [./cp_ic]
    variable = cp
    type = ConstantIC
    value = 0.236
    block = 0
  [../]
[]

[Functions]
  [./ic_func_eta]
    type = ParsedFunction
    value = &#x27;0.5*(1.0+tanh((x)/delta_eta/sqrt(2.0)))&#x27;
    vars = &#x27;delta_eta&#x27;
    vals = &#x27;0.8034&#x27;
  [../]
  [./ic_func_c]
    type = ParsedFunction
    value = &#x27;0.2388*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^3*(6*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^2-15*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))+10)+0.1338*(1-(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^3*(6*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))^2-15*(0.5*(1.0+tanh(x/delta/sqrt(2.0))))+10))&#x27;
    vars = &#x27;delta&#x27;
    vals = &#x27;0.8034&#x27;
  [../]
  [./psi_eq_int]
    type = ParsedFunction
    value = &#x27;volume*psi_alpha&#x27;
    vars = &#x27;volume psi_alpha&#x27;
    vals = &#x27;volume psi_alpha&#x27;
  [../]
  [./gamma]
    type = ParsedFunction
    value = &#x27;(psi_int - psi_eq_int) / dy / dz&#x27;
    vars = &#x27;psi_int psi_eq_int dy       dz&#x27;
    vals = &#x27;psi_int psi_eq_int 0.03125  0.03125&#x27;
  [../]
[]

[AuxVariables]
  [./sigma11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./sigma22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./sigma33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e33]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el12]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_el22]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_el]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./eigen_strain00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./Fglobal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./psi]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./matl_sigma11]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
    variable = sigma11
  [../]
  [./matl_sigma22]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
    variable = sigma22
  [../]
  [./matl_sigma33]
    type = RankTwoAux
    rank_two_tensor = stress
    index_i = 2
    index_j = 2
    variable = sigma33
  [../]
  [./matl_e11]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
    variable = e11
  [../]
  [./matl_e12]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 1
    variable = e12
  [../]
  [./matl_e22]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
    variable = e22
  [../]
  [./matl_e33]
    type = RankTwoAux
    rank_two_tensor = total_strain
    index_i = 2
    index_j = 2
    variable = e33
  [../]
  [./f_el]
    type = MaterialRealAux
    variable = f_el
    property = f_el_mat
    execute_on = timestep_end
  [../]
  [./GlobalFreeEnergy]
    variable = Fglobal
    type = KKSGlobalFreeEnergy
    fa_name = fm
    fb_name = fp
    w = 0.0264
    kappa_names = kappa
    interfacial_vars = eta
  [../]
  [./psi_potential]
    variable = psi
    type = ParsedAux
    args = &#x27;Fglobal w c f_el sigma11 e11&#x27;
    function = &#x27;Fglobal - w*c + f_el - sigma11*e11&#x27;
  [../]
[]


[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0
  [../]
  [./front_y]
    type = DirichletBC
    variable = disp_y
    boundary = front
    value = 0
  [../]
  [./back_y]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0
  [../]
  [./top_z]
    type = DirichletBC
    variable = disp_z
    boundary = top
    value = 0
  [../]
  [./bottom_z]
    type = DirichletBC
    variable = disp_z
    boundary = bottom
    value = 0
  [../]
[]

[Materials]
  # Chemical free energy of the matrix
  [./fm]
    type = DerivativeParsedMaterial
    f_name = fm
    args = &#x27;cm&#x27;
    function = &#x27;6.55*(cm-0.13)^2&#x27;
  [../]
# Elastic energy of the matrix
  [./elastic_free_energy_m]
    type = ElasticEnergyMaterial
    base_name = matrix
    f_name = fe_m
    args = &#x27; &#x27;
    outputs = exodus
  [../]
# Total free energy of the matrix
  [./Total_energy_matrix]
    type = DerivativeSumMaterial
    f_name = f_total_matrix
    sum_materials = &#x27;fm fe_m&#x27;
    args = &#x27;cm&#x27;
  [../]

  # Free energy of the precipitate phase
  [./fp]
    type = DerivativeParsedMaterial
    f_name = fp
    args = &#x27;cp&#x27;
    function = &#x27;6.55*(cp-0.235)^2&#x27;
  [../]

# Elastic energy of the precipitate
  [./elastic_free_energy_p]
    type = ElasticEnergyMaterial
    base_name = ppt
    f_name = fe_p
    args = &#x27; &#x27;
    outputs = exodus
  [../]

# Total free energy of the precipitate
  [./Total_energy_ppt]
    type = DerivativeSumMaterial
    f_name = f_total_ppt
    sum_materials = &#x27;fp fe_p&#x27;
    args = &#x27;cp&#x27;
  [../]

  # Total elastic energy
    [./Total_elastic_energy]
      type = DerivativeTwoPhaseMaterial
      eta = eta
      f_name = f_el_mat
      fa_name = fe_m
      fb_name = fe_p
      outputs = exodus
      W = 0
    [../]

  # h(eta)
  [./h_eta]
    type = SwitchingFunctionMaterial
    h_order = HIGH
    eta = eta
  [../]

  # g(eta)
  [./g_eta]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta
  [../]

  # constant properties
  [./constants]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa     misfit&#x27;
    prop_values = &#x27;0.7 0.7 0.01704   0.00377&#x27;
  [../]

  #Mechanical properties
  [./Stiffness_matrix]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;103.3 74.25 74.25 103.3 74.25 103.3 46.75 46.75 46.75&#x27;
    base_name = matrix
    fill_method = symmetric9
  [../]
  [./Stiffness_ppt]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;100.7 71.45 71.45 100.7 71.45 100.7 50.10 50.10 50.10&#x27;
    base_name = ppt
    fill_method = symmetric9
  [../]
  [./stress_matrix]
    type = ComputeLinearElasticStress
    base_name = matrix
  [../]
  [./stress_ppt]
    type = ComputeLinearElasticStress
    base_name = ppt
  [../]
  [./strain_matrix]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    base_name = matrix
  [../]
  [./strain_ppt]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    base_name = ppt
    eigenstrain_names = &#x27;eigenstrain_ppt&#x27;
  [../]
  [./eigen_strain]
    type = ComputeEigenstrain
    base_name = ppt
    eigen_base = &#x27;1 1 1 0 0 0&#x27;
    prefactor = misfit
    eigenstrain_name = &#x27;eigenstrain_ppt&#x27;
  [../]
  [./global_stress]
    type = TwoPhaseStressMaterial
    base_A = matrix
    base_B = ppt
  [../]
  [./global_strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]

  # enforce c = (1-h(eta))*cm + h(eta)*cp
  [./PhaseConc]
    type = KKSPhaseConcentration
    ca       = cm
    variable = cp
    c        = c
    eta      = eta
  [../]

  # enforce pointwise equality of chemical potentials
  [./ChemPotVacancies]
    type = KKSPhaseChemicalPotential
    variable = cm
    cb       = cp
    fa_name  = f_total_matrix
    fb_name  = f_total_ppt
  [../]

  #
  # Cahn-Hilliard Equation
  #
  [./CHBulk]
    type = KKSSplitCHCRes
    variable = c
    ca       = cm
    fa_name  = f_total_matrix
    w        = w
  [../]

  [./dcdt]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./ckernel]
    type = SplitCHWRes
    mob_name = M
    variable = w
  [../]

  #
  # Allen-Cahn Equation
  #
  [./ACBulkF]
    type = KKSACBulkF
    variable = eta
    fa_name  = f_total_matrix
    fb_name  = f_total_ppt
    w        = 0.0264
    args = &#x27;cp cm&#x27;
  [../]
  [./ACBulkC]
    type = KKSACBulkC
    variable = eta
    ca       = cm
    cb       = cp
    fa_name  = f_total_matrix
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    kappa_name = kappa
  [../]
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type   -sub_pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;asm       ilu            nonzero&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-11
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.5
  [../]
[]

[VectorPostprocessors]
  #[./eta]
  #  type =  LineValueSampler
  #  start_point = &#x27;-10 0 0&#x27;
  #  end_point = &#x27;10 0 0&#x27;
  #  variable = eta
  #  num_points = 321
  #  sort_by =  id
  #[../]
  #[./eta_position]
  #  type = FindValueOnLineSample
  #  vectorpostprocessor = eta
  #  variable_name = eta
  #  search_value = 0.5
  #[../]
#  [./f_el]
#    type =  LineMaterialRealSampler
#    start = &#x27;-20 0 0&#x27;
#    end   = &#x27;20 0 0&#x27;
#    sort_by = id
#    property = f_el
#  [../]
#  [./f_el_a]
#    type =  LineMaterialRealSampler
#    start = &#x27;-20 0 0&#x27;
#    end   = &#x27;20 0 0&#x27;
#    sort_by = id
#    property = fe_m
#  [../]
#  [./f_el_b]
#    type =  LineMaterialRealSampler
#    start = &#x27;-20 0 0&#x27;
#    end   = &#x27;20 0 0&#x27;
#    sort_by = id
#    property = fe_p
#  [../]
#  [./h_out]
#    type =  LineMaterialRealSampler
#    start = &#x27;-20 0 0&#x27;
#    end   = &#x27;20 0 0&#x27;
#    sort_by = id
#    property = h
#  [../]
#  [./fm_out]
#    type =  LineMaterialRealSampler
#    start = &#x27;-20 0 0&#x27;
#    end   = &#x27;20 0 0&#x27;
#    sort_by = id
#    property = fm
#  [../]
[]

[Postprocessors]
  [./f_el_int]
    type = ElementIntegralMaterialProperty
    mat_prop = f_el_mat
  [../]
  [./c_alpha]
    type =  SideAverageValue
    boundary = left
    variable = c
  [../]
  [./c_beta]
    type =  SideAverageValue
    boundary = right
    variable = c
  [../]
  [./e11_alpha]
    type =  SideAverageValue
    boundary = left
    variable = e11
  [../]
  [./e11_beta]
    type =  SideAverageValue
    boundary = right
    variable = e11
  [../]
  [./s11_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma11
  [../]
  [./s22_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma22
  [../]
  [./s33_alpha]
    type =  SideAverageValue
    boundary = left
    variable = sigma33
  [../]
  [./s11_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma11
  [../]
  [./s22_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma22
  [../]
  [./s33_beta]
    type =  SideAverageValue
    boundary = right
    variable = sigma33
  [../]
  [./f_el_alpha]
    type =  SideAverageValue
    boundary = left
    variable = f_el
  [../]
  [./f_el_beta]
    type =  SideAverageValue
    boundary = right
    variable = f_el
  [../]
  [./f_c_alpha]
    type =  SideAverageValue
    boundary = left
    variable = Fglobal
  [../]
  [./f_c_beta]
    type =  SideAverageValue
    boundary = right
    variable = Fglobal
  [../]
  [./chem_pot_alpha]
    type =  SideAverageValue
    boundary = left
    variable = w
  [../]
  [./chem_pot_beta]
    type =  SideAverageValue
    boundary = right
    variable = w
  [../]
  [./psi_alpha]
    type =  SideAverageValue
    boundary = left
    variable = psi
  [../]
  [./psi_beta]
    type =  SideAverageValue
    boundary = right
    variable = psi
  [../]
  [./total_energy]
    type = ElementIntegralVariablePostprocessor
    variable = Fglobal
  [../]
  # Get simulation cell size from postprocessor
  [./volume]
    type = ElementIntegralMaterialProperty
    mat_prop = 1
  [../]
  [./psi_eq_int]
    type = FunctionValuePostprocessor
    function = psi_eq_int
  [../]
  [./psi_int]
    type = ElementIntegralVariablePostprocessor
    variable = psi
  [../]
  [./gamma]
    type = FunctionValuePostprocessor
    function = gamma
  [../]
[]

#
# Precondition using handcoded off-diagonal terms
#
[Preconditioning]
  [./full]
    type = SMP
    full = true
  [../]
[]


[Outputs]
  [./exodus]
    type = Exodus
    interval = 20
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
#[./console]
#    type = Console
#    output_file = true
#  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4f5ba262-dddf-446c-a558-608312be4662"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_1/plane1_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane1_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8c8e473f-fb8f-4290-a463-96f050f59146"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform5.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is incrementally stretched in the in the z and x directions
# This causes the return direction to be along the hypersurface sigma_I = sigma_II,
# and the resulting stresses are checked to lie on the expected yield surface
#
# tensile_strength is set to 1Pa, tip_smoother = 0.5, edge_smoother = 25degrees
# Then A + B + C = 0.609965


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

  [GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*x*t*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*z*t*t&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.5
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform5
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bc1bf27-185d-4d7d-82fe-effe38a4c6af"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_1/plane1_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane1_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = plane1_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = plane1_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d161415b-e09b-4986-86df-757545a5699d"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01c.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant fluid-bulk, constant viscosity, constant permeability, Corey relative perm
# unsaturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 -1 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = -1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01c
  exodus = true
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cae1da26-b29c-47ea-a953-57ededb56252"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface10.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.5E-6m in y direction and 0.0E-6 in z direction.
# trial stress_yy = 1.5 and stress_zz = 0.0
#
# Then SimpleTester1 should activate and the algorithm will return to
# stress_yy=1
# internal1 should be 0.5

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface10
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9b53afd4-c0e8-4ec8-96f9-7ed44c49126d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface05.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1E-6m in y direction and 1.1E-6 in z direction.
# trial stress_yy = 1 and stress_zz = 1.1
#
# Then SimpleTester0 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=0.5, stress_zz=1
# However, this will mean internal0 &lt; 0, so SimpleTester0 will be deactivated and
# then the algorithm will return to
# stress_yy=0.7, stress_zz=0.8
# internal0 should be 0.0, and internal2 should be 0.3

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface05
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c0d2453b-70c0-402a-bc4f-0fb1b44a23a8"><div class="modal-content"><h4>modules/combined/examples/periodic_strain/global_strain_pfm_3D.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 20
    ny = 20
    nz = 20
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
    zmin = -0.5
    zmax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0 0.0&#x27;
    new_boundary = 100
  [../]
[]

[Variables]
  [./u_x]
  [../]
  [./u_y]
  [../]
  [./u_z]
  [../]
  [./global_strain]
    order = SIXTH
    family = SCALAR
  [../]
  [./c]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;sin(2*x*pi)*sin(2*y*pi)*sin(2*z*pi)*0.05+0.6&#x27;
    [../]
  [../]
  [./w]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./s00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./disp_x]
    type = GlobalDisplacementAux
    variable = disp_x
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 0
  [../]
  [./disp_y]
    type = GlobalDisplacementAux
    variable = disp_y
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 1
  [../]
  [./disp_z]
    type = GlobalDisplacementAux
    variable = disp_z
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 2
  [../]
  [./local_free_energy]
    type = TotalFreeEnergy
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
  [./s00]
    type = RankTwoAux
    variable = s00
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
  [../]
  [./s01]
    type = RankTwoAux
    variable = s01
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
  [../]
  [./s10]
    type = RankTwoAux
    variable = s10
    rank_two_tensor = stress
    index_i = 1
    index_j = 0
  [../]
  [./s11]
    type = RankTwoAux
    variable = s11
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
  [../]
  [./e00]
    type = RankTwoAux
    variable = e00
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
  [../]
  [./e01]
    type = RankTwoAux
    variable = e01
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 1
  [../]
  [./e10]
    type = RankTwoAux
    variable = e10
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 0
  [../]
  [./e11]
    type = RankTwoAux
    variable = e11
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;u_x u_y u_z&#x27;
  block = 0
[]

[Kernels]
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[ScalarKernels]
  [./global_strain]
    type = GlobalStrain
    variable = global_strain
    global_strain_uo = global_strain_uo
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y z&#x27;
      variable = &#x27;c w u_x u_y u_z&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = u_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = u_y
    value = 0
  [../]
  [./centerfix_z]
    type = DirichletBC
    boundary = 100
    variable = u_z
    value = 0
  [../]
[]

[Materials]
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0.5 0.5 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 -0.5 -0.5 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;1 1 1 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    global_strain = global_strain
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./global_strain]
    type = ComputeGlobalStrain
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
  [../]

  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[UserObjects]
  [./global_strain_uo]
    type = GlobalStrainUserObject
    execute_on = &#x27;Initial Linear Nonlinear&#x27;
  [../]
[]

[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         31   preonly   lu      1&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  end_time = 2.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 0.01
    growth_factor = 1.5
    cutback_factor = 0.8
    optimal_iterations = 9
    iteration_window = 2
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6303aa8b-c875-498f-be0c-65b9806c026a"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_4/plane4_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane4_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 200
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f2839642-8258-4c1a-b56d-f1bf2b8aa0c2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># apply compression in x, y and z directions such that strain = diag(-1E-6, -2E-6, 3E-6).
# With lame_lambda=0 and lame_mu=1E7, this gives
# trial_Stress = diag(-20, -40, -60), so trial_mean_Stress = -40.
# with a = -1 and strength = 30, the algorithm should return to
# stress = diag(-10, -30, -50)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-3E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./strength]
    type = TensorMechanicsHardeningConstant
    value = 30
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fcce0724-aac8-4d59-81b8-fb99923bbcdc"><div class="modal-content"><h4>test/tests/nodalkernels/constraint_enforcement/upper-and-lower-bound.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=100
num_steps=10

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
  [lm_upper]
  []
  [lm_lower]
  []
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[NodalKernels]
  [upper_bound]
    type = UpperBoundNodalKernel
    variable = lm_upper
    v = u
    exclude_boundaries = &#x27;left right&#x27;
    upper_bound = 10
  []
  [forces_from_upper]
    type = CoupledForceNodalKernel
    variable = u
    v = lm_upper
    coef = -1
  []
  [lower_bound]
    type = LowerBoundNodalKernel
    variable = lm_lower
    v = u
    exclude_boundaries = &#x27;left right&#x27;
    lower_bound = 0
  []
  [forces_from_lower]
    type = CoupledForceNodalKernel
    variable = u
    v = lm_lower
    coef = 1
  []
[]


[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  [active_upper_lm]
    type = GreaterThanLessThanPostprocessor
    variable = lm_upper
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = 1e-8
    comparator = &#x27;greater&#x27;
  []
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [active_lower_lm]
    type = GreaterThanLessThanPostprocessor
    variable = lm_lower
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = 1e-8
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1ecd7a32-7555-4dab-94bd-065edc8a2273"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4213cace-82cb-4346-8f34-515b314488f2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform7.i</h4><pre class="moose-pre"><code class="language-text"># apply nonuniform stretch in x, y and z directions using
# Lame lambda = 0.7E7, Lame mu = 1.0E7,
# trial_stress(0, 0) = 2.9
# trial_stress(1, 1) = 10.9
# trial_stress(2, 2) = 14.9
# With tensile_strength = 2, decaying to zero at internal parameter = 4E-7
# via a Cubic, the algorithm should return to:
# internal parameter = 2.26829E-7
# trace(stress) = 0.799989 = tensile_strength
# stress(0, 0) = -6.4
# stress(1, 1) = 1.6
# stress(2, 2) = 5.6
# THEN apply a nonuniform compression in x, y, and z so that
# trial_stress(0, 0)
# With compressive_strength = -1, decaying to -0.5 at internal parameter 1E-8
# via a Cubic, the algorithm should return to
# trial_stress(0, 0) = -3.1
# trial_stress(1, 1) = -3.1
# trial_stress(2, 2) = 2.9
# the algorithm should return to trace(stress) = -0.5 = compressive_strength
# stress(0, 0) = -2.1667
# stress(1, 1) = -2.1667
# stress(2, 2) = 3.8333
# and internal parameter = 2.0406E-7

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;if(t&lt;1.5,-1E-7*x,1E-7*x)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;if(t&lt;1.5,3E-7*y,1E-7*y)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;if(t&lt;1.5,5E-7*z,4E-7*z)&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./intnl]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 2
    value_residual = 0
    internal_limit = 4E-7
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1
    value_residual = -0.5
    internal_limit = 1E-8
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-11
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 2
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform7
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f0524489-a638-43fc-9562-7b4433f4fe82"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/pp_generation.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie m^3/second per cubic meter), and the
# rise in porepressure is observed.
#
# Source = s  (units = 1/second)
#
# Expect:
# porepressure = Biot-Modulus*s*t
# stress = 0 (remember this is effective stress)
#
# Parameters:
# Biot coefficient = 0.3
# Porosity = 0.1
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1/0.3 = 3.333333
# 1/Biot modulus = (1 - 0.3)*(0.3 - 0.1)/2 + 0.1*0.3 = 0.1. BiotModulus = 10
# s = 0.1
#
# Expect
# porepressure = t
# stress = 0


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.3
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3dbb8fc9-9fee-4a27-9d32-551ba48e6dad"><div class="modal-content"><h4>test/tests/postprocessors/execute_on_final/execute_on_final.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Transient
  dt = 1
  num_steps = 4
[]

[Functions]
  [func]
    type = ConstantFunction
    value = 5
  []
[]

[Postprocessors]
  [timestep_end]
    type = FunctionValuePostprocessor
    function = &#x27;t&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [final]
    type = FunctionValuePostprocessor
    function = &#x27;2*t&#x27;
    execute_on = &#x27;final&#x27;
  []
[]

[Outputs]
  csv = true
  [on_final]
    type = CSV
    execute_on = final
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a2b90393-37a2-49a9-8cdd-2851a3ecc2f4"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_3/brick3_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick3_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_x
  [../]
  [./disp_x33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_x
  [../]
  [./disp_y28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_y
  [../]
  [./disp_y33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x28 disp_y28 disp_x33 disp_y33 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+7
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5828f34b-19aa-481d-b887-fd73b454145f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_inner_edge.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 8
    mc_interpolation_scheme = inner_edge
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-13
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_inner_edge
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b2105539-9103-4855-b0a5-de1f33158370"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform4.i</h4><pre class="moose-pre"><code class="language-text"># apply nonuniform compression in x, y and z directions such that
# trial_stress(0, 0) = 2
# trial_stress(1, 1) = -8
# trial_stress(2, 2) = -10
# With compressive_strength = -1, the algorithm should return to trace(stress) = -1, or
# stress(0, 0) = 7
# stress(1, 1) = -3
# stress(2, 2) = -5

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-4E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform4
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4e15404c-21da-4ec7-83d4-93437637bc85"><div class="modal-content"><h4>modules/porous_flow/test/tests/dispersion/disp01_heavy.i</h4><pre class="moose-pre"><code class="language-text"># Test dispersive part of PorousFlowDispersiveFlux kernel by setting diffusion
# coefficients to zero. A pressure gradient is applied over the mesh to give a
# uniform velocity. Gravity is set to zero.
# Mass fraction is set to 1 on the left hand side and 0 on the right hand side.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 200
  xmax = 10
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
  compute_enthalpy = false
  compute_internal_energy = false
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./velocity]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./velocity]
    type = PorousFlowDarcyVelocityComponent
    variable = velocity
    component = x
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = pic
  [../]
  [./massfrac0]
    type = ConstantIC
    variable = massfrac0
    value = 0
  [../]
[]

[Functions]
  [./pic]
    type = ParsedFunction
    value = 1.1e5-x*1e3
  [../]
[]

[BCs]
  [./xleft]
    type = DirichletBC
    value = 1
    variable = massfrac0
    boundary = left
  [../]
  [./xright]
    type = DirichletBC
    value = 0
    variable = massfrac0
    boundary = right
  [../]
  [./pright]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 1e5
  [../]
  [./pleft]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1.1e5
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    variable = pp
    disp_trans = 0
    disp_long = 0.2
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = massfrac0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    disp_trans = 0
    disp_long = 0.2
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e9
      density0 = 1000
      viscosity = 0.001
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = massfrac0
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.3
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;0 0&#x27;
    tortuosity = 0.1
  [../]
  [./relp]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-9 0 0 0 1e-9 0 0 0 1e-9&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 1e3
  dtmax = 10
  [./TimeStepper]
    type = IterationAdaptiveDT
    growth_factor = 1.5
    cutback_factor = 0.5
    dt = 1
  [../]
[]

[VectorPostprocessors]
  [./xmass]
    type = NodalValueSampler
    sort_by = id
    variable = massfrac0
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ded113c2-67aa-4551-8935-3dd4b826d1b0"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_lode_zero.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = lode_zero
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 8
    smoothing_tol = 1E-7
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_lode_zero
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ee3bda6b-7a08-435c-ad9f-5b102f0363d0"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_template1.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl2_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4db34bcf-a91c-4f26-8938-701d6c5d1a29"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_2/plane2_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane2_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 200
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d377f1ce-8ad4-4aa8-82f7-c8a04faedd50"><div class="modal-content"><h4>test/tests/vectorpostprocessors/time_data/time_data.i</h4><pre class="moose-pre"><code class="language-text">###############################################################
# The following tests that the CSV output object can include an
# additional .csv file that contains the time and timestep
# data from VectorPostprocessor object.
###############################################################


[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
  [./diff_v]
    type = Diffusion
    variable = v
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
  [./left_v]
    type = DirichletBC
    variable = v
    boundary = left
    value = 1
  [../]
  [./right_v]
    type = DirichletBC
    variable = v
    boundary = right
    value = 0
  [../]
[]

[VectorPostprocessors]
  [./line_sample]
    type = LineValueSampler
    variable = &#x27;u v&#x27;
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = id
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  [./out]
    type = CSV
    time_data = true
    interval = 2
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="110b2d61-d4d5-4d6c-a498-fe1539f380ab"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretch in x, y and z directions.
# With a = 1 and strength = 2, the algorithm should return to sigma_m = 2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./strength]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCap
    a = 1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b324b3a5-20fb-4388-aa08-c0f1263f9a36"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4be5110f-8601-4a4b-8411-1ccfbf49b5b5"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/half_symm_q8/hertz_cyl_half_1deg_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  volumetric_locking_correction = false
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_half_1deg.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 3.5&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_horz]
    type = PiecewiseLinear
    x = &#x27;0. 1. 3.5&#x27;
    y = &#x27;0. 0.0 0.0014&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 2
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 2
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 4
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 4
  [../]
  [./disp_x639]
    type = NodalVariableValue
    nodeid = 638
    variable = disp_x
  [../]
  [./disp_y639]
    type = NodalVariableValue
    nodeid = 638
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disp_ramp_vert
  [../]
  [./top_x_disp]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = disp_ramp_horz
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
  [./stuff5_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;5&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff5_strain]
    type = ComputeFiniteStrain
    block = &#x27;5&#x27;
  [../]
  [./stuff5_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;5&#x27;
  [../]
  [./stuff6_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;6&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff6_strain]
    type = ComputeFiniteStrain
    block = &#x27;6&#x27;
  [../]
  [./stuff6_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;6&#x27;
  [../]
  [./stuff7_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;7&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff7_strain]
    type = ComputeFiniteStrain
    block = &#x27;7&#x27;
  [../]
  [./stuff7_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;7&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-6
  nl_rel_tol = 1e-5
  l_max_its = 100
  nl_max_its = 200

  start_time = 0.0
  end_time = 3.5
  l_tol = 1e-3
  dt = 0.1
  dtmin = 0.1
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./chkfile2]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x639 disp_y639 top_react_x top_react_y&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 2
    secondary = 3
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d62fe8a4-44af-42f4-ac98-f17ff16fb400"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_1/ring1_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring1_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = ring1_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = ring1_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8cb68b47-213f-404c-8ab1-7e9e35665370"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/initial_stress/mc_tensile.i</h4><pre class="moose-pre"><code class="language-text"># In this example, an initial stress is applied that
# is inadmissible, and the return-map algorithm must be
# used to return to the yield surface before any other
# computations can be carried out.
# In this case, the return-map algorithm must subdivide
# the initial stress, otherwise it does not converge.
# This test is testing that subdivision process.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;back&#x27;
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;back&#x27;
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;back&#x27;
    value = 0.0
  [../]
  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front&#x27;
    function = &#x27;2*t-1&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front&#x27;
    function = &#x27;t-1&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front&#x27;
    function = &#x27;t-1&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
    outputs = console
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4.0
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]

  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./pt]
    type = TensorMechanicsPlasticTensile
    tensile_strength = str
    yield_function_tolerance = 1E-3
    tensile_tip_smoother = 0.05
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;8E6 4E6 -18E6 4E6 -40E6 -2E6 -18E6 -2E6 -34E6&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;pt mc&#x27;
    deactivation_scheme = safe
    max_NR_iterations = 100
    min_stepsize = 0.1
  [../]
[]


[Executioner]
  end_time = 2
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = mc_tensile
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ce3e39e4-80e3-49bc-88c5-c84431235626"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/multiapps/batch_commandline_control/master_multiple.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [uniform]
    type = Uniform
    lower_bound = 5
    upper_bound = 10
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 3
    distributions = &#x27;uniform uniform&#x27;
    execute_on = &#x27;PRE_MULTIAPP_SETUP&#x27;
  []
[]

[MultiApps]
  [sub]
    type = SamplerFullSolveMultiApp
    sampler = sample
    input_files = &#x27;sub.i&#x27;
  []
[]

[Transfers]
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = sample
    to_vector_postprocessor = storage
    from_postprocessor = size
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
  []
[]

[Controls]
  [cmdline]
    type = MultiAppCommandLineControl
    multi_app = sub
    sampler = sample
    param_names = &#x27;Mesh/xmax Mesh/ymax&#x27;
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1af9ac0e-4780-4dba-884a-7f556e93aadf"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Smoothed tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_smoothed
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86caac8c-51ff-42fc-97be-a54d6f928659"><div class="modal-content"><h4>modules/porous_flow/test/tests/buckley_leverett/bl01.i</h4><pre class="moose-pre"><code class="language-text"># Buckley-Leverett 1-phase.
# The front starts at (around) x=5, and at t=50 it should
# have moved to x=9.6.  The version below has a nonzero
# suction function, and at t=50, the front sits between
# (about) x=9.6 and x=9.9.  Changing the van-Genuchten
# al parameter to 1E-4 softens the front so it sits between
# (about) x=9.7 and x=10.4, and the simulation runs much faster.
# With al=1E-2 and nx=600, the front sits between x=9.6 and x=9.8,
# but takes about 100 times longer to run.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 150
  xmin = 0
  xmax = 15
[]

[GlobalParams]
  PorousFlowDictator = dictator
  compute_enthalpy = false
  compute_internal_energy = false
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;max((1000000-x/5*1000000)-20000,-20000)&#x27;
    [../]
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 980000
  [../]
[]

[AuxVariables]
  [./sat]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sat]
    type = MaterialStdVectorAux
    variable = sat
    execute_on = timestep_end
    index = 0
    property = PorousFlow_saturation_qp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e6
      viscosity = 1e-3
      density0 = 1000
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-10 0 0  0 1E-10 0  0 0 1E-10&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.15
  [../]
[]

[Preconditioning]
  active = andy
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres bjacobi 1E-10 1E-10 20&#x27;
  [../]
[]

[Functions]
  [./timestepper]
    type = PiecewiseLinear
    x = &#x27;0    0.01 0.1 1   1.5 2   20  30  40  50&#x27;
    y = &#x27;0.01 0.1  0.2 0.3 0.1 0.3 0.3 0.4 0.4 0.5&#x27;
  [../]
[]

[Executioner]
  type = Transient
  end_time = 50
  [./TimeStepper]
    type = FunctionDT
    function = timestepper
  [../]
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;15 0 0&#x27;
    num_points = 150
    sort_by = x
    variable = pp
  [../]
  [./sat]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;15 0 0&#x27;
    num_points = 150
    sort_by = x
    variable = sat
  [../]
[]


[Outputs]
  file_base = bl01
  [./csv]
    type = CSV
    sync_only = true
    sync_times = &#x27;0.01 50&#x27;
  [../]
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ae8a1feb-9739-4aaf-b906-906d2b18ab39"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_1/ring1_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring1_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="58a9b088-e4eb-49dc-bdc0-ecbcdfc305c3"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/wli02.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 1
  xmin = -1000
  xmax = 0
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureBW
    Sn = 0.0
    Ss = 1.0
    C = 1.5
    las = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      viscosity = 4
      density0 = 10
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityBW
    Sn = 0.0
    Ss = 1.0
    Kn = 0
    Ks = 1
    C = 1.5
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 1 0  0 0 1&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = -1E-4
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-0.1 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./base]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    value = -1E-4
    variable = pressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;-1000 0 0&#x27;
    end_point = &#x27;0 0 0&#x27;
    sort_by = x
    num_points = 71
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 100
  dt = 5
[]

[Outputs]
  file_base = wli02
  sync_times = &#x27;100 500 1000&#x27;
  [./exodus]
    type = Exodus
    sync_only = true
  [../]
  [./along_line]
    type = CSV
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4dfc7873-fb2b-41e8-868e-b77013cbab12"><div class="modal-content"><h4>modules/contact/test/tests/dual_mortar/dm_mechanical_contact.i</h4><pre class="moose-pre"><code class="language-text">offset = 0.001
vy = 0.1

refine = 0

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = true
[]

[Mesh]
  [./original_file_mesh]
    type = FileMeshGenerator
    file = long_short_blocks.e
  [../]
  uniform_refine =  ${refine}
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    block = &#x27;1 2&#x27;
  [../]
[]

[Functions]
  [./horizontal_movement]
    type = ParsedFunction
    value = &#x27;0.002-0.003*exp(-4.05*t)&#x27;
  [../]
  [./vertical_movement]
    type = ParsedFunction
    value = &#x27;${vy}*t+${offset}&#x27;
  [../]
[]

[BCs]
  [./push_left_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 30
    function = horizontal_movement
  [../]
  [./fix_right_x]
    type = DirichletBC
    variable = disp_x
    boundary = 40
    value = 0.0
  [../]
  [./fix_right_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;40&#x27;
    value = 0.0
  [../]
  [./push_left_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;30&#x27;
    function = vertical_movement
  [../]
[]

[Materials]
  [./elasticity_tensor_left]
    type = ComputeIsotropicElasticityTensor
    block = 1
    youngs_modulus = 1.0e6
    poissons_ratio = 0.3
  [../]
  [./stress_left]
    type = ComputeFiniteStrainElasticStress
    block = 1
  [../]

  [./elasticity_tensor_right]
    type = ComputeIsotropicElasticityTensor
    block = 2
    youngs_modulus = 1.0e6
    poissons_ratio = 0.3
  [../]
  [./stress_right]
    type = ComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Contact]
  [leftright]
    mesh = original_file_mesh
    secondary = 10
    primary = 20

    use_dual = true

    formulation = mortar
    model = frictionless
  [../]
[]

[ICs]
  [./disp_y]
    block = 1
    variable = disp_y
    value = ${offset}
    type = ConstantIC
  [../]
  [./disp_x]
    block = 1
    variable = disp_x
    value = ${offset}
    type = ConstantIC
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_ksp_ew -snes_fd&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu NONZERO   1e-15&#x27;

  dt = 0.2
  dtmin = 1e-4
  end_time = 0.2

  l_max_its = 100

  nl_max_its = 30
  nl_rel_tol = 1e-6
  snesmf_reuse_base = false
[]

[Outputs]
  file_base = ./dm_contact_out
  [./comp]
    type = CSV
    show = &#x27;contact normal_lm avg_disp_x avg_disp_y max_disp_x max_disp_y min_disp_x min_disp_y&#x27;
  [../]
[]


[Postprocessors]
  [./contact]
    type = ContactDOFSetSize
    variable = leftright_normal_lm
    subdomain = leftright_secondary_subdomain
  []
  [./normal_lm]
    type = ElementAverageValue
    variable = leftright_normal_lm
    block = &#x27;4&#x27;
  [../]
  [./avg_disp_x]
    type = ElementAverageValue
    variable = disp_x
    block = &#x27;1 2&#x27;
  [../]
  [./avg_disp_y]
    type = ElementAverageValue
    variable = disp_y
    block = &#x27;1 2&#x27;
  [../]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
    block = &#x27;1 2&#x27;
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
    block = &#x27;1 2&#x27;
  [../]
  [./min_disp_x]
    type = ElementExtremeValue
    variable = disp_x
    block = &#x27;1 2&#x27;
    value_type = min
  [../]
  [./min_disp_y]
    type = ElementExtremeValue
    variable = disp_y
    block = &#x27;1 2&#x27;
    value_type = min
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="110f0241-a7cf-4115-82f8-591f24c0c077"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_2/ring2_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring2_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f0ab9232-60d5-48a6-bece-0bd4039e7773"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface09.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.0E-6m in y direction and 0.0E-6 in z direction.
# trial stress_yy = 2.0 and stress_zz = 0.0
#
# Then SimpleTester1 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=1.0, stress_zz=0.5
# However, this will mean that internal2&lt;0, so SimpleTester2 will be deactivated
# and the algorithm will return to stress_yy=1
# internal1 should be 1.0, and internal2 should be 0

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface09
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8d786c04-514c-4b55-9fc9-75a5566d2efd"><div class="modal-content"><h4>test/tests/nodalkernels/constraint_enforcement/lower-bound.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=100
num_steps=10

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
  [lm]
  []
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;${l} - x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;-1&#x27;
  []
[]

[NodalKernels]
  [positive_constraint]
    type = LowerBoundNodalKernel
    variable = lm
    v = u
    exclude_boundaries = &#x27;left right&#x27;
  []
  [forces]
    type = CoupledForceNodalKernel
    variable = u
    v = lm
  []
[]


[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = ${l}
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = 0
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  [active_lm]
    type = GreaterThanLessThanPostprocessor
    variable = lm
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = 1e-8
  []
  [violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f09f930f-e1ca-49c5-8e45-9c2af80a345c"><div class="modal-content"><h4>modules/porous_flow/examples/flow_through_fractured_media/coarse.i</h4><pre class="moose-pre"><code class="language-text"># Flow and solute transport along a fracture embedded in a porous matrix
# The fracture is represented by lower dimensional elements
# fracture aperture = 6e-4m
# fracture porosity = 6e-4m = phi * a
# fracture permeability = 1.8e-11 which is based on k=3e-8 from a**2/12, and k*a = 3e-8*6e-4
# matrix porosity = 0.1
# matrix permeanility = 1e-20

[Mesh]
  type = FileMesh
  file = &#x27;coarse.e&#x27;
  block_id = &#x27;1 2 3&#x27;
  block_name = &#x27;fracture matrix1 matrix2&#x27;

  boundary_id = &#x27;1 2&#x27;
  boundary_name = &#x27;bottom top&#x27;
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./velocity_x]
    family = MONOMIAL
    order = CONSTANT
    block = &#x27;fracture&#x27;
  [../]
  [./velocity_y]
    family = MONOMIAL
    order = CONSTANT
    block = &#x27;fracture&#x27;
  [../]
[]

[AuxKernels]
  [./velocity_x]
    type = PorousFlowDarcyVelocityComponentLowerDimensional
    variable = velocity_x
    component = x
    aperture = 6E-4
  [../]
  [./velocity_y]
    type = PorousFlowDarcyVelocityComponentLowerDimensional
    variable = velocity_y
    component = y
    aperture = 6E-4
  [../]
[]

[ICs]
  [./massfrac0]
    type = ConstantIC
    variable = massfrac0
    value = 0
  [../]
  [./pp_matrix]
    type = ConstantIC
    variable = pp
    value = 1E6
  [../]
[]

[BCs]
  [./top]
    type = DirichletBC
    value = 0
    variable = massfrac0
    boundary = top
  [../]
  [./bottom]
    type = DirichletBC
    value = 1
    variable = massfrac0
    boundary = bottom
  [../]
  [./ptop]
    type = DirichletBC
    variable = pp
    boundary =  top
    value = 1e6
  [../]
  [./pbottom]
    type = DirichletBC
    variable = pp
    boundary = bottom
    value = 1.002e6
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = pp
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = pp
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = pp
    disp_trans = 0
    disp_long = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = massfrac0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = massfrac0
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = massfrac0
    disp_trans = 0
    disp_long = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = massfrac0
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro_fracture]
    type = PorousFlowPorosityConst
    porosity = 6e-4   # = a * phif
    block = &#x27;fracture&#x27;
  [../]
  [./poro_matrix]
    type = PorousFlowPorosityConst
    porosity = 0.1
    block = &#x27;matrix1 matrix2&#x27;
  [../]
  [./diff1]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-9 1e-9&#x27;
    tortuosity = 1.0
    block = &#x27;fracture&#x27;
  [../]
  [./diff2]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1e-9 1e-9&#x27;
    tortuosity = 0.1
    block = &#x27;matrix1 matrix2&#x27;
  [../]
  [./permeability_fracture]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.8e-11 0 0 0 1.8e-11 0 0 0 1.8e-11&#x27;   # 1.8e-11 = a * kf
    block = &#x27;fracture&#x27;
  [../]
  [./permeability_matrix]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-20 0 0 0 1e-20 0 0 0 1e-20&#x27;
    block = &#x27;matrix1 matrix2&#x27;
  [../]
  [./relp]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
[]

[Preconditioning]
  [./basic]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 10
  dt = 1

# controls for nonlinear iterations
  nl_max_its = 15
  nl_rel_tol = 1e-14
  nl_abs_tol = 1e-12

[]

[VectorPostprocessors]
  [./xmass]
    type = LineValueSampler
    start_point = &#x27;-0.5 0 0&#x27;
    end_point = &#x27;0.5 0 0&#x27;
    sort_by = x
    num_points = 41
    variable = massfrac0
    outputs = csv
  [../]
[]

[Outputs]
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f8f1d763-e2c6-41bd-91af-a55787808c0e"><div class="modal-content"><h4>test/tests/test_harness/csv_validation_tester_01.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 3
  xmax = 3
[]

[Functions]
  [./fn]
    type = PiecewiseLinear
    axis = x
    x = &#x27;0 2&#x27;
    y = &#x27;1.01 2.99&#x27;
  [../]
[]

[AuxVariables]
  [./a]
  [../]
[]

[AuxKernels]
  [./a_ak]
    type = FunctionAux
    variable = a
    function = fn
  [../]
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./value1]
    type = PointValue
    variable = a
    point = &#x27;0 0 0&#x27;
  [../]

  [./value2]
    type = PointValue
    variable = a
    point = &#x27;1 0 0&#x27;
  [../]

  [./value3]
    type = PointValue
    variable = a
    point = &#x27;2 0 0&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 1
  dt = 0.1
  solve_type = NEWTON
[]

[Outputs]
  [./csv]
    type = CSV
    file_base = csv_validation_tester_01
    execute_on = &#x27;final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5095421e-7a5c-4371-abfd-d748dca8e828"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_2/cyl2_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl2_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = cyl2_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = cyl2_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3320ae69-8f1f-4f01-b225-fce25f50d226"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
  [secondary_x]
    input = anode
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;3&#x27;
    new_block_id = 10
    new_block_name = &quot;secondary_x&quot;
  []
  [primary_x]
    input = secondary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;1&#x27;
    new_block_id = 12
    new_block_name = &quot;primary_x&quot;
  []
  [secondary_y]
    input = primary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;0&#x27;
    new_block_id = 11
    new_block_name = &quot;secondary_y&quot;
  []
  [primary_y]
    input = secondary_y
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;2&#x27;
    new_block_id = 13
    new_block_name = &quot;primary_y&quot;
  []
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]

  # Lagrange multipliers for gradient component periodicity
  [./lm_left_right_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]

  [./lm_up_down_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
[]

[Constraints]
  [./ud_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]

  [./lr_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
    block = 0
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0 10 11&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fc0365b3-5aa1-4853-a9ec-9000edaf3dd1"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f3fbbb2e-c254-4f40-ba1d-933d5adbbd5b"><div class="modal-content"><h4>modules/porous_flow/test/tests/newton_cooling/nc06.i</h4><pre class="moose-pre"><code class="language-text"># Newton cooling from a bar.  1-phase and heat, steady
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pressure temp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./pressure]
  [../]
  [./temp]
  [../]
[]

[ICs]
  # have to start these reasonably close to their steady-state values
  [./pressure]
    type = FunctionIC
    variable = pressure
    function = &#x27;(2-x/100)*1E6&#x27;
  [../]
  [./temperature]
    type = FunctionIC
    variable = temp
    function = 100+0.1*x
  [../]
[]

[Kernels]
  [./flux]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = pressure
  [../]
  [./heat_advection]
    type = PorousFlowHeatAdvection
    gravity = &#x27;0 0 0&#x27;
    variable = temp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e6
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
      cv = 1e6
      porepressure_coefficient = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-15 0 0 0 1E-15 0 0 0 1E-15&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey # irrelevant in this fully-saturated situation
    n = 2
    phase = 0
  [../]
[]

[BCs]
  [./leftp]
    type = DirichletBC
    variable = pressure
    boundary = left
    value = 2E6
  [../]
  [./leftt]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 100
  [../]
  [./newtonp]
    type = PorousFlowPiecewiseLinearSink
    variable = pressure
    boundary = right
    pt_vals = &#x27;0 100000 200000 300000 400000 500000 600000 700000 800000 900000 1000000 1100000 1200000 1300000 1400000 1500000 1600000 1700000 1800000 1900000 2000000&#x27;
    multipliers = &#x27;0. 5.6677197748570516e-6 0.000011931518841831313 0.00001885408740732065 0.000026504708864284114 0.000034959953203725676 0.000044304443352900224 0.00005463170211001232 0.00006604508815181467 0.00007865883048198513 0.00009259917167338928 0.00010800563134618119 0.00012503240252705603 0.00014384989486488752 0.00016464644014777016 0.00018763017719085535 0.0002130311349595711 0.00024110353477682344 0.00027212833465544285 0.00030641604122040985 0.00034430981736352295&#x27;
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1
  [../]
  [./newton]
    type = PorousFlowPiecewiseLinearSink
    variable = temp
    boundary = right
    pt_vals = &#x27;0 100000 200000 300000 400000 500000 600000 700000 800000 900000 1000000 1100000 1200000 1300000 1400000 1500000 1600000 1700000 1800000 1900000 2000000&#x27;
    multipliers = &#x27;0. 5.6677197748570516e-6 0.000011931518841831313 0.00001885408740732065 0.000026504708864284114 0.000034959953203725676 0.000044304443352900224 0.00005463170211001232 0.00006604508815181467 0.00007865883048198513 0.00009259917167338928 0.00010800563134618119 0.00012503240252705603 0.00014384989486488752 0.00016464644014777016 0.00018763017719085535 0.0002130311349595711 0.00024110353477682344 0.00027212833465544285 0.00030641604122040985 0.00034430981736352295&#x27;
    use_mobility = false
    use_relperm = false
    use_internal_energy = true
    fluid_phase = 0
    flux_function = 1
  [../]
[]

[VectorPostprocessors]
  [./porepressure]
    type = LineValueSampler
    variable = pressure
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 11
    execute_on = timestep_end
  [../]
  [./temperature]
    type = LineValueSampler
    variable = temp
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 11
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol &#x27;
    petsc_options_value = &#x27;gmres asm lu 100 NONZERO 2 1E-8 1E-15&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  file_base = nc06
  execute_on = timestep_end
  exodus = true
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = timestep_end
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e03a6a51-edd4-42a5-bda3-40326eb6f88f"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_2/brick2_aug.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick2_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 100
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_x26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_x
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./disp_y26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5

[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x7 disp_y7 disp_x26 disp_y26 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    formulation = augmented_lagrange
    normalize_penalty = true
    penalty = 1e8
    model = frictionless
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2f601833-bd8a-4138-87c0-ac4d96db51ec"><div class="modal-content"><h4>test/tests/outputs/iterative/iterative_csv.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./iterations]
     type = NumResidualEvaluations
     execute_on = linear
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = NEWTON
  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./out]
    type = CSV
    nonlinear_residual_dt_divisor = 100
    linear_residual_dt_divisor = 100
    start_time = 1.8
    end_time = 1.85
    execute_on = &#x27;nonlinear linear timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b00aa6ad-7d3e-492a-a1fc-394aa13a0e11"><div class="modal-content"><h4>test/tests/multiapps/grid-sequencing/vi-fine.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=80
num_steps=2

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
[]

[AuxVariables]
  [bounds][]
[]

[Bounds]
  [./u_upper_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = upper
    bound_value = ${l}
  [../]
  [./u_lower_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = lower
    bound_value = 0
  [../]
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options = &#x27;-snes_vi_monitor&#x27;
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type -snes_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic                 vinewtonrsls&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  active = &#x27;upper_violations lower_violations&#x27;
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]

[MultiApps]
  [./coarse]
    type = TransientMultiApp
    app_type = MooseTestApp
    execute_on = timestep_begin
    positions = &#x27;0 0 0&#x27;
    input_files = vi-coarse.i
  [../]
[]

[Transfers]
  [./mesh_function_begin]
    type = MultiAppMeshFunctionTransfer
    direction = from_multiapp
    multi_app = coarse
    source_variable = u
    variable = u
    execute_on = timestep_begin
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f4fa2042-142c-40e7-b57a-071e856d10a9"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cc56faf1-4874-4eca-a81d-33c2fd331b81"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar3.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in the z and x directions, with lame mu = 1E6, so trial stress is 2Pa in those directions
# tensile_strength is set to 1Pa
# Then the final stress should return to the z and x stresses being 1.0 (up to tolerance), and internal parameter = (0.5+0.5)E-6 = 1.0E-6
# Using &#x27;planar&#x27; Tensile plasticity

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
    outputs = console
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    max_NR_iterations = 4
    min_stepsize = 1
    plastic_models = tens
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="87b3cf87-ca90-4c11-a7e6-eaed4be8733a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial2_planar.i</h4><pre class="moose-pre"><code class="language-text"># same as uni_axial2 but with planar mohr-coulomb
[Mesh]
  type = FileMesh
  file = quarter_hole.e
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;zmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymax_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;ymax&#x27;
    function = &#x27;-1E-4*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E7
  [../]
  [./fric]
    type = TensorMechanicsHardeningConstant
    value = 2
    convert_to_radians = true
  [../]
  [./dil]
    type = TensorMechanicsHardeningConstant
    value = 2
    convert_to_radians = true
  [../]

  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = fric
    dilation_angle = dil
    yield_function_tolerance = 1.0 # THIS IS HIGHER THAN THE SMOOTH CASE TO AVOID PRECISION-LOSS PROBLEMS!
    shift = 1.0
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 1
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 5E9&#x27; # young = 10Gpa, poisson = 0.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 1
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 1
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    max_NR_iterations = 100
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    debug_fspb = crash
  [../]
[]

# Preconditioning and Executioner options kindly provided by Andrea
[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 0.5
  dt = 0.1
  solve_type = NEWTON
  type = Transient
[]


[Outputs]
  file_base = uni_axial2_planar
  [./exodus]
    type = Exodus
    hide = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz yield_fcn s_xx s_xy s_xz s_yy s_yz s_zz f&#x27;
  [../]
  [./csv]
    type = CSV
    interval = 1
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="32c3cdcf-d752-4c5e-b6fe-44e6ad4fbc86"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard3.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# Both return to the edge (lode angle = 30deg, ie 010100) and tip are experienced.
#
# It is checked that the yield functions are less than their tolerance values
# It is checked that the cohesion hardens correctly

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.05E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if((a&lt;1E-5)&amp;(b&lt;1E-5)&amp;(c&lt;1E-5)&amp;(d&lt;1E-5)&amp;(g&lt;1E-5)&amp;(h&lt;1E-5),0,abs(a)+abs(b)+abs(c)+abs(d)+abs(g)+abs(h))&#x27;
    vars = &#x27;a b c d g h&#x27;
    vals = &#x27;f0 f1 f2 f3 f4 f5&#x27;
  [../]
  [./coh_analytic]
    type = ParsedFunction
    value = &#x27;20-10*exp(-1E5*intnl)&#x27;
    vars = intnl
    vals = internal
  [../]
  [./coh_from_yieldfcns]
    type = ParsedFunction
    value = &#x27;(f0+f1-(sxx+syy)*sin(phi))/(-2)/cos(phi)&#x27;
    vars = &#x27;f0 f1 sxx syy phi&#x27;
    vals = &#x27;f0 f1 s_xx s_yy 0.8726646&#x27;
  [../]
  [./should_be_zero_coh]
    type = ParsedFunction
    value = &#x27;if(abs(a-b)&lt;1E-6,0,1E6*abs(a-b))&#x27;
    vars = &#x27;a b&#x27;
    vals = &#x27;Coh_analytic Coh_moose&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn5]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn0]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn0
  [../]
  [./yield_fcn1]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = yield_fcn1
  [../]
  [./yield_fcn2]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = yield_fcn2
  [../]
  [./yield_fcn3]
    type = MaterialStdVectorAux
    index = 3
    property = plastic_yield_function
    variable = yield_fcn3
  [../]
  [./yield_fcn4]
    type = MaterialStdVectorAux
    index = 4
    property = plastic_yield_function
    variable = yield_fcn4
  [../]
  [./yield_fcn5]
    type = MaterialStdVectorAux
    index = 5
    property = plastic_yield_function
    variable = yield_fcn5
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn3
  [../]
  [./f4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn4
  [../]
  [./f5]
   type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn5
  [../]
  [./yfcns_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./Coh_analytic]
    type = FunctionValuePostprocessor
    function = coh_analytic
  [../]
  [./Coh_moose]
    type = FunctionValuePostprocessor
    function = coh_from_yieldfcns
  [../]
  [./cohesion_difference_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_coh
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 20
    rate = 1E5
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.8726646
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 1 #0.8726646 # 50deg
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1E-5
    use_custom_returnMap = true
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
  [../]
[]


[Executioner]
  end_time = 5
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar_hard3
  exodus = false
  [./csv]
    type = CSV
    hide = &#x27;f0 f1 f2 f3 f4 f5 s_xy s_xz s_yz Coh_analytic Coh_moose&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4c608d06-1440-40a5-88ed-161abf138689"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/two_surface01.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester with a = 0 and b = 1 and strength = 1
# SimpleTester with a = 1 and b = 1 and strength = 2
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.5E-6m in the z directions.
# stress_zz = 1.5
#
# Then only the first SimpleTester should activate, and the final stress
# should have have only nonzero component stress_zz = 1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
[]

[UserObjects]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 2
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = two_surface01
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5a28d3b4-6217-47f2-9b73-ac671d749ff2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/two_surface03.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester with a = 0 and b = 1 and strength = 1
# SimpleTester with a = 1 and b = 1 and strength = 2
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 3.0E-6m in z directions and 0.5E-6 in y direction.
# trial stress_zz = 3.0 and stress_yy = 0.5
#
# Then both  SimpleTesters should activate initially and return to the &quot;corner&quot; point
# (stress_zz = 1 = stress_yy), but then the plastic multiplier for SimpleTester2 will
# be negative, and so it will be deactivated, and the algorithm will return to
# stress_zz = 1, stress_yy = 0.5
# internal0 should be 2, and internal1 should be 0

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
[]

[UserObjects]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 2
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = two_surface03
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2ca0f162-c61b-4ccb-8374-0a7ee4e1044e"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_3D.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
# 3D version
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  xmin = 0
  xmax = 1
  ny = 4
  ymin = 0
  ymax = 0.5
  nz = 3
  zmin = 0
  zmax = 2
[]

[Variables]
  [./tracer]
  [../]
[]

[Problem]
  error_on_jacobian_nonzero_reallocation=true
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.5 2&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="79c69e42-9410-434d-8ed9-a704d476d99c"><div class="modal-content"><h4>modules/porous_flow/test/tests/fluidstate/theis.i</h4><pre class="moose-pre"><code class="language-text"># Two phase Theis problem: Flow from single source using WaterNCG fluidstate.
# Constant rate injection 2 kg/s
# 1D cylindrical mesh
# Initially, system has only a liquid phase, until enough gas is injected
# to form a gas phase, in which case the system becomes two phase.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 40
  xmax = 200
  bias_x = 1.05
[]

[Problem]
  type = FEProblem
  coord_type = RZ
  rz_coord_axis = Y
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./saturation_gas]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./x1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./y0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = timestep_end
  [../]
  [./x1]
    type = PorousFlowPropertyAux
    variable = x1
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = timestep_end
  [../]
  [./y0]
    type = PorousFlowPropertyAux
    variable = y0
    property = mass_fraction
    phase = 1
    fluid_component = 0
    execute_on = timestep_end
  [../]
[]

[Variables]
  [./pgas]
    initial_condition = 20e6
  [../]
  [./zi]
    initial_condition = 0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
[]

[BCs]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 20e6
    variable = pgas
  [../]
[]

[DiracKernels]
  [./source]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = 2
    variable = zi
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-8       1E-10 20&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 2e2
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    growth_factor = 2
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = NodalValueSampler
    sort_by = x
    variable = &#x27;pgas zi&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Postprocessors]
  [./pgas]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = pgas
  [../]
  [./sgas]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = saturation_gas
  [../]
  [./zi]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = zi
  [../]
  [./massgas]
    type = PorousFlowFluidMass
    fluid_component = 1
  [../]
  [./x1]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = x1
  [../]
  [./y0]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = y0
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  [./csvout]
    type = CSV
    execute_on = timestep_end
    execute_vector_postprocessors_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="046c3c4f-9dfa-4655-9edd-a4371c1f87e4"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform8_update_version.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by 1E-6m in z direction.
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_zz = 2.6 Pa
# stress_xx = 0.6 Pa
# stress_yy = 0.6 Pa
# tensile_strength is set to 0.5Pa
#
# stress_zz = 0.5
# plastic multiplier = 2.1/2.6 E-6
# stress_xx = 0.6 - (2.1/2.6*0.6) = 0.115
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.0
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform8_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9011bfd3-9e03-432a-a0a2-22167b6412a9"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/bw01.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 400
  ny = 1
  xmin = -10
  xmax = 10
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-5 1E-2 1E-2 1E-1&#x27;
    x = &#x27;0 1E-5 1 10&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureBW
    Sn = 0.0
    Ss = 1.0
    C = 1.5
    las = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      viscosity = 4
      density0 = 10
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityBW
    Sn = 0.0
    Ss = 1.0
    Kn = 0
    Ks = 1
    C = 1.5
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 1 0  0 0 1&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = -9E2
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-0.1 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./recharge]
    type = PorousFlowSink
    variable = pressure
    boundary = right
    flux_function = -1.25 # corresponds to Rstar being 0.5 because i have to multiply by density*porosity
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;-10 0 0&#x27;
    end_point = &#x27;10 0 0&#x27;
    sort_by = x
    num_points = 101
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 8

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = bw01
  sync_times = &#x27;0.5 2 8&#x27;
  [./exodus]
    type = Exodus
    sync_only = true
  [../]
  [./along_line]
    type = CSV
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ee72731d-e7bd-4eb1-b59c-4c2020b2a870"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_lode_zero.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 8
    mc_interpolation_scheme = lode_zero
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-13
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_lode_zero
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0a5b1120-40a1-4c53-a6ef-5adf28ebe580"><div class="modal-content"><h4>modules/richards/test/tests/user_objects/uo2.i</h4><pre class="moose-pre"><code class="language-text"># Density User objects give the correct value
#
# If you want to add another test for another UserObject
# then add the UserObject, add a Function defining the expected result,
# add an AuxVariable and AuxKernel that will record the UserObjects value
# and finally add a NodalL2Error that compares this with the Function

[UserObjects]
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1000
    bulk_mod = 2E6
  [../]
  [./DensityIdeal]
    type = RichardsDensityIdeal
    p0 = 33333
    slope = 1.1E-2
  [../]
  [./DensityMethane20degC]
    type = RichardsDensityMethane20degC
  [../]
  [./DensityVDW]
    type = RichardsDensityVDW
    a = 0.2303
    b = 4.31E-4
    temperature = 293
    molar_mass = 16.04246E-3
    infinity_ratio = 10
  [../]
  [./DensityConstBulkCut]
    type = RichardsDensityConstBulkCut
    dens0 = 1000
    bulk_mod = 2E6
    cut_limit = 1E6
    zero_point = -1E6
  [../]

  # following are unimportant in this test
  [./SeffVG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1E-6
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.10101
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.054321
    sum_s_res = 0.054321
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 1E5
  [../]
[]

[Functions]
  [./initial_pressure]
    type = ParsedFunction
    value = x
  [../]
  [./answer_DensityConstBulk]
    type = ParsedFunction
    value = dens0*exp(x/bulk_mod)
    vars = &#x27;dens0 bulk_mod&#x27;
    vals = &#x27;1000 2E6&#x27;
  [../]
  [./answer_dDensityConstBulk]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = dens0*exp(x/bulk_mod)
    vars = &#x27;dens0 bulk_mod&#x27;
    vals = &#x27;1000 2E6&#x27;
  [../]
  [./answer_d2DensityConstBulk]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = dens0*exp(x/bulk_mod)
    vars = &#x27;dens0 bulk_mod&#x27;
    vals = &#x27;1000 2E6&#x27;
  [../]

  [./answer_DensityIdeal]
    type = ParsedFunction
    value = slope*(x-p0)
    vars = &#x27;p0 slope&#x27;
    vals = &#x27;33333 1.1E-2&#x27;
  [../]
  [./answer_dDensityIdeal]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = slope*(x-p0)
    vars = &#x27;p0 slope&#x27;
    vals = &#x27;33333 1.1E-2&#x27;
  [../]
  [./answer_d2DensityIdeal]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = slope*(x-p0)
    vars = &#x27;p0 slope&#x27;
    vals = &#x27;33333 1.1E-2&#x27;
  [../]

  [./answer_DensityMethane20degC]
    type = ParsedFunction
    value = if(x&gt;0,(0.00654576947608E-3*x+1.04357716547E-13*x^2),0)+if(x&lt;0,0.1*(e^(6.54576947608E-5*x)-1),0)
  [../]
  [./answer_dDensityMethane20degC]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&gt;0,(0.00654576947608E-3*x+1.04357716547E-13*x^2),0)+if(x&lt;0,0.1*(e^(6.54576947608E-5*x)-1),0)
  [../]
  [./answer_d2DensityMethane20degC]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&gt;0,(0.00654576947608E-3*x+1.04357716547E-13*x^2),0)+if(x&lt;0,0.1*(e^(6.54576947608E-5*x)-1),0)
  [../]

  [./answer_DensityVDW]
    type = ParsedFunction
    value = if(x&gt;0,-(molar_mass*(-2+(2*pow(2,0.3333333333333333)*(a-3*b*(b*x+rt)))/pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333)+(pow(2,0.6666666666666666)*pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333))/a))/(6.*b)+(molar_mass*(-2+(2*pow(2,0.3333333333333333)*(a-3*b*(b*0+rt)))/pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*0+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*0-rt),2)-4*pow(a-3*b*(b*0+rt),3)),0.5),0.3333333333333333)+(pow(2,0.6666666666666666)*pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*0+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*0-rt),2)-4*pow(a-3*b*(b*0+rt),3)),0.5),0.3333333333333333))/a))/(6.*b),infinityratio*molar_mass*(e^(slope0*x)-1))
    vars = &#x27;a b rt molar_mass infinityratio slope0&#x27;
    vals = &#x27;0.2303 0.000431 2436.1403 0.01604246 10 4.10485e-05&#x27;
  [../]
  [./answer_dDensityVDW]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&gt;0,-(molar_mass*(-2+(2*pow(2,0.3333333333333333)*(a-3*b*(b*x+rt)))/pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333)+(pow(2,0.6666666666666666)*pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333))/a))/(6.*b),infinityratio*molar_mass*(e^(slope0*x)-1))
    vars = &#x27;a b rt molar_mass infinityratio slope0&#x27;
    vals = &#x27;0.2303 0.000431 2436.1403 0.01604246 10 4.10485e-05&#x27;
  [../]
  [./answer_d2DensityVDW]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&gt;0,-(molar_mass*(-2+(2*pow(2,0.3333333333333333)*(a-3*b*(b*x+rt)))/pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333)+(pow(2,0.6666666666666666)*pow(-2*pow(a,3)+9*pow(a,2)*b*(-2*b*x+rt)+pow(pow(a,3)*(a*pow(2*a+9*b*(2*b*x-rt),2)-4*pow(a-3*b*(b*x+rt),3)),0.5),0.3333333333333333))/a))/(6.*b),infinityratio*molar_mass*(e^(slope0*x)-1))
    vars = &#x27;a b rt molar_mass infinityratio slope0&#x27;
    vals = &#x27;0.2303 0.000431 2436.1403 0.01604246 10 4.10485e-05&#x27;
  [../]

  [./answer_DensityConstBulkCut]
    type = ParsedFunction
    value = if(x&lt;zero_pt,0,if(x&gt;cut_limit,dens0*exp(x/bulk_mod),(3*cut_limit-2*x-zero_pt)*(x-zero_pt)*(x-zero_pt)*dens0*exp(x/bulk_mod)/(cut_limit-zero_pt)/(cut_limit-zero_pt)/(cut_limit-zero_pt)))
    vars = &#x27;dens0 bulk_mod zero_pt cut_limit&#x27;
    vals = &#x27;1000 2E6 -1E6 1E6&#x27;
  [../]
  [./answer_dDensityConstBulkCut]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&lt;zero_pt,0,if(x&gt;cut_limit,dens0*exp(x/bulk_mod),(3*cut_limit-2*x-zero_pt)*(x-zero_pt)*(x-zero_pt)*dens0*exp(x/bulk_mod)/(cut_limit-zero_pt)/(cut_limit-zero_pt)/(cut_limit-zero_pt)))
    vars = &#x27;dens0 bulk_mod zero_pt cut_limit&#x27;
    vals = &#x27;1000 2E6 -1E6 1E6&#x27;
  [../]
  [./answer_d2DensityConstBulkCut]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&lt;zero_pt,0,if(x&gt;cut_limit,dens0*exp(x/bulk_mod),(3*cut_limit-2*x-zero_pt)*(x-zero_pt)*(x-zero_pt)*dens0*exp(x/bulk_mod)/(cut_limit-zero_pt)/(cut_limit-zero_pt)/(cut_limit-zero_pt)))
    vars = &#x27;dens0 bulk_mod zero_pt cut_limit&#x27;
    vals = &#x27;1000 2E6 -1E6 1E6&#x27;
  [../]
[]

[AuxVariables]
  [./DensityConstBulk_Aux]
  [../]
  [./dDensityConstBulk_Aux]
  [../]
  [./d2DensityConstBulk_Aux]
  [../]

  [./DensityIdeal_Aux]
  [../]
  [./dDensityIdeal_Aux]
  [../]
  [./d2DensityIdeal_Aux]
  [../]

  [./DensityMethane20degC_Aux]
  [../]
  [./dDensityMethane20degC_Aux]
  [../]
  [./d2DensityMethane20degC_Aux]
  [../]

  [./DensityVDW_Aux]
  [../]
  [./dDensityVDW_Aux]
  [../]
  [./d2DensityVDW_Aux]
  [../]

  [./DensityConstBulkCut_Aux]
  [../]
  [./dDensityConstBulkCut_Aux]
  [../]
  [./d2DensityConstBulkCut_Aux]
  [../]

  [./check_Aux]
  [../]
[]

[AuxKernels]
  [./DensityConstBulk_AuxK]
    type = RichardsDensityAux
    variable = DensityConstBulk_Aux
    density_UO = DensityConstBulk
    pressure_var = pressure
  [../]
  [./dDensityConstBulk_AuxK]
    type = RichardsDensityPrimeAux
    variable = dDensityConstBulk_Aux
    density_UO = DensityConstBulk
    pressure_var = pressure
  [../]
  [./d2DensityConstBulk_AuxK]
    type = RichardsDensityPrimePrimeAux
    variable = d2DensityConstBulk_Aux
    density_UO = DensityConstBulk
    pressure_var = pressure
  [../]

  [./DensityIdeal_AuxK]
    type = RichardsDensityAux
    variable = DensityIdeal_Aux
    density_UO = DensityIdeal
    pressure_var = pressure
  [../]
  [./dDensityIdeal_AuxK]
    type = RichardsDensityPrimeAux
    variable = dDensityIdeal_Aux
    density_UO = DensityIdeal
    pressure_var = pressure
  [../]
  [./d2DensityIdeal_AuxK]
    type = RichardsDensityPrimePrimeAux
    variable = d2DensityIdeal_Aux
    density_UO = DensityIdeal
    pressure_var = pressure
  [../]

  [./DensityMethane20degC_AuxK]
    type = RichardsDensityAux
    variable = DensityMethane20degC_Aux
    density_UO = DensityMethane20degC
    pressure_var = pressure
  [../]
  [./dDensityMethane20degC_AuxK]
    type = RichardsDensityPrimeAux
    variable = dDensityMethane20degC_Aux
    density_UO = DensityMethane20degC
    pressure_var = pressure
  [../]
  [./d2DensityMethane20degC_AuxK]
    type = RichardsDensityPrimePrimeAux
    variable = d2DensityMethane20degC_Aux
    density_UO = DensityMethane20degC
    pressure_var = pressure
  [../]

  [./DensityVDW_AuxK]
    type = RichardsDensityAux
    variable = DensityVDW_Aux
    density_UO = DensityVDW
    pressure_var = pressure
  [../]
  [./dDensityVDW_AuxK]
    type = RichardsDensityPrimeAux
    variable = dDensityVDW_Aux
    density_UO = DensityVDW
    pressure_var = pressure
  [../]
  [./d2DensityVDW_AuxK]
    type = RichardsDensityPrimePrimeAux
    variable = d2DensityVDW_Aux
    density_UO = DensityVDW
    pressure_var = pressure
  [../]

  [./DensityConstBulkCut_AuxK]
    type = RichardsDensityAux
    variable = DensityConstBulkCut_Aux
    density_UO = DensityConstBulkCut
    pressure_var = pressure
  [../]
  [./dDensityConstBulkCut_AuxK]
    type = RichardsDensityPrimeAux
    variable = dDensityConstBulkCut_Aux
    density_UO = DensityConstBulkCut
    pressure_var = pressure
  [../]
  [./d2DensityConstBulkCut_AuxK]
    type = RichardsDensityPrimePrimeAux
    variable = d2DensityConstBulkCut_Aux
    density_UO = DensityConstBulkCut
    pressure_var = pressure
  [../]

  [./check_AuxK]
    type = FunctionAux
    variable = check_Aux
    function = answer_d2DensityConstBulkCut
  [../]
[]

[Postprocessors]
  [./cf_DensityConstBulk]
    type = NodalL2Error
    function = answer_DensityConstBulk
    variable = DensityConstBulk_Aux
  [../]
  [./cf_dDensityConstBulk]
    type = NodalL2Error
    function = answer_dDensityConstBulk
    variable = dDensityConstBulk_Aux
  [../]
  [./cf_d2DensityConstBulk]
    type = NodalL2Error
    function = answer_d2DensityConstBulk
    variable = d2DensityConstBulk_Aux
  [../]

  [./cf_DensityIdeal]
    type = NodalL2Error
    function = answer_DensityIdeal
    variable = DensityIdeal_Aux
  [../]
  [./cf_dDensityIdeal]
    type = NodalL2Error
    function = answer_dDensityIdeal
    variable = dDensityIdeal_Aux
  [../]
  [./cf_d2DensityIdeal]
    type = NodalL2Error
    function = answer_d2DensityIdeal
    variable = d2DensityIdeal_Aux
  [../]

  [./cf_DensityMethane20degC]
    type = NodalL2Error
    function = answer_DensityMethane20degC
    variable = DensityMethane20degC_Aux
  [../]
  [./cf_dDensityMethane20degC]
    type = NodalL2Error
    function = answer_dDensityMethane20degC
    variable = dDensityMethane20degC_Aux
  [../]
  [./cf_d2DensityMethane20degC]
    type = NodalL2Error
    function = answer_d2DensityMethane20degC
    variable = d2DensityMethane20degC_Aux
  [../]

  [./cf_DensityVDW]
    type = NodalL2Error
    function = answer_DensityVDW
    variable = DensityVDW_Aux
  [../]
  [./cf_dDensityVDW]
    type = NodalL2Error
    function = answer_dDensityVDW
    variable = dDensityVDW_Aux
  [../]
  [./cf_d2DensityVDW]
    type = NodalL2Error
    function = answer_d2DensityVDW
    variable = d2DensityVDW_Aux
  [../]

  [./cf_DensityConstBulkCut]
    type = NodalL2Error
    function = answer_DensityConstBulkCut
    variable = DensityConstBulkCut_Aux
  [../]
  [./cf_dDensityConstBulkCut]
    type = NodalL2Error
    function = answer_dDensityConstBulkCut
    variable = dDensityConstBulkCut_Aux
  [../]
  [./cf_d2DensityConstBulkCut]
    type = NodalL2Error
    function = answer_d2DensityConstBulkCut
    variable = d2DensityConstBulkCut_Aux
  [../]
[]



#############################################################################
#
# Following is largely unimportant as we are not running an actual similation
#
#############################################################################
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -5E6
  xmax = 5E6
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = initial_pressure
    [../]
  [../]
[]

[Kernels]
  active = &#x27;richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
[]

[Materials]
  [./unimportant_material]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-20 0 0  0 1E-20 0  0 0 1E-20&#x27;
    richardsVarNames_UO = PPNames
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    sat_UO = Saturation
    seff_UO = SeffVG
    SUPG_UO = SUPGstandard
    viscosity = 1E-3
    gravity = &#x27;0 0 -10&#x27;
    linear_shape_fcns = true
  [../]
[]

[Preconditioning]
  [./does_nothing]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E50 1E50 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 1
  dt = 1E-100
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  active = &#x27;csv&#x27;
  file_base = uo2
  [./csv]
    type = CSV
    [../]
  [./exodus]
    type = Exodus
    hide = pressure
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fe278236-3933-4f87-9ac0-bb758ced5521"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_1/brick1_aug.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick1_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 100
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_x
  [../]
  [./disp_x13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_y
  [../]
  [./disp_y13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_x8 disp_x13 disp_x16 disp_y5 disp_y8 disp_y13 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    formulation = augmented_lagrange
    normalize_penalty = true
    penalty = 1e8
    model = frictionless
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c6e045b2-7bdb-48b7-9f7a-2b4379257c5a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform1.i</h4><pre class="moose-pre"><code class="language-text"># rotate the mesh by 90degrees
# then pull in the z direction - should be no plasticity
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  # rotate:
  # ynew = c*y + s*z.  znew = -s*y + c*z
  [./bottomx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = back
    function = &#x27;0&#x27;
  [../]
  [./bottomy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = back
    function = &#x27;0*y+1*z-y&#x27;
  [../]
  [./bottomz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = back
    function = &#x27;-1*y+0*z-z+if(t&gt;0,0.5-y,0)&#x27; # note that this uses original nodal values of (x,y,z)
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;0*y+1*z-y&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;-1*y+0*z-z+if(t&gt;0,0.5-y,0)&#x27; # note that this uses original nodal values of (x,y,z)
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.1111077
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 0.5
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
    debug_fspb = crash
  [../]
[]


[Executioner]
  start_time = -1
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform1
  [./csv]
    type = CSV
    [../]
  [./exodus]
    type = Exodus
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4eac32db-eaa0-46fc-ae9b-7b3649b2641c"><div class="modal-content"><h4>python/peacock/tests/common/time_data.i</h4><pre class="moose-pre"><code class="language-text">###############################################################
# The following tests that the CSV output object can include an
# additional .csv file that contains the time and timestep
# data from VectorPostprocessor object.
###############################################################


[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
  [./diff_v]
    type = Diffusion
    variable = v
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
  [./left_v]
    type = DirichletBC
    variable = v
    boundary = left
    value = 1
  [../]
  [./right_v]
    type = DirichletBC
    variable = v
    boundary = right
    value = 0
  [../]
[]

[VectorPostprocessors]
  [./line_sample]
    type = LineValueSampler
    variable = &#x27;u v&#x27;
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = id
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  file_base = &#x27;time_data&#x27;
  [./out]
    type = CSV
    time_data = true
    interval = 2
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="35f0abe2-4b77-4215-8bec-1595676ead3f"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Normal
    mean = 5
    standard_deviation = 0.5
  []
  [S_dist]
    type = Normal
    mean = 8
    standard_deviation = 0.7
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = timestep_end
  []
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [pc_coeff]
    type = PolynomialChaosData
    pc_name = poly_chaos
    execute_on = final
  []
  [pc_samp]
    type = EvaluateSurrogate
    model = poly_chaos
    sampler = sample
    output_samples = true
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0b1681a2-6203-4d6c-8767-aab7a76f2593"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_squared_exponential.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [k_dist]
    type = Uniform
    lower_bound = 1
    upper_bound = 10
  []
  [q_dist]
    type = Uniform
    lower_bound = 9000
    upper_bound = 11000
  []
[]

[Samplers]
  [train_sample]
    type = MonteCarlo
    num_rows = 10
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
  [test_sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
[]

[MultiApps]
  [sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = train_sample
  []
[]

[Controls]
  [cmdline]
    type = MultiAppCommandLineControl
    multi_app = sub
    sampler = train_sample
    param_names = &#x27;Materials/conductivity/prop_values Kernels/source/value&#x27;
  []
[]

[Transfers]
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = train_sample
    to_vector_postprocessor = results
    from_postprocessor = &#x27;avg&#x27;
  []
[]

[VectorPostprocessors]
  [results]
    type = StochasticResults
  []
  [samp_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = test_sample
    output_samples = true
    execute_on = final
  []
  [train_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = train_sample
    output_samples = true
    execute_on = final
  []
[]

[Trainers]
  [GP_avg_trainer]
    type = GaussianProcessTrainer
    execute_on = timestep_end
    covariance_function = &#x27;covar&#x27;             #Choose a squared exponential for the kernel
    standardize_params = &#x27;true&#x27;               #Center and scale the training params
    standardize_data = &#x27;true&#x27;                 #Center and scale the training data
    distributions = &#x27;k_dist q_dist&#x27;
    sampler = train_sample
    results_vpp = results
    results_vector = data:avg
  []
[]

[Surrogates]
  [GP_avg]
    type = GaussianProcess
    trainer = GP_avg_trainer
  []
[]

[Covariance]
  [covar]
    type=SquaredExponentialCovariance
    signal_variance = 1                       #Use a signal variance of 1 in the kernel
    noise_variance = 1e-6                     #A small amount of noise can help with numerical stability
    length_factor = &#x27;0.38971 0.38971&#x27;         #Select a length factor for each parameter (k and q)
  []
[]


[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4fd10936-d793-4b9e-abf6-6060ec775ae9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform2_update_version.i</h4><pre class="moose-pre"><code class="language-text"># Using TensileStressUpdate
# checking for small deformation
# A single element is stretched equally in all directions.
# This causes the return direction to be along the sigma_I = sigma_II = sigma_III line
# tensile_strength is set to 1Pa, and smoothing_tol = 0.1Pa
# The smoothed yield function comes from two smoothing operations.
# The first is on sigma_I and sigma_II (sigma_I &gt;= sigma_II &gt;= sigma_III):
# yf = sigma_I + ismoother(0) - tensile_strength
#    = sigma_I + (0.5 * smoothing_tol - smoothing_tol / Pi) - tensile_strength
#    = sigma_I + 0.018169 - 1
# The second has the argument of ismoother equal to -0.018169.
# ismoother(-0.018169) = 0.5 * (-0.018169 + 0.1) - 0.1 * cos (0.5 * Pi * -0.018169 / 0.1) / Pi
#                     = 0.010372
# So the final yield function is
# yf = sigma_I + 0.018169 + 0.010372 - 1 = sigma_I + 0.028541 - 1
# However, because of the asymmetry in smoothing (the yield function is obtained
# by first smoothing sigma_I-ts and sigma_II-ts, and then by smoothing this
# result with sigma_III-ts) the result is sigma_I = sigma_II &gt; sigma_III


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.1
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9972a66d-5aa2-4ece-84be-29104f726d03"><div class="modal-content"><h4>test/tests/mesh/nemesis/nemesis_repartitioning_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  file = cylinder/cylinder.e
  nemesis = true
  # leaving skip_partitioning off lets us exodiff against a gold
  # standard generated with default libMesh settings
  # skip_partitioning = true
[]

[Variables]
  [u]
    order = FIRST
    family = LAGRANGE
  []
[]

[AuxVariables]
  [pid]
    family = MONOMIAL
    order = CONSTANT
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[AuxKernels]
  [pid_aux]
    type = ProcessorIDAux
    variable = pid
    execute_on = &#x27;INITIAL&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 0
  []

  [right]
    type = DirichletBC
    variable = u
    boundary = 2
    value = 1
  []
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
  nl_rel_tol = 1e-6
  [Adaptivity]
    steps = 1
    refine_fraction = 0.1
    coarsen_fraction = 0.1
    max_h_level = 2
  []
[]

[Postprocessors]
  [sum_sides]
    type = StatVector
    stat = sum
    object = nl_wb_element
    vector = num_partition_sides
  []
  [min_elems]
    type = StatVector
    stat = min
    object = nl_wb_element
    vector = num_elems
  []
  [max_elems]
    type = StatVector
    stat = max
    object = nl_wb_element
    vector = num_elems
  []
[]

[VectorPostprocessors]
  [nl_wb_element]
    type = WorkBalance
    execute_on = initial
    system = nl
    balances = &#x27;num_elems num_partition_sides&#x27;
    outputs = none
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="36f46448-933e-41ed-b483-a41a956ce3f8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard4.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x direction, and smaller stretches along the y and z directions,
# so that sigma_II = sigma_III,
# which means that lode angle = -30deg.
# Both return to the edge (at lode_angle=-30deg, ie 000101) and tip are experienced.
#
# It is checked that the yield functions are less than their tolerance values
# It is checked that the cohesion hardens correctly

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.05E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.05E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if((a&lt;1E-5)&amp;(b&lt;1E-5)&amp;(c&lt;1E-5)&amp;(d&lt;1E-5)&amp;(g&lt;1E-5)&amp;(h&lt;1E-5),0,abs(a)+abs(b)+abs(c)+abs(d)+abs(g)+abs(h))&#x27;
    vars = &#x27;a b c d g h&#x27;
    vals = &#x27;f0 f1 f2 f3 f4 f5&#x27;
  [../]
  [./coh_analytic]
    type = ParsedFunction
    value = &#x27;20-10*exp(-1E5*intnl)&#x27;
    vars = intnl
    vals = internal
  [../]
  [./coh_from_yieldfcns]
    type = ParsedFunction
    value = &#x27;(f0+f1-(sxx+syy)*sin(phi))/(-2)/cos(phi)&#x27;
    vars = &#x27;f0 f1 sxx syy phi&#x27;
    vals = &#x27;f0 f1 s_xx s_yy 0.8726646&#x27;
  [../]
  [./should_be_zero_coh]
    type = ParsedFunction
    value = &#x27;if(abs(a-b)&lt;1E-6,0,1E6*abs(a-b))&#x27;
    vars = &#x27;a b&#x27;
    vals = &#x27;Coh_analytic Coh_moose&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn5]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn0]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn0
  [../]
  [./yield_fcn1]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = yield_fcn1
  [../]
  [./yield_fcn2]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = yield_fcn2
  [../]
  [./yield_fcn3]
    type = MaterialStdVectorAux
    index = 3
    property = plastic_yield_function
    variable = yield_fcn3
  [../]
  [./yield_fcn4]
    type = MaterialStdVectorAux
    index = 4
    property = plastic_yield_function
    variable = yield_fcn4
  [../]
  [./yield_fcn5]
    type = MaterialStdVectorAux
    index = 5
    property = plastic_yield_function
    variable = yield_fcn5
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn3
  [../]
  [./f4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn4
  [../]
  [./f5]
   type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn5
  [../]
  [./yfcns_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./Coh_analytic]
    type = FunctionValuePostprocessor
    function = coh_analytic
  [../]
  [./Coh_moose]
    type = FunctionValuePostprocessor
    function = coh_from_yieldfcns
  [../]
  [./cohesion_difference_should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_coh
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 20
    rate = 1E5
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.8726646
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 1 #0.8726646 # 50deg
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    use_custom_returnMap = true
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
  [../]
[]


[Executioner]
  end_time = 10
  dt = 2
  type = Transient
[]


[Outputs]
  file_base = planar_hard4
  exodus = false
  [./csv]
    type = CSV
    hide = &#x27;f0 f1 f2 f3 f4 f5 s_xy s_xz s_yz Coh_analytic Coh_moose&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ab286ce3-fe46-4985-b0fd-49dd94c9df7a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_outer_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 4
    mc_interpolation_scheme = outer_tip
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_outer_tip
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f2e99cc9-ba04-4480-adb4-bc539b303284"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav02a.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established in the transient situation when 0&lt;saturation&lt;1 (note the strictly less-than).
# 2phase (PP), 2components, vanGenuchten, constant fluid bulk-moduli for each phase, constant viscosity, constant permeability, Corey relative perm
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./ppwater]
    initial_condition = -1.0
  [../]
  [./ppgas]
    initial_condition = 0
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]


[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = ppgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]


[Functions]
  [./ana_ppwater]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 pp_water_top 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
  [./ana_ppgas]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1 pp_gas_top 0.1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.1
      viscosity = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[Postprocessors]
  [./pp_water_top]
    type = PointValue
    variable = ppwater
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_water_base]
    type = PointValue
    variable = ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_water_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_gas_top]
    type = PointValue
    variable = ppgas
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_gas_base]
    type = PointValue
    variable = ppgas
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_gas_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppgas
    point = &#x27;-1 0 0&#x27;
  [../]
  [./mass_ph0]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./mass_ph1]
    type = PorousFlowFluidMass
    fluid_component = 1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.1
  end_time = 1.0
  nl_rel_tol = 1E-10
  nl_abs_tol = 1E-12
[]

[Outputs]
  [./csv]
    type = CSV
    file_base = grav02a
    execute_on = &#x27;initial final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="247a5fad-b6c9-4fcd-9489-92cd112479d5"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig6.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 6 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Three phase interface simulation demonstrating the interfacial stability
# w.r.t. formation of a tspurious third phase
#

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 120
  ny = 120
  nz = 0
  xmin = 0
  xmax = 40
  ymin = 0
  ymax = 40
  zmin = 0
  zmax = 0
  elem_type = QUAD4
[]

[Variables]
  # concentration
  [./c]
  [../]

  # order parameter 1
  [./eta1]
  [../]

  # order parameter 2
  [./eta2]
  [../]

  # order parameter 3
  [./eta3]
  [../]

  # phase concentration 1
  [./c1]
    initial_condition = 0.4
  [../]

  # phase concentration 2
  [./c2]
    initial_condition = 0.5
  [../]

  # phase concentration 3
  [./c3]
    initial_condition = 0.8
  [../]

  # Lagrange multiplier
  [./lambda]
    initial_condition = 0.0
  [../]
[]

[AuxVariables]
  [./T]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;x-10&#x27;
    [../]
  [../]
[]


[Functions]
  [./ic_func_eta1]
    type = ParsedFunction
    value = &#x27;0.5*(1.0+tanh((x-10)/sqrt(2.0))) * 0.5*(1.0+tanh((y-10)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_eta2]
    type = ParsedFunction
    value = &#x27;0.5*(1.0-tanh((x-10)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_eta3]
    type = ParsedFunction
    value = &#x27;1 - 0.5*(1.0-tanh((x-10)/sqrt(2.0)))
              - 0.5*(1.0+tanh((x-10)/sqrt(2.0))) * 0.5*(1.0+tanh((y-10)/sqrt(2.0)))&#x27;
  [../]
  [./ic_func_c]
    type = ParsedFunction
    value = &#x27;0.5 * 0.5*(1.0-tanh((x-10)/sqrt(2.0)))
              + 0.4 * 0.5*(1.0+tanh((x-10)/sqrt(2.0))) * 0.5*(1.0+tanh((y-10)/sqrt(2.0)))
              + 0.8 * (1 - 0.5*(1.0-tanh((x-10)/sqrt(2.0)))
                        - 0.5*(1.0+tanh((x-10)/sqrt(2.0))) * 0.5*(1.0+tanh((y-10)/sqrt(2.0))))&#x27;
  [../]
[]

[ICs]
  [./eta1]
    variable = eta1
    type = FunctionIC
    function = ic_func_eta1
  [../]
  [./eta2]
    variable = eta2
    type = FunctionIC
    function = ic_func_eta2
  [../]
  [./eta3]
    variable = eta3
    type = FunctionIC
    function = ic_func_eta3
  [../]
  [./c]
    variable = c
    type = FunctionIC
    function = ic_func_c
  [../]
[]

[Materials]
  # simple toy free energies
  [./f1]
    type = DerivativeParsedMaterial
    f_name = F1
    args = &#x27;c1&#x27;
    function = &#x27;20*(c1-0.4)^2&#x27;
  [../]
  [./f2]
    type = DerivativeParsedMaterial
    f_name = F2
    args = &#x27;c2 T&#x27;
    function = &#x27;20*(c2-0.5)^2 + 0.01*T&#x27;
  [../]
  [./f3]
    type = DerivativeParsedMaterial
    f_name = F3
    args = &#x27;c3&#x27;
    function = &#x27;20*(c3-0.8)^2&#x27;
  [../]

  # Switching functions for each phase
  # h1(eta1, eta2, eta3)
  [./h1]
    type = SwitchingFunction3PhaseMaterial
    eta_i = eta1
    eta_j = eta2
    eta_k = eta3
    f_name = h1
  [../]
  # h2(eta1, eta2, eta3)
  [./h2]
    type = SwitchingFunction3PhaseMaterial
    eta_i = eta2
    eta_j = eta3
    eta_k = eta1
    f_name = h2
  [../]
  # h3(eta1, eta2, eta3)
  [./h3]
    type = SwitchingFunction3PhaseMaterial
    eta_i = eta3
    eta_j = eta1
    eta_k = eta2
    f_name = h3
  [../]

  # Coefficients for diffusion equation
  [./Dh1]
    type = DerivativeParsedMaterial
    material_property_names = &#x27;D h1&#x27;
    function = D*h1
    f_name = Dh1
  [../]
  [./Dh2]
    type = DerivativeParsedMaterial
    material_property_names = &#x27;D h2&#x27;
    function = D*h2
    f_name = Dh2
  [../]
  [./Dh3]
    type = DerivativeParsedMaterial
    material_property_names = &#x27;D h3&#x27;
    function = D*h3
    f_name = Dh3
  [../]

  # Barrier functions for each phase
  [./g1]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta1
    function_name = g1
  [../]
  [./g2]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta2
    function_name = g2
  [../]
  [./g3]
    type = BarrierFunctionMaterial
    g_order = SIMPLE
    eta = eta3
    function_name = g3
  [../]

  # constant properties
  [./constants]
    type = GenericConstantMaterial
    prop_names  = &#x27;L   kappa  D&#x27;
    prop_values = &#x27;1.0 1.0    1&#x27;
  [../]
[]

[Kernels]
  #Kernels for diffusion equation
  [./diff_time]
    type = TimeDerivative
    variable = c
  [../]
  [./diff_c1]
    type = MatDiffusion
    variable = c
    diffusivity = Dh1
    v = c1
  [../]
  [./diff_c2]
    type = MatDiffusion
    variable = c
    diffusivity = Dh2
    v = c2
  [../]
  [./diff_c3]
    type = MatDiffusion
    variable = c
    diffusivity = Dh3
    v = c3
  [../]

  # Kernels for Allen-Cahn equation for eta1
  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./ACBulkF1]
    type = KKSMultiACBulkF
    variable  = eta1
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    gi_name   = g1
    eta_i     = eta1
    wi        = 1.0
    args      = &#x27;c1 c2 c3 eta2 eta3&#x27;
  [../]
  [./ACBulkC1]
    type = KKSMultiACBulkC
    variable  = eta1
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    cj_names  = &#x27;c1 c2 c3&#x27;
    eta_i     = eta1
    args      = &#x27;eta2 eta3&#x27;
  [../]
  [./ACInterface1]
    type = ACInterface
    variable = eta1
    kappa_name = kappa
  [../]
  [./multipler1]
    type = MatReaction
    variable = eta1
    v = lambda
    mob_name = L
  [../]

  # Kernels for Allen-Cahn equation for eta2
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
  [./ACBulkF2]
    type = KKSMultiACBulkF
    variable  = eta2
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    gi_name   = g2
    eta_i     = eta2
    wi        = 1.0
    args      = &#x27;c1 c2 c3 eta1 eta3&#x27;
  [../]
  [./ACBulkC2]
    type = KKSMultiACBulkC
    variable  = eta2
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    cj_names  = &#x27;c1 c2 c3&#x27;
    eta_i     = eta2
    args      = &#x27;eta1 eta3&#x27;
  [../]
  [./ACInterface2]
    type = ACInterface
    variable = eta2
    kappa_name = kappa
  [../]
  [./multipler2]
    type = MatReaction
    variable = eta2
    v = lambda
    mob_name = L
  [../]

  # Kernels for the Lagrange multiplier equation
  [./mult_lambda]
    type = MatReaction
    variable = lambda
    mob_name = 3
  [../]
  [./mult_ACBulkF_1]
    type = KKSMultiACBulkF
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    gi_name   = g1
    eta_i     = eta1
    wi        = 1.0
    mob_name  = 1
    args      = &#x27;c1 c2 c3 eta2 eta3&#x27;
  [../]
  [./mult_ACBulkC_1]
    type = KKSMultiACBulkC
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    cj_names  = &#x27;c1 c2 c3&#x27;
    eta_i     = eta1
    args      = &#x27;eta2 eta3&#x27;
    mob_name  = 1
  [../]
  [./mult_CoupledACint_1]
    type = SimpleCoupledACInterface
    variable = lambda
    v = eta1
    kappa_name = kappa
    mob_name = 1
  [../]
  [./mult_ACBulkF_2]
    type = KKSMultiACBulkF
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    gi_name   = g2
    eta_i     = eta2
    wi        = 1.0
    mob_name  = 1
    args      = &#x27;c1 c2 c3 eta1 eta3&#x27;
  [../]
  [./mult_ACBulkC_2]
    type = KKSMultiACBulkC
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    cj_names  = &#x27;c1 c2 c3&#x27;
    eta_i     = eta2
    args      = &#x27;eta1 eta3&#x27;
    mob_name  = 1
  [../]
  [./mult_CoupledACint_2]
    type = SimpleCoupledACInterface
    variable = lambda
    v = eta2
    kappa_name = kappa
    mob_name = 1
  [../]
  [./mult_ACBulkF_3]
    type = KKSMultiACBulkF
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    gi_name   = g3
    eta_i     = eta3
    wi        = 1.0
    mob_name  = 1
    args      = &#x27;c1 c2 c3 eta1 eta2&#x27;
  [../]
  [./mult_ACBulkC_3]
    type = KKSMultiACBulkC
    variable  = lambda
    Fj_names  = &#x27;F1 F2 F3&#x27;
    hj_names  = &#x27;h1 h2 h3&#x27;
    cj_names  = &#x27;c1 c2 c3&#x27;
    eta_i     = eta3
    args      = &#x27;eta1 eta2&#x27;
    mob_name  = 1
  [../]
  [./mult_CoupledACint_3]
    type = SimpleCoupledACInterface
    variable = lambda
    v = eta3
    kappa_name = kappa
    mob_name = 1
  [../]

  # Kernels for constraint equation eta1 + eta2 + eta3 = 1
  # eta3 is the nonlinear variable for the constraint equation
  [./eta3reaction]
    type = MatReaction
    variable = eta3
    mob_name = 1
  [../]
  [./eta1reaction]
    type = MatReaction
    variable = eta3
    v = eta1
    mob_name = 1
  [../]
  [./eta2reaction]
    type = MatReaction
    variable = eta3
    v = eta2
    mob_name = 1
  [../]
  [./one]
    type = BodyForce
    variable = eta3
    value = -1.0
  [../]

  # Phase concentration constraints
  [./chempot12]
    type = KKSPhaseChemicalPotential
    variable = c1
    cb       = c2
    fa_name  = F1
    fb_name  = F2
  [../]
  [./chempot23]
    type = KKSPhaseChemicalPotential
    variable = c2
    cb       = c3
    fa_name  = F2
    fb_name  = F3
  [../]
  [./phaseconcentration]
    type = KKSMultiPhaseConcentration
    variable = c3
    cj = &#x27;c1 c2 c3&#x27;
    hj_names = &#x27;h1 h2 h3&#x27;
    etas = &#x27;eta1 eta2 eta3&#x27;
    c = c
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type   -sub_pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;asm       ilu            nonzero&#x27;
  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-10
  nl_abs_tol = 1.0e-11

  num_steps = 1000
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 0.2
    optimal_iterations = 10
    iteration_window = 2
  [../]
[]

[Preconditioning]
  active = &#x27;full&#x27;
  [./full]
    type = SMP
    full = true
  [../]
  [./mydebug]
    type = FDP
    full = true
  [../]
[]

[Outputs]
  exodus = true
  checkpoint = true
  print_linear_residuals = false
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]

#[VectorPostprocessors]
#  [./c]
#    type =  LineValueSampler
#    start_point = &#x27;-25 0 0&#x27;
#    end_point = &#x27;25 0 0&#x27;
#    variable = c
#    num_points = 151
#    sort_by =  id
#    execute_on = timestep_end
#  [../]
#  [./eta1]
#    type =  LineValueSampler
#    start_point = &#x27;-25 0 0&#x27;
#    end_point = &#x27;25 0 0&#x27;
#    variable = eta1
#    num_points = 151
#    sort_by =  id
#    execute_on = timestep_end
#  [../]
#  [./eta2]
#    type =  LineValueSampler
#    start_point = &#x27;-25 0 0&#x27;
#    end_point = &#x27;25 0 0&#x27;
#    variable = eta2
#    num_points = 151
#    sort_by =  id
#    execute_on = timestep_end
#  [../]
#  [./eta3]
#    type =  LineValueSampler
#    start_point = &#x27;-25 0 0&#x27;
#    end_point = &#x27;25 0 0&#x27;
#    variable = eta3
#    num_points = 151
#    sort_by =  id
#    execute_on = timestep_end
#  [../]
#[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ff932172-f173-4247-972c-816551ca3380"><div class="modal-content"><h4>modules/navier_stokes/test/tests/scalar_adr/supg/advection_error_testing.i</h4><pre class="moose-pre"><code class="language-text">velocity=1

[GlobalParams]
  u = ${velocity}
  p = 0
  tau_type = mod
[]

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 4
  xmax = 1
  elem_type = EDGE2
[]

[Variables]
  [./c]
    family = LAGRANGE
    order = FIRST
  [../]
[]

[Kernels]
  [./adv]
    type = Advection
    variable = c
    forcing_func = &#x27;ffn&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = c
    boundary = left
    value = 0
  [../]
[]

[Materials]
  [./mat]
    type = GenericConstantMaterial
    prop_names = &#x27;mu rho&#x27;
    prop_values = &#x27;0 1&#x27;
  [../]
[]

[Functions]
  [./ffn]
    type = ParsedFunction
    value = &#x27;1-x^2&#x27;
  [../]
  [./c_func]
    type = ParsedFunction
    value = &#x27;x-x^3/3&#x27;
  [../]
[]

[Executioner]
  type = Steady
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu NONZERO&#x27;
[]

[Outputs]
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2c]
    type = ElementL2Error
    variable = c
    function = c_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2cx]
    type = ElementL2Error
    variable = cx
    function = ffn
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./cx]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./cx]
    type = VariableGradientComponent
    component = x
    variable = cx
    gradient_variable = c
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="43a698ae-895d-4a3e-947b-90c693d0ccd8"><div class="modal-content"><h4>modules/porous_flow/test/tests/newton_cooling/nc08.i</h4><pre class="moose-pre"><code class="language-text"># Newton cooling from a bar.  1-phase ideal fluid and heat, steady
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 100
  ny = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pressure temp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./pressure]
  [../]
  [./temp]
  [../]
[]

[ICs]
  # have to start these reasonably close to their steady-state values
  [./pressure]
    type = FunctionIC
    variable = pressure
    function = &#x27;200-0.5*x&#x27;
  [../]
  [./temperature]
    type = FunctionIC
    variable = temp
    function = 180+0.1*x
  [../]
[]

[Kernels]
  [./flux]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = pressure
  [../]
  [./heat_advection]
    type = PorousFlowHeatAdvection
    gravity = &#x27;0 0 0&#x27;
    variable = temp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./idealgas]
      type = IdealGasFluidProperties
      molar_mass = 1.4
      gamma = 1.2
      mu = 1.2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./dens0]
    type = PorousFlowSingleComponentFluid
    fp = idealgas
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 1.1 0 0 0 1.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey # irrelevant in this fully-saturated situation
    n = 2
    phase = 0
  [../]
[]

[BCs]
  [./leftp]
    type = DirichletBC
    variable = pressure
    boundary = left
    value = 200
  [../]
  [./leftt]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 180
  [../]
  [./newtonp]
    type = PorousFlowPiecewiseLinearSink
    variable = pressure
    boundary = right
    pt_vals = &#x27;-200 0 200&#x27;
    multipliers = &#x27;-200 0 200&#x27;
    use_mobility = true
    use_relperm = true
    fluid_phase = 0
    flux_function = 0.005 # 1/2/L
  [../]
  [./newtont]
    type = PorousFlowPiecewiseLinearSink
    variable = temp
    boundary = right
    pt_vals = &#x27;-200 0 200&#x27;
    multipliers = &#x27;-200 0 200&#x27;
    use_mobility = true
    use_relperm = true
    use_enthalpy = true
    fluid_phase = 0
    flux_function = 0.005 # 1/2/L
  [../]
[]

[VectorPostprocessors]
  [./porepressure]
    type = LineValueSampler
    variable = pressure
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 11
    execute_on = timestep_end
  [../]
  [./temperature]
    type = LineValueSampler
    variable = temp
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 11
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
  nl_rel_tol = 1E-10
  nl_abs_tol = 1E-15
[]

[Outputs]
  file_base = nc08
  execute_on = timestep_end
  exodus = true
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = timestep_end
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="81b8efa1-29fc-4a71-acdc-1114d6b58744"><div class="modal-content"><h4>modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePSVG2.i</h4><pre class="moose-pre"><code class="language-text"># Pressure pulse in 1D with 2 phases, 2components - transient

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 2e6
  [../]
  [./sgas]
    initial_condition = 0.3
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
  [./ppgas]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    variable = ppwater
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = sgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    variable = sgas
    fluid_component = 1
  [../]
[]

[AuxKernels]
  [./ppgas]
    type = PorousFlowPropertyAux
    property = pressure
    phase = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e-4
    sat_lr = 0.3
    pc_max = 1e9
    log_extension = true
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 1e-5
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-15 0 0 0 1e-15 0 0 0 1e-15&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[BCs]
  [./leftwater]
    type = DirichletBC
    boundary = left
    value = 3e6
    variable = ppwater
  [../]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 2e6
    variable = ppwater
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-20 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1e3
  end_time = 1e4
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    sort_by = x
    variable = &#x27;ppwater ppgas&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    num_points = 11
  [../]
[]

[Outputs]
  file_base = pressure_pulse_1d_2phasePSVG2
  print_linear_residuals = false
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="83875a57-47f7-4534-91a4-6644e375ea2b"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/stagnation/stagnation.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
[]

[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 2.0
  ymin = 0
  ymax = 2.0
  nx = 20
  ny = 20
  elem_type = QUAD9
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    solve_type = Newton
  [../]
[]

[Executioner]
  type = Transient
  dt = 1.0
  dtmin = 1.e-6
  num_steps = 5
  l_max_its = 100
  nl_max_its = 10
  nl_rel_tol = 1.e-9

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -sub_pc_factor_levels&#x27;
  petsc_options_value = &#x27;asm      2               ilu          4&#x27;
[]

[Variables]
  [./vel_x]
    family = LAGRANGE
    order = SECOND
  [../]
  [./vel_y]
    family = LAGRANGE
    order = SECOND
  [../]
  [./p]
    family = LAGRANGE
    order = FIRST
  [../]
[]

[BCs]
  [./u_in]
    type = FunctionDirichletBC
    boundary = &#x27;top&#x27;
    variable = vel_x
    function = vel_x_inlet
  [../]
  [./v_in]
    type = FunctionDirichletBC
    boundary = &#x27;top&#x27;
    variable = vel_y
    function = vel_y_inlet
  [../]
  [./vel_x_no_slip]
    type = DirichletBC
    boundary = &#x27;left bottom&#x27;
    variable = vel_x
    value = 0
  [../]
  [./vel_y_no_slip]
    type = DirichletBC
    boundary = &#x27;bottom&#x27;
    variable = vel_y
    value = 0
  [../]
  # Note: setting INSMomentumNoBCBC on the outlet boundary causes the
  # matrix to be singular.  The natural BC, on the other hand, is
  # sufficient to specify the value of the pressure without requiring
  # a pressure pin.
[]

[Functions]
  [./vel_x_inlet]
    type = ParsedFunction
    value = &#x27;k*x&#x27;
    vars = &#x27;k&#x27;
    vals = &#x27;1&#x27;
  [../]
  [./vel_y_inlet]
    type = ParsedFunction
    value = &#x27;-k*y&#x27;
    vars = &#x27;k&#x27;
    vals = &#x27;1&#x27;
  [../]
[]


[Kernels]
  [./x_momentum_time]
    type = INSMomentumTimeDerivative
    variable = vel_x
  [../]
  [./y_momentum_time]
    type = INSMomentumTimeDerivative
    variable = vel_y
  [../]
  [./mass]
    type = INSMass
    variable = p
    u = vel_x
    v = vel_y
    p = p
  [../]
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    u = vel_x
    v = vel_y
    p = p
    component = 0
  [../]
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    u = vel_x
    v = vel_y
    p = p
    component = 1
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;1 .01389&#x27; # 2/144
  [../]
[]

[Outputs]
  exodus = true
  [./out]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]

[VectorPostprocessors]
  [./nodal_sample]
    # Pick off the wall pressure values.
    type = NodalValueSampler
    variable = p
    boundary = &#x27;bottom&#x27;
    sort_by = x
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c67a770b-e4ab-41d4-8080-955cdf071f4b"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/undrained_oedometer.i</h4><pre class="moose-pre"><code class="language-text"># An undrained oedometer test on a saturated poroelastic sample.
#
# The sample is a single unit element, with roller BCs on the sides
# and bottom.  A constant displacement is applied to the top: disp_z = -0.01*t.
# There is no fluid flow.
#
# Under these conditions
# porepressure = -(Biot coefficient)*(Biot modulus)*disp_z/L
# stress_xx = (bulk - 2*shear/3)*disp_z/L (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*disp_z/L (remember this is effective stress)
# where L is the height of the sample (L=1 in this test)
#
# Parameters:
# Biot coefficient = 0.3
# Porosity = 0.1
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 1/0.3 = 3.333333
# 1/Biot modulus = (1 - 0.3)*(0.3 - 0.1)/2 + 0.1*0.3 = 0.1. BiotModulus = 10
#
# Desired output:
# zdisp = -0.01*t
# p0 = 0.03*t
# stress_xx = stress_yy = -0.01*t
# stress_zz = -0.04*t

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = front
  [../]
[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.3
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]

[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = undrained_oedometer
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="53f2f97e-11f4-46be-8a7c-452a6cf6b729"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/load_store/evaluate.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Surrogates/poly_chaos]
    type = PolynomialChaos
    filename = &#x27;train_out_poly_chaos.rd&#x27;
[]

[VectorPostprocessors/pc_moments]
    type = PolynomialChaosStatistics
    pc_name = poly_chaos
    compute = &#x27;mean stddev skewness kurtosis&#x27;
    execute_on = final
[]

[Outputs/out]
    type = CSV
    execute_on = FINAL
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f3c018d8-747b-4087-aa64-067875616e53"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_3/ring3_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring3_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;
  petsc_options = &#x27;-mat_superlu_dist_iterrefine -mat_superlu_dist_replacetinypivot&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2584bf58-2881-47a6-8d96-626ec5d91854"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard1.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretches in x, y and z directions.
# let mc_cohesion = 10, mc_cohesion_residual = 2, mc_cohesion_rate =
# With cohesion = C, friction_angle = 60deg, tip_smoother = 4, the
# algorithm should return to
# sigma_m = (C*Cos(60) - 4)/Sin(60)
# This allows checking of the relationship for C

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 2
    rate = 1E4
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 1 2 1 10 3 2 3 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1E-4
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-8
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3a18d76e-5791-4eff-bf9c-e0bcac327878"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_4/ring4_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring4_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="de081a09-999e-4146-bf2d-6375d92c0ecb"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f6a7e3ef-69c6-44d0-b90a-c33345812326"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_advection/heat_advection_1d_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, heat advecting with a moving fluid
# Using the FullySaturated Kernel
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 50
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./temp]
    initial_condition = 200
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = &#x27;1-x&#x27;
  [../]
[]

[BCs]
  [./pp0]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1
  [../]
  [./pp1]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
  [./spit_heat]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 300
  [../]
  [./suck_heat]
    type = DirichletBC
    variable = temp
    boundary = right
    value = 200
  [../]
[]

[Kernels]
  [./mass_dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./advection]
    type = PorousFlowFullySaturatedDarcyBase
    variable = pp
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./convection]
    type = PorousFlowFullySaturatedHeatAdvection
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 100
      density0 = 1000
      viscosity = 4.4
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.0
    density = 125
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./PS]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.01
  end_time = 0.6
[]

[VectorPostprocessors]
  [./T]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 51
    sort_by = x
    variable = temp
  [../]
[]

[Outputs]
  file_base = heat_advection_1d_fully_saturated
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.6&#x27;
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2a3a406f-adcd-48a5-9ea4-15a2749a55b2"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_3/plane3_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane3_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;asm&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6575bd5f-bb48-4a27-93e7-d31d7ec224bf"><div class="modal-content"><h4>test/tests/outputs/csv/csv_no_time.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = replicated
[]

[Variables]
  [./u]
  [../]
[]

[AuxVariables]
  [./aux0]
    order = SECOND
    family = SCALAR
  [../]
  [./aux1]
    family = SCALAR
    initial_condition = 5
  [../]
  [./aux2]
    family = SCALAR
    initial_condition = 10
  [../]
  [./aux_sum]
    family = SCALAR
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[AuxScalarKernels]
  [./sum_nodal_aux]
    type = SumNodalValuesAux
    variable = aux_sum
    sum_var = u
    nodes = &#x27;1 2 3 4 5&#x27;
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./mid_point]
    type = PointValue
    variable = u
    point = &#x27;0.5 0.5 0&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  verbose = true
[]

[Outputs]
  [./out]
    type = CSV
    time_column = false
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="091ca73e-acb6-4c24-b3df-55810f83d76e"><div class="modal-content"><h4>modules/porous_flow/test/tests/dispersion/diff01.i</h4><pre class="moose-pre"><code class="language-text"># Test diffusive part of PorousFlowDispersiveFlux kernel by setting dispersion
# coefficients to zero. Pressure is held constant over the mesh, and gravity is
# set to zero so that no advective transport of mass takes place.
# Mass fraction is set to 1 on the left hand side and 0 on the right hand side.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmax = 10
  bias_x = 1.1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[AuxVariables]
  [./velocity]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./velocity]
    type = PorousFlowDarcyVelocityComponent
    variable = velocity
    component = x
  [../]
[]

[ICs]
  [./pp]
    type = ConstantIC
    variable = pp
    value = 1e5
  [../]
  [./massfrac0]
    type = ConstantIC
    variable = massfrac0
    value = 0
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    value = 1
    variable = massfrac0
    boundary = left
  [../]
  [./right]
    type = DirichletBC
    value = 0
    variable = massfrac0
    boundary = right
  [../]
  [./pright]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 1e5
  [../]
  [./pleft]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1e5
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    disp_trans = 0
    disp_long = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = massfrac0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = massfrac0
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = massfrac0
    disp_trans = 0
    disp_long = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp massfrac0&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e7
      density0 = 1000
      viscosity = 0.001
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = massfrac0
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.3
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1 1&#x27;
    tortuosity = 0.1
  [../]
  [./relp]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-9 0 0 0 1e-9 0 0 0 1e-9&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 20
[]

[VectorPostprocessors]
  [./xmass]
    type = NodalValueSampler
    sort_by = id
    variable = massfrac0
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c70b7046-ed4d-4cc7-a1c1-1dca6574bde4"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface21.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.0E-6m in y direction and 2.0E-6 in z direction.
# trial stress_yy = 2.0 and stress_zz = 2.0
#
# Then all yield functions will activate
# However, there is linear dependence.  SimpleTester1 or SimpleTester0 will be rutned off (they are equi-distant).
# The algorithm will return to one corner point, but there will be negative plastic multipliers
# so the other SimpleTester0 or SimpleTester1 will turn off, and the algorithm will return to
# stress_yy=0.75 and stress_zz=0.75
# internal2=1.25


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface21
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="94298aec-526e-4fd9-8afb-2444e202cf17"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard_cubic.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretches in x, y and z directions.
# let cohesion = 10, cohesion_residual = 2, cohesion_limit = 0.0003
# With cohesion = C, friction_angle = 60deg, tip_smoother = 4, the
# algorithm should return to
# sigma_m = (C*Cos(60) - 4)/Sin(60)
# This allows checking of the relationship for C

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 10
    value_residual = 2
    internal_limit = 0.0003
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 1 2 1 10 3 2 3 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1E-4
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-8
  [../]
[]


[Executioner]
  end_time = 10
  dt = 0.25
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard_cubic
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9b182416-b051-45b4-9a65-680e4cdedbc7"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_1/ring1_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring1_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d333b371-a28e-48e6-808b-1a8a6df3d283"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/except1.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 1E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 1E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = z_disp
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialRealAux
    property = weak_plane_tensile_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = -1.0
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a2f9a45a-48c7-4dc3-a690-e958fe1a5a54"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform1_uo.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretch in x, y and z directions.
# With cohesion = 10, friction_angle = 60deg, tip_smoother = 4, the
# algorithm should return to
# sigma_m = (10*Cos(60) - 4)/Sin(60) = 1.1547

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1_uo
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ddb4cec1-61ef-4a7d-be16-657a72d27a53"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/mandel_constM.i</h4><pre class="moose-pre"><code class="language-text"># Mandel&#x27;s problem of consolodation of a drained medium
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]

[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityHMBiotModulus
    porosity_zero = 0.1
    biot_coefficient = 0.6
    solid_bulk = 1
    constant_fluid_bulk_modulus = 8
    constant_biot_modulus = 4.7058823529
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel_constM
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4018ac90-4452-44fc-84ed-fd6bfdd43f04"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard3.i</h4><pre class="moose-pre"><code class="language-text"># Checking evolution tensile strength
# A single element is stretched by 1E-6*t in z direction, and
# the yield-surface evolution is mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 0
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 0
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = 1E-6*t
  [../]
[]

[AuxVariables]
  [./wpt_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./wpt_internal]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wpt_internal
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./wpt_internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wpt_internal
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 4
    rate = 1E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-11
  [../]
[]


[Executioner]
  end_time = 4
  dt = 0.5
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4a183883-2402-4319-96be-c5a09244df30"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform3.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 50
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.8726646 # 50deg
    rate = 3000.0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-8
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 30
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6df1d637-0a56-4322-a3aa-16b926242da8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform3.i</h4><pre class="moose-pre"><code class="language-text"># apply a number of &quot;random&quot; configurations and
# check that the algorithm returns to the yield surface
#
# must be careful here - we cannot put in arbitrary values of C_ijkl, otherwise the condition
# df/dsigma * C * flow_dirn &lt; 0 for some stresses
# The important features that must be obeyed are:
# 0 = C_0222 = C_1222  (holds for transversely isotropic, for instance)
# C_0212 &lt; C_0202 = C_1212 (holds for transversely isotropic)
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  # the following are &quot;random&quot; deformations
  # each is O(1E-5) to keep deformations small
  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;(sin(0.1*t)+x)/1E5&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;(cos(t)+x*y)/1E5&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;sin(0.4321*t)*x*y*z/1E5&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.5773503
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.08748866
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 100
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    # the following is transversely isotropic, i think.
    fill_method = symmetric9
    C_ijkl = &#x27;3E9 1E9 3E9 3E9 3E9 6E9 1E9 1E9 9E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    max_NR_iterations = 100
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E4
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0887e126-870b-465d-bedd-0f3c5309fbd6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface07.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.5E-6m in y direction and 0.8E-6 in z direction.
# trial stress_yy = 1.5 and stress_zz = 0.8
#
# Then SimpleTester1 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=1.0, stress_zz=0.5
# internal1 should be 0.2, and internal2 should be 0.3

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.8E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface07
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="aa2fb361-13fe-43a5-b9db-8d8666344d8f"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_4/cyl4_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl4_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./stress_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./stress_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = cyl4_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = cyl4_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1cead6de-5532-400c-b120-88a0af368920"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s09.i</h4><pre class="moose-pre"><code class="language-text"># Apply a piecewise-linear sink flux to the right-hand side and watch fluid flow to it
#
# This test has a single phase with two components.  The test initialises with
# the porous material fully filled with component=1.  The left-hand side is fixed
# at porepressure=1 and mass-fraction of the zeroth component being unity.
# The right-hand side has a very strong piecewise-linear flux that keeps the
# porepressure~0 at that side.  Fluid mass is extracted by this flux in proportion
# to the fluid component mass fraction.
#
# Therefore, the zeroth fluid component will flow from left to right (down the
# pressure gradient).
#
# The important DE is
# porosity * dc/dt = (perm / visc) * grad(P) * grad(c)
# which is true for c = mass-fraction, and very large bulk modulus of the fluid.
# For grad(P) constant in time and space (as in this example) this is just the
# advection equation for c, with velocity = perm / visc / porosity.  The parameters
# are chosen to velocity = 1 m/s.
# In the numerical world, and especially with full upwinding, the advection equation
# suffers from diffusion.  In this example, the diffusion is obvious when plotting
# the mass-fraction along the line, but the average velocity of the front is still
# correct at 1 m/s.
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp frac&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Variables]
  [./pp]
  [../]
  [./frac]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = 1-x
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = frac
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = pp
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = frac
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    gravity = &#x27;0 0 0&#x27;
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e10 # need large in order for constant-velocity advection
      density0 = 1 # almost irrelevant, except that the ability of the right BC to keep P fixed at zero is related to density_P0
      thermal_expansion = 0
      viscosity = 11
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = frac
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 1.1 0 0 0 1.1&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2 # irrelevant in this fully-saturated situation
    phase = 0
  [../]
[]


[BCs]
  [./lhs_fixed_a]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    variable = frac
    value = 1
  [../]
  [./lhs_fixed_b]
    type = DirichletBC
    boundary = &#x27;left&#x27;
    variable = pp
    value = 1
  [../]
  [./flux0]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;-100 100&#x27;
    multipliers = &#x27;-1 1&#x27;
    variable = frac # the zeroth comonent
    mass_fraction_component = 0
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1E4
  [../]
  [./flux1]
    type = PorousFlowPiecewiseLinearSink
    boundary = &#x27;right&#x27;
    pt_vals = &#x27;-100 100&#x27;
    multipliers = &#x27;-1 1&#x27;
    variable = pp # comonent 1
    mass_fraction_component = 1
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1E4
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E-2
  end_time = 1
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[VectorPostprocessors]
  [./mf]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 100
    sort_by = x
    variable = frac
  [../]
[]

[Outputs]
  file_base = s09
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
  [../]
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.5 1&#x27;
    sync_only = true
  [../]
  interval = 10
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d79d9703-a664-4942-8319-66dc47fae660"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/multiapps/batch_commandline_control/master_single.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [uniform]
    type = Uniform
    lower_bound = 5
    upper_bound = 10
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 3
    distributions = &#x27;uniform&#x27;
    execute_on = &#x27;PRE_MULTIAPP_SETUP&#x27;
  []
[]

[MultiApps]
  [sub]
    type = SamplerFullSolveMultiApp
    sampler = sample
    input_files = &#x27;sub.i&#x27;
    mode = batch-reset
  []
[]

[Transfers]
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = sample
    to_vector_postprocessor = storage
    from_postprocessor = size
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
  []
[]

[Controls]
  [cmdline]
    type = MultiAppCommandLineControl
    multi_app = sub
    sampler = sample
    param_names = &#x27;Mesh/xmax&#x27;
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d791a72f-3304-47d2-b108-d9c25552b279"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav02d.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established in the transient situation when 0&lt;=saturation&lt;=1 (note the less-than-or-equal-to).
# 2phase (PP), 2components, vanGenuchten, constant fluid bulk-moduli for each phase, constant viscosity, constant permeability, Corey relative perm.
# A boundary condition enforces porepressures at the right boundary
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    x = &#x27;1E-3 1E-2 1E-1 2E-1&#x27;
    y = &#x27;1E-3 1E-2 0.2E-1 1E-1&#x27;
  [../]
[]

[Variables]
  [./ppwater]
    initial_condition = 0
  [../]
  [./ppgas]
    initial_condition = 0.5
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]

[BCs]
  [./ppwater]
    type = DirichletBC
    boundary = right
    variable = ppwater
    value = 0
  [../]
  [./ppgas]
    type = DirichletBC
    boundary = right
    variable = ppgas
    value = 0.5
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = ppgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_ppwater]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 pp_water_top 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.1
      viscosity = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[Postprocessors]
  [./pp_water_top]
    type = PointValue
    variable = ppwater
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_water_base]
    type = PointValue
    variable = ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_water_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./ppwater_00]
    type = PointValue
    variable = ppwater
    point = &#x27;0 0 0&#x27;
  [../]
  [./ppwater_01]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.1 0 0&#x27;
  [../]
  [./ppwater_02]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.2 0 0&#x27;
  [../]
  [./ppwater_03]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.3 0 0&#x27;
  [../]
  [./ppwater_04]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.4 0 0&#x27;
  [../]
  [./ppwater_05]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.5 0 0&#x27;
  [../]
  [./ppwater_06]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.6 0 0&#x27;
  [../]
  [./ppwater_07]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.7 0 0&#x27;
  [../]
  [./ppwater_08]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.8 0 0&#x27;
  [../]
  [./ppwater_09]
    type = PointValue
    variable = ppwater
    point = &#x27;-0.9 0 0&#x27;
  [../]
  [./ppwater_10]
    type = PointValue
    variable = ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./ppgas_00]
    type = PointValue
    variable = ppgas
    point = &#x27;0 0 0&#x27;
  [../]
  [./ppgas_01]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.1 0 0&#x27;
  [../]
  [./ppgas_02]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.2 0 0&#x27;
  [../]
  [./ppgas_03]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.3 0 0&#x27;
  [../]
  [./ppgas_04]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.4 0 0&#x27;
  [../]
  [./ppgas_05]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.5 0 0&#x27;
  [../]
  [./ppgas_06]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.6 0 0&#x27;
  [../]
  [./ppgas_07]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.7 0 0&#x27;
  [../]
  [./ppgas_08]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.8 0 0&#x27;
  [../]
  [./ppgas_09]
    type = PointValue
    variable = ppgas
    point = &#x27;-0.9 0 0&#x27;
  [../]
  [./ppgas_10]
    type = PointValue
    variable = ppgas
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  active = andy
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
  end_time = 1.0
[]

[Outputs]
  [./csv]
    type = CSV
    execute_on = &#x27;initial final&#x27;
    file_base = grav02d
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="24e0f2f1-8708-43ca-9862-dc0bd3afe50b"><div class="modal-content"><h4>test/tests/multiapps/grid-sequencing/vi-coarser.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=20
num_steps=2

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
[]

[AuxVariables]
  [bounds][]
[]

[Bounds]
  [./u_upper_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = upper
    bound_value = ${l}
  [../]
  [./u_lower_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = lower
    bound_value = 0
  [../]
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options = &#x27;-snes_vi_monitor&#x27;
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type -snes_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic                 vinewtonrsls&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  active = &#x27;upper_violations lower_violations&#x27;
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cd8b65cd-1dab-4d16-95df-ed47ed1a0bfb"><div class="modal-content"><h4>modules/porous_flow/test/tests/dirackernels/theis1.i</h4><pre class="moose-pre"><code class="language-text"># Theis problem: Flow to single sink
# SinglePhase
# Cartesian mesh with logarithmic distribution in x and y.

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 20
  ny = 20
  bias_x = 1.1
  bias_y = 1.1
  ymax = 100
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  compute_enthalpy = false
  compute_internal_energy = false
[]

[Variables]
  [./pp]
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = pp
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e-7
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      viscosity = 0.001
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-14 0 0 0 1E-14 0 0 0 1E-14&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0
    phase = 0
  [../]
[]

[Postprocessors]
  [./porepressure]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./total_mass]
    type = PorousFlowFluidMass
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 200
  end_time = 1E3
  nl_abs_tol = 1e-10
[]

[Outputs]
  perf_graph = true
  file_base = theis1
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]

[ICs]
  [./PressureIC]
    variable = pp
    type = ConstantIC
    value = 20e6
  [../]
[]

[DiracKernels]
  [./sink]
    type = PorousFlowSquarePulsePointSource
    end_time = 1000
    point = &#x27;0 0 0&#x27;
    mass_flux = -0.04
    variable = pp
  [../]
[]

[BCs]
  [./right]
    type = DirichletBC
    variable = pp
    value = 20e6
    boundary = right
  [../]
  [./top]
    type = DirichletBC
    variable = pp
    value = 20e6
    boundary = top
  [../]
[]

[VectorPostprocessors]
  [./pressure]
    type = SideValueSampler
    variable = pp
    sort_by = x
    execute_on = timestep_end
    boundary = bottom
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e7a332bf-2ba9-44a8-ad62-06a8b55f581b"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4808bb22-c75e-4e70-b1cc-eced18943642"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/mc_wpt_1.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in x,y and z directions.
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# wpt_tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and its value should be 1pa.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = disp_x
    boundary = front
    value = 0E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = disp_y
    boundary = front
    value = 0E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = disp_z
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 100
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./mc]
    type = FiniteStrainMultiPlasticity
    block = 0
    disp_x = disp_x
    disp_y = disp_y
    disp_z = disp_z
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;mc wpt&#x27;
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = mc_wpt_1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cebd04e6-c40a-4fa3-935a-877fc6aa0f58"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_4/ring4_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring4_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3fa73aee-7c62-4d81-a321-ff5538c0e16e"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_3/plane3_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane3_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 200
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="97d413c5-0ecf-4229-a257-024e2445fae2"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_conduction/two_phase.i</h4><pre class="moose-pre"><code class="language-text"># 2phase heat conduction, with saturation fixed at 0.5
# apply a boundary condition of T=300 to a bar that
# is initially at T=200, and observe the expected
# error-function response
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./phase0_porepressure]
    initial_condition = 0
  [../]
  [./phase1_saturation]
    initial_condition = 0.5
  [../]
  [./temp]
    initial_condition = 200
  [../]
[]

[Kernels]
  [./dummy_p0]
    type = TimeDerivative
    variable = phase0_porepressure
  [../]
  [./dummy_s1]
    type = TimeDerivative
    variable = phase1_saturation
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = PorousFlowHeatConduction
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp phase0_porepressure phase1_saturation&#x27;
    number_fluid_phases = 2
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 1.5
      density0 = 0.4
      thermal_expansion = 0
      cv = 1
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 0.3
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0.3 0 0  0 0 0  0 0 0&#x27;
    wet_thermal_conductivity = &#x27;1.7 0 0  0 0 0  0 0 0&#x27;
    exponent = 1.0
    aqueous_phase_number = 1
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = phase0_porepressure
    phase1_saturation = phase1_saturation
    capillary_pressure = pc
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.8
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.0
    density = 0.25
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    boundary = left
    value = 300
    variable = temp
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1E1
  end_time = 1E2
[]

[Postprocessors]
  [./t000]
    type = PointValue
    variable = temp
    point = &#x27;0 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t010]
    type = PointValue
    variable = temp
    point = &#x27;10 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t020]
    type = PointValue
    variable = temp
    point = &#x27;20 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t030]
    type = PointValue
    variable = temp
    point = &#x27;30 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t040]
    type = PointValue
    variable = temp
    point = &#x27;40 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t050]
    type = PointValue
    variable = temp
    point = &#x27;50 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t060]
    type = PointValue
    variable = temp
    point = &#x27;60 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t070]
    type = PointValue
    variable = temp
    point = &#x27;70 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t080]
    type = PointValue
    variable = temp
    point = &#x27;80 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t090]
    type = PointValue
    variable = temp
    point = &#x27;90 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./t100]
    type = PointValue
    variable = temp
    point = &#x27;100 0 0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Outputs]
  file_base = two_phase
  [./csv]
    type = CSV
  [../]
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="804fc470-5dc0-4ebe-8c50-3cb8bc7e2bf9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform2_native.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 4
    mc_interpolation_scheme = native
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_native
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8f22fe98-99c2-4ed3-8e0e-fd8e7ac7551b"><div class="modal-content"><h4>modules/richards/test/tests/sinks/q2p01.i</h4><pre class="moose-pre"><code class="language-text"># Q2PPiecewiseLinearSink (and the Flux Postprocessor)
# There are three sinks: water with no relperm and density;
# water with relperm and density; gas with relperm and density.
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1
  ny = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
[]



[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 1
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.5
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.0
    n = 2
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.0
    n = 3
  [../]
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = FunctionIC
      function = 1
    [../]
  [../]
  [./sat]
    [./InitialCondition]
      type = FunctionIC
      function = 0.5
    [../]
  [../]
[]

[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_viscosity = 0.8
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 0.5
  diffusivity = 0.0
  output_total_masses_to = &#x27;CSV&#x27;
  save_gas_flux_in_Q2PGasFluxResidual = true
  save_water_flux_in_Q2PWaterFluxResidual = true
  save_gas_Jacobian_in_Q2PGasJacobian = true
  save_water_Jacobian_in_Q2PWaterJacobian = true
[]

[Postprocessors]
  [./left_water_out]
    type = Q2PPiecewiseLinearSinkFlux
    boundary = left
    porepressure = pp
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;0 1.5&#x27;
    multiplying_fcn = 0.1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./right_water_out]
    type = Q2PPiecewiseLinearSinkFlux
    boundary = right
    porepressure = pp
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;1 2&#x27;
    fluid_density = DensityWater
    fluid_viscosity = 0.8
    fluid_relperm = RelPermWater
    saturation = sat
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./right_gas_out]
    type = Q2PPiecewiseLinearSinkFlux
    boundary = right
    porepressure = pp
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;1 1&#x27;
    fluid_density = DensityGas
    fluid_viscosity = 0.5
    fluid_relperm = RelPermGas
    saturation = sat
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./sat_left]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = sat
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./sat_right]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = sat
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[BCs]
  [./left_water]
    type = Q2PPiecewiseLinearSink
    boundary = left
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;0 1.5&#x27;
    multiplying_fcn = 0.1
    variable = sat
    other_var = pp
    var_is_porepressure = false
    use_mobility = false
    use_relperm = false
    fluid_density = DensityWater
    fluid_viscosity = 0.8
    fluid_relperm = RelPermWater
  [../]
  [./right_water]
    type = Q2PPiecewiseLinearSink
    boundary = right
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;1 2&#x27;
    variable = sat
    other_var = pp
    var_is_porepressure = false
    use_mobility = true
    use_relperm = true
    fluid_density = DensityWater
    fluid_viscosity = 0.8
    fluid_relperm = RelPermWater
  [../]
  [./right_gas]
    type = Q2PPiecewiseLinearSink
    boundary = right
    pressures = &#x27;0 1&#x27;
    bare_fluxes = &#x27;1 1&#x27;
    variable = pp
    other_var = sat
    var_is_porepressure = true
    use_mobility = true
    use_relperm = true
    fluid_density = DensityGas
    fluid_viscosity = 0.5
    fluid_relperm = RelPermGas
  [../]
[]

[AuxVariables]
  [./one]
    initial_condition = 1
  [../]
[]

[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-2 0 0  0 1E-2 0  0 0 1E-2&#x27;
    gravity = &#x27;0 0 0&#x27;
  [../]
[]


[Preconditioning]
  active = &#x27;andy&#x27;
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.1
  end_time = 0.5
[]

[Outputs]
  file_base = q2p01
  exodus = true
  [./CSV]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3bd2fc90-f559-4c18-9ab9-3a9963ea40ae"><div class="modal-content"><h4>modules/richards/test/tests/uo_egs/seff2.i</h4><pre class="moose-pre"><code class="language-text"># Outputs a 2phase effective saturation relationship into an exodus file
# and into a CSV file.
# In the exodus file, the Seff will be a function of &quot;x&quot;, and
# this &quot;x&quot; is actually the difference in porepressures,
# say P_gas - P_water (so &quot;x&quot; should be positive).
# In the CSV file you will find the Seff at the &quot;x&quot; point
# specified by you below.
#
# You may specify:
#  - the &quot;type&quot; of Seff in the UserObjects block
#  - the parameters of this Seff function in the UserObjects block
#  - the &quot;x&quot; point (which is del_porepressure) that you want to extract
#       the Seff at, if you want a value at a particular point
#  - the range of &quot;x&quot; values (which is porepressure values) may be
#       changed in the Mesh block, below


[UserObjects]
  [./seff]
    type = RichardsSeff2waterVG
    al = 1E-6
    m = 0.8
  [../]
[]

[Postprocessors]
  [./point_val]
    type = PointValue
    execute_on = timestep_begin
    # note this point must lie inside the mesh below
    point = &#x27;1 0 0&#x27;
    variable = seff
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  # the following specify the range of porepressure
  xmin = 0
  xmax = 3E6
[]

############################
# You should not need to change any of the stuff below
############################


[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[ICs]
  [./u_init]
    type = FunctionIC
    variable = u
    function = x
  [../]
  [./v_init]
    type = ConstantIC
    variable = v
    value = 0
  [../]
[]

[AuxVariables]
  [./seff]
  [../]
[]

[AuxKernels]
  [./seff_AuxK]
    type = RichardsSeffAux
    variable = seff
    seff_UO = seff
    execute_on = timestep_begin
    pressure_vars = &#x27;v u&#x27;
  [../]
[]

[Kernels]
  [./dummy_u]
    type = Diffusion
    variable = u
  [../]
  [./dummy_v]
    type = Diffusion
    variable = v
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 0
[]

[Outputs]
  file_base = seff2
  [./csv]
    type = CSV
  [../]
  [./exodus]
    type = Exodus
    hide = &#x27;u v&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="976341af-46e8-46ca-8bca-3740dd229f21"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface01.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 0E-6m in y direction and 1.5E-6 in z direction.
# trial stress_yy = 0 and stress_zz = 1.5
#
# Then SimpleTester0 should activate and the algorithm will return to
# stress_yy = 0, stress_zz = 1
# internal0 should be 0.5, and others zero

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface01
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="43448fc0-8623-4ebf-b6ef-dfa0ff9a2155"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/selected_qp.i</h4><pre class="moose-pre"><code class="language-text"># A sample is unconstrained and its boundaries are
# also impermeable.  Fluid is pumped into the sample via specifying
# the porepressure at all points, and the
# mean stress is monitored at quadpoints in the sample
# This is just to check that the selected_qp in RankTwoScalarAux is working

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./pbdy]
    type = FunctionDirichletBC
    variable = porepressure
    function = &#x27;x*t&#x27;
    boundary = &#x27;left right&#x27;
  [../]

[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./mean_stress0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mean_stress7]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mean_stress0]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress0
    scalar_type = Hydrostatic
    selected_qp = 0
  [../]
  [./mean_stress1]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress1
    scalar_type = Hydrostatic
    selected_qp = 1
  [../]
  [./mean_stress2]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress2
    scalar_type = Hydrostatic
    selected_qp = 2
  [../]
  [./mean_stress3]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress3
    scalar_type = Hydrostatic
    selected_qp = 3
  [../]
  [./mean_stress4]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress4
    scalar_type = Hydrostatic
    selected_qp = 4
  [../]
  [./mean_stress5]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress5
    scalar_type = Hydrostatic
    selected_qp = 5
  [../]
  [./mean_stress6]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress6
    scalar_type = Hydrostatic
    selected_qp = 6
  [../]
  [./mean_stress7]
    type = RankTwoScalarAux
    rank_two_tensor = stress
    variable = mean_stress7
    scalar_type = Hydrostatic
    selected_qp = 7
  [../]
[]



[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.0 1.0&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 1.0
    solid_bulk_compliance = 0.5
    fluid_bulk_compliance = 0.3
    constant_porosity = false
  [../]
[]

[Postprocessors]
  [./mean0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress0
  [../]
  [./mean1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress1
  [../]
  [./mean2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress2
  [../]
  [./mean3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress3
  [../]
  [./mean4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress4
  [../]
  [./mean5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress5
  [../]
  [./mean6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress6
  [../]
  [./mean7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = mean_stress7
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu NONZERO 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 1
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = false
  file_base = selected_qp
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="285f97b7-e835-4fc0-8dc9-0b6e652de438"><div class="modal-content"><h4>modules/porous_flow/test/tests/newton_cooling/nc02.i</h4><pre class="moose-pre"><code class="language-text"># Newton cooling from a bar.  1-phase steady
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1000
  ny = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pressure&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./pressure]
  [../]
[]

[ICs]
  [./pressure]
    type = FunctionIC
    variable = pressure
    function = &#x27;(2-x/100)*1E6&#x27;
  [../]
[]

[Kernels]
  [./flux]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = pressure
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e6
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-15 0 0 0 1E-15 0 0 0 1E-15&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey # irrelevant in this fully-saturated situation
    n = 2
    phase = 0
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = pressure
    boundary = left
    value = 2E6
  [../]
  [./newton]
    type = PorousFlowPiecewiseLinearSink
    variable = pressure
    boundary = right
    pt_vals = &#x27;0 100000 200000 300000 400000 500000 600000 700000 800000 900000 1000000 1100000 1200000 1300000 1400000 1500000 1600000 1700000 1800000 1900000 2000000&#x27;
    multipliers = &#x27;0. 5.6677197748570516e-6 0.000011931518841831313 0.00001885408740732065 0.000026504708864284114 0.000034959953203725676 0.000044304443352900224 0.00005463170211001232 0.00006604508815181467 0.00007865883048198513 0.00009259917167338928 0.00010800563134618119 0.00012503240252705603 0.00014384989486488752 0.00016464644014777016 0.00018763017719085535 0.0002130311349595711 0.00024110353477682344 0.00027212833465544285 0.00030641604122040985 0.00034430981736352295&#x27;
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1
  [../]
[]

[VectorPostprocessors]
  [./porepressure]
    type = LineValueSampler
    variable = pressure
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 20
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  active = &#x27;andy&#x27;
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol &#x27;
    petsc_options_value = &#x27;gmres asm lu 100 NONZERO 2 1E-12 1E-15&#x27;
  [../]
[]

[Executioner]
  type = Steady
[]

[Outputs]
  file_base = nc02
  execute_on = timestep_end
  exodus = false
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = timestep_end
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ffa3835c-fd6f-4893-a8da-b52f79d8a722"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/pffltvd_action.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, employing PorousFlow Kernels and UserObjects, with superbee flux-limiter
# Using the PorousFlowFullySaturated Action
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[PorousFlowFullySaturated]
  porepressure = porepressure
  coupling_type = Hydro
  fp = the_simple_fluid
  mass_fraction_vars = tracer
  stabilization = KT
  flux_limiter_type = superbee
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[Materials]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  file_base = pffltvd_out
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2269d4e3-e9c0-433a-a1b1-a2cc851f1a8e"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/mandel.i</h4><pre class="moose-pre"><code class="language-text"># Mandel&#x27;s problem of consolodation of a drained medium
#
# A sample is in plane strain.
# -a &lt;= x &lt;= a
# -b &lt;= y &lt;= b
# It is squashed with constant force by impermeable, frictionless plattens on its top and bottom surfaces (at y=+/-b)
# Fluid is allowed to leak out from its sides (at x=+/-a)
# The porepressure within the sample is monitored.
#
# As is common in the literature, this is simulated by
# considering the quarter-sample, 0&lt;=x&lt;=a and 0&lt;=y&lt;=b, with
# impermeable, roller BCs at x=0 and y=0 and y=b.
# Porepressure is fixed at zero on x=a.
# Porepressure and displacement are initialised to zero.
# Then the top (y=b) is moved downwards with prescribed velocity,
# so that the total force that is inducing this downwards velocity
# is fixed.  The velocity is worked out by solving Mandel&#x27;s problem
# analytically, and the total force is monitored in the simulation
# to check that it indeed remains constant.
#
# Here are the problem&#x27;s parameters, and their values:
# Soil width.  a = 1
# Soil height.  b = 0.1
# Soil&#x27;s Lame lambda.  la = 0.5
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = G = 0.75
# Soil bulk modulus.  K = la + 2*mu/3 = 1
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.2
# Soil bulk compliance.  1/K = 1
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 4.705882
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.694118
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.372627
# Skempton coefficient.  B = alpha*M/Ku = 1.048035
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Consolidation coefficient.  c = 2*k*B^2*G*(1-nu)*(1+nuu)^2/9/(1-nuu)/(nuu-nu) = 3.821656
# Normal stress on top.  F = 1
#
# The solution for porepressure and displacements is given in
# AHD Cheng and E Detournay &quot;A direct boundary element method for plane strain poroelasticity&quot; International Journal of Numerical and Analytical Methods in Geomechanics 12 (1988) 551-572.
# The solution involves complicated infinite series, so I shall not write it here
#
# FINAL NOTE: The above solution assumes constant Biot Modulus.
# In porous_flow this is not true.  Therefore the solution is
# a little different than in the paper.  This test was therefore
# validated against MOOSE&#x27;s poromechanics, which can choose either
# a constant Biot Modulus (which has been shown to agree with
# the analytic solution), or a non-constant Biot Modulus (which
# gives the same results as porous_flow).

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 0.1
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./roller_xmin]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left&#x27;
  [../]
  [./roller_ymin]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom&#x27;
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back front&#x27;
  [../]
  [./xmax_drained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = right
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_y
    function = top_velocity
    boundary = top
  [../]
[]

[Functions]
  [./top_velocity]
    type = PiecewiseLinear
    x = &#x27;0 0.002 0.006   0.014   0.03    0.046   0.062   0.078   0.094   0.11    0.126   0.142   0.158   0.174   0.19 0.206 0.222 0.238 0.254 0.27 0.286 0.302 0.318 0.334 0.35 0.366 0.382 0.398 0.414 0.43 0.446 0.462 0.478 0.494 0.51 0.526 0.542 0.558 0.574 0.59 0.606 0.622 0.638 0.654 0.67 0.686 0.702&#x27;
    y = &#x27;-0.041824842    -0.042730269    -0.043412712    -0.04428867     -0.045509181    -0.04645965     -0.047268246 -0.047974749      -0.048597109     -0.0491467  -0.049632388     -0.050061697      -0.050441198     -0.050776675     -0.051073238      -0.0513354 -0.051567152      -0.051772022     -0.051953128 -0.052113227 -0.052254754 -0.052379865 -0.052490464 -0.052588233 -0.052674662 -0.052751065 -0.052818606 -0.052878312 -0.052931093 -0.052977751 -0.053018997 -0.053055459 -0.053087691 -0.053116185 -0.053141373 -0.05316364 -0.053183324 -0.053200724 -0.053216106 -0.053229704 -0.053241725 -0.053252351 -0.053261745 -0.053270049 -0.053277389 -0.053283879 -0.053289615&#x27;
  [../]
[]

[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_force]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_force]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_force
    function = &#x27;-stress_yy+0.6*porepressure&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5 0.75&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*0.75/3 = 1
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    ensure_positive = false
    porosity_zero = 0.1
    biot_coefficient = 0.6
    solid_bulk = 1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0.0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0.1 0 0&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0.2 0 0&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0.3 0 0&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0.4 0 0&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0.5 0 0&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0.6 0 0&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0.7 0 0&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0.8 0 0&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0.9 0 0&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;1 0 0&#x27;
    variable = porepressure
  [../]
  [./xdisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_x
  [../]
  [./ydisp]
    type = PointValue
    outputs = csv
    point = &#x27;1 0.1 0&#x27;
    variable = disp_y
  [../]
  [./total_downwards_force]
     type = ElementAverageValue
     outputs = csv
     variable = tot_force
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.15*t&lt;0.01,0.15*t,0.01)
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres asm lu 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.7
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = mandel
  [./csv]
    interval = 3
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fcb1a7c3-3261-433c-a18e-acf4dbfb9f3b"><div class="modal-content"><h4>modules/richards/test/tests/user_objects/uo4.i</h4><pre class="moose-pre"><code class="language-text"># Seff 2-phase User objects give the correct value
#
# If you want to add another test for another UserObject
# then add the UserObject, add a Function defining the expected result,
# add an AuxVariable and AuxKernel that will record the UserObjects value
# and finally add a NodalL2Error that compares this with the Function
#
# Here pressure is x where x is between -5 and 5

[UserObjects]
  [./Seff2waterVG]
    type = RichardsSeff2waterVG
    m = 0.8
    al = 0.3
  [../]
  [./Seff2gasVG]
    type = RichardsSeff2gasVG
    m = 0.8
    al = 0.3
  [../]

  [./Seff2waterVGshifted]
    type = RichardsSeff2waterVGshifted
    m = 0.8
    al = 0.3
    shift = 2
  [../]
  [./Seff2gasVGshifted]
    type = RichardsSeff2gasVGshifted
    m = 0.8
    al = 0.3
    shift = 2
  [../]

  # following are unimportant in this test
  [./PPNames]
    type = RichardsVarNames
    richards_vars = &#x27;pwater pgas&#x27;
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1000
    bulk_mod = 2E6
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.10101
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.05
    sum_s_res = 0.1
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 1
  [../]
[]

[Functions]
  [./initial_pwater]
    type = ParsedFunction
    value = x
  [../]
  [./initial_pgas]
    type = ParsedFunction
    value = 5.0
  [../]

  [./answer_Seff2waterVG]
    type = ParsedFunction
    value = (1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]
  [./answer_dSeff2waterVG]
    type = GradParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = (1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]
  [./answer_d2Seff2waterVG]
    type = Grad2ParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = (1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]

  [./answer_Seff2gasVG]
    type = ParsedFunction
    value = 1-(1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]
  [./answer_dSeff2gasVG]
    type = GradParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = 1-(1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]
  [./answer_d2Seff2gasVG]
    type = Grad2ParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = 1-(1+max((-(x-5))*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;0.3 0.8&#x27;
  [../]

  [./answer_Seff2waterVGshifted]
    type = ParsedFunction
    value = ((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]
  [./answer_dSeff2waterVGshifted]
    type = GradParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = ((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]
  [./answer_d2Seff2waterVGshifted]
    type = Grad2ParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = ((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]

  [./answer_Seff2gasVGshifted]
    type = ParsedFunction
    value = 1-((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]
  [./answer_dSeff2gasVGshifted]
    type = GradParsedFunction
    direction = &#x27;1E-5 0 0&#x27;
    value = 1-((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]
  [./answer_d2Seff2gasVGshifted]
    type = Grad2ParsedFunction
    direction = &#x27;1E-4 0 0&#x27;
    value = 1-((1+max((-(x-5-shift))*al,0)^(1/(1-m)))^(-m))/((1+max((-(-shift))*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m shift&#x27;
    vals = &#x27;0.3 0.8 2&#x27;
  [../]
[]

[AuxVariables]
  [./Seff2waterVG_Aux]
  [../]
  [./dSeff2waterVG_Aux]
  [../]
  [./d2Seff2waterVG_Aux]
  [../]
  [./Seff2gasVG_Aux]
  [../]
  [./dSeff2gasVG_Aux]
  [../]
  [./d2Seff2gasVG_Aux]
  [../]

  [./Seff2waterVGshifted_Aux]
  [../]
  [./dSeff2waterVGshifted_Aux]
  [../]
  [./d2Seff2waterVGshifted_Aux]
  [../]
  [./Seff2gasVGshifted_Aux]
  [../]
  [./dSeff2gasVGshifted_Aux]
  [../]
  [./d2Seff2gasVGshifted_Aux]
  [../]

  [./check_Aux]
  [../]
[]

[AuxKernels]
  [./Seff2waterVG_AuxK]
    type = RichardsSeffAux
    variable = Seff2waterVG_Aux
    seff_UO = Seff2waterVG
    pressure_vars = &#x27;pwater pgas&#x27;
  [../]
  [./dSeff2waterVG_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff2waterVG_Aux
    seff_UO = Seff2waterVG
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum = 0
  [../]
  [./d2Seff2waterVG_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff2waterVG_Aux
    seff_UO = Seff2waterVG
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum1 = 0
    wrtnum2 = 0
  [../]
  [./Seff2gasVG_AuxK]
    type = RichardsSeffAux
    variable = Seff2gasVG_Aux
    seff_UO = Seff2gasVG
    pressure_vars = &#x27;pwater pgas&#x27;
  [../]
  [./dSeff2gasVG_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff2gasVG_Aux
    seff_UO = Seff2gasVG
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum = 0
  [../]
  [./d2Seff2gasVG_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff2gasVG_Aux
    seff_UO = Seff2gasVG
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./Seff2waterVGshifted_AuxK]
    type = RichardsSeffAux
    variable = Seff2waterVGshifted_Aux
    seff_UO = Seff2waterVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
  [../]
  [./dSeff2waterVGshifted_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff2waterVGshifted_Aux
    seff_UO = Seff2waterVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum = 0
  [../]
  [./d2Seff2waterVGshifted_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff2waterVGshifted_Aux
    seff_UO = Seff2waterVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum1 = 0
    wrtnum2 = 0
  [../]
  [./Seff2gasVGshifted_AuxK]
    type = RichardsSeffAux
    variable = Seff2gasVGshifted_Aux
    seff_UO = Seff2gasVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
  [../]
  [./dSeff2gasVGshifted_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff2gasVGshifted_Aux
    seff_UO = Seff2gasVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum = 0
  [../]
  [./d2Seff2gasVGshifted_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff2gasVGshifted_Aux
    seff_UO = Seff2gasVGshifted
    pressure_vars = &#x27;pwater pgas&#x27;
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./check_AuxK]
    type = FunctionAux
    variable = check_Aux
    function = answer_d2Seff2waterVGshifted
  [../]
[]

[Postprocessors]
  [./cf_Seff2waterVG]
    type = NodalL2Error
    function = answer_Seff2waterVG
    variable = Seff2waterVG_Aux
  [../]
  [./cf_dSeff2waterVG]
    type = NodalL2Error
    function = answer_dSeff2waterVG
    variable = dSeff2waterVG_Aux
  [../]
  [./cf_d2Seff2waterVG]
    type = NodalL2Error
    function = answer_d2Seff2waterVG
    variable = d2Seff2waterVG_Aux
  [../]

  [./cf_Seff2gasVG]
    type = NodalL2Error
    function = answer_Seff2gasVG
    variable = Seff2gasVG_Aux
  [../]
  [./cf_dSeff2gasVG]
    type = NodalL2Error
    function = answer_dSeff2gasVG
    variable = dSeff2gasVG_Aux
  [../]
  [./cf_d2Seff2gasVG]
    type = NodalL2Error
    function = answer_d2Seff2gasVG
    variable = d2Seff2gasVG_Aux
  [../]

  [./cf_Seff2waterVGshifted]
    type = NodalL2Error
    function = answer_Seff2waterVGshifted
    variable = Seff2waterVGshifted_Aux
  [../]
  [./cf_dSeff2waterVGshifted]
    type = NodalL2Error
    function = answer_dSeff2waterVGshifted
    variable = dSeff2waterVGshifted_Aux
  [../]
  [./cf_d2Seff2waterVGshifted]
    type = NodalL2Error
    function = answer_d2Seff2waterVGshifted
    variable = d2Seff2waterVGshifted_Aux
  [../]

  [./cf_Seff2gasVGshifted]
    type = NodalL2Error
    function = answer_Seff2gasVGshifted
    variable = Seff2gasVGshifted_Aux
  [../]
  [./cf_dSeff2gasVGshifted]
    type = NodalL2Error
    function = answer_dSeff2gasVGshifted
    variable = dSeff2gasVGshifted_Aux
  [../]
  [./cf_d2Seff2gasVGshifted]
    type = NodalL2Error
    function = answer_d2Seff2gasVGshifted
    variable = d2Seff2gasVGshifted_Aux
  [../]

[]



#############################################################################
#
# Following is largely unimportant as we are not running an actual similation
#
#############################################################################
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -5
  xmax = 5
[]

[Variables]
  [./pwater]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = initial_pwater
    [../]
  [../]
  [./pgas]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = initial_pgas
    [../]
  [../]
[]

[Kernels]
  active = &#x27;watert gast&#x27;
  [./watert]
    type = RichardsMassChange
    richardsVarNames_UO = PPNames
    variable = pwater
  [../]
  [./gast]
    type = RichardsMassChange
    richardsVarNames_UO = PPNames
    variable = pgas
  [../]
[]

[Materials]
  [./unimportant_material]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-20 0 0  0 1E-20 0  0 0 1E-20&#x27;
    richardsVarNames_UO = PPNames
    density_UO = &#x27;DensityConstBulk DensityConstBulk&#x27;
    relperm_UO = &#x27;RelPermPower RelPermPower&#x27;
    sat_UO = &#x27;Saturation Saturation&#x27;
    seff_UO = &#x27;Seff2waterVG Seff2gasVG&#x27;
    SUPG_UO = &#x27;SUPGstandard SUPGstandard&#x27;
    viscosity = &#x27;1E-3 1E-5&#x27;
    gravity = &#x27;0 0 -10&#x27;
    linear_shape_fcns = true
  [../]
[]

[Preconditioning]
  [./does_nothing]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E50 1E50 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 1
  dt = 1E-100
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  active = &#x27;csv&#x27;
  file_base = uo4
  [./csv]
    type = CSV
    [../]
  [./exodus]
    type = Exodus
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="85e18b23-0a3b-4b38-b549-e0afdd33d4e8"><div class="modal-content"><h4>test/tests/postprocessors/relative_difference/relative_difference.i</h4><pre class="moose-pre"><code class="language-text"># Tests the RelativeDifferencePostprocessor post-processor, which computes
# the relative difference between 2 post-processor values.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 2
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Steady
[]

[Postprocessors]
  [./num_elems]
    # number of elements, equal to 2
    type = NumElems
  [../]
  [./num_nodes]
    # number of nodes, equal to 3
    type = NumNodes
  [../]
  [./zero]
    # zero post-processor value
    type = EmptyPostprocessor
  [../]

  # For the case in this input file, this will be computed as
  #   y = abs((num_nodes - num_elems) / num_elems)
  #   y = abs((3         - 2        ) / 2        ) = 0.5
  # When the command-line modification &quot;Postprocessors/relative_difference/value2=zero&quot; is used,
  #   y = abs(num_nodes - zero)
  #   y = abs(3         - 0   ) = 3
  [./relative_difference]
    type = RelativeDifferencePostprocessor
    value1 = num_nodes
    value2 = num_elems
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    show = relative_difference
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a3dbfde5-a1cd-45a9-966b-d6ff634405cc"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform6_update_version.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is incrementally stretched in the in the z direction
# This causes the return direction to be along the hypersurface sigma_II = sigma_III,
# and the resulting stresses are checked to lie on the expected yield surface

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;4*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;y*(t-0.5)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;z*(t-0.5)&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.5
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 0.1
  type = Transient
[]


[Outputs]
  file_base = small_deform6_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0bec8ffb-54dd-4e0e-b48b-a8259f4a316f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform9_update_version.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched in a complicated way
# that the trial stress is
#
#      1.16226      -0.0116587       0.0587872
#     -0.0116587         1.12695       0.0779428
#      0.0587872       0.0779428        0.710169
#
# This has eigenvalues
# la = {0.68849, 1.14101, 1.16987}
# and eigenvectors
#
# {-0.125484, -0.176871, 0.976202}
# {-0.0343704, -0.982614, -0.182451}
# {0.9915, -0.0564471, 0.117223}
#
# The tensile strength is 0.5 and Young=1 and Poisson=0.25.
# Using smoothing_tol=0.01, the return-map algorithm should
# return to, approximately, stress_I=stress_II=0.5.  This
# is a reduction of 0.65, so stress_III is approximately
# 0.68849 - 0.25 * 0.65 * 2 = 0.36.  The stress_I reduction of
# 0.67 gives an internal parameter of
# 0.67 / (E(1-v)/(1+v)/(1-2v)) = 0.558
# The final stress is
#
# {0.498, -0.003, 0.017},
# {-0.003, 0.495, 0.024},
# {0.017, 0.024,  0.367}

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;3*x+2*y+z&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3*x-4*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;x-2*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_I]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = max_principal_stress
  [../]
  [./s_II]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mid_principal_stress
  [../]
  [./s_III]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = min_principal_stress
  [../]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1
    poissons_ratio = 0.25
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.001
    yield_function_tol = 1.0E-12
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform9_update_version
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e8970915-95b4-46a3-84d7-8b0d4b65f692"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/borehole_lowres.i</h4><pre class="moose-pre"><code class="language-text"># Poroelastic response of a borehole.
#
# LOWRES VERSION: this version does not give perfect agreement with the analytical solution
#
# A fully-saturated medium contains a fluid with a homogeneous porepressure,
# but an anisitropic insitu stress.  A infinitely-long borehole aligned with
# the $$z$$ axis is instanteously excavated.  The borehole boundary is
# stress-free and allowed to freely drain.  This problem is analysed using
# plane-strain conditions (no $$z$$ displacement).
#
# The solution in Laplace space is found in E Detournay and AHD Cheng &quot;Poroelastic response of a borehole in a non-hydrostatic stress field&quot;.  International Journal of Rock Mechanics and Mining Sciences and Geomechanics Abstracts 25 (1988) 171-182.  In the small-time limit, the Laplace transforms may be performed.  There is one typo in the paper.  Equation (A4)&#x27;s final term should be -(a/r)\sqrt(4ct/(a^2\pi)), and not +(a/r)\sqrt(4ct/(a^2\pi)).
#
# Because realistic parameters are chosen (below),
# the residual for porepressure is much smaller than
# the residuals for the displacements.  Therefore the
# scaling parameter is chosen.  Also note that the
# insitu stresses are effective stresses, not total
# stresses, but the solution in the above paper is
# expressed in terms of total stresses.
#
# Here are the problem&#x27;s parameters, and their values:
# Borehole radius.  a = 1
# Rock&#x27;s Lame lambda.  la = 0.5E9
# Rock&#x27;s Lame mu, which is also the Rock&#x27;s shear modulus.  mu = G = 1.5E9
# Rock bulk modulus.  K = la + 2*mu/3 = 1.5E9
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.125
# Rock bulk compliance.  1/K = 0.66666666E-9
# Fluid bulk modulus.  Kf = 0.7171315E9
# Fluid bulk compliance.  1/Kf = 1.39444444E-9
# Rock initial porosity.  phi0 = 0.3
# Biot coefficient.  alpha = 0.65
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 2E9
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.345E9
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.2364
# Skempton coefficient.  B = alpha*M/Ku = 0.554
# Fluid mobility (rock permeability/fluid viscosity).  k = 1E-12

[Mesh]
  type = FileMesh
  file = borehole_lowres_input.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 1
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
    scaling = 1E9  # Notice the scaling, to make porepressure&#x27;s kernels roughly of same magnitude as disp&#x27;s kernels
  [../]
[]

[ICs]
  [./initial_p]
    type = ConstantIC
    variable = porepressure
    value = 1E6
  [../]
[]

[BCs]
  [./fixed_outer_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = outer
  [../]
  [./fixed_outer_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = outer
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;zmin zmax&#x27;
  [../]
  [./borehole_wall]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = bh_wall
  [../]
[]



[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_yy]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_yy
    function = &#x27;stress_yy-0.65*porepressure&#x27;
  [../]
[]



[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./darcy_flow]
    type = CoefDiffusion
    variable = porepressure
    coef = 1E-12
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5E9 1.5E9&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*1.5/3 = 1.5E9
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeFiniteStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;-1.35E6 0 0  0 -3.35E6 0  0 0 0&#x27; # remember this is the effective stress
    eigenstrain_name = ini_stress
  [../]
  [./no_plasticity]
    type = ComputeFiniteStrainElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.3
    biot_coefficient = 0.65
    solid_bulk_compliance = 0.6666666666667E-9
    fluid_bulk_compliance = 1.3944444444444E-9
    constant_porosity = false
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    variable = porepressure
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_p
  [../]
  [./p01]
    type = PointValue
    variable = porepressure
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_p
  [../]
  [./p02]
    type = PointValue
    variable = porepressure
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_p
  [../]
  [./p03]
    type = PointValue
    variable = porepressure
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_p
  [../]
  [./p04]
    type = PointValue
    variable = porepressure
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_p
  [../]
  [./p05]
    type = PointValue
    variable = porepressure
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_p
  [../]
  [./p06]
    type = PointValue
    variable = porepressure
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_p
  [../]
  [./p07]
    type = PointValue
    variable = porepressure
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_p
  [../]
  [./p08]
    type = PointValue
    variable = porepressure
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_p
  [../]
  [./p09]
    type = PointValue
    variable = porepressure
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_p
  [../]
  [./p10]
    type = PointValue
    variable = porepressure
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_p
  [../]
  [./p11]
    type = PointValue
    variable = porepressure
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_p
  [../]
  [./p12]
    type = PointValue
    variable = porepressure
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_p
  [../]
  [./p13]
    type = PointValue
    variable = porepressure
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_p
  [../]
  [./p14]
    type = PointValue
    variable = porepressure
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_p
  [../]
  [./p15]
    type = PointValue
    variable = porepressure
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_p
  [../]
  [./p16]
    type = PointValue
    variable = porepressure
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_p
  [../]
  [./p17]
    type = PointValue
    variable = porepressure
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_p
  [../]
  [./p18]
    type = PointValue
    variable = porepressure
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_p
  [../]
  [./p19]
    type = PointValue
    variable = porepressure
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_p
  [../]
  [./p20]
    type = PointValue
    variable = porepressure
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_p
  [../]
  [./p21]
    type = PointValue
    variable = porepressure
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_p
  [../]
  [./p22]
    type = PointValue
    variable = porepressure
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_p
  [../]
  [./p23]
    type = PointValue
    variable = porepressure
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_p
  [../]
  [./p24]
    type = PointValue
    variable = porepressure
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_p
  [../]
  [./p25]
    type = PointValue
    variable = porepressure
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_p
  [../]

  [./s00]
    type = PointValue
    variable = disp_x
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_s
  [../]
  [./s01]
    type = PointValue
    variable = disp_x
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_s
  [../]
  [./s02]
    type = PointValue
    variable = disp_x
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_s
  [../]
  [./s03]
    type = PointValue
    variable = disp_x
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_s
  [../]
  [./s04]
    type = PointValue
    variable = disp_x
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_s
  [../]
  [./s05]
    type = PointValue
    variable = disp_x
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_s
  [../]
  [./s06]
    type = PointValue
    variable = disp_x
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_s
  [../]
  [./s07]
    type = PointValue
    variable = disp_x
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_s
  [../]
  [./s08]
    type = PointValue
    variable = disp_x
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_s
  [../]
  [./s09]
    type = PointValue
    variable = disp_x
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_s
  [../]
  [./s10]
    type = PointValue
    variable = disp_x
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_s
  [../]
  [./s11]
    type = PointValue
    variable = disp_x
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_s
  [../]
  [./s12]
    type = PointValue
    variable = disp_x
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_s
  [../]
  [./s13]
    type = PointValue
    variable = disp_x
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_s
  [../]
  [./s14]
    type = PointValue
    variable = disp_x
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_s
  [../]
  [./s15]
    type = PointValue
    variable = disp_x
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_s
  [../]
  [./s16]
    type = PointValue
    variable = disp_x
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_s
  [../]
  [./s17]
    type = PointValue
    variable = disp_x
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_s
  [../]
  [./s18]
    type = PointValue
    variable = disp_x
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_s
  [../]
  [./s19]
    type = PointValue
    variable = disp_x
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_s
  [../]
  [./s20]
    type = PointValue
    variable = disp_x
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_s
  [../]
  [./s21]
    type = PointValue
    variable = disp_x
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_s
  [../]
  [./s22]
    type = PointValue
    variable = disp_x
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_s
  [../]
  [./s23]
    type = PointValue
    variable = disp_x
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_s
  [../]
  [./s24]
    type = PointValue
    variable = disp_x
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_s
  [../]
  [./s25]
    type = PointValue
    variable = disp_x
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_s
  [../]

  [./t00]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_t
  [../]
  [./t01]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_t
  [../]
  [./t02]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_t
  [../]
  [./t03]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_t
  [../]
  [./t04]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_t
  [../]
  [./t05]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_t
  [../]
  [./t06]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_t
  [../]
  [./t07]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_t
  [../]
  [./t08]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_t
  [../]
  [./t09]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_t
  [../]
  [./t10]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_t
  [../]
  [./t11]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_t
  [../]
  [./t12]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_t
  [../]
  [./t13]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_t
  [../]
  [./t14]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_t
  [../]
  [./t15]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_t
  [../]
  [./t16]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_t
  [../]
  [./t17]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_t
  [../]
  [./t18]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_t
  [../]
  [./t19]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_t
  [../]
  [./t20]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_t
  [../]
  [./t21]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_t
  [../]
  [./t22]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_t
  [../]
  [./t23]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_t
  [../]
  [./t24]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_t
  [../]
  [./t25]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_t
  [../]

  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = 2*t
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_monitor -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -ksp_max_it -sub_pc_type -sub_pc_factor_shift_type&#x27;
    petsc_options_value = &#x27;gmres asm 1E0 1E-10 200 500 lu NONZERO&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.3
  dt = 0.3
  #[./TimeStepper]
  #  type = PostprocessorDT
  #  postprocessor = dt
  #  dt = 0.003
  #[../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = borehole_lowres
  exodus = true
  sync_times = &#x27;0.003 0.3&#x27;
  [./csv_p]
    file_base = borehole_lowres_p
    type = CSV
  [../]
  [./csv_s]
    file_base = borehole_lowres_s
    type = CSV
  [../]
  [./csv_t]
    file_base = borehole_lowres_t
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="22cb83c5-74b4-4873-a09a-e8e69cf27024"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random02
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="36b16e9b-8689-4a44-9896-820a6206e1c8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/two_surface02.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester with a = 0 and b = 1 and strength = 1
# SimpleTester with a = 1 and b = 1 and strength = 2
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.5E-6m in the y z directions.
# trial stress_zz = 1.5 and stress_yy = 1.5
#
# Then both  SimpleTesters should activate, and the final stress
# should have have stress_zz = 1 = stress_yy (ie, the &quot;corner&quot; point)
# the plastic strain for SimpleTester1 should be zero

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
[]

[UserObjects]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 2
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = two_surface02
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ddae59b2-0d28-446b-9985-71f86e174dee"><div class="modal-content"><h4>modules/porous_flow/test/tests/sinks/s05.i</h4><pre class="moose-pre"><code class="language-text"># apply a half-gaussian sink flux and observe the correct behavior
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  zmin = 0
  zmax = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1.1
  [../]
[]

[Variables]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = y+1.4
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.3
      density0 = 1.1
      thermal_expansion = 0
      viscosity = 1.1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0 0 1E-5 0 0 0 1E-5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
[]

[AuxVariables]
  [./flux_out]
  [../]
[]

[Functions]
  [./mass10]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*if(pp&gt;=0,1,pow(1+pow(-al*pp,1.0/(1-m)),-m))&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p10 1.3 1.1 0.5&#x27;
  [../]
  [./rate10]
    type = ParsedFunction
    value = &#x27;if(pp&gt;center,fcn,fcn*exp(-0.5*(pp-center)*(pp-center)/sd/sd))&#x27;
    vars = &#x27;fcn pp  center sd&#x27;
    vals = &#x27;6   p10 0.9    0.5&#x27;
  [../]
  [./mass10_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m10_prev  m10_rate 0.5 2E-3&#x27;
  [../]
  [./mass11]
    type = ParsedFunction
    value = &#x27;vol*por*dens0*exp(pp/bulk)*if(pp&gt;=0,1,pow(1+pow(-al*pp,1.0/(1-m)),-m))&#x27;
    vars = &#x27;vol por dens0 pp bulk al m&#x27;
    vals = &#x27;0.25 0.1 1.1 p11 1.3 1.1 0.5&#x27;
  [../]
  [./rate11]
    type = ParsedFunction
    value = &#x27;if(pp&gt;center,fcn,fcn*exp(-0.5*(pp-center)*(pp-center)/sd/sd))&#x27;
    vars = &#x27;fcn pp  center sd&#x27;
    vals = &#x27;6   p11 0.9    0.5&#x27;
  [../]
  [./mass11_expect]
    type = ParsedFunction
    value = &#x27;mass_prev-rate*area*dt&#x27;
    vars = &#x27;mass_prev rate     area dt&#x27;
    vals = &#x27;m11_prev  m11_rate 0.5 2E-3&#x27;
  [../]
[]

[Postprocessors]
  [./flux10]
    type = PointValue
    variable = flux_out
    point = &#x27;1 0 0&#x27;
  [../]
  [./p00]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p10]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m10_prev]
    type = FunctionValuePostprocessor
    function = mass10
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m10_rate]
    type = FunctionValuePostprocessor
    function = rate10
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m10_expect]
    type = FunctionValuePostprocessor
    function = mass10_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./p01]
    type = PointValue
    point = &#x27;0 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./p11]
    type = PointValue
    point = &#x27;1 1 0&#x27;
    variable = pp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./m11_prev]
    type = FunctionValuePostprocessor
    function = mass11
    execute_on = &#x27;timestep_begin&#x27;
    outputs = &#x27;console&#x27;
  [../]
  [./m11_rate]
    type = FunctionValuePostprocessor
    function = rate11
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./m11_expect]
    type = FunctionValuePostprocessor
    function = mass11_expect
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[BCs]
  [./flux]
    type = PorousFlowHalfGaussianSink
    boundary = &#x27;right&#x27;
    max = 6
    sd = 0.5
    center = 0.9
    variable = pp
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1
    save_in = flux_out
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -snes_max_it -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres asm lu 10000 NONZERO 2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 2E-3
  end_time = 6E-2
  nl_rel_tol = 1E-12
  nl_abs_tol = 1E-12
[]

[Outputs]
  file_base = s05
  [./console]
    type = Console
    execute_on = &#x27;nonlinear linear&#x27;
    interval = 5
  [../]
  [./csv]
    type = CSV
    execute_on = &#x27;timestep_end&#x27;
    interval = 3
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5b0f3fd1-3319-496d-9b24-fdce125a9ce6"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_4/brick4_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick4_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_x
  [../]
  [./disp_x64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_x
  [../]
  [./disp_y59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_y
  [../]
  [./disp_y64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x59 disp_y59 disp_x64 disp_y64 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="70f10912-f29a-48cf-86d9-18c8c609751e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random04
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="56c2ff33-d4d0-4767-8d70-8c357b8e52ff"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/terzaghi.i</h4><pre class="moose-pre"><code class="language-text"># Terzaghi&#x27;s problem of consolodation of a drained medium
#
# A saturated soil sample sits in a bath of water.
# It is constrained on its sides, and bottom.
# Its sides and bottom are also impermeable.
# Initially it is unstressed.
# A normal stress, q, is applied to the soil&#x27;s top.
# The soil then slowly compresses as water is squeezed
# out from the sample from its top (the top BC for
# the porepressure is porepressure = 0).
#
# See, for example.  Section 2.2 of the online manuscript
# Arnold Verruijt &quot;Theory and Problems of Poroelasticity&quot; Delft University of Technology 2013
# but note that the &quot;sigma&quot; in that paper is the negative
# of the stress in TensorMechanics
#
# Here are the problem&#x27;s parameters, and their values:
# Soil height.  h = 10
# Soil&#x27;s Lame lambda.  la = 2
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = 3
# Soil bulk modulus.  K = la + 2*mu/3 = 4
# Soil confined compressibility.  m = 1/(K + 4mu/3) = 0.125
# Soil bulk compliance.  1/K = 0.25
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Soil initial storativity, which is the reciprocal of the initial Biot modulus.  S = phi0/Kf + (alpha - phi0)(1 - alpha)/K = 0.0625
# Consolidation coefficient.  c = k/(S + alpha^2 m) = 13.95348837
# Normal stress on top.  q = 1
# Initial porepressure, resulting from instantaneous application of q, assuming corresponding instantaneous increase of porepressure (Note that this is calculated by MOOSE: we only need it for the analytical solution).  p0 = alpha*m*q/(S + alpha^2 m) = 0.69767442
# Initial vertical displacement (down is positive), resulting from instantaneous application of q (Note this is calculated by MOOSE: we only need it for the analytical solution).  uz0 = q*m*h*S/(S + alpha^2 m)
# Final vertical displacement (down in positive) (Note this is calculated by MOOSE: we only need it for the analytical solution).  uzinf = q*m*h
#
# The solution for porepressure is
# P = 4*p0/\pi \sum_{k=1}^{\infty} \frac{(-1)^{k-1}}{2k-1} \cos ((2k-1)\pi z/(2h)) \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
# This series converges very slowly for ct/h^2 small, so in that domain
# P = p0 erf( (1-(z/h))/(2 \sqrt(ct/h^2)) )
#
# The degree of consolidation is defined as
# U = (uz - uz0)/(uzinf - uz0)
# where uz0 and uzinf are defined above, and
# uz = the vertical displacement of the top (down is positive)
# U = 1 - (8/\pi^2)\sum_{k=1}^{\infty} \frac{1}{(2k-1)^2} \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 10
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = 0
  zmax = 10
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./topdrained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = front
  [../]
  [./topload]
    type = NeumannBC
    variable = disp_z
    value = -1
    boundary = front
  [../]
[]


[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
    [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./darcy_flow]
    type = CoefDiffusion
    variable = porepressure
    coef = 1.5
  [../]
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    # bulk modulus is lambda + 2*mu/3 = 2 + 2*3/3 = 4
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.1
    biot_coefficient = 0.6
    solid_bulk_compliance = 0.25
    fluid_bulk_compliance = 0.125
    constant_porosity = true
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 1&#x27;
    variable = porepressure
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 2&#x27;
    variable = porepressure
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 3&#x27;
    variable = porepressure
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 4&#x27;
    variable = porepressure
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 5&#x27;
    variable = porepressure
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 6&#x27;
    variable = porepressure
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 7&#x27;
    variable = porepressure
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 8&#x27;
    variable = porepressure
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 9&#x27;
    variable = porepressure
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = disp_z
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.5*t&lt;0.1,0.5*t,0.1)
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.0001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = terzaghi
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a9d0d3e5-3cd4-46e5-84a1-21422e2294f3"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_2D_trimesh.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, mploying PorousFlow Kernels and UserObjects, with superbee flux-limiter
# 2D version
[Mesh]
  type = FileMesh
  file = trimesh.msh
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
  block = &#x27;50&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.305,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.04 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1760ca30-c4a8-43c3-9331-bf50bde35eaf"><div class="modal-content"><h4>modules/porous_flow/test/tests/dirackernels/theis3.i</h4><pre class="moose-pre"><code class="language-text"># Two phase Theis problem: Flow from single source
# Constant rate injection 0.5 kg/s
# 1D cylindrical mesh

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmax = 2000
  bias_x = 1.05
[]

[Problem]
  type = FEProblem
  coord_type = RZ
  rz_coord_axis = Y
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 20e6
  [../]
  [./sgas]
    initial_condition = 0
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = sgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = sgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 1e5
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      viscosity = 1e-3
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 10
      viscosity = 1e-4
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[BCs]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 20e6
    variable = ppwater
  [../]
[]

[DiracKernels]
  [./source]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = 0.5
    variable = sgas
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-8       1E-10 20&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1e4
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 10
    growth_factor = 2
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = NodalValueSampler
    sort_by = x
    variable = &#x27;ppwater sgas&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Postprocessors]
  [./ppwater]
    type = PointValue
    point =  &#x27;4 0 0&#x27;
    variable = ppwater
  [../]
  [./sgas]
    type = PointValue
    point = &#x27;4 0 0&#x27;
    variable = sgas
  [../]
  [./massgas]
    type = PorousFlowFluidMass
    fluid_component = 1
  [../]
[]

[Outputs]
  file_base = theis3
  print_linear_residuals = false
  perf_graph = true
  [./csv]
    type = CSV
    execute_on = timestep_end
    execute_vector_postprocessors_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6000a640-8a3c-4016-bfd8-7a93028701f2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar6.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by (0.5, 0.4, 0.3)E-6m
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_xx = 1.72 Pa
# stress_yy = 1.52 Pa
# stress_zz = 1.32 Pa
# tensile_strength is set to 0.5Pa with cubic hardening to 1Pa at intnl=1E-6
#
# The return should be to the tip with, according to mathematica
# sum(plastic_multiplier) = 5.67923989317E-7
# stress_xx = stress_yy = stress_zz = 0.80062961323

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.4E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.3E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.5
    value_residual = 1
    internal_limit = 1E-6
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = tens
    debug_fspb = none
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar6
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="376eca12-8922-4a63-89aa-9371f21c9f12"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/many_deforms_cap.i</h4><pre class="moose-pre"><code class="language-text"># apply many large deformations, checking that the algorithm returns correctly to
# the yield surface each time


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;(sin(0.05*t)+x)/1E0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;(cos(0.04*t)+x*y)/1E0&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;t/1E2&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    tip_scheme = cap
    mc_tip_smoother = 0.0
    cap_start = 1000
    cap_rate = 1E-3
    mc_edge_smoother = 10
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 1000
    ep_plastic_tolerance = 1E-6
    plastic_models = mc
    debug_fspb = crash
    deactivation_scheme = safe
  [../]
[]


[Executioner]
  end_time = 1000
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = many_deforms_cap
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="113d4f3b-06c8-49c0-b76e-b73a9e4774a2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in x,y and z directions.
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# wpt_tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and its value should be 1pa.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = disp_x
    boundary = front
    value = 0E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = disp_y
    boundary = front
    value = 0E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = disp_z
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-5
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d54ba31f-cb61-4e3a-bb54-f6462a6a9b5d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/large_deform4.i</h4><pre class="moose-pre"><code class="language-text"># apply a number of &quot;random&quot; configurations and
# check that the algorithm returns to the yield surface
# using the &#x27;cap&#x27; tip_scheme
#
# must be careful here - we cannot put in arbitrary values of C_ijkl, otherwise the condition
# df/dsigma * C * flow_dirn &lt; 0 for some stresses
# The important features that must be obeyed are:
# 0 = C_0222 = C_1222  (holds for transversely isotropic, for instance)
# C_0212 &lt; C_0202 = C_1212 (holds for transversely isotropic)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  # the following are &quot;random&quot; deformations
  # each is O(1E-1) to provide large deformations
  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;(sin(0.1*t)+x)/1E1&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;(cos(t)+x*y)/1E1&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;sin(0.4321*t)*x*y*z/1E1&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.577350269
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.08748866
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tip_scheme = cap
    smoother = 100
    cap_rate = 0.001
    cap_start = 0.0
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    # the following is transversely isotropic, i think.
    fill_method = symmetric9
    C_ijkl = &#x27;3E9 1E9 3E9 3E9 3E9 6E9 1E9 1E9 9E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    max_NR_iterations = 100
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E4
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = large_deform4
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9a5f0015-e923-4e0d-989b-4e61ed48b217"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform4.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in z direction, and smaller stretches in the x and y directions
# so that sigma_II = sigma_III,
# which means that lode angle = -30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 50
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.8726646 # 50deg
    rate = 3000.0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-8
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 30
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform4
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e779faf9-1275-4ca6-a7c6-218a4a1e95fa"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_4/brick4_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick4_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_x
  [../]
  [./disp_x64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_x
  [../]
  [./disp_y59]
    type = NodalVariableValue
    nodeid = 58
    variable = disp_y
  [../]
  [./disp_y64]
    type = NodalVariableValue
    nodeid = 63
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x59 disp_y59 disp_x64 disp_y64 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="95ec91b2-f068-42b1-ac54-4d7a9d4cda25"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_1/plane1_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane1_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
  maximum_lagrangian_update_iterations = 200
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./zeroslip_x]
    type = ConstantAux
    variable = inc_slip_x
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./zeroslip_y]
    type = ConstantAux
    variable = inc_slip_y
    boundary = 4
    execute_on = timestep_begin
    value = 0.0
  [../]
  [./accum_slip_x]
    type = AccumulateAux
    variable = accum_slip_x
    accumulate_from_variable = inc_slip_x
    execute_on = timestep_end
  [../]
  [./accum_slip_y]
    type = AccumulateAux
    variable = accum_slip_y
    accumulate_from_variable = inc_slip_y
    execute_on = timestep_end
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-10
  nl_rel_tol = 1e-9
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x7 disp_y7 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="06175835-9365-4c94-87d3-c201546023b6"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_template2.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl3_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu       superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    penalty = 1e+11
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3f9e6848-d7f4-4fb0-8e90-a19055946531"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden3.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches to observe cohesion hardening
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;2*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wps_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./wps_internal_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wps_internal
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wps_internal
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1E3
    value_residual = 2E3
    rate = 0
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 0.577350269
    rate = 4E4
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.01745506
    value_residual = 0.01745506
    rate = 1E8
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 500
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform_harden3
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7eb6e507-cd62-47c9-9cd6-fac67e542be1"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform2_inner_edge.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.5E-6*x+2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = inner_edge
    internal_constraint_tolerance = 1 # irrelevant here
    yield_function_tolerance = 1      # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    block = 0
    lambda = 0.0
    shear_modulus = 1.0e7
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = cdp
    perform_finite_strain_rotations = false
  [../]
  [./cdp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 4
    smoothing_tol = 1E-5
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_inner_edge
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7515014-768b-445a-93ba-8dc6df40a6ae"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/small_deform_harden4.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches to observe cohesion hardening, with cubic
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = x_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = y_disp
    boundary = front
    function = &#x27;0&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = &#x27;2*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wps_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./wps_internal_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wps_internal
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./int]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wps_internal
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E3
    value_residual = 2E3
    internal_limit = 0.00007
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.01745506
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 500
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 0.5E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-3
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1E-6
  dt = 1E-7
  type = Transient
[]


[Outputs]
  file_base = small_deform_harden4
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a38a3ee6-3b8d-41ed-a2e6-b9e31b9e97a6"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_advection/heat_advection_1d.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, heat advecting with a moving fluid
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 50
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./temp]
    initial_condition = 200
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = &#x27;1-x&#x27;
  [../]
[]

[BCs]
  [./pp0]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1
  [../]
  [./pp1]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
  [./spit_heat]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 300
  [../]
  [./suck_heat]
    type = DirichletBC
    variable = temp
    boundary = right
    value = 200
  [../]
[]

[Kernels]
  [./mass_dot]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./advection]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
  [../]
  [./energy_dot]
    type = PorousFlowEnergyTimeDerivative
    variable = temp
  [../]
  [./heat_advection]
    type = PorousFlowHeatAdvection
    variable = temp
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;temp pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.6
    alpha = 1.3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 100
      density0 = 1000
      viscosity = 4.4
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temp
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.0
    density = 125
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 2 0 0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./PS]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres bjacobi 1E-15 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.01
  end_time = 0.6
[]

[VectorPostprocessors]
  [./T]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 51
    sort_by = x
    variable = temp
  [../]
[]

[Outputs]
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.6&#x27;
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="93215981-6f92-4050-976f-844eebeed3bf"><div class="modal-content"><h4>test/tests/vectorpostprocessors/distributed/input.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Steady
[]

[VectorPostprocessors/test]
    type = TestDistributedVectorPostprocessor
    parallel_type = replicated
[]

[Outputs]
  [out]
    type = CSV
    execute_on = TIMESTEP_END
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c4cf38d8-4bf9-491f-809d-b8c985f6ae0e"><div class="modal-content"><h4>test/tests/postprocessors/function_sideintegral/function_sideintegral.i</h4><pre class="moose-pre"><code class="language-text"># calculates the integral of various functions over
# boundaries of the mesh.  See [Postprocessors] for
# a description of the functions
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 5
  ny = 5
  nz = 5
  xmin = -1
  xmax = 1
  ymin = -2
  ymax = 2
  zmin = 0
  zmax = 6
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[ICs]
  [./u]
    type = ConstantIC
    variable = u
    value = 0
  [../]
[]

[Postprocessors]
  [./zmin]
    # no function is provided, so it should default to 1
    # yielding postprocessor = 8
    type = FunctionSideIntegral
    boundary = back
  [../]
  [./zmax]
    # result should be -6*area_of_zmax_sideset = -48
    type = FunctionSideIntegral
    boundary = front
    function = &#x27;-z&#x27;
  [../]
  [./ymin]
    # since the integrand is odd in x, the result should be zero
    type = FunctionSideIntegral
    boundary = bottom
    function = &#x27;x*pow(z,4)&#x27;
  [../]
  [./ymax]
    # result should be 24
    type = FunctionSideIntegral
    boundary = top
    function = &#x27;y*(1+x)*(z-2)&#x27;
  [../]
  [./xmin_and_xmax]
    # here the integral is over two sidesets
    # result should be 432
    type = FunctionSideIntegral
    boundary = &#x27;left right&#x27;
    function = &#x27;(3+x)*z&#x27;
  [../]
[]

[Executioner]
  type = Steady

  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = function_sideintegral
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="07e0fb27-4b15-4a23-8af8-dce3ed8ed6d5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface00.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1E-6m in y direction and 1E-6 in z direction.
# trial stress_yy = 1 and stress_zz = 1
#
# Then SimpleTester2 should activate and the algorithm will return to
# stress_yy = 0.75, stress_zz = 0.75
# internal2 should be 0.25

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface00
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="42585f2a-6a27-48f8-aeff-36cb52a9432b"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_2D.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, employing PorousFlow Kernels and UserObjects, with superbee flux-limiter
# 3D version
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  xmin = 0
  xmax = 1
  ny = 4
  ymin = 0
  ymax = 0.5
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="65aefc50-da08-4faf-b91d-9098909ccf78"><div class="modal-content"><h4>test/tests/outputs/csv_final_and_latest/final.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.25
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

# Vector Postprocessor System
[VectorPostprocessors]
  [./line_sample]
    type = LineValueSampler
    execute_on = &#x27;timestep_end final&#x27;
    variable = &#x27;u&#x27;
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = id
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = &#x27;TIMESTEP_END FINAL&#x27;
    create_final_symlink = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a5349fb8-46ae-4953-8c68-2ebdaff46dcb"><div class="modal-content"><h4>modules/porous_flow/test/tests/dirackernels/theis_rz.i</h4><pre class="moose-pre"><code class="language-text"># Theis problem: Flow to single sink using BasicTHM
# SinglePhase
# RZ mesh

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmax = 100
  bias_x = 1.05
[]

[Problem]
  coord_type = RZ
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    initial_condition = 20E6
  [../]
[]

[PorousFlowBasicTHM]
  dictator_name = dictator
  add_darcy_aux = false
  fp = simple_fluid
  gravity = &#x27;0 0 0&#x27;
  multiply_by_density = false
  porepressure = pp
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      viscosity = 0.001
    [../]
  [../]
[]

[Materials]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.05
  [../]
  [./biot_mod]
    type = PorousFlowConstantBiotModulus
    fluid_bulk_modulus = 2E9
    biot_coefficient = 1.0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-14 0 0 0 1E-14 0 0 0 1E-14&#x27;
  [../]
[]

[DiracKernels]
  [./sink]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = -0.16E-3 # recall this is a volumetric flux because multiply_by_density = false in the Action, so this corresponds to a mass_flux of 0.16 kg/s/m because density=1000
    variable = pp
  [../]
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    num_points = 25
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    sort_by = x
    variable = pp
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 200
  end_time = 1E3
  nl_abs_tol = 1e-10
[]

[Outputs]
  perf_graph = true
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]

</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="904f9863-7a37-43bd-906d-1af032e5c907"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_2/brick2_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick2_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_x
  [../]
  [./disp_x26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_x
  [../]
  [./disp_y7]
    type = NodalVariableValue
    nodeid = 6
    variable = disp_y
  [../]
  [./disp_y26]
    type = NodalVariableValue
    nodeid = 25
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5

[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x7 disp_y7 disp_x26 disp_y26 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+7
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="20b77c12-3d6a-4ae0-b25e-a0d628dabbf5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform6.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in z direction, and smaller stretches in the x and y directions
# so that sigma_II = sigma_III,
# which means that lode angle = -30deg.
# The allows yield surface in meridional plane to be mapped out
# Using cap smoothing

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.9E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.9E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 50
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.8726646 # 50deg
    rate = 3000.0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    tip_scheme = cap
    mc_tip_smoother = 0
    cap_start = 3
    cap_rate = 0.8
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-8
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 30
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform6
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="126e78c8-5a51-4034-9cea-a65d42ea5e6a"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/ring_4/ring4_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = ring4_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = ring4_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = ring4_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x9 disp_y9 disp_x16 disp_y16 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="15e6d4ad-98ee-4b0f-86f8-b7f8750d792d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface22.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.7E-6m in y direction and 1.1E-6 in z direction.
# trial stress_yy = 1.7 and stress_zz = 1.1
#
# Then all yield functions will activate
# However, there is linear dependence.  SimpleTester0 will be rutned off.
# The algorithm will return to
# stress_yy=1.0 and stress_zz=0.5
# internal1=0.1, internal2=0.6


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.7E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface22
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0c8dbf54-5230-4731-bb35-d23b8da20b6f"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_fully_saturated_volume.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie m^3/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# In the standard poromechanics scenario, the Biot Modulus is held
# fixed and the source has units 1/s.  Then the expected result
# is
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# In standard porous_flow, everything is based on mass, eg the source has
# units kg/s/m^3.  This is discussed in the other pp_generation_unconfined
# models.  In this test, we use the FullySaturated Kernel and set
# multiply_by_density = false
# meaning the fluid Kernel has units of volume, and the source, s, has units 1/time
#
# The ratios are:
# stress_xx/strain_zz = (bulk - 2*shear/3) = 1 (for the parameters used here)
# stress_zz/strain_zz = (bulk + 4*shear/3) = 4 (for the parameters used here)
# porepressure/strain_zz = 13.3333333 (for the parameters used here)
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t
#
# Finally, note that the volumetric strain has
# consistent_with_displaced_mesh = false
# which is needed when using the FullySaturated version of the Kernels
# in order to generate the above results

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    variable = porepressure
    multiply_by_density = false
    coupling_type = HydroMechanical
    biot_coefficient = 0.3
  [../]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3.3333333333
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
    consistent_with_displaced_mesh = false
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # the &quot;const&quot; is irrelevant here: all that uses Porosity is the BiotModulus, which just uses the initial value of porosity
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.3
    fluid_bulk_modulus = 3.3333333333
    solid_bulk_compliance = 0.5
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./stress_xx_over_strain]
    type = FunctionValuePostprocessor
    function = stress_xx_over_strain_fcn
    outputs = csv
  [../]
  [./stress_zz_over_strain]
    type = FunctionValuePostprocessor
    function = stress_zz_over_strain_fcn
    outputs = csv
  [../]
  [./p_over_strain]
    type = FunctionValuePostprocessor
    function = p_over_strain_fcn
    outputs = csv
  [../]
[]

[Functions]
  [./stress_xx_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_xx zdisp&#x27;
  [../]
  [./stress_zz_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_zz zdisp&#x27;
  [../]
  [./p_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;p0 zdisp&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined_fully_saturated_volume
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="124ca996-8372-4c50-b29f-2e7a5d4e2e6f"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01c.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, 2-component, constant fluid-bulk, constant viscosity, constant permeability
# fully saturated with fully-saturated Kernel
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
  [./frac]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux1]
    type = PorousFlowFullySaturatedDarcyFlow
    variable = pp
    fluid_component = 0
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyFlow
    variable = frac
    fluid_component = 1
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp frac&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = frac
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01c
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d3966609-812f-4296-80fe-657f7008109c"><div class="modal-content"><h4>test/tests/nodalkernels/constraint_enforcement/upper-bound.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=100
num_steps=10

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
  [lm]
  []
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;${l} - x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;1&#x27;
  []
[]

[NodalKernels]
  [positive_constraint]
    type = UpperBoundNodalKernel
    variable = lm
    v = u
    exclude_boundaries = &#x27;left right&#x27;
    upper_bound = 10
  []
  [forces]
    type = CoupledForceNodalKernel
    variable = u
    v = lm
    coef = -1
  []
[]


[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = ${l}
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = 0
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  [active_lm]
    type = GreaterThanLessThanPostprocessor
    variable = lm
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = 1e-8
  []
  [violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5908015f-0f78-4bda-beda-9d67a4108b7b"><div class="modal-content"><h4>modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePS_KT.i</h4><pre class="moose-pre"><code class="language-text"># Pressure pulse in 1D with 2 phases, 2components - transient
# Using KT stabilization

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 2e6
  [../]
  [./sgas]
    initial_condition = 0.3
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
  [./ppgas]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[Kernels]
  [./mass_component0]
    type = PorousFlowMassTimeDerivative
    variable = ppwater
    fluid_component = 0
  [../]
  [./flux_component0_phase0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = ppwater
    advective_flux_calculator = afc_component0_phase0
  [../]
  [./flux_component0_phase1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = ppwater
    advective_flux_calculator = afc_component0_phase1
  [../]
  [./mass_component1]
    type = PorousFlowMassTimeDerivative
    variable = sgas
    fluid_component = 1
  [../]
  [./flux_component1_phase0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = sgas
    advective_flux_calculator = afc_component1_phase0
  [../]
  [./flux_component1_phase1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = sgas
    advective_flux_calculator = afc_component1_phase1
  [../]
[]

[AuxKernels]
  [./ppgas]
    type = PorousFlowPropertyAux
    property = pressure
    phase = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 1e5
  [../]
  [./afc_component0_phase0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    fluid_component = 0
    phase = 0
    flux_limiter_type = superbee
  [../]
  [./afc_component0_phase1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    fluid_component = 0
    phase = 1
    flux_limiter_type = superbee
  [../]
  [./afc_component1_phase0]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    fluid_component = 1
    phase = 0
    flux_limiter_type = superbee
  [../]
  [./afc_component1_phase1]
    type = PorousFlowAdvectiveFluxCalculatorUnsaturatedMultiComponent
    fluid_component = 1
    phase = 1
    flux_limiter_type = superbee
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 1e-5
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-15 0 0 0 1e-15 0 0 0 1e-15&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[BCs]
  [./leftwater]
    type = DirichletBC
    boundary = left
    value = 3e6
    variable = ppwater
  [../]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 2e6
    variable = ppwater
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-20 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1e3
  end_time = 1e4
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    sort_by = x
    variable = &#x27;ppwater ppgas&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    num_points = 11
  [../]
[]

[Outputs]
  file_base = pressure_pulse_1d_2phasePS_KT
  print_linear_residuals = false
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="eff40dec-a8ca-4d29-97ef-e9af6b8e4132"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_shear/except1.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 8E-6
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 6E-6
  [../]
  [./topz]
    type = DirichletBC
    variable = z_disp
    boundary = front
    value = 1E-6
  [../]
[]

[AuxVariables]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.55
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 0
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-3
  [../]
[]
[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wps
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-3
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2c10c63e-8acd-4464-9635-504038de2fc6"><div class="modal-content"><h4>test/tests/multiapps/grid-sequencing/vi-coarse.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=40
num_steps=2

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
[]

[AuxVariables]
  [bounds][]
[]

[Bounds]
  [./u_upper_bound]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = upper
    bound_value = ${l}
  [../]
  [./u_lower_bound]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = lower
    bound_value = 0
  [../]
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options = &#x27;-snes_vi_monitor&#x27;
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type -snes_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic                 vinewtonrsls&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  active = &#x27;upper_violations lower_violations&#x27;
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]

[MultiApps]
  [./coarser]
    type = TransientMultiApp
    app_type = MooseTestApp
    execute_on = timestep_begin
    positions = &#x27;0 0 0&#x27;
    input_files = vi-coarser.i
  [../]
[]

[Transfers]
  [./mesh_function_begin]
    type = MultiAppMeshFunctionTransfer
    direction = from_multiapp
    multi_app = coarser
    source_variable = u
    variable = u
    execute_on = timestep_begin
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bc642637-4176-4e6b-9578-ce32e0daf351"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_fully_saturated.i</h4><pre class="moose-pre"><code class="language-text"># A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie kg/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# In the standard poromechanics scenario, the Biot Modulus is held
# fixed and the source has units 1/time.  Then the expected result
# is
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# In porous_flow, however, the source has units kg/s/m^3.  The ratios remain
# fixed:
# stress_xx/strain_zz = (bulk - 2*shear/3) = 1 (for the parameters used here)
# stress_zz/strain_zz = (bulk + 4*shear/3) = 4 (for the parameters used here)
# porepressure/strain_zz = 13.3333333 (for the parameters used here)
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t
# The relationship between the constant poroelastic source
# s (m^3/second/m^3) and the PorousFlow source, S (kg/second/m^3) is
# S = fluid_density * s = s * exp(porepressure/fluid_bulk)
#
# Finally, note that the volumetric strain has
# consistent_with_displaced_mesh = false
# which is needed when using the FullySaturated version of the Kernels
# in order to generate the above results
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowFullySaturatedMassTimeDerivative
    variable = porepressure
    coupling_type = HydroMechanical
    biot_coefficient = 0.3
  [../]
  [./source]
    type = BodyForce
    function = &#x27;0.1*exp(8.163265306*0.1*t/3.3333333333)&#x27;
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 3.3333333333
      density0 = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature_qp]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
    consistent_with_displaced_mesh = false
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = porepressure
  [../]
  [./simple_fluid_qp]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # the &quot;const&quot; is irrelevant here: all that uses Porosity is the BiotModulus, which just uses the initial value of porosity
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.3
    fluid_bulk_modulus = 3.3333333333
    solid_bulk_compliance = 0.5
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./stress_xx_over_strain]
    type = FunctionValuePostprocessor
    function = stress_xx_over_strain_fcn
    outputs = csv
  [../]
  [./stress_zz_over_strain]
    type = FunctionValuePostprocessor
    function = stress_zz_over_strain_fcn
    outputs = csv
  [../]
  [./p_over_strain]
    type = FunctionValuePostprocessor
    function = p_over_strain_fcn
    outputs = csv
  [../]
[]

[Functions]
  [./stress_xx_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_xx zdisp&#x27;
  [../]
  [./stress_zz_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_zz zdisp&#x27;
  [../]
  [./p_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;p0 zdisp&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined_fully_saturated
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7bcce78c-4f5c-4e28-9180-8692d9b8048a"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_1/brick1_template2.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick1_mesh.e
[]

[Problem]
  type = AugmentedLagrangianContactProblem
  maximum_lagrangian_update_iterations = 200
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_x
  [../]
  [./disp_x13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_y
  [../]
  [./disp_y13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_x8 disp_x13 disp_x16 disp_y5 disp_y8 disp_y13 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 5e+9
    al_penetration_tolerance = 1e-8
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5d0f9572-8513-4836-9099-6fb5c883a726"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="662193c9-5db9-476d-9ba3-259ab0242b19"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/pffltvd.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, employing PorousFlow Kernels and UserObjects, with superbee flux-limiter
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2bfae22e-803a-46f0-b0f4-0915d0d4ce46"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/fully_saturated_grav01b.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, constant and large fluid-bulk, constant viscosity, constant permeability
# fully saturated with fully-saturated Kernel
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowFullySaturatedDarcyBase
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1E3 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e3
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = fully_saturated_grav01b
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="196d6320-4ec1-4e70-ab90-0372fbf2e3c0"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/rsc02.i</h4><pre class="moose-pre"><code class="language-text"># RSC test with low-res time and spatial resolution
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 200
  ny = 1
  xmin = 0
  xmax = 10 # x is the depth variable, called zeta in RSC
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;3E-2 5E-1 8E-1&#x27;
    x = &#x27;0 1 5&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pwater poil&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureRSC
    oil_viscosity = 2E-3
    scale_ratio = 2E3
    shift = 10
  [../]
[]

[Modules]
  [./FluidProperties]
    [./water]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 10
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./oil]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 20
      thermal_expansion = 0
      viscosity = 2e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = pwater
    phase1_porepressure = poil
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./water]
    type = PorousFlowSingleComponentFluid
    fp = water
    phase = 0
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./oil]
    type = PorousFlowSingleComponentFluid
    fp = oil
    phase = 1
    compute_enthalpy = false
    compute_internal_energy = false
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_oil]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-5 0 0  0 1E-5 0  0 0 1E-5&#x27;
  [../]
[]

[Variables]
  [./pwater]
  [../]
  [./poil]
  [../]
[]

[ICs]
  [./water_init]
    type = ConstantIC
    variable = pwater
    value = 0
  [../]
  [./oil_init]
    type = ConstantIC
    variable = poil
    value = 15
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pwater
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = poil
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = poil
  [../]
[]


[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./SOil]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]


[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
  [./SOil]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 1
    variable = SOil
  [../]
[]


[BCs]
# we are pumping water into a system that has virtually incompressible fluids, hence the pressures rise enormously.  this adversely affects convergence because of almost-overflows and precision-loss problems.  The fixed things help keep pressures low and so prevent these awful behaviours.   the movement of the saturation front is the same regardless of the fixed things.
  active = &#x27;recharge fixedoil fixedwater&#x27;
  [./recharge]
    type = PorousFlowSink
    variable = pwater
    boundary = &#x27;left&#x27;
    flux_function = -1.0
  [../]
  [./fixedwater]
    type = DirichletBC
    variable = pwater
    boundary = &#x27;right&#x27;
    value = 0
  [../]
  [./fixedoil]
    type = DirichletBC
    variable = poil
    boundary = &#x27;right&#x27;
    value = 15
  [../]
[]



[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10000&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;7 0 0&#x27;
    sort_by = x
    num_points = 21
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 5
  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = rsc02
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = final
  [../]
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7e73ab1c-3d01-4adc-872b-e656612ccf3e"><div class="modal-content"><h4>modules/porous_flow/test/tests/infiltration_and_drainage/rd02.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 120
  ny = 1
  xmin = 0
  xmax = 6
  ymin = 0
  ymax = 0.05
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1 10 500 5000 50000&#x27;
    x = &#x27;0 10 100 1000 10000 500000&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = pressure
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.336
    alpha = 1.43e-4
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      viscosity = 1.01e-3
      density0 = 1000
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityVG
    m = 0.336
    seff_turnover = 0.99
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.33
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.295E-12 0 0  0 0.295E-12 0  0 0 0.295E-12&#x27;
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = 0.0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pressure
    gravity = &#x27;-10 0 0&#x27;
  [../]
[]

[AuxVariables]
  [./SWater]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./SWater]
    type = MaterialStdVectorAux
    property = PorousFlow_saturation_qp
    index = 0
    variable = SWater
  [../]
[]

[BCs]
  [./base]
    type = DirichletBC
    boundary = left
    value = 0.0
    variable = pressure
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-10      1E-10      10&#x27;
  [../]
[]

[VectorPostprocessors]
  [./swater]
    type = LineValueSampler
    variable = SWater
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;6 0 0&#x27;
    sort_by = x
    num_points = 121
    execute_on = timestep_end
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  petsc_options = &#x27;-snes_converged_reason&#x27;
  end_time = 345600

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = rd02
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
  [./along_line]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8e4acf08-c1b2-4578-b203-b2f95ae7f6ff"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/except4.i</h4><pre class="moose-pre"><code class="language-text"># checking for exception error messages on the edge smoothing
# here edge_smoother=5deg, which means the friction_angle must be &lt;= 35.747
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.52359878 # 30deg
    value_residual = 0.62831853 # 36deg
    rate = 3000.0
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 1
    mc_edge_smoother = 5
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = except4
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="393b82b5-d739-4ee6-9ce4-beac97a79b4a"><div class="modal-content"><h4>modules/phase_field/test/tests/conserved_noise/normal_masked.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmin = 0.0
  xmax = 10.0
  ymin = 0.0
  ymax = 10.0
  elem_type = QUAD4
[]

[Functions]
  [./mask_func]
    type = ParsedFunction
    value = &#x27;r:=sqrt((x-5)^2+(y-5)^2); if (r&lt;3, 1.0, 0.0)&#x27;
  [../]
[]

[Variables]
  [./c]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.0
  [../]
[]

[Kernels]
  [./time]
    type = TimeDerivative
    variable = c
  [../]

  [./conserved_langevin]
    type = ConservedLangevinNoise
    amplitude = 0.5
    variable = c
    noise = normal_masked_noise
  []
[]

[BCs]
  [./Periodic]
    [./all]
      variable = c
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./mask_material]
    type = GenericFunctionMaterial
    prop_names  = &#x27;mask_prop&#x27;
    prop_values = &#x27;mask_func&#x27;
  [../]
[]

[UserObjects]
  [./normal_masked_noise]
    type = ConservedMaskedNormalNoise
    mask = mask_prop
  [../]
[]

[Postprocessors]
  [./total_c]
    type = ElementIntegralVariablePostprocessor
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = &#x27;BDF2&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  l_max_its = 30
  l_tol = 1.0e-3

  nl_max_its = 30
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  dt = 10.0
  num_steps = 4
[]

[Outputs]
  file_base = normal_masked
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7bef21b6-e990-4465-bb05-d1b1ff324077"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/vectorpostprocessors/multiple_stochastic_results/master.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
  auto_create_executioner = false
[]

[Distributions]
  [uniform_left]
    type = Uniform
    lower_bound = 0
    upper_bound = 0.5
  []
  [uniform_right]
    type = Uniform
    lower_bound = 1
    upper_bound = 2
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    distributions = &#x27;uniform_left uniform_right&#x27;
    num_rows = 3
    seed = 2011
  []
  [resample]
    type = MonteCarlo
    distributions = &#x27;uniform_left uniform_right&#x27;
    num_rows = 3
    seed = 2013
  []
  [sobol]
    type = Sobol
    sampler_a = sample
    sampler_b = resample
  []
  [mc]
    type = MonteCarlo
    num_rows = 5
    distributions = &#x27;uniform_left uniform_right&#x27;
    execute_on = INITIAL # create random numbers on initial and use them for each timestep
  []
[]

[MultiApps]
  [sobol]
    type = SamplerTransientMultiApp
    input_files = sub.i
    sampler = sobol
  []
  [mc]
    type = SamplerTransientMultiApp
    input_files = sub.i
    sampler = mc
  []
[]

[Transfers]
  [sobol]
    type = SamplerParameterTransfer
    multi_app = sobol
    sampler = sobol
    parameters = &#x27;BCs/left/value BCs/right/value&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [sobol_data]
    type = SamplerPostprocessorTransfer
    multi_app = sobol
    sampler = sobol
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []

  [mc]
    type = SamplerParameterTransfer
    multi_app = mc
    sampler = mc
    parameters = &#x27;BCs/left/value BCs/right/value&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [mc_data]
    type = SamplerPostprocessorTransfer
    multi_app = mc
    sampler = mc
    to_vector_postprocessor = storage
    from_postprocessor = &quot;avg max&quot;
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
[]

[Executioner]
  type = Transient
  num_steps = 1
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="88c4d2b9-e30f-4e48-a856-14d4bc539179"><div class="modal-content"><h4>test/tests/executioners/arbitrary_execute_flag/arbitrary_execute.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./arbitrary]
    type = TestPostprocessor
    test_type = custom_execute_on
    execute_on = &#x27;INITIAL JUST_GO&#x27;
  [../]
[]

[Executioner]
  type = TestSteady
  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8acf5ab3-1670-44f1-8c13-e9e32f951072"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad_moment.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
  [S_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
[]

[Samplers]
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [pc_moments]
    type = PolynomialChaosStatistics
    pc_name = poly_chaos
    compute = &#x27;mean stddev skewness kurtosis&#x27;
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="867cb49a-7368-4963-90cd-379a14ad60d4"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_1D_adaptivity.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
# 1D version with mesh adaptivity
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 1
[]

[Adaptivity]
  initial_steps = 1
  initial_marker = tracer_marker
  marker = tracer_marker
  max_h_level = 1
  [./Markers]
    [./tracer_marker]
      type = ValueRangeMarker
      variable = tracer
      lower_bound = 0.02
      upper_bound = 0.98
    [../]
  [../]
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0d484fc8-c3dd-4345-b59c-f5f3d1fb05c1"><div class="modal-content"><h4>modules/navier_stokes/test/tests/ins/mms/supg/supg_adv_dominated_mms.i</h4><pre class="moose-pre"><code class="language-text">mu=1.5e-2
rho=2.5

[GlobalParams]
  gravity = &#x27;0 0 0&#x27;
  supg = true
  convective_term = true
  integrate_p_by_parts = false
  transient_term = true
  laplace = true
  u = vel_x
  v = vel_y
  p = p
  alpha = 1e0
  order = SECOND
  family = LAGRANGE
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 1.0
    ymin = 0
    ymax = 1.0
    elem_type = QUAD9
    nx = 4
    ny = 4
  []
  [./corner_node]
    type = ExtraNodesetGenerator
    new_boundary = &#x27;pinned_node&#x27;
    nodes = &#x27;0&#x27;
    input = gen
  [../]
[]

[Variables]
  [./vel_x]
  [../]

  [./vel_y]
  [../]

  [./p]
    order = FIRST
  [../]
[]

[Kernels]
  # mass
  [./mass]
    type = INSMass
    variable = p
  [../]

  [./x_time]
    type = INSMomentumTimeDerivative
    variable = vel_x
  [../]
  [./y_time]
    type = INSMomentumTimeDerivative
    variable = vel_y
  [../]

  # x-momentum, space
  [./x_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_x
    component = 0
    forcing_func = vel_x_source_func
  [../]

  # y-momentum, space
  [./y_momentum_space]
    type = INSMomentumLaplaceForm
    variable = vel_y
    component = 1
    forcing_func = vel_y_source_func
  [../]

  [./p_source]
    type = BodyForce
    function = p_source_func
    variable = p
  [../]
[]

[BCs]
  [./vel_x]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_x_func
    variable = vel_x
  [../]
  [./vel_y]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = vel_y_func
    variable = vel_y
  [../]
  [./p]
    type = FunctionDirichletBC
    boundary = &#x27;left right top bottom&#x27;
    function = p_func
    variable = p
  [../]
[]

[Functions]
  [./vel_x_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.028*pi^2*x^2*sin(0.2*pi*x*y) - 0.028*pi^2*y^2*sin(0.2*pi*x*y) - 0.1*pi^2*sin(0.5*pi*x) - 0.4*pi^2*sin(pi*y)) + ${rho}*(0.14*pi*x*cos(0.2*pi*x*y) + 0.4*pi*cos(pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*y*cos(0.2*pi*x*y) + 0.25*pi*cos(0.5*pi*x)&#x27;
  [../]
  [./vel_y_source_func]
    type = ParsedFunction
    value = &#x27;-${mu}*(-0.018*pi^2*x^2*sin(0.3*pi*x*y) - 0.018*pi^2*y^2*sin(0.3*pi*x*y) - 0.384*pi^2*sin(0.8*pi*x) - 0.027*pi^2*sin(0.3*pi*y)) + ${rho}*(0.06*pi*x*cos(0.3*pi*x*y) + 0.09*pi*cos(0.3*pi*y))*(0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3) + ${rho}*(0.06*pi*y*cos(0.3*pi*x*y) + 0.48*pi*cos(0.8*pi*x))*(0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5) + 0.1*pi*x*cos(0.2*pi*x*y) + 0.3*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./p_source_func]
    type = ParsedFunction
    value = &#x27;-0.06*pi*x*cos(0.3*pi*x*y) - 0.14*pi*y*cos(0.2*pi*x*y) - 0.2*pi*cos(0.5*pi*x) - 0.09*pi*cos(0.3*pi*y)&#x27;
  [../]
  [./vel_x_func]
    type = ParsedFunction
    value = &#x27;0.4*sin(0.5*pi*x) + 0.4*sin(pi*y) + 0.7*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vel_y_func]
    type = ParsedFunction
    value = &#x27;0.6*sin(0.8*pi*x) + 0.3*sin(0.3*pi*y) + 0.2*sin(0.3*pi*x*y) + 0.3&#x27;
  [../]
  [./p_func]
    type = ParsedFunction
    value = &#x27;0.5*sin(0.5*pi*x) + 1.0*sin(0.3*pi*y) + 0.5*sin(0.2*pi*x*y) + 0.5&#x27;
  [../]
  [./vxx_func]
    type = ParsedFunction
    value = &#x27;0.14*pi*y*cos(0.2*pi*x*y) + 0.2*pi*cos(0.5*pi*x)&#x27;
  [../]
[]

[Materials]
  [./const]
    type = GenericConstantMaterial
    block = 0
    prop_names = &#x27;rho mu&#x27;
    prop_values = &#x27;${rho}  ${mu}&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
    solve_type = &#x27;NEWTON&#x27;
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type&#x27;
  petsc_options_value = &#x27;lu NONZERO&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-14
  nl_max_its = 10
  l_tol = 1e-6
  l_max_its = 10
  [./TimeStepper]
    dt = .05
    type = IterationAdaptiveDT
    cutback_factor = 0.4
    growth_factor = 1.2
    optimal_iterations = 20
  [../]
[]

[Outputs]
  execute_on = &#x27;final&#x27;
  [./exodus]
    type = Exodus
  [../]
  [./csv]
    type = CSV
  [../]
[]

[Postprocessors]
  [./L2vel_x]
    type = ElementL2Error
    variable = vel_x
    function = vel_x_func
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vel_y]
    variable = vel_y
    function = vel_y_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2p]
    variable = p
    function = p_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
  [./L2vxx]
    variable = vxx
    function = vxx_func
    type = ElementL2Error
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[AuxVariables]
  [./vxx]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[AuxKernels]
  [./vxx]
    type = VariableGradientComponent
    component = x
    variable = vxx
    gradient_variable = vel_x
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fedd61ec-63e0-4daa-b29e-fb9ef50cbe20"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_3/brick3_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick3_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
  [./tang_force_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_x
  [../]
  [./disp_x33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_x
  [../]
  [./disp_y28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_y
  [../]
  [./disp_y33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  file_base = brick3_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = brick3_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x28 disp_y28 disp_x33 disp_y33 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+6
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="54930cdd-e1a8-4160-b379-ebf690d67071"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2d_quad.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
  [S_dist]
    type = Uniform
    lower_bound = 2.5
    upper_bound = 7.5
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = timestep_end
  []
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [pc_coeff]
    type = PolynomialChaosData
    pc_name = poly_chaos
    execute_on = final
  []
  [pc_samp]
    type = EvaluateSurrogate
    model = poly_chaos
    sampler = sample
    output_samples = true
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="129352c2-4c2d-401d-93f4-5972a2185fd7"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/random_planar.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 1250
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1250
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./yield_fcn_at_zero]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;yield_fcn_at_zero&#x27;
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 1000
    value_residual = 100
    internal_limit = 4
  [../]
  [./phi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.8
    value_residual = 0.3
    internal_limit = 2
  [../]
  [./psi]
    type = TensorMechanicsHardeningConstant
    value = 15
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    yield_function_tolerance = 1E-3
    shift = 1E-10
    internal_constraint_tolerance = 1E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-10
    plastic_models = mc
    min_stepsize = 1
    max_stepsize_for_dumb = 1
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_planar
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="97205a90-73db-49ee-803b-7fb4a7032b6f"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform9.i</h4><pre class="moose-pre"><code class="language-text"># apply a shear deformation to observe shear hardening.
# Shear gives q_trial = 2*Sqrt(20), p_trial=0
# The solution given by MOOSE correctly satisfies the equations
# 0 = f = q + p*tan(phi) - coh
# 0 = p - p_trial + ga * Ezzzz * dg/dp
# 0 = q - q_trial + ga * Ezxzx * dg/dq
# Here dg/dp = tan(psi), and dg/dq = 1
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz plastic_strain_xx plastic_strain_xy plastic_strain_xz plastic_strain_yy plastic_strain_yz plastic_strain_zz strain_xx strain_xy strain_xz strain_yy strain_yz strain_zz&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;t&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;2*t&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;0&#x27;
  [../]
[]


[AuxVariables]
  [./f_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_compressive]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ls]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f_shear]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f_shear
  [../]
  [./f_tensile]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f_tensile
  [../]
  [./f_compressive]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = intnl_tensile
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./ls]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = ls
  [../]
[]

[Postprocessors]
  [./stress_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./stress_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./stress_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./stress_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./strainp_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xx
  [../]
  [./strainp_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xy
  [../]
  [./strainp_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xz
  [../]
  [./strainp_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yy
  [../]
  [./strainp_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yz
  [../]
  [./strainp_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_zz
  [../]
  [./straint_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xx
  [../]
  [./straint_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xy
  [../]
  [./straint_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xz
  [../]
  [./straint_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yy
  [../]
  [./straint_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yz
  [../]
  [./straint_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_zz
  [../]
  [./f_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_shear
  [../]
  [./f_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_tensile
  [../]
  [./f_compressive]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_tensile
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./ls]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = ls
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 2
    rate = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0
    value_residual = 0.5
    rate = 2
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.1
    value_residual = 0.05
    rate = 1
  [../]
  [./t_strength]
    type = TensorMechanicsHardeningConstant
    value = 1E8
  [../]
  [./c_strength]
    type = TensorMechanicsHardeningConstant
    value = 1E8
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;4 4&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = stress
    perform_finite_strain_rotations = false
  [../]
  [./stress]
    type = CappedWeakPlaneStressUpdate
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tensile_strength = t_strength
    compressive_strength = c_strength
    max_NR_iterations = 20
    tip_smoother = 0
    smoothing_tol = 1
    yield_function_tol = 1E-3
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform9
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2f55482e-f1c5-4cb5-a88f-09f488c6f397"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_inner_edge.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = inner_edge
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 8
    smoothing_tol = 1E-7
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_inner_edge
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e141d2c3-d5c9-4cfc-acdc-8a61716dd898"><div class="modal-content"><h4>modules/combined/test/tests/poro_mechanics/borehole_highres.i</h4><pre class="moose-pre"><code class="language-text"># Poroelastic response of a borehole.
#
# HIGHRES VERSION: this version gives good agreement with the analytical solution, but it takes a while so is a &quot;heavy&quot; test
#
# A fully-saturated medium contains a fluid with a homogeneous porepressure,
# but an anisitropic insitu stress.  A infinitely-long borehole aligned with
# the $$z$$ axis is instanteously excavated.  The borehole boundary is
# stress-free and allowed to freely drain.  This problem is analysed using
# plane-strain conditions (no $$z$$ displacement).
#
# The solution in Laplace space is found in E Detournay and AHD Cheng &quot;Poroelastic response of a borehole in a non-hydrostatic stress field&quot;.  International Journal of Rock Mechanics and Mining Sciences and Geomechanics Abstracts 25 (1988) 171-182.  In the small-time limit, the Laplace transforms may be performed.  There is one typo in the paper.  Equation (A4)&#x27;s final term should be -(a/r)\sqrt(4ct/(a^2\pi)), and not +(a/r)\sqrt(4ct/(a^2\pi)).
#
# Because realistic parameters are chosen (below),
# the residual for porepressure is much smaller than
# the residuals for the displacements.  Therefore the
# scaling parameter is chosen.  Also note that the
# insitu stresses are effective stresses, not total
# stresses, but the solution in the above paper is
# expressed in terms of total stresses.
#
# Here are the problem&#x27;s parameters, and their values:
# Borehole radius.  a = 1
# Rock&#x27;s Lame lambda.  la = 0.5E9
# Rock&#x27;s Lame mu, which is also the Rock&#x27;s shear modulus.  mu = G = 1.5E9
# Rock bulk modulus.  K = la + 2*mu/3 = 1.5E9
# Drained Poisson ratio.  nu = (3K - 2G)/(6K + 2G) = 0.125
# Rock bulk compliance.  1/K = 0.66666666E-9
# Fluid bulk modulus.  Kf = 0.7171315E9
# Fluid bulk compliance.  1/Kf = 1.39444444E-9
# Rock initial porosity.  phi0 = 0.3
# Biot coefficient.  alpha = 0.65
# Biot modulus.  M = 1/(phi0/Kf + (alpha - phi0)(1 - alpha)/K) = 2E9
# Undrained bulk modulus. Ku = K + alpha^2*M = 2.345E9
# Undrained Poisson ratio.  nuu = (3Ku - 2G)/(6Ku + 2G) = 0.2364
# Skempton coefficient.  B = alpha*M/Ku = 0.554
# Fluid mobility (rock permeability/fluid viscosity).  k = 1E-12

[Mesh]
  type = FileMesh
  file = borehole_highres_input.e
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  porepressure = porepressure
  block = 1
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
    scaling = 1E9  # Notice the scaling, to make porepressure&#x27;s kernels roughly of same magnitude as disp&#x27;s kernels
  [../]
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[ICs]
  [./initial_p]
    type = ConstantIC
    variable = porepressure
    value = 1E6
  [../]
[]

[BCs]
  [./fixed_outer_x]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = outer
  [../]
  [./fixed_outer_y]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = outer
  [../]
  [./plane_strain]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;zmin zmax&#x27;
  [../]
  [./borehole_wall]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = bh_wall
  [../]
[]



[AuxVariables]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tot_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./tot_yy]
    type = ParsedAux
    args = &#x27;stress_yy porepressure&#x27;
    execute_on = timestep_end
    variable = tot_yy
    function = &#x27;stress_yy-0.65*porepressure&#x27;
  [../]
[]



[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PoroMechanicsCoupling
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PoroMechanicsCoupling
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PoroMechanicsCoupling
    variable = disp_z
    component = 2
  [../]
  [./poro_timederiv]
    type = PoroFullSatTimeDerivative
    variable = porepressure
  [../]
  [./darcy_flow]
    type = CoefDiffusion
    variable = porepressure
    coef = 1E-12
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;0.5E9 1.5E9&#x27;
    # bulk modulus is lambda + 2*mu/3 = 0.5 + 2*1.5/3 = 1.5E9
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeFiniteStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;-1.35E6 0 0  0 -3.35E6 0  0 0 0&#x27; # remember this is the effective stress
    eigenstrain_name = ini_stress
  [../]
  [./no_plasticity]
    type = ComputeFiniteStrainElasticStress
  [../]
  [./poro_material]
    type = PoroFullSatMaterial
    porosity0 = 0.3
    biot_coefficient = 0.65
    solid_bulk_compliance = 0.6666666666667E-9
    fluid_bulk_compliance = 1.3944444444444E-9
    constant_porosity = false
  [../]
[]

[Postprocessors]
  [./p00]
    type = PointValue
    variable = porepressure
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_p
  [../]
  [./p01]
    type = PointValue
    variable = porepressure
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_p
  [../]
  [./p02]
    type = PointValue
    variable = porepressure
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_p
  [../]
  [./p03]
    type = PointValue
    variable = porepressure
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_p
  [../]
  [./p04]
    type = PointValue
    variable = porepressure
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_p
  [../]
  [./p05]
    type = PointValue
    variable = porepressure
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_p
  [../]
  [./p06]
    type = PointValue
    variable = porepressure
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_p
  [../]
  [./p07]
    type = PointValue
    variable = porepressure
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_p
  [../]
  [./p08]
    type = PointValue
    variable = porepressure
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_p
  [../]
  [./p09]
    type = PointValue
    variable = porepressure
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_p
  [../]
  [./p10]
    type = PointValue
    variable = porepressure
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_p
  [../]
  [./p11]
    type = PointValue
    variable = porepressure
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_p
  [../]
  [./p12]
    type = PointValue
    variable = porepressure
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_p
  [../]
  [./p13]
    type = PointValue
    variable = porepressure
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_p
  [../]
  [./p14]
    type = PointValue
    variable = porepressure
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_p
  [../]
  [./p15]
    type = PointValue
    variable = porepressure
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_p
  [../]
  [./p16]
    type = PointValue
    variable = porepressure
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_p
  [../]
  [./p17]
    type = PointValue
    variable = porepressure
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_p
  [../]
  [./p18]
    type = PointValue
    variable = porepressure
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_p
  [../]
  [./p19]
    type = PointValue
    variable = porepressure
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_p
  [../]
  [./p20]
    type = PointValue
    variable = porepressure
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_p
  [../]
  [./p21]
    type = PointValue
    variable = porepressure
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_p
  [../]
  [./p22]
    type = PointValue
    variable = porepressure
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_p
  [../]
  [./p23]
    type = PointValue
    variable = porepressure
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_p
  [../]
  [./p24]
    type = PointValue
    variable = porepressure
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_p
  [../]
  [./p25]
    type = PointValue
    variable = porepressure
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_p
  [../]

  [./s00]
    type = PointValue
    variable = disp_x
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_s
  [../]
  [./s01]
    type = PointValue
    variable = disp_x
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_s
  [../]
  [./s02]
    type = PointValue
    variable = disp_x
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_s
  [../]
  [./s03]
    type = PointValue
    variable = disp_x
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_s
  [../]
  [./s04]
    type = PointValue
    variable = disp_x
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_s
  [../]
  [./s05]
    type = PointValue
    variable = disp_x
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_s
  [../]
  [./s06]
    type = PointValue
    variable = disp_x
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_s
  [../]
  [./s07]
    type = PointValue
    variable = disp_x
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_s
  [../]
  [./s08]
    type = PointValue
    variable = disp_x
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_s
  [../]
  [./s09]
    type = PointValue
    variable = disp_x
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_s
  [../]
  [./s10]
    type = PointValue
    variable = disp_x
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_s
  [../]
  [./s11]
    type = PointValue
    variable = disp_x
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_s
  [../]
  [./s12]
    type = PointValue
    variable = disp_x
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_s
  [../]
  [./s13]
    type = PointValue
    variable = disp_x
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_s
  [../]
  [./s14]
    type = PointValue
    variable = disp_x
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_s
  [../]
  [./s15]
    type = PointValue
    variable = disp_x
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_s
  [../]
  [./s16]
    type = PointValue
    variable = disp_x
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_s
  [../]
  [./s17]
    type = PointValue
    variable = disp_x
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_s
  [../]
  [./s18]
    type = PointValue
    variable = disp_x
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_s
  [../]
  [./s19]
    type = PointValue
    variable = disp_x
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_s
  [../]
  [./s20]
    type = PointValue
    variable = disp_x
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_s
  [../]
  [./s21]
    type = PointValue
    variable = disp_x
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_s
  [../]
  [./s22]
    type = PointValue
    variable = disp_x
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_s
  [../]
  [./s23]
    type = PointValue
    variable = disp_x
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_s
  [../]
  [./s24]
    type = PointValue
    variable = disp_x
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_s
  [../]
  [./s25]
    type = PointValue
    variable = disp_x
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_s
  [../]

  [./t00]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.00 0 0&#x27;
    outputs = csv_t
  [../]
  [./t01]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.01 0 0&#x27;
    outputs = csv_t
  [../]
  [./t02]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.02 0 0&#x27;
    outputs = csv_t
  [../]
  [./t03]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.03 0 0&#x27;
    outputs = csv_t
  [../]
  [./t04]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.04 0 0&#x27;
    outputs = csv_t
  [../]
  [./t05]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.05 0 0&#x27;
    outputs = csv_t
  [../]
  [./t06]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.06 0 0&#x27;
    outputs = csv_t
  [../]
  [./t07]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.07 0 0&#x27;
    outputs = csv_t
  [../]
  [./t08]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.08 0 0&#x27;
    outputs = csv_t
  [../]
  [./t09]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.09 0 0&#x27;
    outputs = csv_t
  [../]
  [./t10]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.10 0 0&#x27;
    outputs = csv_t
  [../]
  [./t11]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.11 0 0&#x27;
    outputs = csv_t
  [../]
  [./t12]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.12 0 0&#x27;
    outputs = csv_t
  [../]
  [./t13]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.13 0 0&#x27;
    outputs = csv_t
  [../]
  [./t14]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.14 0 0&#x27;
    outputs = csv_t
  [../]
  [./t15]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.15 0 0&#x27;
    outputs = csv_t
  [../]
  [./t16]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.16 0 0&#x27;
    outputs = csv_t
  [../]
  [./t17]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.17 0 0&#x27;
    outputs = csv_t
  [../]
  [./t18]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.18 0 0&#x27;
    outputs = csv_t
  [../]
  [./t19]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.19 0 0&#x27;
    outputs = csv_t
  [../]
  [./t20]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.20 0 0&#x27;
    outputs = csv_t
  [../]
  [./t21]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.21 0 0&#x27;
    outputs = csv_t
  [../]
  [./t22]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.22 0 0&#x27;
    outputs = csv_t
  [../]
  [./t23]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.23 0 0&#x27;
    outputs = csv_t
  [../]
  [./t24]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.24 0 0&#x27;
    outputs = csv_t
  [../]
  [./t25]
    type = PointValue
    variable = tot_yy
    point = &#x27;1.25 0 0&#x27;
    outputs = csv_t
  [../]

  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = 2*t
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_monitor -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -ksp_max_it -sub_pc_type -sub_pc_factor_shift_type&#x27;
    petsc_options_value = &#x27;gmres asm 1E0 1E-10 200 500 lu NONZERO&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 0.3
  dt = 0.1
  #[./TimeStepper]
  #  type = PostprocessorDT
  #  postprocessor = dt
  #  dt = 0.003
  #[../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = borehole_highres
  exodus = true
  sync_times = &#x27;0.003 0.3&#x27;
  [./csv_p]
    file_base = borehole_highres_p
    type = CSV
  [../]
  [./csv_s]
    file_base = borehole_highres_s
    type = CSV
  [../]
  [./csv_t]
    file_base = borehole_highres_t
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1e040f2d-2c2d-4613-807e-f078ccfe3bec"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/j2_plasticity/hard2.i</h4><pre class="moose-pre"><code class="language-text"># UserObject J2 test, with hardening, but with rate=1E6
# apply uniform compression in x direction to give
# trial stress_xx = 5, so sqrt(3*J2) = 5
# with zero Poisson&#x27;s ratio, lambda_mu = 1E6, and strength=2, strength_residual=1,
# the equations that we need to solve are:
#
# stress_yy = stress_zz  [because of the symmetry of the problem: to keep Lode angle constant]
# stress_xx - stress_yy = 1 + (2 - 1)*exp(-0.5*(1E6*q)^2)   [yield_fcn = 0]
# stress_xx + stress_yy + stress_zz = 5   [mean stress constant]
# q = gamma
# stress_xx = 1E6*2*gamma*(stress_xx - 5/3)*sqrt(3)/2/sqrt(J2), where sqrt(J2) = (1 + (2 - 1)*exp(-0.5*(1E6*q)^2))/Sqrt(3)
# so RHS = 1E6*2*gamma*(stress_xx - 5/3)*3/2/(stress_xx - stress_yy)
#
# stress_xx = 2.672
# stress_yy = 1.164
# q = 1.164E-6

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;2.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningGaussian
    value_0 = 2
    value_residual = 1
    rate = 1E12
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = str
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = j2
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = hard2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="48d44a80-f280-4fdf-91ca-066c3fd01b3a"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig8.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 8 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Two growing particles with differnet anisotropic Eigenstrains
#

[Mesh]
  [./gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 80
    ny = 40
    xmin = -20
    xmax = 20
    ymin = 0
    ymax = 20
    elem_type = QUAD4
  [../]
  [./cnode]
    type = ExtraNodesetGenerator
    input = gen
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
    tolerance = 0.1
  [../]
[]

[GlobalParams]
  # CahnHilliard needs the third derivatives
  derivative_order = 3
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
  int_width = 1
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    additional_free_energy = cross_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
  [./cross_terms]
    type = CrossTermGradientFreeEnergy
    variable = cross_energy
    interfacial_vars = &#x27;eta1 eta2 eta3&#x27;
    kappa_names = &#x27;kappa11 kappa12 kappa13
                   kappa21 kappa22 kappa23
                   kappa31 kappa32 kappa33&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

# particle x positions and radius
P1X=8
P2X=-4
PR=2

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = SpecifiedSmoothCircleIC
      x_positions = &#x27;${P1X} ${P2X}&#x27;
      y_positions = &#x27;0 0&#x27;
      z_positions = &#x27;0 0&#x27;
      radii = &#x27;${PR} ${PR}&#x27;
      outvalue = 0.5
      invalue = 0.9
    [../]
  [../]
  [./w]
  [../]

  # Order parameter for the Matrix
  [./eta1]
    [./InitialCondition]
      type = SpecifiedSmoothCircleIC
      x_positions = &#x27;${P1X} ${P2X}&#x27;
      y_positions = &#x27;0 0&#x27;
      z_positions = &#x27;0 0&#x27;
      radii = &#x27;${PR} ${PR}&#x27;
      outvalue = 1.0
      invalue = 0.0
    [../]
  [../]
  # Order parameters for the 2 different inclusion orientations
  [./eta2]
    [./InitialCondition]
      type = SmoothCircleIC
      x1 = ${P2X}
      y1 = 0
      radius = ${PR}
      invalue = 1.0
      outvalue = 0.0
    [../]
  [../]
  [./eta3]
    [./InitialCondition]
      type = SmoothCircleIC
      x1 = ${P1X}
      y1 = 0
      radius = ${PR}
      invalue = 1.0
      outvalue = 0.0
    [../]
  [../]

  # Lagrange-multiplier
  [./lambda]
    initial_condition = 1.0
  [../]
[]

[Modules]
  [./TensorMechanics]
    [./Master]
      [./all]
        add_variables = true
        strain = SMALL
        eigenstrain_names = eigenstrain
      [../]
    [../]
  [../]
[]

[Kernels]
  # Split Cahn-Hilliard kernels
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    args = &#x27;eta1 eta2 eta3&#x27;
    kappa_name = kappa_c
    w = w
  [../]
  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta1
    args = &#x27;eta2 eta3 c&#x27;
    mob_name = L1
    f_name = F
  [../]
  [./ACInterface1]
    type = ACMultiInterface
    variable = eta1
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L1
    kappa_names = &#x27;kappa11 kappa12 kappa13&#x27;
  [../]
  [./lagrange1]
    type = SwitchingFunctionConstraintEta
    variable = eta1
    h_name   = h1
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 2
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
  [./ACBulk2]
    type = AllenCahn
    variable = eta2
    args = &#x27;eta1 eta3 c&#x27;
    mob_name = L2
    f_name = F
  [../]
  [./ACInterface2]
    type = ACMultiInterface
    variable = eta2
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L2
    kappa_names = &#x27;kappa21 kappa22 kappa23&#x27;
  [../]
  [./lagrange2]
    type = SwitchingFunctionConstraintEta
    variable = eta2
    h_name   = h2
    lambda = lambda
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 3
  [./deta3dt]
    type = TimeDerivative
    variable = eta3
  [../]
  [./ACBulk3]
    type = AllenCahn
    variable = eta3
    args = &#x27;eta1 eta2 c&#x27;
    mob_name = L3
    f_name = F
  [../]
  [./ACInterface3]
    type = ACMultiInterface
    variable = eta3
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L3
    kappa_names = &#x27;kappa31 kappa32 kappa33&#x27;
  [../]
  [./lagrange3]
    type = SwitchingFunctionConstraintEta
    variable = eta3
    h_name   = h3
    lambda = lambda
  [../]

  # Lagrange-multiplier constraint kernel for lambda
  [./lagrange]
    type = SwitchingFunctionConstraintLagrange
    variable = lambda
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
    epsilon = 1e-6
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = 0
    prop_names  = &#x27;M   kappa_c  L1 L2 L3  kappa11 kappa12 kappa13 kappa21 kappa22 kappa23 kappa31 kappa32 kappa33&#x27;
    prop_values = &#x27;0.2 0.5      1  1  1   2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00    2.00   &#x27;
  [../]

  # We use this to output the level of constraint enforcement
  # ideally it should be 0 everywhere, if the constraint is fully enforced
  [./etasummat]
    type = ParsedMaterial
    f_name = etasum
    args = &#x27;eta1 eta2 eta3&#x27;
    material_property_names = &#x27;h1 h2 h3&#x27;
    function = &#x27;h1+h2+h3-1&#x27;
    outputs = exodus
  [../]

  # This parsed material creates a single property for visualization purposes.
  # It will be 0 for phase 1, -1 for phase 2, and 1 for phase 3
  [./phasemap]
    type = ParsedMaterial
    f_name = phase
    args = &#x27;eta2 eta3&#x27;
    function = &#x27;if(eta3&gt;0.5,1,0)-if(eta2&gt;0.5,1,0)&#x27;
    outputs = exodus
  [../]

  # global mechanical properties
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;400 400&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # eigenstrain
  [./eigenstrain_2]
    type = GenericConstantRankTwoTensor
    tensor_name = s2
    tensor_values = &#x27;0 -0.05 0  0 0 0&#x27;
  [../]
  [./eigenstrain_3]
    type = GenericConstantRankTwoTensor
    tensor_name = s3
    tensor_values =  &#x27;-0.05 0 0  0 0 0&#x27;
  [../]
  [./eigenstrain]
    type = CompositeEigenstrain
    weights = &#x27;h2 h3&#x27;
    tensors = &#x27;s2 s3&#x27;
    args = &#x27;eta2 eta3&#x27;
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching1]
    type = SwitchingFunctionMaterial
    function_name = h1
    eta = eta1
    h_order = SIMPLE
  [../]
  [./switching2]
    type = SwitchingFunctionMaterial
    function_name = h2
    eta = eta2
    h_order = SIMPLE
  [../]
  [./switching3]
    type = SwitchingFunctionMaterial
    function_name = h3
    eta = eta3
    h_order = SIMPLE
  [../]

  [./barrier]
    type = MultiBarrierFunctionMaterial
    etas = &#x27;eta1 eta2 eta3&#x27;
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;4*c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(c-0.9)^2-0.4&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_3]
    type = DerivativeParsedMaterial
    f_name = Fc3
    function = &#x27;(c-0.9)^2-0.5&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global chemical free energy
  [./chemical_free_energy]
    type = DerivativeMultiPhaseMaterial
    f_name = Fc
    fi_names = &#x27;Fc1  Fc2  Fc3&#x27;
    hi_names = &#x27;h1  h2  h3&#x27;
    etas     = &#x27;eta1 eta2 eta3&#x27;
    args = &#x27;c&#x27;
    W = 3
  [../]

  # global elastic free energy
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;eta2 eta3&#x27;
    outputs = exodus
    output_properties = Fe
    derivative_order = 2
  [../]

  # Penalize phase 2 and 3 coexistence
  [./multi_phase_penalty]
    type = DerivativeParsedMaterial
    f_name = Fp
    function = &#x27;50*(eta2*eta3)^2&#x27;
    args = &#x27;eta2 eta3&#x27;
    derivative_order = 2
    outputs = exodus
    output_properties = Fp
  [../]

  # free energy
  [./free_energy]
    type = DerivativeSumMaterial
    f_name = F
    sum_materials = &#x27;Fc Fe Fp&#x27;
    args = &#x27;c eta1 eta2 eta3&#x27;
    derivative_order = 2
  [../]
[]

[BCs]
  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = bottom
    variable = disp_y
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu&#x27;

  l_max_its = 30
  nl_max_its = 10
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10
  start_time = 0.0
  end_time = 12.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 8
    iteration_window = 1
    dt = 0.01
  [../]
[]

[Outputs]
  print_linear_residuals = false
  execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]

[Debug]
  # show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c084afb1-3c9b-47a0-a354-66152230a5df"><div class="modal-content"><h4>test/tests/outputs/csv/csv_align.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[AuxVariables]
  [./aux0]
    order = SECOND
    family = SCALAR
  [../]
  [./aux1]
    family = SCALAR
    initial_condition = 5
  [../]
  [./aux2]
    family = SCALAR
    initial_condition = 10
  [../]
[]

[Kernels]
  [./diff_u]
    type = Diffusion
    variable = u
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./right_u]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
  [./left_u]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]

[]

[Postprocessors]
  [./num_vars]
    type = NumVars
    system = &#x27;NL&#x27;
  [../]
  [./num_aux]
    type = NumVars
    system = &#x27;AUX&#x27;
  [../]
  [./norm]
    type = ElementL2Norm
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  dt = 0.1
  num_steps = 4
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./out]
    type = CSV
    align = true
    delimiter = &#x27;, &#x27;
    sync_times = &#x27;0.123456789123412 0.15 0.2&#x27;
    precision = 8
  [../]
[]

[ICs]
  [./aux0_IC]
    variable = aux0
    values = &#x27;12 13&#x27;
    type = ScalarComponentIC
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5615e22f-1e14-4daa-b124-0141d6e860c4"><div class="modal-content"><h4>test/tests/partitioners/petsc_partitioner/petsc_partitioner.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  [Partitioner]
    type = PetscExternalPartitioner
    part_package = parmetis
  []
  parallel_type = distributed
  # Need a fine enough mesh to have good partition
  uniform_refine = 1
[]

[Variables]
  [u]
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = &#x27;left&#x27;
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = &#x27;right&#x27;
    value = 1
  []
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[AuxVariables]
  [pid]
    family = MONOMIAL
    order = CONSTANT
  []
  [npid]
    family = Lagrange
    order = first
  []
[]

[AuxKernels]
  [pid_aux]
    type = ProcessorIDAux
    variable = pid
    execute_on = &#x27;INITIAL&#x27;
  []
  [npid_aux]
    type = ProcessorIDAux
    variable = npid
    execute_on = &#x27;INITIAL&#x27;
  []
[]

[Postprocessors]
  [sum_sides]
    type = StatVector
    stat = sum
    object = nl_wb_element
    vector = num_partition_sides
  []
  [min_elems]
    type = StatVector
    stat = min
    object = nl_wb_element
    vector = num_elems
  []
  [max_elems]
    type = StatVector
    stat = max
    object = nl_wb_element
    vector = num_elems
  []
[]

[VectorPostprocessors]
  [nl_wb_element]
    type = WorkBalance
    execute_on = initial
    system = nl
    balances = &#x27;num_elems num_partition_sides&#x27;
    outputs = none
  []
[]

[Outputs]
  exodus = true
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a094c2fe-4a22-4151-953f-33233f27ac2c"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/pp_generation_unconfined_basicthm.i</h4><pre class="moose-pre"><code class="language-text"># Identical to pp_generation_unconfined_fullysat_volume.i but using an Action
#
# A sample is constrained on all sides, except its top
# and its boundaries are
# also impermeable.  Fluid is pumped into the sample via a
# volumetric source (ie m^3/second per cubic meter), and the
# rise in the top surface, porepressure, and stress are observed.
#
# In the standard poromechanics scenario, the Biot Modulus is held
# fixed and the source has units 1/s.  Then the expected result
# is
# strain_zz = disp_z = BiotCoefficient*BiotModulus*s*t/((bulk + 4*shear/3) + BiotCoefficient^2*BiotModulus)
# porepressure = BiotModulus*(s*t - BiotCoefficient*strain_zz)
# stress_xx = (bulk - 2*shear/3)*strain_zz   (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*strain_zz   (remember this is effective stress)
#
# In standard porous_flow, everything is based on mass, eg the source has
# units kg/s/m^3.  This is discussed in the other pp_generation_unconfined
# models.  In this test, we use the FullySaturated Kernel and set
# multiply_by_density = false
# meaning the fluid Kernel has units of volume, and the source, s, has units 1/time
#
# The ratios are:
# stress_xx/strain_zz = (bulk - 2*shear/3) = 1 (for the parameters used here)
# stress_zz/strain_zz = (bulk + 4*shear/3) = 4 (for the parameters used here)
# porepressure/strain_zz = 13.3333333 (for the parameters used here)
#
# Expect
# disp_z = 0.3*10*s*t/((2 + 4*1.5/3) + 0.3^2*10) = 0.612245*s*t
# porepressure = 10*(s*t - 0.3*0.612245*s*t) = 8.163265*s*t
# stress_xx = (2 - 2*1.5/3)*0.612245*s*t = 0.612245*s*t
# stress_zz = (2 + 4*shear/3)*0.612245*s*t = 2.44898*s*t
#
# Finally, note that the volumetric strain has
# consistent_with_displaced_mesh = false
# which is needed when using the FullySaturated version of the Kernels
# in order to generate the above results

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./confinez]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = &#x27;back&#x27;
  [../]
[]


[Kernels]
  [./source]
    type = BodyForce
    function = 0.1
    variable = porepressure
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 3.3333333333
      viscosity = 1.0
      density0 = 1.0
    [../]
  [../]
[]

[PorousFlowBasicTHM]
  coupling_type = HydroMechanical
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  multiply_by_density = false
  porepressure = porepressure
  biot_coefficient = 0.3
  gravity = &#x27;0 0 0&#x27;
  fp = the_simple_fluid
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # the &quot;const&quot; is irrelevant here: all that uses Porosity is the BiotModulus, which just uses the initial value of porosity
    porosity = 0.1
    PorousFlowDictator = dictator
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    PorousFlowDictator = dictator
    biot_coefficient = 0.3
    fluid_bulk_modulus = 3.3333333333
    solid_bulk_compliance = 0.5
  [../]
  [./permeability_irrelevant]
    type = PorousFlowPermeabilityConst
    PorousFlowDictator = dictator
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./stress_xx_over_strain]
    type = FunctionValuePostprocessor
    function = stress_xx_over_strain_fcn
    outputs = csv
  [../]
  [./stress_zz_over_strain]
    type = FunctionValuePostprocessor
    function = stress_zz_over_strain_fcn
    outputs = csv
  [../]
  [./p_over_strain]
    type = FunctionValuePostprocessor
    function = p_over_strain_fcn
    outputs = csv
  [../]
[]

[Functions]
  [./stress_xx_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_xx zdisp&#x27;
  [../]
  [./stress_zz_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;stress_zz zdisp&#x27;
  [../]
  [./p_over_strain_fcn]
    type = ParsedFunction
    value = a/b
    vars = &#x27;a b&#x27;
    vals = &#x27;p0 zdisp&#x27;
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-10 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 1
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = pp_generation_unconfined_basicthm
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4cd798ce-2a33-468d-a312-4295d72d3de8"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/small_deform3_outer_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E5
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    mc_interpolation_scheme = outer_tip
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-8
    tip_smoother = 8
    smoothing_tol = 1E-7
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_outer_tip
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4961441-c25c-4990-b7bf-1ecb34645165"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar_hard1.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretches in x, y and z directions.
# let mc_cohesion = 10, mc_cohesion_residual = 2, mc_cohesion_rate =
# With cohesion = C, friction_angle = 60deg, tip_smoother = 4, the
# algorithm should return to
# sigma_m = C*Cos(60)/Sin(60)
# This allows checking of the relationship for C

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 2
    rate = 1E4
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 60
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1E-5
    use_custom_returnMap = true
    shift = 1E-12
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = mc
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar_hard1
  exodus = false
  [./csv]
    type = CSV
    execute_on = timestep_end
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ad5f5aaa-6011-409f-82fc-dfdbd64d6ca2"><div class="modal-content"><h4>test/tests/multiapps/grid-sequencing/vi-fine-alone.i</h4><pre class="moose-pre"><code class="language-text">l=10
nx=80
num_steps=2

[Mesh]
  type = GeneratedMesh
  dim = 1
  xmax = ${l}
  nx = ${nx}
[]

[Variables]
  [u]
  []
[]

[AuxVariables]
  [bounds][]
[]

[Bounds]
  [./u_upper_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = upper
    bound_value = ${l}
  [../]
  [./u_lower_bounds]
    type = ConstantBoundsAux
    variable = bounds
    bounded_variable = u
    bound_type = lower
    bound_value = 0
  [../]
[]

[ICs]
  [u]
    type = FunctionIC
    variable = u
    function = &#x27;x&#x27;
  []
[]

[Kernels]
  [time]
    type = TimeDerivative
    variable = u
  []
  [diff]
    type = Diffusion
    variable = u
  []
  [ffn]
    type = BodyForce
    variable = u
    function = &#x27;if(x&lt;5,-1,1)&#x27;
  []
[]

[BCs]
  [left]
    type = DirichletBC
    boundary = left
    value = 0
    variable = u
  []
  [right]
    type = DirichletBC
    boundary = right
    value = ${l}
    variable = u
  []
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  num_steps = ${num_steps}
  solve_type = NEWTON
  dtmin = 1
  petsc_options = &#x27;-snes_vi_monitor&#x27;
  petsc_options_iname = &#x27;-snes_max_linear_solve_fail -ksp_max_it -pc_type -sub_pc_factor_levels -snes_linesearch_type -snes_type&#x27;
  petsc_options_value = &#x27;0                           30          asm      16                    basic                 vinewtonrsls&#x27;
[]

[Outputs]
  exodus = true
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
  [dof]
    type = DOFMap
    execute_on = &#x27;initial&#x27;
  []
[]

[Debug]
  show_var_residual_norms = true
[]

[Postprocessors]
  active = &#x27;upper_violations lower_violations&#x27;
  [upper_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = ${fparse 10+1e-8}
    comparator = &#x27;greater&#x27;
  []
  [lower_violations]
    type = GreaterThanLessThanPostprocessor
    variable = u
    execute_on = &#x27;nonlinear timestep_end&#x27;
    value = -1e-8
    comparator = &#x27;less&#x27;
  []
  [nls]
    type = NumNonlinearIterations
  []
  [cum_nls]
    type = CumulativeValuePostprocessor
    postprocessor = nls
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7dc8654f-c07b-4a5c-929c-b050bc5c29ed"><div class="modal-content"><h4>test/tests/time_integrators/explicit_ssp_runge_kutta/explicit_ssp_runge_kutta.i</h4><pre class="moose-pre"><code class="language-text"># This test solves the following IVP:
#   du/dt = f(u(t), t),   u(0) = 1
#   f(u(t), t) = -u(t) + t^3 + 3t^2
# The exact solution is the following:
#   u(t) = exp(-t) + t^3

[Mesh]
  [./mesh]
    type = GeneratedMeshGenerator
    dim = 1
    nx = 1
  [../]
[]

[Variables]
  [./u]
    family = SCALAR
    order = FIRST
    initial_condition = 1
  [../]
[]

[ScalarKernels]
  [./time_derivative]
    type = ODETimeDerivative
    variable = u
  [../]
  [./source_part1]
    type = ParsedODEKernel
    variable = u
    function = &#x27;u&#x27;
  [../]
  [./source_part2]
    type = PostprocessorSinkScalarKernel
    variable = u
    postprocessor = sink_pp
  [../]
[]

[Functions]
  [./sink_fn]
    type = ParsedFunction
    value = &#x27;-t^3 - 3*t^2&#x27;
  [../]
[]

[Postprocessors]
  [./sink_pp]
    type = FunctionValuePostprocessor
    function = sink_fn
    execute_on = &#x27;LINEAR NONLINEAR&#x27;
  [../]
  [./l2_err]
    type = ScalarL2Error
    variable = u
    function = ${fparse exp(-0.5) + 0.5^3}
  [../]
[]

[Executioner]
  type = Transient

  [./TimeIntegrator]
    type = ExplicitSSPRungeKutta
    order = 1
  [../]

  end_time = 0.5
  dt = 0.1
[]

[Outputs]
  file_base = &#x27;first_order&#x27;
  exodus = true
  [./csv]
    type = CSV
    show = &#x27;u&#x27;
    execute_on = &#x27;FINAL&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6695fb1a-aa78-4758-b774-2adc166d3ed6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface13.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.0E-6m in y direction and 0E-6 in z direction.
# trial stress_yy = 2 and stress_zz = 0
#
# Then SimpleTester1 should activate and the algorithm will return to
# stress_yy=1
# internal1 should be 1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface13
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="349a98c5-7633-445f-9335-c592d7ee671b"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain_action.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
[]

[Modules/PhaseField/MortarPeriodicity]
  [./strain]
    variable = &#x27;disp_x disp_y&#x27;
    periodicity = gradient
    periodic_directions = &#x27;x y&#x27;
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6f9eab2b-2847-4478-be25-964c92bc5d58"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/poly_chaos/master_2dnorm_quad_moment.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [D_dist]
    type = Normal
    mean = 5
    standard_deviation = 0.5
  []
  [S_dist]
    type = Normal
    mean = 8
    standard_deviation = 0.7
  []
[]

[Samplers]
  [quadrature]
    type = Quadrature
    distributions = &#x27;D_dist S_dist&#x27;
    execute_on = INITIAL
    order = 5
  []
[]

[MultiApps]
  [quad_sub]
    type = SamplerFullSolveMultiApp
    input_files = sub.i
    sampler = quadrature
    mode = batch-restore
  []
[]

[Transfers]
  [quad]
    type = SamplerParameterTransfer
    multi_app = quad_sub
    sampler = quadrature
    parameters = &#x27;Materials/diffusivity/prop_values Materials/xs/prop_values&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = quad_sub
    sampler = quadrature
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
  []
  [pc_moments]
    type = PolynomialChaosStatistics
    pc_name = poly_chaos
    compute = &#x27;mean stddev skewness kurtosis&#x27;
    execute_on = final
  []
[]

[Surrogates]
  [poly_chaos]
    type = PolynomialChaos
    trainer = poly_chaos
  []
[]

[Trainers]
  [poly_chaos]
    type = PolynomialChaosTrainer
    execute_on = timestep_end
    order = 5
    distributions = &#x27;D_dist S_dist&#x27;
    sampler = quadrature
    results_vpp = storage
    results_vector = data:avg
  []
[]

[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="848885b4-b305-4ef5-9580-8c2b399bb70b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/j2_plasticity/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># UserObject J2 test
# apply uniform stretch in x, y and z directions.
# no plasticity should be observed

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = str
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = j2
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6b482622-fef5-4468-a4ba-e857a3f3e93c"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/vectorpostprocessors/stochastic_results_complete_history/master.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
  auto_create_executioner = false
[]

[Distributions]
  [uniform_left]
    type = Uniform
    lower_bound = 0
    upper_bound = 0.5
  []
  [uniform_right]
    type = Uniform
    lower_bound = 1
    upper_bound = 2
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    num_rows = 3
    distributions = &#x27;uniform_left uniform_right&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  []
[]

[MultiApps]
  [sub]
    type = SamplerTransientMultiApp
    input_files = sub.i
    sampler = sample
    execute_on = &#x27;INITIAL TIMESTEP_BEGIN&#x27;
  []
[]

[Transfers]
  [runner]
    type = SamplerParameterTransfer
    multi_app = sub
    sampler = sample
    parameters = &#x27;BCs/left/value BCs/right/value&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = sample
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = REPLICATED
    contains_complete_history = true
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  []
[]

[Executioner]
  type = Transient
  num_steps = 2
[]

[Outputs]
  [out]
    type = CSV
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="46051ebb-a9bf-46a5-aead-30ea6072a7f6"><div class="modal-content"><h4>modules/porous_flow/test/tests/dirackernels/bh07.i</h4><pre class="moose-pre"><code class="language-text"># Comparison with analytical solution for cylindrically-symmetric situation
[Mesh]
  type = FileMesh
  file = bh07_input.e
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1000 10000&#x27;
    x = &#x27;100 1000&#x27;
  [../]
[]

[Variables]
  [./pp]
    initial_condition = 1E7
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./fflux]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[BCs]
  [./fix_outer]
    type = DirichletBC
    boundary = perimeter
    variable = pp
    value = 1E7
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./borehole_total_outflow_mass]
    type = PorousFlowSumQuantity
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      viscosity = 1e-3
      density0 = 1000
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-11 0 0 0 1E-11 0 0 0 1E-11&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityFLAC
    m = 2
    phase = 0
  [../]
[]

[DiracKernels]
  [./bh]
    type = PorousFlowPeacemanBorehole
    variable = pp
    SumQuantityUO = borehole_total_outflow_mass
    point_file = bh07.bh
    fluid_phase = 0
    bottom_p_or_t = 0
    unit_weight = &#x27;0 0 0&#x27;
    use_mobility = true
    re_constant = 0.1594  # use Chen and Zhang version
    character = 2 # double the strength because bh07.bh only fills half the mesh
  [../]
[]

[Postprocessors]
  [./bh_report]
    type = PorousFlowPlotQuantity
    uo = borehole_total_outflow_mass
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./fluid_mass]
    type = PorousFlowFluidMass
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    variable = pp
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;300 0 0&#x27;
    sort_by = x
    num_points = 300
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  [./usual]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -ksp_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-10 1E-10 10000 30&#x27;
  [../]
[]

[Executioner]
  type = Transient
  end_time = 1E3
  solve_type = NEWTON
  [./TimeStepper]
    # get only marginally better results for smaller time steps
    type = FunctionDT
    function = dts
  [../]
[]

[Outputs]
  file_base = bh07
  [./along_line]
    type = CSV
    execute_on = final
  [../]
  [./exodus]
    type = Exodus
    execute_on = &#x27;initial final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f06198a1-dca4-43e3-aac7-5091b94c557d"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01c_action.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# using the Unsaturated Action
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = -1
      max = 1
    [../]
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 2.0
      viscosity = 1.0
      density0 = 1.0
    [../]
  [../]
[]

[PorousFlowUnsaturated]
  add_saturation_aux = false
  add_darcy_aux = false
  porepressure = pp
  gravity = &#x27;-1 0 0&#x27;
  fp = the_simple_fluid
  van_genuchten_alpha = 1.0
  van_genuchten_m = 0.5
  relative_permeability_type = Corey
  relative_permeability_exponent = 1.0
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 -1 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = -1
  [../]
[]

[Materials]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01c_action
  exodus = true
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8069cbe7-52d9-474c-8c98-5831bdd0e991"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform2_small_strain.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2_small_strain
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8138b6e3-ea83-4aa8-8f57-efe15163d490"><div class="modal-content"><h4>modules/contact/test/tests/sliding_block/in_and_out/frictional_lm.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  patch_size = 80
  [file]
    type = FileMeshGenerator
    file = sliding_elastic_blocks_2d.e
  []
  [secondary]
    input = file
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;3&#x27;
    new_block_id = &#x27;30&#x27;
  []
  [primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;2&#x27;
    new_block_id = &#x27;20&#x27;
  []
[]

[GlobalParams]
  volumetric_locking_correction = false
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [normal_lm]
    block = &#x27;30&#x27;
  []
  [tangential_lm]
    block = &#x27;30&#x27;
    family = MONOMIAL
    order = CONSTANT
  []
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = horizontal_movement
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = vertical_movement
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    strain = FINITE
    block = &#x27;1 2&#x27;
  [../]
[]

[Materials]
  [./tensor]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1 2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
    constant_on = SUBDOMAIN
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1 2&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_ksp_ew&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 15
  dt = 0.1
  dtmin = 0.01
  l_max_its = 30
  nl_max_its = 20
  line_search = &#x27;none&#x27;
  timestep_tolerance = 1e-6

  [./Predictor]
    type = SimplePredictor
    scale = 1.0
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]

[Outputs]
  sync_times = &#x27;1 2 3 4 5 6 7 8 9 10 11 12 13 14 15&#x27;
  [out]
    type = Exodus
    sync_only = true
  []
  [dof]
    execute_on = &#x27;initial&#x27;
    type = DOFMap
  []
  [csv]
    type = CSV
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
[]

[Functions]
  [./vertical_movement]
    type = ParsedFunction
    value = -t
  [../]
  [./horizontal_movement]
    type = ParsedFunction
    value = -0.04*sin(4*t)+0.02
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = 3
    primary = 2
    variable = normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
    c = 1e6 # relative scale difference between pressure and gap
  [../]
  [normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
  [normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
  [tangential_lm]
    type = TangentialMortarLMMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = tangential_lm
    secondary_variable = disp_x
    secondary_disp_y = disp_y
    use_displaced_mesh = true
    compute_primal_residuals = false
    contact_pressure = normal_lm
    friction_coefficient = .4
    ncp_function_type = fb
    c = 1000 # relative scale difference between pressure and velocity
  []
  [tangential_x]
    type = TangentialMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = tangential_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
  [tangential_y]
    type = TangentialMortarMechanicalContact
    primary_boundary = &#x27;2&#x27;
    secondary_boundary = &#x27;3&#x27;
    primary_subdomain = &#x27;20&#x27;
    secondary_subdomain = &#x27;30&#x27;
    variable = tangential_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  []
[]

[Postprocessors]
  [./num_nl]
    type = NumNonlinearIterations
  [../]
  [./cumulative]
    type = CumulativeValuePostprocessor
    postprocessor = num_nl
  [../]
  [lin]
    type = NumLinearIterations
  []
  [cum_lin]
    type = CumulativeValuePostprocessor
    postprocessor = lin
  []
  [contact]
    type = ContactDOFSetSize
    variable = normal_lm
    subdomain = &#x27;30&#x27;
    execute_on = &#x27;nonlinear timestep_end&#x27;
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="222dd74f-d83f-429c-a9ba-01bc12fc7ac2"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/terzaghi.i</h4><pre class="moose-pre"><code class="language-text"># Terzaghi&#x27;s problem of consolodation of a drained medium
#
# A saturated soil sample sits in a bath of water.
# It is constrained on its sides, and bottom.
# Its sides and bottom are also impermeable.
# Initially it is unstressed.
# A normal stress, q, is applied to the soil&#x27;s top.
# The soil then slowly compresses as water is squeezed
# out from the sample from its top (the top BC for
# the porepressure is porepressure = 0).
#
# See, for example.  Section 2.2 of the online manuscript
# Arnold Verruijt &quot;Theory and Problems of Poroelasticity&quot; Delft University of Technology 2013
# but note that the &quot;sigma&quot; in that paper is the negative
# of the stress in TensorMechanics
#
# Here are the problem&#x27;s parameters, and their values:
# Soil height.  h = 10
# Soil&#x27;s Lame lambda.  la = 2
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = 3
# Soil bulk modulus.  K = la + 2*mu/3 = 4
# Soil confined compressibility.  m = 1/(K + 4mu/3) = 0.125
# Soil bulk compliance.  1/K = 0.25
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Soil initial storativity, which is the reciprocal of the initial Biot modulus.  S = phi0/Kf + (alpha - phi0)(1 - alpha)/K = 0.0625
# Consolidation coefficient.  c = k/(S + alpha^2 m) = 13.95348837
# Normal stress on top.  q = 1
# Initial porepressure, resulting from instantaneous application of q, assuming corresponding instantaneous increase of porepressure (Note that this is calculated by MOOSE: we only need it for the analytical solution).  p0 = alpha*m*q/(S + alpha^2 m) = 0.69767442
# Initial vertical displacement (down is positive), resulting from instantaneous application of q (Note this is calculated by MOOSE: we only need it for the analytical solution).  uz0 = q*m*h*S/(S + alpha^2 m)
# Final vertical displacement (down in positive) (Note this is calculated by MOOSE: we only need it for the analytical solution).  uzinf = q*m*h
#
# The solution for porepressure is
# P = 4*p0/\pi \sum_{k=1}^{\infty} \frac{(-1)^{k-1}}{2k-1} \cos ((2k-1)\pi z/(2h)) \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
# This series converges very slowly for ct/h^2 small, so in that domain
# P = p0 erf( (1-(z/h))/(2 \sqrt(ct/h^2)) )
#
# The degree of consolidation is defined as
# U = (uz - uz0)/(uzinf - uz0)
# where uz0 and uzinf are defined above, and
# uz = the vertical displacement of the top (down is positive)
# U = 1 - (8/\pi^2)\sum_{k=1}^{\infty} \frac{1}{(2k-1)^2} \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
#
# FINAL NOTE: The above solution assumes constant Biot Modulus.
# In porous_flow this is not true.  Therefore the solution is
# a little different than in the paper.  This test was therefore
# validated against MOOSE&#x27;s poromechanics, which can choose either
# a constant Biot Modulus (which has been shown to agree with
# the analytic solution), or a non-constant Biot Modulus (which
# gives the same results as porous_flow).

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 10
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = 0
  zmax = 10
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./topdrained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = front
  [../]
  [./topload]
    type = NeumannBC
    variable = disp_z
    value = -1
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.6
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    variable = porepressure
    gravity = &#x27;0 0 0&#x27;
    fluid_component = 0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 8
      density0 = 1
      thermal_expansion = 0
      viscosity = 0.96
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    # bulk modulus is lambda + 2*mu/3 = 2 + 2*3/3 = 4
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./eff_fluid_pressure_qp]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    ensure_positive = false
    porosity_zero = 0.1
    biot_coefficient = 0.6
    solid_bulk = 4
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 0 # unimportant in this fully-saturated situation
    phase = 0
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 1&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 2&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 3&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 4&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 5&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 6&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 7&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 8&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 9&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = disp_z
    use_displaced_mesh = false
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.5*t&lt;0.1,0.5*t,0.1)
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.0001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = terzaghi
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="37667c63-fd05-44a3-b47d-14a7ba88647c"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/vectorpostprocessors/stochastic_results/master.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
  auto_create_executioner = false
[]

[Distributions]
  [uniform_left]
    type = Uniform
    lower_bound = 0
    upper_bound = 0.5
  []
  [uniform_right]
    type = Uniform
    lower_bound = 1
    upper_bound = 2
  []
[]

[Samplers]
  [sample]
    type = MonteCarlo
    distributions = &#x27;uniform_left uniform_right&#x27;
    num_rows = 3
    seed = 2011
  []
  [resample]
    type = MonteCarlo
    distributions = &#x27;uniform_left uniform_right&#x27;
    num_rows = 3
    seed = 2013
  []
  [sobol]
    type = Sobol
    sampler_a = sample
    sampler_b = resample
  []
[]

[MultiApps]
  [sub]
    type = SamplerTransientMultiApp
    input_files = sub.i
    sampler = sobol
  []
[]

[Transfers]
  [runner]
    type = SamplerParameterTransfer
    multi_app = sub
    sampler = sobol
    parameters = &#x27;BCs/left/value BCs/right/value&#x27;
    to_control = &#x27;stochastic&#x27;
  []
  [data]
    type = SamplerPostprocessorTransfer
    multi_app = sub
    sampler = sobol
    to_vector_postprocessor = storage
    from_postprocessor = avg
  []
[]

[VectorPostprocessors]
  [storage]
    type = StochasticResults
    parallel_type = DISTRIBUTED
  []
[]

[Executioner]
  type = Transient
  num_steps = 1
[]


[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d43582a3-f65e-43da-a927-8c5744982977"><div class="modal-content"><h4>modules/porous_flow/test/tests/mass_conservation/mass04.i</h4><pre class="moose-pre"><code class="language-text"># The sample is a single unit element, with roller BCs on the sides
# and bottom.  A constant displacement is applied to the top: disp_z = -0.01*t.
# There is no fluid flow.
# Fluid mass conservation is checked.
#
# Under these conditions
# porepressure = porepressure(t=0) - (Fluid bulk modulus)*log(1 - 0.01*t)
# stress_xx = (bulk - 2*shear/3)*disp_z/L (remember this is effective stress)
# stress_zz = (bulk + 4*shear/3)*disp_z/L (remember this is effective stress)
# where L is the height of the sample (L=1 in this test)
#
# Parameters:
# Bulk modulus = 2
# Shear modulus = 1.5
# fluid bulk modulus = 0.5
# initial porepressure = 0.1
#
# Desired output:
# zdisp = -0.01*t
# p0 = 0.1 - 0.5*log(1-0.01*t)
# stress_xx = stress_yy = -0.01*t
# stress_zz = -0.04*t
#
# Regarding the &quot;log&quot; - it comes from preserving fluid mass

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
    initial_condition = 0.1
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./top_velocity]
    type = FunctionDirichletBC
    variable = disp_z
    function = -0.01*t
    boundary = front
  [../]
[]

[Kernels]
  [./grad_stress_x]
    type = StressDivergenceTensors
    variable = disp_x
    component = 0
  [../]
  [./grad_stress_y]
    type = StressDivergenceTensors
    variable = disp_y
    component = 1
  [../]
  [./grad_stress_z]
    type = StressDivergenceTensors
    variable = disp_z
    component = 2
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    biot_coefficient = 0.3
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = porepressure
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 0.5
      density0 = 1
      thermal_expansion = 0
      viscosity = 1
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1.5&#x27;
    # bulk modulus is lambda + 2*mu/3 = 1 + 2*1.5/3 = 2
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;0.5 0 0   0 0.5 0   0 0 0.5&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = &#x27;console csv&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
    point = &#x27;0 0 0&#x27;
    variable = porepressure
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0.5&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./stress_xx]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_yy]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_zz]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./fluid_mass]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
    use_displaced_mesh = true
    outputs = &#x27;console csv&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-14 1E-8 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  dt = 2
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  file_base = mass04
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="22e38b9a-c2fd-4cb3-ae8d-a470fa70cb1d"><div class="modal-content"><h4>modules/heat_conduction/test/tests/convective_heat_flux/coupled.i</h4><pre class="moose-pre"><code class="language-text">
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
[]

[Variables]
  [./temp]
    initial_condition = 200.0
  [../]
[]

[Kernels]
  [./heat_dt]
    type = TimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = Diffusion
    variable = temp
  [../]
  [./heat]
    type = BodyForce
    variable = temp
    value = 0
  [../]
[]

[BCs]
  [./right]
    type = ConvectiveHeatFluxBC
    variable = temp
    boundary = &#x27;right&#x27;
    T_infinity = T_inf
    heat_transfer_coefficient = htc
    heat_transfer_coefficient_dT = dhtc_dT
  [../]
[]

[Materials]
  [./T_inf]
    type = ParsedMaterial
    f_name = T_inf
    args = temp
    function = &#x27;temp + 1&#x27;
  [../]
  [./htc]
    type = ParsedMaterial
    f_name = htc
    args = temp
    function = &#x27;temp / 100 + 1&#x27;
  [../]
  [./dhtc_dT]
    type = ParsedMaterial
    f_name = dhtc_dT
    args = temp
    function = &#x27;1 / 100&#x27;
  [../]
[]

[Postprocessors]
  [./left_temp]
    type = SideAverageValue
    variable = temp
    boundary = left
    execute_on = &#x27;TIMESTEP_END initial&#x27;
  [../]
  [./right_temp]
    type = SideAverageValue
    variable = temp
    boundary = right
  [../]
  [./right_flux]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = 1
  [../]
[]

[Executioner]
  type = Transient

  num_steps = 10
  dt = 1

  nl_abs_tol = 1e-12
[]

[Outputs]
  [./out]
    type = CSV
    interval = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fc6845a1-c086-43b7-a4f9-cc94ae17c721"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/surrogates/gaussian_process/GP_squared_exponential_testing.i</h4><pre class="moose-pre"><code class="language-text">[StochasticTools]
[]

[Distributions]
  [k_dist]
    type = Uniform
    lower_bound = 1
    upper_bound = 10
  []
  [q_dist]
    type = Uniform
    lower_bound = 9000
    upper_bound = 11000
  []
[]

[Samplers]
  [test_sample]
    type = MonteCarlo
    num_rows = 100
    distributions = &#x27;k_dist q_dist&#x27;
    execute_on = PRE_MULTIAPP_SETUP
  []
[]

[VectorPostprocessors]
  [samp_avg]
    type = GaussianProcessTester
    model = GP_avg
    sampler = test_sample
    output_samples = true
    execute_on = final
  []

[]

[Surrogates]
  [GP_avg]
    type = GaussianProcess
    filename = &#x27;gauss_process_training_GP_avg_trainer.rd&#x27;
  []
[]


[Outputs]
  [out]
    type = CSV
    execute_on = FINAL
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="17d36329-512b-4a3d-a557-00239ac086a4"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav01a.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established
# 1phase, vanGenuchten, constant fluid-bulk, constant viscosity, constant permeability, Corey relative perm
# fully saturated
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Variables]
  [./pp]
    [./InitialCondition]
      type = RandomIC
      min = 0
      max = 1
    [../]
  [../]
[]

[Kernels]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_pp]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 1.2 0 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[BCs]
  [./z]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1.2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pp
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
[]

[Postprocessors]
  [./pp_base]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_analytical]
    type = FunctionValuePostprocessor
    function = ana_pp
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_00]
    type = PointValue
    variable = pp
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_01]
    type = PointValue
    variable = pp
    point = &#x27;-0.1 0 0&#x27;
  [../]
  [./pp_02]
    type = PointValue
    variable = pp
    point = &#x27;-0.2 0 0&#x27;
  [../]
  [./pp_03]
    type = PointValue
    variable = pp
    point = &#x27;-0.3 0 0&#x27;
  [../]
  [./pp_04]
    type = PointValue
    variable = pp
    point = &#x27;-0.4 0 0&#x27;
  [../]
  [./pp_05]
    type = PointValue
    variable = pp
    point = &#x27;-0.5 0 0&#x27;
  [../]
  [./pp_06]
    type = PointValue
    variable = pp
    point = &#x27;-0.6 0 0&#x27;
  [../]
  [./pp_07]
    type = PointValue
    variable = pp
    point = &#x27;-0.7 0 0&#x27;
  [../]
  [./pp_08]
    type = PointValue
    variable = pp
    point = &#x27;-0.8 0 0&#x27;
  [../]
  [./pp_09]
    type = PointValue
    variable = pp
    point = &#x27;-0.9 0 0&#x27;
  [../]
  [./pp_10]
    type = PointValue
    variable = pp
    point = &#x27;-1 0 0&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  solve_type = Newton
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = grav01a
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1ae61210-9705-4971-852c-39c8f9c33a3e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform6.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is incrementally stretched in the in the z direction
# This causes the return direction to be along the hypersurface sigma_II = sigma_III,
# and the resulting stresses are checked to lie on the expected yield surface
#
# tensile_strength is set to 1Pa, tip_smoother = 0.5
# Lode angle = -30degrees


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*z*t*t&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.5
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform6
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f6d5cb20-1c0a-4466-8f02-49d57985ebae"><div class="modal-content"><h4>modules/combined/examples/periodic_strain/global_strain_pfm.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
[]

[Variables]
  [./u_x]
  [../]
  [./u_y]
  [../]
  [./global_strain]
    order = THIRD
    family = SCALAR
  [../]
  [./c]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;sin(2*x*pi)*sin(2*y*pi)*0.05+0.6&#x27;
    [../]
  [../]
  [./w]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./s00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./disp_x]
    type = GlobalDisplacementAux
    variable = disp_x
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 0
  [../]
  [./disp_y]
    type = GlobalDisplacementAux
    variable = disp_y
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 1
  [../]
  [./local_free_energy]
    type = TotalFreeEnergy
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
  [./s00]
    type = RankTwoAux
    variable = s00
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
  [../]
  [./s01]
    type = RankTwoAux
    variable = s01
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
  [../]
  [./s10]
    type = RankTwoAux
    variable = s10
    rank_two_tensor = stress
    index_i = 1
    index_j = 0
  [../]
  [./s11]
    type = RankTwoAux
    variable = s11
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
  [../]
  [./e00]
    type = RankTwoAux
    variable = e00
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
  [../]
  [./e01]
    type = RankTwoAux
    variable = e01
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 1
  [../]
  [./e10]
    type = RankTwoAux
    variable = e10
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 0
  [../]
  [./e11]
    type = RankTwoAux
    variable = e11
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;u_x u_y&#x27;
  block = 0
[]

[Kernels]
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[ScalarKernels]
  [./global_strain]
    type = GlobalStrain
    variable = global_strain
    global_strain_uo = global_strain_uo
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
      variable = &#x27;c w u_x u_y&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = u_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = u_y
    value = 0
  [../]
[]

[Materials]
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    global_strain = global_strain
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./global_strain]
    type = ComputeGlobalStrain
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
  [../]

  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[UserObjects]
  [./global_strain_uo]
    type = GlobalStrainUserObject
    execute_on = &#x27;Initial Linear Nonlinear&#x27;
  [../]
[]

[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         31   preonly   lu      1&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  end_time = 2.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 0.01
    growth_factor = 1.5
    cutback_factor = 0.8
    optimal_iterations = 9
    iteration_window = 2
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7ee8b9ff-16d4-47de-aeb7-92bae29d7322"><div class="modal-content"><h4>modules/porous_flow/examples/flow_through_fractured_media/coarse_3D.i</h4><pre class="moose-pre"><code class="language-text"># Flow and solute transport along 2 2D eliptical fractures embedded in a 3D porous matrix
# the model domain has dimensions 1 x 1 x 0.3m and the two fracture have r1 = 0.45 and r2 = 0.2
# The fractures intersect each other and the domain boundaries on two opposite sides
# fracture aperture = 6e-4m
# fracture porosity = 6e-4m
# fracture permeability = 1.8e-11 which is based in k=3e-8 from a**2/12, and k*a = 3e-8*6e-4;
# matrix porosity = 0.1;
# matrix permeanility = 1e-20;

[Mesh]
  type = FileMesh
  file = coarse_3D.e
  block_id = &#x27;1 2 3&#x27;
  block_name = &#x27;matrix f1 f2&#x27;

  boundary_id = &#x27;1 2 3 4&#x27;
  boundary_name = &#x27;rf2 lf1 right_matrix left_matrix&#x27;
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pp]
  [../]
  [./tracer]
  [../]
[]

[AuxVariables]
  [./velocity_x]
    family = MONOMIAL
    order = CONSTANT
    block = &#x27;f1 f2&#x27;
  [../]
  [./velocity_y]
    family = MONOMIAL
    order = CONSTANT
    block = &#x27;f1 f2&#x27;
  [../]
  [./velocity_z]
    family = MONOMIAL
    order = CONSTANT
    block = &#x27;f1 f2&#x27;
  [../]
[]

[AuxKernels]
  [./velocity_x]
    type = PorousFlowDarcyVelocityComponentLowerDimensional
    variable = velocity_x
    component = x
    aperture = 6E-4
  [../]
  [./velocity_y]
    type = PorousFlowDarcyVelocityComponentLowerDimensional
    variable = velocity_y
    component = y
    aperture = 6E-4
  [../]
  [./velocity_z]
    type = PorousFlowDarcyVelocityComponentLowerDimensional
    variable = velocity_z
    component = z
    aperture = 6E-4
  [../]
[]

[ICs]
  [./pp]
    type = ConstantIC
    variable = pp
    value = 1e6
  [../]
  [./tracer]
    type = ConstantIC
    variable = tracer
    value = 0
  [../]
[]

[BCs]
  [./top]
    type = DirichletBC
    value = 0
    variable = tracer
    boundary = rf2
  [../]
  [./bottom]
    type = DirichletBC
    value = 1
    variable = tracer
    boundary = lf1
  [../]
  [./ptop]
    type = DirichletBC
    variable = pp
    boundary =  rf2
    value = 1e6
  [../]
  [./pbottom]
    type = DirichletBC
    variable = pp
    boundary = lf1
    value = 1.02e6
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pp
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pp
  [../]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = pp
    disp_trans = 0
    disp_long = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = tracer
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = tracer
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = tracer
    disp_trans = 0
    disp_long = 0
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pp tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseFullySaturated
    porepressure = pp
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;tracer&#x27;
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./poro1]
    type = PorousFlowPorosityConst
    porosity = 6e-4   # = a * phif
    block = &#x27;f1 f2&#x27;
  [../]
  [./diff1]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1.e-9 1.e-9&#x27;
    tortuosity = 1.0
    block = &#x27;f1 f2&#x27;
  [../]
  [./poro2]
    type = PorousFlowPorosityConst
    porosity = 0.1
    block = &#x27;matrix&#x27;
  [../]
  [./diff2]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1.e-9 1.e-9&#x27;
    tortuosity = 0.1
    block = &#x27;matrix&#x27;
  [../]
  [./relp]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./permeability1]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.8e-11 0 0 0 1.8e-11 0 0 0 1.8e-11&#x27;   # 1.8e-11 = a * kf
    block = &#x27;f1 f2&#x27;
  [../]
  [./permeability2]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-20 0 0 0 1e-20 0 0 0 1e-20&#x27;
    block = &#x27;matrix&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./mumps_is_best_for_parallel_jobs]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
  [./basic]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 20
  dt = 1
[]

[VectorPostprocessors]
  [./xmass]
    type = LineValueSampler
    start_point = &#x27;-0.5 0 0&#x27;
    end_point = &#x27;0.5 0 0&#x27;
    sort_by = x
    num_points = 41
    variable = tracer
    outputs = csv
  [../]
[]

[Outputs]
  [./csv]
    type = CSV
    execute_on = &#x27;final&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="145a9047-dc5a-4f59-ab65-1e92effffb9b"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e3dffce6-87f6-47e0-9b12-216d506c6d1b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/j2_plasticity/small_deform3.i</h4><pre class="moose-pre"><code class="language-text"># UserObject J2 test
# apply uniform compression in x direction to give
# trial stress_xx = -7, so sqrt(3*J2) = 7
# with zero Poisson&#x27;s ratio, this should return to
# stress_xx = -3, stress_yy = -2 = stress_zz
# (note that stress_xx - stress_yy = stress_xx - stress_zz = -1, so sqrt(3*j2) = 1,
#  and that the mean stress remains = -7/3)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-3.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = str
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = j2
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a9d9f992-b5d0-4893-a697-8a02f0d41445"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/j2_plasticity/hard1.i</h4><pre class="moose-pre"><code class="language-text"># UserObject J2 test, with hardening, but with rate=0
# apply uniform compression in x direction to give
# trial stress_xx = -5, so sqrt(3*J2) = 5
# with zero Poisson&#x27;s ratio, this should return to
# stress_xx = -3, stress_yy = -1 = stress_zz,
# for strength = 2
# (note that stress_xx - stress_yy = stress_xx - stress_zz = -2, so sqrt(3*j2) = 2,
#  and that the mean stress remains = -5/3)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-2.5E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = str
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = j2
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = hard1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b8791e7d-f6cd-4460-9fd2-8d1efd377070"><div class="modal-content"><h4>modules/phase_field/examples/multiphase/DerivativeMultiPhaseMaterial.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 40
  ny = 40
  nz = 0
  xmin = -12
  xmax = 12
  ymin = -12
  ymax = 12
  elem_type = QUAD4
[]

[GlobalParams]
  # let&#x27;s output all material properties for demonstration purposes
  outputs = exodus

  # prefactor on the penalty function kernels. The higher this value is, the
  # more rigorously the constraint is enforced
  penalty = 1e3
[]

#
# These AuxVariables hold the directly calculated free energy density in the
# simulation cell. They are provided for visualization purposes.
#
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    additional_free_energy = cross_energy
  [../]

  #
  # Helper kernel to cpompute the gradient contribution from interfaces of order
  # parameters evolved using the ACMultiInterface kernel
  #
  [./cross_terms]
    type = CrossTermGradientFreeEnergy
    variable = cross_energy
    interfacial_vars = &#x27;eta1 eta2 eta3&#x27;
    #
    # The interface coefficient matrix. This should be symmetrical!
    #
    kappa_names = &#x27;kappa11 kappa12 kappa13
                   kappa21 kappa22 kappa23
                   kappa31 kappa32 kappa33&#x27;
  [../]
[]

[Variables]
  [./c]
    order = FIRST
    family = LAGRANGE
    #
    # We set up a smooth cradial concentrtaion gradient
    # The concentration will quickly change to adapt to the preset order
    # parameters eta1, eta2, and eta3
    #
    [./InitialCondition]
      type = SmoothCircleIC
      x1 = 0.0
      y1 = 0.0
      radius = 5.0
      invalue = 1.0
      outvalue = 0.01
      int_width = 10.0
    [../]
  [../]

  [./eta1]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      #
      # Note: this initial conditions sets up a _sharp_ interface. Ideally
      # we should start with a smooth interface with a width consistent
      # with the kappa parameter supplied for the given interface.
      #
      function = &#x27;r:=sqrt(x^2+y^2);if(r&lt;=4,1,0)&#x27;
    [../]
  [../]
  [./eta2]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;r:=sqrt(x^2+y^2);if(r&gt;4&amp;r&lt;=7,1,0)&#x27;
    [../]
  [../]
  [./eta3]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;r:=sqrt(x^2+y^2);if(r&gt;7,1,0)&#x27;
    [../]
  [../]
[]

[Kernels]
  #
  # Cahn-Hilliard kernel for the concentration variable.
  # Note that we are not using an interfcae kernel on this variable, but rather
  # rely on the interface width enforced on the order parameters. This allows us
  # to use a direct solve using the CahnHilliard kernel _despite_ only using first
  # order elements.
  #
  [./c_res]
    type = CahnHilliard
    variable = c
    f_name = F
    args = &#x27;eta1 eta2 eta3&#x27;
  [../]
  [./time]
    type = TimeDerivative
    variable = c
  [../]

  #
  # Order parameter eta1
  # Each order parameter is acted on by 4 kernels:
  #  1. The stock time derivative deta_i/dt kernel
  #  2. The Allen-Cahn kernel that takes a Dervative Material for the free energy
  #  3. A gradient interface kernel that includes cross terms
  #     see http://mooseframework.org/wiki/PhysicsModules/PhaseField/DevelopingModels/MultiPhaseModels/ACMultiInterface/
  #  4. A penalty contribution that forces the interface contributions h(eta)
  #     to sum up to unity
  #
  [./deta1dt]
    type = TimeDerivative
    variable = eta1
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta1
    args = &#x27;eta2 eta3 c&#x27;
    mob_name = L1
    f_name = F
  [../]
  [./ACInterface1]
    type = ACMultiInterface
    variable = eta1
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L1
    kappa_names = &#x27;kappa11 kappa12 kappa13&#x27;
  [../]
  [./penalty1]
    type = SwitchingFunctionPenalty
    variable = eta1
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
  [../]

  #
  # Order parameter eta2
  #
  [./deta2dt]
    type = TimeDerivative
    variable = eta2
  [../]
  [./ACBulk2]
    type = AllenCahn
    variable = eta2
    args = &#x27;eta1 eta3 c&#x27;
    mob_name = L2
    f_name = F
  [../]
  [./ACInterface2]
    type = ACMultiInterface
    variable = eta2
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L2
    kappa_names = &#x27;kappa21 kappa22 kappa23&#x27;
  [../]
  [./penalty2]
    type = SwitchingFunctionPenalty
    variable = eta2
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
  [../]

  #
  # Order parameter eta3
  #
  [./deta3dt]
    type = TimeDerivative
    variable = eta3
  [../]
  [./ACBulk3]
    type = AllenCahn
    variable = eta3
    args = &#x27;eta1 eta2 c&#x27;
    mob_name = L3
    f_name = F
  [../]
  [./ACInterface3]
    type = ACMultiInterface
    variable = eta3
    etas = &#x27;eta1 eta2 eta3&#x27;
    mob_name = L3
    kappa_names = &#x27;kappa31 kappa32 kappa33&#x27;
  [../]
  [./penalty3]
    type = SwitchingFunctionPenalty
    variable = eta3
    etas    = &#x27;eta1 eta2 eta3&#x27;
    h_names = &#x27;h1   h2   h3&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./All]
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  # here we declare some of the model parameters: the mobilities and interface
  # gradient prefactors. For this example we use arbitrary numbers. In an actual simulation
  # physical mobilities would be used, and the interface gradient prefactors would
  # be readjusted to the free energy magnitudes.
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c L1 L2 L3  kappa11 kappa12 kappa13 kappa21 kappa22 kappa23 kappa31 kappa32 kappa33&#x27;
    prop_values = &#x27;0.2 0.75    1  1  1   0.75    0.75    0.75    0.75    0.75    0.75    0.75    0.75    0.75   &#x27;
  [../]

  # This material sums up the individual phase contributions. It is written to the output file
  # (see GlobalParams section above) and can be used to check the constraint enforcement.
  [./etasummat]
    type = ParsedMaterial
    f_name = etasum
    args = &#x27;eta1 eta2 eta3&#x27;
    material_property_names = &#x27;h1 h2 h3&#x27;
    function = &#x27;h1+h2+h3&#x27;
  [../]

  # The phase contribution factors for each material point are computed using the
  # SwitchingFunctionMaterials. Each phase with an order parameter eta contributes h(eta)
  # to the global free energy density. h is a function that switches smoothly from 0 to 1
  [./switching1]
    type = SwitchingFunctionMaterial
    function_name = h1
    eta = eta1
    h_order = SIMPLE
  [../]
  [./switching2]
    type = SwitchingFunctionMaterial
    function_name = h2
    eta = eta2
    h_order = SIMPLE
  [../]
  [./switching3]
    type = SwitchingFunctionMaterial
    function_name = h3
    eta = eta3
    h_order = SIMPLE
  [../]

  # The barrier function adds a phase transformation energy barrier. It also
  # Drives order parameters toward the [0:1] interval to avoid negative or larger than 1
  # order parameters (these are set to 0 and 1 contribution by the switching functions
  # above)
  [./barrier]
    type = MultiBarrierFunctionMaterial
    etas = &#x27;eta1 eta2 eta3&#x27;
  [../]

  # We use DerivativeParsedMaterials to specify three (very) simple free energy
  # expressions for the three phases. All necessary derivatives are built automatically.
  # In a real problem these expressions can be arbitrarily complex (or even provided
  # by custom kernels).
  [./phase_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = F1
    function = &#x27;(c-1)^2&#x27;
    args = &#x27;c&#x27;
  [../]
  [./phase_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = F2
    function = &#x27;(c-0.5)^2&#x27;
    args = &#x27;c&#x27;
  [../]
  [./phase_free_energy_3]
    type = DerivativeParsedMaterial
    f_name = F3
    function = &#x27;c^2&#x27;
    args = &#x27;c&#x27;
  [../]

  # The DerivativeMultiPhaseMaterial ties the phase free energies together into a global free energy.
  # http://mooseframework.org/wiki/PhysicsModules/PhaseField/DevelopingModels/MultiPhaseModels/
  [./free_energy]
    type = DerivativeMultiPhaseMaterial
    f_name = F
    # we use a constant free energy (GeneriConstantmaterial property Fx)
    fi_names = &#x27;F1  F2  F3&#x27;
    hi_names = &#x27;h1  h2  h3&#x27;
    etas     = &#x27;eta1 eta2 eta3&#x27;
    args = &#x27;c&#x27;
    W = 1
  [../]
[]

[Postprocessors]
  # The total free energy of the simulation cell to observe the energy reduction.
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
  [../]

  # for testing we also monitor the total solute amount, which should be conserved.
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
  [../]
[]

[Preconditioning]
  # This preconditioner makes sure the Jacobian Matrix is fully populated. Our
  # kernels compute all Jacobian matrix entries.
  # This allows us to use the Newton solver below.
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = &#x27;bdf2&#x27;

  # Automatic differentiation provedes a _full_ Jacobian in this example
  # so we can safely use NEWTON for a fast solve
  solve_type = &#x27;NEWTON&#x27;

  l_max_its = 15
  l_tol = 1.0e-6

  nl_max_its = 50
  nl_rel_tol = 1.0e-6
  nl_abs_tol = 1.0e-6

  start_time = 0.0
  end_time   = 150.0

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.1
  [../]
[]

[Debug]
  # show_var_residual_norms = true
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5dc428b1-8c21-469f-aaa7-821c71f939e3"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_3/brick3_template1.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick3_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_begin
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 4
    paired_boundary = 3
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 4
    paired_boundary = 3
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_x
  [../]
  [./disp_x33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_x
  [../]
  [./disp_y28]
    type = NodalVariableValue
    nodeid = 27
    variable = disp_y
  [../]
  [./disp_y33]
    type = NodalVariableValue
    nodeid = 32
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x28 disp_y28 disp_x33 disp_y33 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b4214091-3581-4661-af58-54403191f3bb"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform3.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by &quot;ep&quot; in the z and x directions
# This causes the return direction to be along the hypersurface sigma_I = sigma_II
# tensile_strength is set to 1Pa, tip_smoother = 0, edge_smoother = 25degrees
# Then A + B + C = 0.609965
#
# The trial stress is (la, 0, la), with mean stress 2la/3, and bar(sigma)=sqrt(secondInvariant)=la/sqrt(3)
# If this sits on the yield surface then
# 2la/3 + la*K/sqrt(3) - 1 = 0
# So la = 0.9815.  Therefore, with young&#x27;s modulus = 2MPa, we need &quot;ep&quot; = 0.9815/4.  I set
# &quot;ep&quot; = 0.25 and observe a tiny amount of yielding


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.0
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="633f2f76-c61e-47f2-8fdf-15fe0d0c85ff"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/planar3.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./phi]
    type = TensorMechanicsHardeningConstant
    value = 0.9
  [../]
  [./psi]
    type = TensorMechanicsHardeningConstant
    value = 0.1
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    yield_function_tolerance = 1E-8
    shift = 1E-8
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    deactivation_scheme = safe
    max_NR_iterations = 3
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 5 2 5 11 -1 2 -1 12&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1 1 1&#x27;
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6fdd052c-bd78-40e3-98af-3d795158ca9c"><div class="modal-content"><h4>modules/porous_flow/test/tests/gravity/grav02c.i</h4><pre class="moose-pre"><code class="language-text"># Checking that gravity head is established in the transient situation when 0&lt;=saturation&lt;=1 (note the less-than-or-equal-to).
# 2phase (PP), 2components, vanGenuchten, constant fluid bulk-moduli for each phase, constant viscosity, constant permeability, Corey relative perm
# For better agreement with the analytical solution (ana_pp), just increase nx

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = -1
  xmax = 0
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-3 1E-2 1E-1&#x27;
    x = &#x27;1E-3 1E-2 1E-1&#x27;
  [../]
[]

[Variables]
  [./ppwater]
    initial_condition = -0.1
  [../]
  [./ppgas]
    initial_condition = 0
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = ppwater
    gravity = &#x27;-1 0 0&#x27;
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = ppgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = ppgas
    gravity = &#x27;-1 0 0&#x27;
  [../]
[]

[Functions]
  [./ana_ppwater]
    type = ParsedFunction
    vars = &#x27;g B p0 rho0&#x27;
    vals = &#x27;1 2 pp_water_top 1&#x27;
    value = &#x27;-B*log(exp(-p0/B)+g*rho0*x/B)&#x27; # expected pp at base
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater ppgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2
      density0 = 1
      viscosity = 1
      thermal_expansion = 0
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 1
      density0 = 0.1
      viscosity = 0.5
      thermal_expansion = 0
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePP
    phase0_porepressure = ppwater
    phase1_porepressure = ppgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1 0 0  0 2 0  0 0 3&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[Postprocessors]
  [./pp_water_top]
    type = PointValue
    variable = ppwater
    point = &#x27;0 0 0&#x27;
  [../]
  [./pp_water_base]
    type = PointValue
    variable = ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./pp_water_analytical]
    type = FunctionValuePostprocessor
    function = ana_ppwater
    point = &#x27;-1 0 0&#x27;
  [../]
  [./mass_ph0]
    type = PorousFlowFluidMass
    fluid_component = 0
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./mass_ph1]
    type = PorousFlowFluidMass
    fluid_component = 1
    execute_on = &#x27;initial timestep_end&#x27;
  [../]

[]

[Preconditioning]
  active = andy
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10 10000&#x27;
  [../]
  [./check]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-10 10000 test&#x27;
  [../]
[]


[Executioner]
  type = Transient
  solve_type = Newton
  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]
  end_time = 1.0
[]

[Outputs]
  execute_on = &#x27;initial timestep_end&#x27;
  file_base = grav02c
  [./csv]
    type = CSV
  [../]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="18857447-f452-4b1e-8ba0-c243ba14118d"><div class="modal-content"><h4>modules/phase_field/test/tests/conserved_noise/uniform.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  xmin = 0.0
  xmax = 10.0
  ymin = 0.0
  ymax = 10.0
  elem_type = QUAD4
[]

[Variables]
  [./c]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.9
  [../]
  [./w]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Preconditioning]
  active = &#x27;SMP&#x27;
  [./SMP]
   type = SMP
   off_diag_row = &#x27;w c&#x27;
   off_diag_column = &#x27;c w&#x27;
  [../]
[]

[Kernels]
  [./cres]
    type = SplitCHMath
    variable = c
    kappa_name = kappa_c
    w = w
  [../]

  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]

  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  [./conserved_langevin]
    type = ConservedLangevinNoise
    amplitude = 0.5
    variable = w
    noise = uniform_noise
  []
[]

[BCs]
  [./Periodic]
    [./all]
      variable = &#x27;c w&#x27;
      auto_direction = &#x27;x y&#x27;
    [../]
  [../]
[]

[Materials]
  [./constant]
    type = GenericConstantMaterial
    prop_names  = &#x27;M kappa_c&#x27;
    prop_values = &#x27;1.0 2.0&#x27;
  [../]
[]

[UserObjects]
  [./uniform_noise]
    type = ConservedUniformNoise
  [../]
[]

[Postprocessors]
  [./total_c]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial timestep_end&#x27;
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = &#x27;BDF2&#x27;

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;

  l_max_its = 30
  l_tol = 1.0e-3

  nl_max_its = 30
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  dt = 10.0
  num_steps = 4
[]

[Outputs]
  file_base = uniform
  exodus = true
  [./csv]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c6756149-7332-47c7-9c64-e141cdc8137b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard3.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out
#
# friction_angle = 50deg, friction_angle_residual=51deg, friction_angle_rate = 1E7 (huge)
# cohesion = 10, cohesion_residual = 9.9, cohesion_rate = 1E7 (huge)

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*y*sin(t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 10
    value_residual = 9.9
    rate = 1E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.8726646 # 50deg
    value_residual = 0.8901179 # 51deg
    rate = 1E7
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0
    value_residual = 0.8726646 # 50deg
    rate = 3000
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 1 2 1 11 -3 2 -3 8&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 30
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard3
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="785113af-7366-4ea4-b1e2-ee9003a0b958"><div class="modal-content"><h4>modules/richards/test/tests/uo_egs/seff1.i</h4><pre class="moose-pre"><code class="language-text"># Outputs a effective saturation relationship into an exodus file
# and into a CSV file.
# In the exodus file, the Seff will be a function of &quot;x&quot;, and
# this &quot;x&quot; is actually porepressure
# In the CSV file you will find the Seff at the &quot;x&quot; point
# specified by you below.
#
# You may specify:
#  - the &quot;type&quot; of Seff in the UserObjects block
#  - the parameters of this Seff function in the UserObjects block
#  - the &quot;x&quot; point (which is porepressure) that you want to extract
#       the Seff at, if you want a value at a particular point
#  - the range of &quot;x&quot; values (which is porepressure values) may be
#       changed in the Mesh block, below


[UserObjects]
  [./seff]
    type = RichardsSeff1VG
    al = 1E-6
    m = 0.8
  [../]
[]

[Postprocessors]
  [./point_val]
    type = PointValue
    execute_on = timestep_begin
    # note this point must lie inside the mesh below
    point = &#x27;-1 0 0&#x27;
    variable = seff
  [../]
[]

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  # the following specify the range of porepressure
  xmin = -3E6
  xmax = 1E5
[]

############################
# You should not need to change any of the stuff below
############################


[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u_init]
    type = FunctionIC
    variable = u
    function = x
  [../]
[]

[AuxVariables]
  [./seff]
  [../]
[]

[AuxKernels]
  [./seff_AuxK]
    type = RichardsSeffAux
    variable = seff
    seff_UO = seff
    execute_on = timestep_begin
    pressure_vars = u
  [../]
[]

[Kernels]
  [./dummy]
    type = Diffusion
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 0
[]

[Outputs]
  file_base = seff1
  [./csv]
    type = CSV
  [../]
  [./exodus]
    type = Exodus
    hide = u
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9332540d-12f6-472e-945f-2397e1836b3b"><div class="modal-content"><h4>modules/heat_conduction/test/tests/convective_heat_flux/equilibrium.i</h4><pre class="moose-pre"><code class="language-text">
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 10
[]

[Variables]
  [./temp]
    initial_condition = 200.0
  [../]
[]

[Kernels]
  [./heat_dt]
    type = TimeDerivative
    variable = temp
  [../]
  [./heat_conduction]
    type = Diffusion
    variable = temp
  [../]
[]

[BCs]
  [./right]
    type = ConvectiveHeatFluxBC
    variable = temp
    boundary = &#x27;right&#x27;
    T_infinity = 100.0
    heat_transfer_coefficient = 1
    heat_transfer_coefficient_dT = 0
  [../]
[]

[Postprocessors]
  [./left_temp]
    type = SideAverageValue
    variable = temp
    boundary = left
    execute_on = &#x27;TIMESTEP_END initial&#x27;
  [../]
  [./right_temp]
    type = SideAverageValue
    variable = temp
    boundary = right
  [../]
  [./right_flux]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = 1
  [../]
[]

[Executioner]
  type = Transient

  num_steps = 10
  dt = 1e1

  nl_abs_tol = 1e-12
[]

[Outputs]
  [./out]
    type = CSV
    interval = 10
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f27bd604-0697-4644-9ae6-bcd5e4fa6968"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretch in x, y and z directions.
# trial_stress(0, 0) = -2
# trial_stress(1, 1) = 6
# trial_stress(2, 2) = 10
# With tensile_strength = 2, the algorithm should return to trace(stress) = 2, or
# stress(0, 0) = -6
# stress(1, 1) = 2
# stress(2, 2) = 6


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9d8ad442-0619-430b-81e1-9ba6a8b3e00f"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/brick_1/brick1_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Mesh]
  file = brick1_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./saved_z]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./diag_saved_z]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./inc_slip_z]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./accum_slip_z]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
  [./tang_force_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y saved_z&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_x
  [../]
  [./disp_x13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_x
  [../]
  [./disp_x16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y8]
    type = NodalVariableValue
    nodeid = 7
    variable = disp_y
  [../]
  [./disp_y13]
    type = NodalVariableValue
    nodeid = 12
    variable = disp_y
  [../]
  [./disp_y16]
    type = NodalVariableValue
    nodeid = 15
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./back_z]
    type = DirichletBC
    variable = disp_z
    boundary = 6
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-9
  nl_rel_tol = 1e-8
  l_max_its = 50
  nl_max_its = 100
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-5
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  file_base = brick1_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = brick1_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_x8 disp_x13 disp_x16 disp_y5 disp_y8 disp_y13 disp_y16 stress_yy stress_zz top_react_x top_react_y x_disp y_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ef5a2ab5-af1c-4f84-be14-48522daf59fd"><div class="modal-content"><h4>modules/porous_flow/test/tests/poro_elasticity/terzaghi_basicthm.i</h4><pre class="moose-pre"><code class="language-text"># Using a BasicTHM action
# Terzaghi&#x27;s problem of consolodation of a drained medium
# The FullySaturated Kernels are used, with multiply_by_density = false
# so that this becomes a linear problem with constant Biot Modulus
# Also, since the FullySaturated Kernels are used, we have to
# use consistent_with_displaced_mesh = false in the calculation of volumetric strain
#
# A saturated soil sample sits in a bath of water.
# It is constrained on its sides, and bottom.
# Its sides and bottom are also impermeable.
# Initially it is unstressed.
# A normal stress, q, is applied to the soil&#x27;s top.
# The soil then slowly compresses as water is squeezed
# out from the sample from its top (the top BC for
# the porepressure is porepressure = 0).
#
# See, for example.  Section 2.2 of the online manuscript
# Arnold Verruijt &quot;Theory and Problems of Poroelasticity&quot; Delft University of Technology 2013
# but note that the &quot;sigma&quot; in that paper is the negative
# of the stress in TensorMechanics
#
# Here are the problem&#x27;s parameters, and their values:
# Soil height.  h = 10
# Soil&#x27;s Lame lambda.  la = 2
# Soil&#x27;s Lame mu, which is also the Soil&#x27;s shear modulus.  mu = 3
# Soil bulk modulus.  K = la + 2*mu/3 = 4
# Soil confined compressibility.  m = 1/(K + 4mu/3) = 0.125
# Soil bulk compliance.  1/K = 0.25
# Fluid bulk modulus.  Kf = 8
# Fluid bulk compliance.  1/Kf = 0.125
# Fluid mobility (soil permeability/fluid viscosity).  k = 1.5
# Soil initial porosity.  phi0 = 0.1
# Biot coefficient.  alpha = 0.6
# Soil initial storativity, which is the reciprocal of the initial Biot modulus.  S = phi0/Kf + (alpha - phi0)(1 - alpha)/K = 0.0625
# Consolidation coefficient.  c = k/(S + alpha^2 m) = 13.95348837
# Normal stress on top.  q = 1
# Initial porepressure, resulting from instantaneous application of q, assuming corresponding instantaneous increase of porepressure (Note that this is calculated by MOOSE: we only need it for the analytical solution).  p0 = alpha*m*q/(S + alpha^2 m) = 0.69767442
# Initial vertical displacement (down is positive), resulting from instantaneous application of q (Note this is calculated by MOOSE: we only need it for the analytical solution).  uz0 = q*m*h*S/(S + alpha^2 m)
# Final vertical displacement (down in positive) (Note this is calculated by MOOSE: we only need it for the analytical solution).  uzinf = q*m*h
#
# The solution for porepressure is
# P = 4*p0/\pi \sum_{k=1}^{\infty} \frac{(-1)^{k-1}}{2k-1} \cos ((2k-1)\pi z/(2h)) \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))
# This series converges very slowly for ct/h^2 small, so in that domain
# P = p0 erf( (1-(z/h))/(2 \sqrt(ct/h^2)) )
#
# The degree of consolidation is defined as
# U = (uz - uz0)/(uzinf - uz0)
# where uz0 and uzinf are defined above, and
# uz = the vertical displacement of the top (down is positive)
# U = 1 - (8/\pi^2)\sum_{k=1}^{\infty} \frac{1}{(2k-1)^2} \exp(-(2k-1)^2 \pi^2 ct/(4 h^2))

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 10
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = 0
  zmax = 10
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  PorousFlowDictator = dictator
  block = 0
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./porepressure]
  [../]
[]

[BCs]
  [./confinex]
    type = DirichletBC
    variable = disp_x
    value = 0
    boundary = &#x27;left right&#x27;
  [../]
  [./confiney]
    type = DirichletBC
    variable = disp_y
    value = 0
    boundary = &#x27;bottom top&#x27;
  [../]
  [./basefixed]
    type = DirichletBC
    variable = disp_z
    value = 0
    boundary = back
  [../]
  [./topdrained]
    type = DirichletBC
    variable = porepressure
    value = 0
    boundary = front
  [../]
  [./topload]
    type = NeumannBC
    variable = disp_z
    value = -1
    boundary = front
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 8.0
      viscosity = 0.96
      density0 = 1.0
    [../]
  [../]
[]

[PorousFlowBasicTHM]
  coupling_type = HydroMechanical
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  multiply_by_density = false
  porepressure = porepressure
  biot_coefficient = 0.6
  gravity = &#x27;0 0 0&#x27;
  fp = the_simple_fluid
[]


[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;2 3&#x27;
    # bulk modulus is lambda + 2*mu/3 = 2 + 2*3/3 = 4
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]
  [./porosity]
    type = PorousFlowPorosityConst # only the initial value of this is used
    porosity = 0.1
  [../]
  [./biot_modulus]
    type = PorousFlowConstantBiotModulus
    biot_coefficient = 0.6
    fluid_bulk_modulus = 8
    solid_bulk_compliance = 0.25
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.5 0 0   0 1.5 0   0 0 1.5&#x27;
  [../]
[]

[Postprocessors]
  [./p0]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 0&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p1]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 1&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p2]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 2&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p3]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 3&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p4]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 4&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p5]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 5&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p6]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 6&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p7]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 7&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p8]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 8&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p9]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 9&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./p99]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = porepressure
    use_displaced_mesh = false
  [../]
  [./zdisp]
    type = PointValue
    outputs = csv
    point = &#x27;0 0 10&#x27;
    variable = disp_z
    use_displaced_mesh = false
  [../]
  [./dt]
    type = FunctionValuePostprocessor
    outputs = console
    function = if(0.5*t&lt;0.1,0.5*t,0.1)
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  start_time = 0
  end_time = 10
  [./TimeStepper]
    type = PostprocessorDT
    postprocessor = dt
    dt = 0.0001
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  file_base = terzaghi_basicthm
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d4144685-8c48-4dec-b9f5-e723d096214c"><div class="modal-content"><h4>modules/richards/test/tests/uo_egs/relperm.i</h4><pre class="moose-pre"><code class="language-text"># Outputs a relative permeability curve into an exodus file
# and into a CSV file.
# In the exodus file, the relperm will be a function of &quot;x&quot;, and
# this &quot;x&quot; is actually effective saturation.
# In the CSV file you will find the relperm at the &quot;x&quot; point
# specified by you below.
#
# You may specify:
#  - the &quot;type&quot; of relative permeability in the UserObjects block
#  - the parameters of this relative permeability curve in the UserObjects block
#  - the &quot;x&quot; point (which is effective saturation) that you want to extract
#       the relative permeability at, if you want a value at a particular point


[UserObjects]
  [./relperm]
    type = RichardsRelPermPower
    simm = 0.1
    n = 3
  [../]
[]

[Postprocessors]
  [./point_val]
    type = PointValue
    execute_on = timestep_begin
    point = &#x27;0.5 0 0&#x27;
    variable = relperm
  [../]
[]


############################
# You should not need to change any of the stuff below
############################

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[Variables]
  [./u]
  [../]
[]

[ICs]
  [./u_init]
    type = FunctionIC
    variable = u
    function = x
  [../]
[]

[AuxVariables]
  [./relperm]
  [../]
[]

[AuxKernels]
  [./relperm_AuxK]
    type = RichardsRelPermAux
    variable = relperm
    relperm_UO = relperm
    execute_on = timestep_begin
    seff_var = u
  [../]
[]

[Kernels]
  [./dummy]
    type = Diffusion
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 0
[]

[Outputs]
  file_base = relperm
  [./csv]
    type = CSV
  [../]
  [./exodus]
    type = Exodus
    hide = u
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="912da78b-e0b5-4601-ae45-702bd2fa9157"><div class="modal-content"><h4>test/tests/outputs/postprocessor/show_hide.i</h4><pre class="moose-pre"><code class="language-text"># Having 2 postprocessors, putting one into hide list and the other one into show list
# We should only see the PPS that is in the show list in the output.

[Mesh]
  type = GeneratedMesh
  dim = 2
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1
  nx = 10
  ny = 10
  elem_type = QUAD4
  # This test uses ElementalVariableValue postprocessors on specific
  # elements, so element numbering needs to stay unchanged
  allow_renumbering = false
[]

[Functions]
  [./bc_fn]
    type = ParsedFunction
    value = x
  [../]
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./all_u]
    type = FunctionDirichletBC
    variable = u
    boundary = &#x27;1 3&#x27;
    function = bc_fn
  [../]
[]

[Postprocessors]
  [./elem_56]
    type = ElementalVariableValue
    variable = u
    elementid = 56
  [../]

  [./elem_12]
    type = ElementalVariableValue
    variable = u
    elementid = 12
  [../]
[]

[Executioner]
  type = Steady
  solve_type = &#x27;NEWTON&#x27;
[]

[Outputs]
  [./console]
    type = Console
    show = &#x27;elem_56&#x27;
    hide = &#x27;elem_12&#x27;
  [../]
  [./out]
    type = CSV
    show = &#x27;elem_56&#x27;
    hide = &#x27;elem_12&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7f24f075-1c16-46a7-8cb6-fdcca01ddff6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar1.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in z direction, and by small amounts in x and y directions
# stress_zz = Youngs Modulus*Strain = 2E6*1E-6 = 2 Pa
# tensile_strength is set to 1Pa
# Then the final stress should return to the yeild surface and the maximum principal stress value should be 1pa, and value of plastic strain should be 0.5E-6

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.2E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = tens
    debug_fspb = crash
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bfc2acac-f105-4f75-a280-6966507ebb54"><div class="modal-content"><h4>modules/porous_flow/test/tests/dispersion/diff01_action.i</h4><pre class="moose-pre"><code class="language-text"># Test diffusive part of PorousFlowDispersiveFlux kernel by setting dispersion
# coefficients to zero. Pressure is held constant over the mesh, and gravity is
# set to zero so that no advective transport of mass takes place.
# Mass fraction is set to 1 on the left hand side and 0 on the right hand side.

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 20
  xmax = 10
  bias_x = 1.1
[]

[GlobalParams]
  PorousFlowDictator = andy_heheheh
[]

[Variables]
  [./pp]
  [../]
  [./massfrac0]
  [../]
[]

[ICs]
  [./pp]
    type = ConstantIC
    variable = pp
    value = 1e5
  [../]
  [./massfrac0]
    type = ConstantIC
    variable = massfrac0
    value = 0
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    value = 1
    variable = massfrac0
    boundary = left
  [../]
  [./right]
    type = DirichletBC
    value = 0
    variable = massfrac0
    boundary = right
  [../]
  [./pright]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 1e5
  [../]
  [./pleft]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1e5
  [../]
[]

[Kernels]
  [./diff0]
    type = PorousFlowDispersiveFlux
    fluid_component = 0
    variable = massfrac0
    disp_trans = 0
    disp_long = 0
    gravity = &#x27;0 0 0&#x27;
  [../]
  [./diff1]
    type = PorousFlowDispersiveFlux
    fluid_component = 1
    variable = pp
    disp_trans = 0
    disp_long = 0
    gravity = &#x27;0 0 0&#x27;
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      thermal_expansion = 0.0
      bulk_modulus = 1E7
      viscosity = 0.001
      density0 = 1000.0
    [../]
  [../]
[]

[PorousFlowUnsaturated]
  porepressure = pp
  gravity = &#x27;0 0 0&#x27;
  fp = the_simple_fluid
  dictator_name = andy_heheheh
  relative_permeability_type = Corey
  relative_permeability_exponent = 0.0
  mass_fraction_vars = massfrac0
[]

[Materials]
  [./poro]
    type = PorousFlowPorosityConst
    porosity = 0.3
  [../]
  [./diff]
    type = PorousFlowDiffusivityConst
    diffusion_coeff = &#x27;1 1&#x27;
    tortuosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-9 0 0 0 1e-9 0 0 0 1e-9&#x27;
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2             &#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 20
[]

[VectorPostprocessors]
  [./xmass]
    type = NodalValueSampler
    sort_by = id
    variable = massfrac0
  [../]
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4b27e3f2-6d38-4250-b2cb-342df443d995"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_advection/fltvd_2D.i</h4><pre class="moose-pre"><code class="language-text"># Using Flux-Limited TVD Advection ala Kuzmin and Turek, with antidiffusion from superbee flux limiting
# 2D version
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  xmin = 0
  xmax = 1
  ny = 4
  ymin = 0
  ymax = 0.5
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = MassLumpedTimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = FluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = fluo
  [../]
[]

[UserObjects]
  [./fluo]
    type = AdvectiveFluxCalculatorConstantVelocity
    flux_limiter_type = superbee
    u = tracer
    velocity = &#x27;0.1 0 0&#x27;
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
# Ideally, an OutflowBC would be used, but that does not exist in the framework
# In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0.5 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  nl_max_its = 500
  timestep_tolerance = 1E-3
[]

[Outputs]
  print_linear_residuals = false
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="38f0b05c-e28b-4b5d-9215-13daa986c4fe"><div class="modal-content"><h4>modules/porous_flow/test/tests/numerical_diffusion/framework.i</h4><pre class="moose-pre"><code class="language-text"># Using framework objects: no mass lumping or upwinding
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = 0
  xmax = 1
[]

[Variables]
  [./tracer]
  [../]
[]

[ICs]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass_dot]
    type = TimeDerivative
    variable = tracer
  [../]
  [./flux]
    type = ConservativeAdvection
    velocity = &#x27;0.1 0 0&#x27;
    variable = tracer
  [../]
[]

[BCs]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_tracer]
    # Ideally, an OutflowBC would be used, but that does not exist in the framework
    # In 1D VacuumBC is the same as OutflowBC, with the alpha parameter being twice the velocity
    type = VacuumBC
    boundary = right
    alpha = 0.2 # 2 * velocity
    variable = tracer
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 101
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-1
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d8babaf-6679-48fb-a906-910e103f4316"><div class="modal-content"><h4>modules/contact/test/tests/verification/hertz_cyl/half_symm_q4/hertz_cyl_half_1deg_template3.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  order = FIRST
  family = LAGRANGE
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = hertz_cyl_half_1deg.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Functions]
  [./disp_ramp_vert]
    type = PiecewiseLinear
    x = &#x27;0. 1. 11.&#x27;
    y = &#x27;0. -0.0020 -0.0020&#x27;
  [../]
  [./disp_ramp_horz]
    type = PiecewiseLinear
    x = &#x27;0. 1. 11.&#x27;
    y = &#x27;0. 0.0 0.0014&#x27;
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    extra_vector_tags = &#x27;ref&#x27;
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 2
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 2
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 2
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 4
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 4
  [../]
  [./disp_x226]
    type = NodalVariableValue
    nodeid = 225
    variable = disp_x
  [../]
  [./disp_y226]
    type = NodalVariableValue
    nodeid = 225
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./side_x]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./bot_y]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;1 2&#x27;
    value = 0.0
  [../]
  [./top_y_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = 4
    function = disp_ramp_vert
  [../]
  [./top_x_disp]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 4
    function = disp_ramp_horz
  [../]
[]

[Materials]
  [./stuff1_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e10
    poissons_ratio = 0.0
  [../]
  [./stuff1_strain]
    type = ComputeFiniteStrain
    block = &#x27;1&#x27;
  [../]
  [./stuff1_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./stuff2_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff2_strain]
    type = ComputeFiniteStrain
    block = &#x27;2&#x27;
  [../]
  [./stuff2_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
  [./stuff3_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;3&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff3_strain]
    type = ComputeFiniteStrain
    block = &#x27;3&#x27;
  [../]
  [./stuff3_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;3&#x27;
  [../]
  [./stuff4_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;4&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff4_strain]
    type = ComputeFiniteStrain
    block = &#x27;4&#x27;
  [../]
  [./stuff4_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;4&#x27;
  [../]
  [./stuff5_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;5&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff5_strain]
    type = ComputeFiniteStrain
    block = &#x27;5&#x27;
  [../]
  [./stuff5_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;5&#x27;
  [../]
  [./stuff6_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;6&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff6_strain]
    type = ComputeFiniteStrain
    block = &#x27;6&#x27;
  [../]
  [./stuff6_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;6&#x27;
  [../]
  [./stuff7_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;7&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./stuff7_strain]
    type = ComputeFiniteStrain
    block = &#x27;7&#x27;
  [../]
  [./stuff7_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;7&#x27;
  [../]
[]

[Executioner]
  type = Transient

  #Preconditioned JFNK (default)
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 200

  start_time = 0.0
  end_time = 2.0
  l_tol = 5e-4
  dt = 0.1
  dtmin = 0.1
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./y_disp]
    type = NodalValueSampler
    variable = disp_y
    boundary = &#x27;3 4&#x27;
    sort_by = id
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = id
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;x_disp y_disp cont_press&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./chkfile2]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x226 disp_y226 top_react_x top_react_y&#x27;
    start_time = 0.9
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./interface]
    primary = 2
    secondary = 3
    disp_x = disp_x
    disp_y = disp_y
    model = coulomb
    friction_coefficient = 0.0
    formulation = penalty
    normalize_penalty = true
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]

[Dampers]
  [./contact_slip]
    type = ContactSlipDamper
    primary = &#x27;2&#x27;
    secondary = &#x27;3&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="67bbf3cf-13c4-4dad-a72a-6fef5dfcc8ca"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface12.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 1.5E-6m in y direction and 1.5E-6 in z direction.
# trial stress_yy = .15 and stress_zz = 1.5
#
# Then SimpleTester0 and SimpleTester1 should activate and the algorithm will return to
# stress_zz=1=stress_yy
# internal0 should be 0.5 and internal1 should be 0.5

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface12
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9163fe89-22a8-4f21-b5b2-78d1d1a2461c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial2.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = FileMesh
  file = quarter_hole.e
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;zmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymax_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;ymax&#x27;
    function = &#x27;-1E-4*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 2
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 2
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0.01E6
    mc_edge_smoother = 29
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 1
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 5E9&#x27; # young = 10Gpa, poisson = 0.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 1
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 1
    ep_plastic_tolerance = 1E-11
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
[]

# Preconditioning and Executioner options kindly provided by Andrea
[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 0.5
  dt = 0.1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-9
  nl_rel_tol = 1E-11
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = uni_axial2
  exodus = true
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5c33d667-e505-4cea-8a57-1b5741844c07"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface02.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 0E-6m in y direction and 2.0E-6 in z direction.
# trial stress_yy = 0 and stress_zz = 2.0
#
# Then SimpleTester0 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=0.5, stress_zz=1, but this will require a negative plasticity
# multiplier for SimpleTester2, so it will be deactivated, and the algorithm will return to
# stress_yy = 0, stress_zz = 1
# internal0 should be 1.0, and others zero

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface02
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3a511be8-e57d-42b3-a5ca-759c523190fa"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d80fcee0-d13d-48c9-9335-35d6fe024f59"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/weak_plane_tensile/small_deform_hard_cubic.i</h4><pre class="moose-pre"><code class="language-text"># Checking evolution tensile strength for cubic hardening
# A single element is stretched by 1E-6*t in z direction, and
# the yield-surface evolution is mapped out

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./x_disp]
  [../]
  [./y_disp]
  [../]
  [./z_disp]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
[]


[BCs]
  [./bottomx]
    type = DirichletBC
    variable = x_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = y_disp
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = z_disp
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = DirichletBC
    variable = x_disp
    boundary = front
    value = 0
  [../]
  [./topy]
    type = DirichletBC
    variable = y_disp
    boundary = front
    value = 0
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = z_disp
    boundary = front
    function = 1E-6*t
  [../]
[]

[AuxVariables]
  [./wpt_internal]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./wpt_internal]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = wpt_internal
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./wpt_internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = wpt_internal
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./str]
    type = TensorMechanicsHardeningCubic
    value_0 = 10
    value_residual = 4
    internal_limit = 0.000003
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;x_disp y_disp z_disp&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    plastic_models = wpt
    transverse_direction = &#x27;0 0 1&#x27;
    ep_plastic_tolerance = 1E-11
  [../]
[]


[Executioner]
  end_time = 4
  dt = 0.5
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard_cubic
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c89313f0-02f6-42c2-b141-2d88e9e8bf68"><div class="modal-content"><h4>modules/porous_flow/test/tests/heat_advection/heat_advection_1d_fully_saturated_action.i</h4><pre class="moose-pre"><code class="language-text"># 1phase, heat advecting with a moving fluid
# Using the PorousFlowFullySaturated Action with KT stabilization
# This should produce an identical result to heat_advection_1D_KT
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 50
  xmin = 0
  xmax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./temp]
    initial_condition = 200
  [../]
  [./pp]
  [../]
[]

[ICs]
  [./pp]
    type = FunctionIC
    variable = pp
    function = &#x27;1-x&#x27;
  [../]
[]

[BCs]
  [./pp0]
    type = DirichletBC
    variable = pp
    boundary = left
    value = 1
  [../]
  [./pp1]
    type = DirichletBC
    variable = pp
    boundary = right
    value = 0
  [../]
  [./spit_heat]
    type = DirichletBC
    variable = temp
    boundary = left
    value = 300
  [../]
  [./suck_heat]
    type = DirichletBC
    variable = temp
    boundary = right
    value = 200
  [../]
[]

[PorousFlowFullySaturated]
  porepressure = pp
  temperature = temp
  coupling_type = ThermoHydro
  fp = simple_fluid
  add_darcy_aux = false
  stabilization = KT
  flux_limiter_type = superbee
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 100
      density0 = 1000
      viscosity = 4.4
      thermal_expansion = 0
      cv = 2
    [../]
  [../]
[]

[Materials]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./zero_thermal_conductivity]
    type = PorousFlowThermalConductivityIdeal
    dry_thermal_conductivity = &#x27;0 0 0  0 0 0  0 0 0&#x27;
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1.0
    density = 125
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1.1 0 0 0 2 0 0 0 3&#x27;
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 0.01
  end_time = 0.6
[]

[VectorPostprocessors]
  [./T]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 51
    sort_by = x
    variable = temp
  [../]
[]

[Outputs]
  file_base = heat_advection_1d_fully_saturation_action
  [./csv]
    type = CSV
    sync_times = &#x27;0.1 0.6&#x27;
    sync_only = true
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c67589d2-64ce-426f-afba-facad6054e2e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform1.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretch in x, y and z directions.
# trial_stress(0, 0) = -2
# trial_stress(1, 1) = 6
# trial_stress(2, 2) = 10
# With tensile_strength = 2, the algorithm should return to trace(stress) = 2, or
# stress(0, 0) = -6
# stress(1, 1) = 2
# stress(2, 2) = 6


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 2
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform1
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9f99a8c1-1023-47bd-a44f-f80aad0d90d5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface15.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 3.0E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 3.0 and stress_zz = 3
#
# A complicated return will follow, with various contraints being
# deactivated, kuhn-tucker failing, line-searching, etc, but
# the result should be
# stress_yy=1=stress_zz, and internal0=2 internal1=2

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface15
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="224c7d37-432c-4ee5-9ab9-8b3b29d4977b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># checking for small deformation
# A single element is stretched by 1E-6m in all directions.
# tensile_strength is set to 1Pa, and smoother = 0.5
# Then the final stress should return to the yield surface and all principal stresses should be 0.5

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./mc]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    yield_function_tolerance = 1E-6
    tensile_tip_smoother = 0.5
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f9e4a008-7fe0-4de3-abb6-a6d6e0ec50c2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface04.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 0.8E-6m in y direction and 1.5E-6 in z direction.
# trial stress_yy = 0.8 and stress_zz = 1.5
#
# Then SimpleTester0 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=0.5, stress_zz=1
# internal0 should be 0.2, and internal2 should be 0.3

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0.8E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface04
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a42f2f39-c2d3-4c7f-a90f-a12ceb21256d"><div class="modal-content"><h4>test/tests/vectorpostprocessors/side_value_sampler/side_value_sampler.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = replicated
[]

[Variables]
  [./u]
  [../]
  [./v]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
  [./diff_v]
    type = Diffusion
    variable = v
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
  [./left_v]
    type = DirichletBC
    variable = v
    boundary = left
    value = 1
  [../]
  [./right_v]
    type = DirichletBC
    variable = v
    boundary = right
    value = 0
  [../]
[]

[VectorPostprocessors]
  [./side_sample]
    type = SideValueSampler
    variable = &#x27;u v&#x27;
    boundary = top
    sort_by = x
  [../]
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  [./vpp_csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="657473b8-de73-42a9-bb91-98b6bb562ff6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_weak_plane/small_deform11.i</h4><pre class="moose-pre"><code class="language-text"># use an initial stress, then apply a shear deformation and tensile stretch to observe all hardening.
# Here p_trial=12, q_trial=2*Sqrt(20)
# MOOSE yields:
# q_returned = 1.696
# p_returned = 0.100
# intnl_shear = 1.81
# intnl_tens = 0.886
# These give, at the returned point
# cohesion = 1.84
# tanphi = 0.513
# tanpsi = 0.058
# tensile = 0.412
# This means that
# f_shear = -0.0895
# f_tensile = -0.312
# Note that these are within smoothing_tol (=1) of each other
# Hence, smoothing must be used:
# ismoother = 0.0895
# (which gives the yield function value = 0)
# smoother = 0.328
# This latter gives dg/dq = 0.671, dg/dp = 0.368
# for the flow directions.  Finally ga = 2.70, and
# the returned point satisfies the normality conditions.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    eigenstrain_names = ini_stress
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz plastic_strain_xx plastic_strain_xy plastic_strain_xz plastic_strain_yy plastic_strain_yz plastic_strain_zz strain_xx strain_xy strain_xz strain_yy strain_yz strain_zz&#x27;
  [../]
[]

[BCs]
  [./bottomx]
    type = DirichletBC
    variable = disp_x
    boundary = back
    value = 0.0
  [../]
  [./bottomy]
    type = DirichletBC
    variable = disp_y
    boundary = back
    value = 0.0
  [../]
  [./bottomz]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = 0.0
  [../]

  [./topx]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = front
    function = &#x27;0.5*t&#x27;
  [../]
  [./topy]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = front
    function = &#x27;t&#x27;
  [../]
  [./topz]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;0.5*t&#x27;
  [../]
[]


[AuxVariables]
  [./f_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f_compressive]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ls]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f_shear]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f_shear
  [../]
  [./f_tensile]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f_tensile
  [../]
  [./f_compressive]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = intnl_tensile
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./ls]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = ls
  [../]
[]

[Postprocessors]
  [./stress_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./stress_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./stress_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./stress_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./stress_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./stress_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./strainp_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xx
  [../]
  [./strainp_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xy
  [../]
  [./strainp_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_xz
  [../]
  [./strainp_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yy
  [../]
  [./strainp_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_yz
  [../]
  [./strainp_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = plastic_strain_zz
  [../]
  [./straint_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xx
  [../]
  [./straint_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xy
  [../]
  [./straint_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_xz
  [../]
  [./straint_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yy
  [../]
  [./straint_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_yz
  [../]
  [./straint_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = strain_zz
  [../]
  [./f_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_shear
  [../]
  [./f_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_tensile
  [../]
  [./f_compressive]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f_compressive
  [../]
  [./intnl_shear]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_shear
  [../]
  [./intnl_tensile]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl_tensile
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./ls]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = ls
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 2
    rate = 1
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0
    value_residual = 0.5
    rate = 2
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningExponential
    value_0 = 0.1
    value_residual = 0.05
    rate = 1
  [../]
  [./t_strength]
    type = TensorMechanicsHardeningExponential
    value_0 = 1
    value_residual = 0
    rate = 1
  [../]
  [./c_strength]
    type = TensorMechanicsHardeningConstant
    value = 1E8
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    lambda = 4.0
    shear_modulus = 4.0
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;0 0 2 0 0 4 2 4 6&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = stress
    perform_finite_strain_rotations = false
  [../]
  [./stress]
    type = CappedWeakPlaneStressUpdate
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    tensile_strength = t_strength
    compressive_strength = c_strength
    max_NR_iterations = 20
    tip_smoother = 0
    smoothing_tol = 1
    yield_function_tol = 1E-3
    perfect_guess = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform11
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7179473-ca71-43e3-8247-2246631612e7"><div class="modal-content"><h4>modules/porous_flow/test/tests/pressure_pulse/pressure_pulse_1d_2phasePSVG.i</h4><pre class="moose-pre"><code class="language-text"># Pressure pulse in 1D with 2 phases, 2components - transient

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 100
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./ppwater]
    initial_condition = 2e6
  [../]
  [./sgas]
    initial_condition = 0.3
  [../]
[]

[AuxVariables]
  [./massfrac_ph0_sp0]
    initial_condition = 1
  [../]
  [./massfrac_ph1_sp0]
    initial_condition = 0
  [../]
  [./ppgas]
    family = MONOMIAL
    order = FIRST
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = ppwater
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    variable = ppwater
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = sgas
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    variable = sgas
    fluid_component = 1
  [../]
[]

[AuxKernels]
  [./ppgas]
    type = PorousFlowPropertyAux
    property = pressure
    phase = 1
    variable = ppgas
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;ppwater sgas&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e-4
    sat_lr = 0.3
    pc_max = 1e6
    log_extension = false
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid0]
      type = SimpleFluidProperties
      bulk_modulus = 2e9
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
    [./simple_fluid1]
      type = SimpleFluidProperties
      bulk_modulus = 2e7
      density0 = 1
      thermal_expansion = 0
      viscosity = 1e-5
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow2PhasePS
    phase0_porepressure = ppwater
    phase1_saturation = sgas
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = &#x27;massfrac_ph0_sp0 massfrac_ph1_sp0&#x27;
  [../]
  [./simple_fluid0]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid0
    phase = 0
  [../]
  [./simple_fluid1]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid1
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-15 0 0 0 1e-15 0 0 0 1e-15&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 0
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 1
    phase = 1
  [../]
[]

[BCs]
  [./leftwater]
    type = DirichletBC
    boundary = left
    value = 3e6
    variable = ppwater
  [../]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 2e6
    variable = ppwater
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-20 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  dt = 1e3
  end_time = 1e4
[]

[VectorPostprocessors]
  [./pp]
    type = LineValueSampler
    sort_by = x
    variable = &#x27;ppwater ppgas&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    num_points = 11
  [../]
[]

[Outputs]
  file_base = pressure_pulse_1d_2phasePSVG
  print_linear_residuals = false
  [./csv]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0d75b1e3-b451-4226-95bc-829f157a0024"><div class="modal-content"><h4>modules/stochastic_tools/test/tests/ics/random_ic_distribution_test/random_ic_distribution_test.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 50
  ny = 50
[]

[Variables]
  [u]
    order = FIRST
    family = LAGRANGE
  []
[]

[AuxVariables]
  [u_aux]
    order = CONSTANT
    family = MONOMIAL
  []
[]

[Distributions]
  [uniform]
    type = Uniform
    lower_bound = 1.0
    upper_bound = 3.0
  []
[]

[ICs]
  [u_aux]
    type = RandomIC
    legacy_generator = false
    variable = u_aux
    distribution = uniform
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = 3
    value = 0
  []

  [right]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 1
  []
[]

[VectorPostprocessors]
  [histo]
    type = VolumeHistogram
    variable = u_aux
    min_value = 0
    max_value = 4
    bin_number = 80
    execute_on = initial
    outputs = initial
  []
[]

[Executioner]
  type = Steady
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
  [initial]
    type = CSV
    execute_on = initial
  []
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="efa71d9d-0fac-4ebd-bfce-60fe137461df"><div class="modal-content"><h4>modules/porous_flow/test/tests/fluidstate/theis_tabulated.i</h4><pre class="moose-pre"><code class="language-text"># Two phase Theis problem: Flow from single source using WaterNCG fluidstate.
# Constant rate injection 2 kg/s
# 1D cylindrical mesh
# Initially, system has only a liquid phase, until enough gas is injected
# to form a gas phase, in which case the system becomes two phase.
# Note: this test is the same as theis.i, but uses the tabulated version of the CO2FluidProperties

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 80
  xmax = 200
  bias_x = 1.05
[]

[Problem]
  type = FEProblem
  coord_type = RZ
  rz_coord_axis = Y
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./saturation_gas]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./x1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./y0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_gas]
    type = PorousFlowPropertyAux
    variable = saturation_gas
    property = saturation
    phase = 1
    execute_on = timestep_end
  [../]
  [./x1]
    type = PorousFlowPropertyAux
    variable = x1
    property = mass_fraction
    phase = 0
    fluid_component = 1
    execute_on = timestep_end
  [../]
  [./y0]
    type = PorousFlowPropertyAux
    variable = y0
    property = mass_fraction
    phase = 1
    fluid_component = 0
    execute_on = timestep_end
  [../]
[]

[Variables]
  [./pgas]
    initial_condition = 20e6
  [../]
  [./zi]
    initial_condition = 0
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pgas
  [../]
  [./flux0]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    variable = pgas
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = zi
  [../]
  [./flux1]
    type = PorousFlowAdvectiveFlux
    fluid_component = 1
    variable = zi
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
    pc = 0
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = tabulated
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./tabulated]
      type = TabulatedFluidProperties
      fp = co2
      fluid_property_file = fluid_properties.csv
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.2
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm_water]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
    s_res = 0.1
    sum_s_res = 0.1
  [../]
  [./relperm_gas]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
[]

[BCs]
  [./rightwater]
    type = DirichletBC
    boundary = right
    value = 20e6
    variable = pgas
  [../]
[]

[DiracKernels]
  [./source]
    type = PorousFlowSquarePulsePointSource
    point = &#x27;0 0 0&#x27;
    mass_flux = 2
    variable = zi
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason -ksp_diagonal_scale -ksp_diagonal_scale_fix -ksp_gmres_modifiedgramschmidt -snes_linesearch_monitor&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;gmres      asm      lu           NONZERO                   2               1E-8       1E-10 20&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  end_time = 8e2
  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 2
    growth_factor = 2
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    sort_by = x
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;200 0 0&#x27;
    num_points = 1000
    variable = &#x27;pgas zi x1 saturation_gas&#x27;
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Postprocessors]
  [./pgas]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = pgas
  [../]
  [./sgas]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = saturation_gas
  [../]
  [./zi]
    type = PointValue
    point = &#x27;1 0 0&#x27;
    variable = zi
  [../]
  [./massgas]
    type = PorousFlowFluidMass
    fluid_component = 1
  [../]
  [./x1]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = x1
  [../]
  [./y0]
    type = PointValue
    point =  &#x27;1 0 0&#x27;
    variable = y0
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  [./csvout]
    type = CSV
    file_base = theis_tabulated_csvout
    execute_on = timestep_end
    execute_vector_postprocessors_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fd437afd-3a94-4a1d-8b27-ab1e1b4d1ddc"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/planar4.i</h4><pre class="moose-pre"><code class="language-text"># A single unit element is stretched by 1E-6m in z direction.
# with Lame lambda = 0.6E6 and Lame mu (shear) = 1E6
# stress_zz = 2.6 Pa
# stress_xx = 0.6 Pa
# stress_yy = 0.6 Pa
# tensile_strength is set to 0.5Pa
#
# The return should be to a plane (but the algorithm
# will try tip-return first), with
# stress_zz = 0.5
# plastic multiplier = 2.1/2.6 E-6
# stress_xx = 0.6 - (2.1/2.6*0.6) = 0.115
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./intnl_auxk]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./iter]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = iter
  [../]
  [./intnl]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = intnl
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
  [./tens]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    shift = 1E-6
    yield_function_tolerance = 1E-6
    internal_constraint_tolerance = 1E-5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.6E6 1E6&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-12
    plastic_models = tens
    debug_fspb = none
    debug_jac_at_stress = &#x27;1 2 3 2 -4 -5 3 -5 10&#x27;
    debug_jac_at_pm = &#x27;0.1 0.2 0.3&#x27;
    debug_jac_at_intnl = 1E-6
    debug_stress_change = 1E-6
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = planar4
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="49453456-c86d-48ed-bd25-8afc8b8edc46"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_native.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.35E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 8
    mc_interpolation_scheme = native
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-13
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_native
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7a83c437-4ccb-4f82-b63f-66104df8d24c"><div class="modal-content"><h4>modules/porous_flow/test/tests/flux_limited_TVD_pflow/pffltvd_1D_adaptivity.i</h4><pre class="moose-pre"><code class="language-text"># Using flux-limited TVD advection ala Kuzmin and Turek, mploying PorousFlow Kernels and UserObjects, with superbee flux-limiter
# 1D version with adaptivity
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 10
  xmin = 0
  xmax = 1
[]

[Adaptivity]
  initial_steps = 1
  initial_marker = tracer_marker
  marker = tracer_marker
  max_h_level = 1
  [./Markers]
    [./tracer_marker]
      type = ValueRangeMarker
      variable = tracer
      lower_bound = 0.02
      upper_bound = 0.98
    [../]
  [../]
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./porepressure]
  [../]
  [./tracer]
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = &#x27;1 - x&#x27;
  [../]
  [./tracer]
    type = FunctionIC
    variable = tracer
    function = &#x27;if(x&lt;0.1,0,if(x&gt;0.3,0,1))&#x27;
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = tracer
  [../]
  [./flux0]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = tracer
    advective_flux_calculator = advective_flux_calculator_0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    fluid_component = 1
    variable = porepressure
  [../]
  [./flux1]
    type = PorousFlowFluxLimitedTVDAdvection
    variable = porepressure
    advective_flux_calculator = advective_flux_calculator_1
  [../]
[]

[BCs]
  [./constant_injection_porepressure]
    type = DirichletBC
    variable = porepressure
    value = 1
    boundary = left
  [../]
  [./no_tracer_on_left]
    type = DirichletBC
    variable = tracer
    value = 0
    boundary = left
  [../]
  [./remove_component_1]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 1
    use_mobility = true
    flux_function = 1E3
  [../]
  [./remove_component_0]
    type = PorousFlowPiecewiseLinearSink
    variable = tracer
    boundary = right
    fluid_phase = 0
    pt_vals = &#x27;0 1E3&#x27;
    multipliers = &#x27;0 1E3&#x27;
    mass_fraction_component = 0
    use_mobility = true
    flux_function = 1E3
  [../]
[]

[Modules]
  [./FluidProperties]
    [./the_simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E9
      thermal_expansion = 0
      viscosity = 1.0
      density0 = 1000.0
    [../]
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure tracer&#x27;
    number_fluid_phases = 1
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureConst
  [../]
  [./advective_flux_calculator_0]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 0
  [../]
  [./advective_flux_calculator_1]
    type = PorousFlowAdvectiveFluxCalculatorSaturatedMultiComponent
    flux_limiter_type = superbee
    fluid_component = 1
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
    mass_fraction_vars = tracer
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = the_simple_fluid
    phase = 0
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityConst
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosity
    porosity_zero = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-2 0 0   0 1E-2 0   0 0 1E-2&#x27;
  [../]
[]

[Preconditioning]
  active = basic
  [./basic]
    type = SMP
    full = true
    petsc_options = &#x27;-ksp_diagonal_scale -ksp_diagonal_scale_fix&#x27;
    petsc_options_iname = &#x27;-pc_type -sub_pc_type -sub_pc_factor_shift_type -pc_asm_overlap&#x27;
    petsc_options_value = &#x27; asm      lu           NONZERO                   2&#x27;
  [../]
  [./preferred_but_might_not_be_installed]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
    petsc_options_value = &#x27; lu       mumps&#x27;
  [../]
[]

[VectorPostprocessors]
  [./tracer]
    type = LineValueSampler
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;1 0 0&#x27;
    num_points = 11
    sort_by = x
    variable = tracer
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 6
  dt = 6E-2
  nl_abs_tol = 1E-8
  timestep_tolerance = 1E-3
[]

[Outputs]
  [./out]
    type = CSV
    execute_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ecfdbfb5-1c60-4537-8761-7c1c6732bfe5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/uni_axial3_planar.i</h4><pre class="moose-pre"><code class="language-text"># same as uni_axial2 but with planar mohr-coulomb
[Mesh]
  type = FileMesh
  file = quarter_hole.e
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = &#x27;zmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin&#x27;
    value = &#x27;0&#x27;
  [../]
  [./ymax_disp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;ymax&#x27;
    function = &#x27;-1E-4*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0.005 0.02 0.002&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E7
  [../]
  [./fric]
    type = TensorMechanicsHardeningConstant
    value = 40
    convert_to_radians = true
  [../]
  [./dil]
    type = TensorMechanicsHardeningConstant
    value = 40
    convert_to_radians = true
  [../]

  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = coh
    friction_angle = fric
    dilation_angle = dil
    yield_function_tolerance = 1.0 # THIS IS HIGHER THAN THE SMOOTH CASE TO AVOID PRECISION-LOSS PROBLEMS!
    shift =  1.0
    use_custom_returnMap = false
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 1
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 5E9&#x27; # young = 10Gpa, poisson = 0.0
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 1
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 1
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    max_NR_iterations = 100
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    debug_fspb = crash
  [../]
[]

# Preconditioning and Executioner options kindly provided by Andrea
[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]


[Executioner]
  end_time = 1.05
  dt = 0.1
  solve_type = NEWTON
  type = Transient
[]


[Outputs]
  file_base = uni_axial3_planar
  [./exodus]
    type = Exodus
    hide = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz yield_fcn s_xx s_xy s_xz s_yy s_yz s_zz f&#x27;
  [../]
  [./csv]
    type = CSV
    interval = 1
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8a791d0a-ce49-4317-83f8-583c459f2b71"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform_hard2.i</h4><pre class="moose-pre"><code class="language-text"># apply uniform stretches in x, y and z directions.
# let friction_angle = 60deg, friction_angle_residual=10deg, friction_angle_rate = 0.5E4
# With cohesion = C, friction_angle = phi, tip_smoother = T, the
# algorithm should return to
# sigma_m = (C*Cos(phi) - T)/Sin(phi)
# Or, when T=C,
# phi = 2*pi*n - 2*arctan(sigma_m/C)
# This allows checking of the relationship for phi

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.04719755 # 60deg
    value_residual = 0.17453293 # 10deg
    rate = 0.5E4
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 10
    mc_edge_smoother = 25
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 1 2 1 10 3 2 3 10&#x27;
    debug_jac_at_pm = 1
    debug_jac_at_intnl = 1E-3
    debug_stress_change = 1E-5
    debug_pm_change = 1E-6
    debug_intnl_change = 1E-6
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform_hard2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="62941e77-4d55-4af6-a085-4e4c94cc2b65"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/cyl_3/cyl3_template1.i</h4><pre class="moose-pre"><code class="language-text">#
# This input file is a template for both the frictionless and glued test
# variations for the current problem geometry. In order to create an input
# file to run outside the runtest framework, look at the tests file and add the
# appropriate input file lines from the cli_args line.
#

[GlobalParams]
  order = SECOND
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = cyl3_mesh.e
[]

[Problem]
  type = FEProblem
  coord_type = RZ
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[] # AuxKernels

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_x
  [../]
  [./disp_x11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_x
  [../]
  [./disp_y2]
    type = NodalVariableValue
    nodeid = 1
    variable = disp_y
  [../]
  [./disp_y11]
    type = NodalVariableValue
    nodeid = 10
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeAxisymmetricRZIncrementalStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-7
  nl_rel_tol = 1e-6
  l_max_its = 100
  nl_max_its = 1000
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-4
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    show = &#x27;bot_react_x bot_react_y disp_x2 disp_y2 disp_x11 disp_y11 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    tangential_tolerance = 1e-3
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b84e11a9-c905-4094-a61f-8e4c093a3813"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/three_surface08.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 1.5
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.0E-6m in y direction and 0.5E-6 in z direction.
# trial stress_yy = 2.0 and stress_zz = 0.5
#
# Then SimpleTester1 and SimpleTester2 should activate and the algorithm will return to
# the corner stress_yy=1.0, stress_zz=0.5
# internal1 should be 1.0, and internal2 should be 0

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.0E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.5E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 1.5
    yield_function_tolerance = 1.0E-9
    internal_constraint_tolerance = 1.0E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2&#x27;
    max_NR_iterations = 2
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = three_surface08
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8935073b-31c6-4d72-a68d-8677ee225567"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/eight_surface14.i</h4><pre class="moose-pre"><code class="language-text"># Plasticit models:
# SimpleTester0 with a = 0 and b = 1 and strength = 1
# SimpleTester1 with a = 1 and b = 0 and strength = 1
# SimpleTester2 with a = 1 and b = 1 and strength = 3
# SimpleTester3 with a = 0 and b = 1 and strength = 1.1
# SimpleTester4 with a = 1 and b = 0 and strength = 1.1
# SimpleTester5 with a = 1 and b = 1 and strength = 3.1
# SimpleTester6 with a = 1 and b = 2 and strength = 3.1
# SimpleTester7 with a = 2 and b = 1 and strength = 3.1
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A single element is stretched by 2.1E-6m in y direction and 3E-6 in z direction.
# trial stress_yy = 2.1 and stress_zz = 3.0
#
# This is similar to three_surface14.i, and a description is found there.
# The result should be stress_zz=1=stress_yy, with internal0=2
# and internal1=1.1

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2.1E-6*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;3.0E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f7]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int7]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 4
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 5
    variable = f5
  [../]
  [./f6]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 6
    variable = f6
  [../]
  [./f7]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 7
    variable = f7
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
  [./int4]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 4
    variable = int4
  [../]
  [./int5]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 5
    variable = int5
  [../]
  [./int6]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 6
    variable = int6
  [../]
  [./int7]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 7
    variable = int7
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f0
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f1
  [../]
  [./f2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f2
  [../]
  [./f3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f3
  [../]
  [./f4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f4
  [../]
  [./f5]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f5
  [../]
  [./f6]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f6
  [../]
  [./f7]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f7
  [../]
  [./int0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int0
  [../]
  [./int1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int1
  [../]
  [./int2]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int2
  [../]
  [./int3]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int3
  [../]
  [./int4]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int4
  [../]
  [./int5]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int5
  [../]
  [./int6]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int6
  [../]
  [./int7]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = int7
  [../]
[]

[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple3]
    type = TensorMechanicsPlasticSimpleTester
    a = 0
    b = 1
    strength = 1.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple4]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple5]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 1
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple6]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 2
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple7]
    type = TensorMechanicsPlasticSimpleTester
    a = 2
    b = 1
    strength = 3.1
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = &#x27;simple0 simple1 simple2 simple3 simple4 simple5 simple6 simple7&#x27;
    deactivation_scheme = optimized_to_safe
    max_NR_iterations = 4
    min_stepsize = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E-5
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = eight_surface14
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fd748a3f-3de1-4dc0-9bca-f454912fde3b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/drucker_prager/small_deform3_inner_tip.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x z directions, and smaller stretches along the y direction,
# so that sigma_I = sigma_II,
# which means that lode angle = 30deg.
# The allows yield surface in meridional plane to be mapped out


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*x*t&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;-1.7E-6*y*t&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;1E-6*z*t&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./internal]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = mc_int
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticDruckerPragerHyperbolic
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    smoother = 8
    mc_interpolation_scheme = inner_tip
    yield_function_tolerance = 1E-7
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-13
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 10
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_inner_tip
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="47e7fb21-d678-4d9b-8da0-6013df2b4613"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="77f3cc1d-0cca-4bee-93e1-76e95156e3e0"><div class="modal-content"><h4>modules/richards/test/tests/dirac/q2p01.i</h4><pre class="moose-pre"><code class="language-text"># unsaturated
# production
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -1
  xmax = 1
  ymin = -1
  ymax = 1
  zmin = -1
  zmax = 1
[]

[Functions]
  [./dts]
    type = PiecewiseLinear
    y = &#x27;1E-2 1E-1 1 1E1 1E2 1E3&#x27;
    x = &#x27;0 1E-1 1 1E1 1E2 1E3&#x27;
  [../]
[]


[UserObjects]
  [./DensityWater]
    type = RichardsDensityConstBulk
    dens0 = 1
    bulk_mod = 0.5
  [../]
  [./DensityGas]
    type = RichardsDensityConstBulk
    dens0 = 0.5
    bulk_mod = 0.3
  [../]
  [./RelPermWater]
    type = RichardsRelPermPower
    simm = 0.2
    n = 2
  [../]
  [./RelPermGas]
    type = Q2PRelPermPowerGas
    simm = 0.1
    n = 3
  [../]

  [./borehole_total_outflow_water]
    type = RichardsSumQuantity
  [../]
  [./borehole_total_outflow_gas]
    type = RichardsSumQuantity
  [../]
[]


[Variables]
  [./pp]
  [../]
  [./sat]
  [../]
[]

[ICs]
  [./p_ic]
    type = ConstantIC
    variable = pp
    value = 1
  [../]
  [./s_ic]
    type = ConstantIC
    variable = sat
    value = 0.5
  [../]
[]


[Q2P]
  porepressure = pp
  saturation = sat
  water_density = DensityWater
  water_relperm = RelPermWater
  water_viscosity = 0.8
  gas_density = DensityGas
  gas_relperm = RelPermGas
  gas_viscosity = 0.5
  diffusivity = 0.0
  output_total_masses_to = &#x27;CSV&#x27;
[]

[DiracKernels]
  [./bh_water]
    type = Q2PBorehole
    bottom_pressure = 0
    point_file = bh02.bh
    SumQuantityUO = borehole_total_outflow_water
    variable = sat
    unit_weight = &#x27;0 0 0&#x27;
    character = 8E9
    fluid_density = DensityWater
    fluid_relperm = RelPermWater
    other_var = pp
    var_is_porepressure = false
    fluid_viscosity = 0.8
  [../]
  [./bh_gas]
    type = Q2PBorehole
    bottom_pressure = 0
    point_file = bh02.bh
    SumQuantityUO = borehole_total_outflow_gas
    variable = pp
    unit_weight = &#x27;0 0 0&#x27;
    character = 1E10
    fluid_density = DensityGas
    fluid_relperm = RelPermGas
    other_var = sat
    var_is_porepressure = true
    fluid_viscosity = 0.5
  [../]
[]



[Postprocessors]
  [./bh_report_water]
    type = RichardsPlotQuantity
    uo = borehole_total_outflow_water
  [../]
  [./bh_report_gas]
    type = RichardsPlotQuantity
    uo = borehole_total_outflow_gas
  [../]

  [./p0]
    type = PointValue
    variable = pp
    point = &#x27;1 1 1&#x27;
    execute_on = timestep_end
  [../]
  [./sat0]
    type = PointValue
    variable = sat
    point = &#x27;1 1 1&#x27;
    execute_on = timestep_end
  [../]
[]




[Materials]
  [./rock]
    type = Q2PMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-12 0 0  0 1E-12 0  0 0 1E-12&#x27;
    gravity = &#x27;0 0 0&#x27;
  [../]
[]


[Preconditioning]
  [./usual]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -ksp_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-10 1E-10 10000 30&#x27;
  [../]
[]


[Executioner]
  type = Transient
  end_time = 1E3
  solve_type = NEWTON

  [./TimeStepper]
    type = FunctionDT
    function = dts
  [../]


[]

[Outputs]
  file_base = q2p01
  execute_on = timestep_end
  [./CSV]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a09b4eec-e500-42c8-9c87-d2858f008b0a"><div class="modal-content"><h4>modules/contact/test/tests/verification/patch_tests/plane_2/plane2_mu_0_2_pen.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  volumetric_locking_correction = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  file = plane2_mesh.e
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./penetration]
  [../]
  [./saved_x]
  [../]
  [./saved_y]
  [../]
  [./diag_saved_x]
  [../]
  [./diag_saved_y]
  [../]
  [./inc_slip_x]
  [../]
  [./inc_slip_y]
  [../]
  [./accum_slip_x]
  [../]
  [./accum_slip_y]
  [../]
  [./tang_force_x]
  [../]
  [./tang_force_y]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    use_displaced_mesh = true
    save_in = &#x27;saved_x saved_y&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./inc_slip_x]
    type = PenetrationAux
    variable = inc_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./inc_slip_y]
    type = PenetrationAux
    variable = inc_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_x]
    type = PenetrationAux
    variable = accum_slip_x
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./accum_slip_y]
    type = PenetrationAux
    variable = accum_slip_y
    execute_on = timestep_end
    boundary = 3
    paired_boundary = 4
  [../]
  [./penetration]
    type = PenetrationAux
    variable = penetration
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_x]
    type = PenetrationAux
    variable = tang_force_x
    quantity = tangential_force_x
    boundary = 3
    paired_boundary = 4
  [../]
  [./tang_force_y]
    type = PenetrationAux
    variable = tang_force_y
    quantity = tangential_force_y
    boundary = 3
    paired_boundary = 4
  [../]
[]

[Postprocessors]
  [./bot_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 1
  [../]
  [./bot_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 1
  [../]
  [./top_react_x]
    type = NodalSum
    variable = saved_x
    boundary = 5
  [../]
  [./top_react_y]
    type = NodalSum
    variable = saved_y
    boundary = 5
  [../]
  [./ref_resid_x]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_x
  [../]
  [./ref_resid_y]
    type = NodalL2Norm
    execute_on = timestep_end
    variable = saved_y
  [../]
  [./sigma_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./sigma_zz]
    type = ElementAverageValue
    variable = stress_zz
  [../]
  [./disp_x5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_x
  [../]
  [./disp_x9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_x
  [../]
  [./disp_y5]
    type = NodalVariableValue
    nodeid = 4
    variable = disp_y
  [../]
  [./disp_y9]
    type = NodalVariableValue
    nodeid = 8
    variable = disp_y
  [../]
  [./_dt]
    type = TimestepSize
  [../]
  [./num_lin_it]
    type = NumLinearIterations
  [../]
  [./num_nonlin_it]
    type = NumNonlinearIterations
  [../]
[]

[BCs]
  [./bot_y]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0.0
  [../]
  [./side_x]
    type = DirichletBC
    variable = disp_x
    boundary = 2
    value = 0.0
  [../]
  [./top_press]
    type = Pressure
    variable = disp_y
    boundary = 5
    component = 1
    factor = 109.89
  [../]
[]

[Materials]
  [./bot_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;1&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./bot_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;1&#x27;
  [../]
  [./bot_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;1&#x27;
  [../]
  [./top_elas_tens]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;2&#x27;
    youngs_modulus = 1e6
    poissons_ratio = 0.3
  [../]
  [./top_strain]
    type = ComputeIncrementalSmallStrain
    block = &#x27;2&#x27;
  [../]
  [./top_stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;2&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27;lu     superlu_dist&#x27;

  line_search = &#x27;none&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7
  l_max_its = 100
  nl_max_its = 200
  dt = 1.0
  end_time = 1.0
  num_steps = 10
  dtmin = 1.0
  l_tol = 1e-3
[]

[VectorPostprocessors]
  [./x_disp]
    type = NodalValueSampler
    variable = disp_x
    boundary = &#x27;1 3 4 5&#x27;
    sort_by = x
  [../]
  [./cont_press]
    type = NodalValueSampler
    variable = contact_pressure
    boundary = &#x27;3&#x27;
    sort_by = x
  [../]
[]

[Outputs]
  file_base = plane2_mu_0_2_pen_out
  print_linear_residuals = true
  perf_graph = true
  [./exodus]
    type = Exodus
    elemental_as_nodal = true
  [../]
  [./console]
    type = Console
    max_rows = 5
  [../]
  [./chkfile]
    type = CSV
    file_base = plane2_mu_0_2_pen_check
    show = &#x27;bot_react_x bot_react_y disp_x5 disp_y5 disp_x9 disp_y9 sigma_yy sigma_zz top_react_x top_react_y x_disp cont_press&#x27;
    execute_vector_postprocessors_on = timestep_end
  [../]
  [./outfile]
    type = CSV
    delimiter = &#x27; &#x27;
    execute_vector_postprocessors_on = none
  [../]
[]

[Contact]
  [./leftright]
    secondary = 3
    primary = 4
    model = coulomb
    formulation = penalty
    normalize_penalty = true
    friction_coefficient = 0.2
    penalty = 1e+9
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7c48393a-7a48-4535-9a71-5d41f0fdd6c2"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mohr_coulomb/small_deform2.i</h4><pre class="moose-pre"><code class="language-text"># apply repeated stretches in x, y and z directions, so that mean_stress = 0
# This maps out the yield surface in the octahedral plane for zero mean stress

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*x*sin(t)&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;2E-6*y*sin(2*t)&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;-2E-6*z*(sin(t)+sin(2*t))&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f0]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
  [./f1]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 10
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 20
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 0
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4
    mc_edge_smoother = 20
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 1E7&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-9
    plastic_models = mc
    debug_fspb = crash
  [../]
[]


[Executioner]
  end_time = 100
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform2
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="31b2402f-d60c-4a1c-a47e-e1b8c0c23aed"><div class="modal-content"><h4>modules/porous_flow/test/tests/newton_cooling/nc01.i</h4><pre class="moose-pre"><code class="language-text"># Newton cooling from a bar.  1-phase transient
[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 1000
  ny = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 1
[]

[GlobalParams]
  PorousFlowDictator = dictator
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pressure&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.8
    alpha = 1e-5
  [../]
[]

[Variables]
  [./pressure]
    initial_condition = 2E6
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    fluid_component = 0
    variable = pressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    fluid_component = 0
    gravity = &#x27;0 0 0&#x27;
    variable = pressure
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 1e6
      density0 = 1000
      thermal_expansion = 0
      viscosity = 1e-3
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = pressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1E-15 0 0 0 1E-15 0 0 0 1E-15&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey # irrelevant in this fully-saturated situation
    n = 2
    phase = 0
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = pressure
    boundary = left
    value = 2E6
  [../]
  [./newton]
    type = PorousFlowPiecewiseLinearSink
    variable = pressure
    boundary = right
    pt_vals = &#x27;0 100000 200000 300000 400000 500000 600000 700000 800000 900000 1000000 1100000 1200000 1300000 1400000 1500000 1600000 1700000 1800000 1900000 2000000&#x27;
    multipliers = &#x27;0. 5.6677197748570516e-6 0.000011931518841831313 0.00001885408740732065 0.000026504708864284114 0.000034959953203725676 0.000044304443352900224 0.00005463170211001232 0.00006604508815181467 0.00007865883048198513 0.00009259917167338928 0.00010800563134618119 0.00012503240252705603 0.00014384989486488752 0.00016464644014777016 0.00018763017719085535 0.0002130311349595711 0.00024110353477682344 0.00027212833465544285 0.00030641604122040985 0.00034430981736352295&#x27;
    use_mobility = false
    use_relperm = false
    fluid_phase = 0
    flux_function = 1
  [../]
[]

[VectorPostprocessors]
  [./porepressure]
    type = LineValueSampler
    variable = pressure
    start_point = &#x27;0 0.5 0&#x27;
    end_point = &#x27;100 0.5 0&#x27;
    sort_by = x
    num_points = 20
    execute_on = timestep_end
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-12 1E-15 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  end_time = 1E8
  dt = 1E6
[]

[Outputs]
  file_base = nc01
  [./along_line]
    type = CSV
    execute_vector_postprocessors_on = final
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="53fe2df6-cd50-4703-8360-5204f488bafb"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/small_deform6.i</h4><pre class="moose-pre"><code class="language-text"># apply nonuniform stretch in x, y and z directions using
# Lame lambda = 0.7E7, Lame mu = 1.0E7,
# trial_stress(0, 0) = 2.9
# trial_stress(1, 1) = 10.9
# trial_stress(2, 2) = 14.9
# With tensile_strength = 2, decaying to zero at internal parameter = 4E-7
# via a Cubic, the algorithm should return to:
# internal parameter = 2.26829E-7
# trace(stress) = 0.799989 = tensile_strength
# stress(0, 0) = -6.4
# stress(1, 1) = 1.6
# stress(2, 2) = 5.6

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;-1E-7*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;3E-7*y&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;5E-7*z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = f
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = f
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 2
    value_residual = 0
    internal_limit = 4E-7
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1
    value_residual = 0
    internal_limit = 1E-8
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mean_cap]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-11
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform6
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9e7a71ed-0f88-4f32-b93b-9a17b09cfd3d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/small_deform3_update_version.i</h4><pre class="moose-pre"><code class="language-text"># Using TensileStressUpdate
# checking for small deformation
# A single element is stretched by &quot;ep&quot; in the z and x directions
# This causes the return direction to be along the hypersurface sigma_I = sigma_II
# where sigma_I = (E_2222 + E_2200) * ep
# tensile_strength is set to 1Pa, smoothing_tol = 0.1Pa
# The smoothed yield function is
# yf = sigma_I + ismoother(0) - tensile_strength
#    = sigma_I + (0.5 * smoothing_tol - smoothing_tol / Pi) - tensile_strength
#    = sigma_I - 0.98183
#
# With zero Poisson&#x27;s ratio, the return stress will be
# stress_00 = stress_22 = 0.98183
# with all other stress components being zero

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*x&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0.25E-6*z&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = yield_fcn
  [../]
[]

[Postprocessors]
  [./s_xx]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xx
  [../]
  [./s_xy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xy
  [../]
  [./s_xz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_xz
  [../]
  [./s_yy]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yy
  [../]
  [./s_yz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_yz
  [../]
  [./s_zz]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = stress_zz
  [../]
  [./f]
    type = PointValue
    point = &#x27;0 0 0&#x27;
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 2.0E6&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 0.1
    yield_function_tol = 1.0E-9
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = small_deform3_update_version
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7158452-b34e-4892-9a3d-e5481cdaecfa"><div class="modal-content"><h4>modules/richards/test/tests/user_objects/uo3.i</h4><pre class="moose-pre"><code class="language-text"># Seff User objects give the correct value
# Sat User objects give the correct value
#
# If you want to add another test for another UserObject
# then add the UserObject, add a Function defining the expected result,
# add an AuxVariable and AuxKernel that will record the UserObjects value
# and finally add a NodalL2Error that compares this with the Function
#
# Here pressure is x where x runs between -5E6 and 5E6

[UserObjects]
  [./Seff1VG]
    type = RichardsSeff1VG
    m = 0.8
    al = 1E-6
  [../]
  [./Seff1BWsmall]
    type = RichardsSeff1BWsmall
    Sn = 0.0
    Ss = 1.0
    C = 1.01
    las = 1E5
  [../]
  [./Seff1RSC]
    type = RichardsSeff1RSC
    oil_viscosity = 4.0
    scale_ratio = 1E6
    shift = -2E6
  [../]
  [./Seff1VGcut]
    type = RichardsSeff1VGcut
    m = 0.8
    al = 1E-6
    p_cut = -1E6
  [../]

  # following are unimportant in this test
  [./PPNames]
    type = RichardsVarNames
    richards_vars = pressure
  [../]
  [./DensityConstBulk]
    type = RichardsDensityConstBulk
    dens0 = 1000
    bulk_mod = 2E6
  [../]
  [./RelPermPower]
    type = RichardsRelPermPower
    simm = 0.10101
    n = 2
  [../]
  [./Saturation]
    type = RichardsSat
    s_res = 0.054321
    sum_s_res = 0.054321
  [../]
  [./SUPGstandard]
    type = RichardsSUPGstandard
    p_SUPG = 1E5
  [../]
[]

[Functions]
  [./initial_pressure]
    type = ParsedFunction
    value = x
  [../]

  [./answer_Seff1VG]
    type = ParsedFunction
    value = (1+max((-x)*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;1E-6 0.8&#x27;
  [../]
  [./answer_dSeff1VG]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = (1+max((-x)*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;1E-6 0.8&#x27;
  [../]
  [./answer_d2Seff1VG]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = (1+max((-x)*al,0)^(1/(1-m)))^(-m)
    vars = &#x27;al m&#x27;
    vals = &#x27;1E-6 0.8&#x27;
  [../]

  [./answer_Seff1BW]
    type = PiecewiseLinear
    format = columns
    data_file = satBW.csv
    axis = x
  [../]
  [./answer_Seff1BWprime]
    type = PiecewiseLinear
    format = columns
    data_file = satBWprime.csv
    axis = x
  [../]
  [./answer_Seff1BW2prime]
    type = PiecewiseLinear
    format = columns
    data_file = satBW2prime.csv
    axis = x
  [../]

  [./answer_Seff1RSC]
    type = ParsedFunction
    value = (1+exp((-x-shift)/scale))^(-0.5)
    vars = &#x27;shift scale&#x27;
    vals = &#x27;-2E6 1E6&#x27;
  [../]
  [./answer_dSeff1RSC]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = (1+exp((-x-shift)/scale))^(-0.5)
    vars = &#x27;shift scale&#x27;
    vals = &#x27;-2E6 1E6&#x27;
  [../]
  [./answer_d2Seff1RSC]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = (1+exp((-x-shift)/scale))^(-0.5)
    vars = &#x27;shift scale&#x27;
    vals = &#x27;-2E6 1E6&#x27;
  [../]

  [./answer_Seff1VGcut]
    type = ParsedFunction
    value = if(x&lt;pcut,scut+dscut*(x-pcut),(1+max((-x)*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m pcut scut dscut&#x27;
    vals = &#x27;1E-6 0.8 -1E6 0.574349177498517 1.14869835499703e-06&#x27;
  [../]
  [./answer_dSeff1VGcut]
    type = GradParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&lt;pcut,scut+dscut*(x-pcut),(1+max((-x)*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m pcut scut dscut&#x27;
    vals = &#x27;1E-6 0.8 -1E6 0.574349177498517 1.14869835499703e-06&#x27;
  [../]
  [./answer_d2Seff1VGcut]
    type = Grad2ParsedFunction
    direction = &#x27;1 0 0&#x27;
    value = if(x&lt;pcut,scut+dscut*(x-pcut),(1+max((-x)*al,0)^(1/(1-m)))^(-m))
    vars = &#x27;al m pcut scut dscut&#x27;
    vals = &#x27;1E-6 0.8 -1E6 0.574349177498517 1.14869835499703e-06&#x27;
  [../]

  [./answer_Sat]
    type = ParsedFunction
    value = sres+((1-sumsres)*((1+max((-x)*al,0)^(1/(1-m)))^(-m)))
    vars = &#x27;al m sres sumsres&#x27;
    vals = &#x27;1E-6 0.8 0.054321 0.054321&#x27;
  [../]
  [./answer_dSat]
    type = ParsedFunction
    value = 1-sumsres
    vars = &#x27;sumsres&#x27;
    vals = &#x27;0.054321&#x27;
  [../]
[]

[AuxVariables]
  [./Seff1VG_Aux]
  [../]
  [./dSeff1VG_Aux]
  [../]
  [./d2Seff1VG_Aux]
  [../]

  [./Seff1BWsmall_Aux]
  [../]
  [./dSeff1BWsmall_Aux]
  [../]
  [./d2Seff1BWsmall_Aux]
  [../]

  [./Seff1RSC_Aux]
  [../]
  [./dSeff1RSC_Aux]
  [../]
  [./d2Seff1RSC_Aux]
  [../]

  [./Seff1VGcut_Aux]
  [../]
  [./dSeff1VGcut_Aux]
  [../]
  [./d2Seff1VGcut_Aux]
  [../]

  [./Sat_Aux]
  [../]
  [./dSat_Aux]
  [../]

  [./check_Aux]
  [../]
[]

[AuxKernels]
  [./Seff1VG_AuxK]
    type = RichardsSeffAux
    variable = Seff1VG_Aux
    seff_UO = Seff1VG
    pressure_vars = pressure
  [../]
  [./dSeff1VG_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff1VG_Aux
    seff_UO = Seff1VG
    pressure_vars = pressure
    wrtnum = 0
  [../]
  [./d2Seff1VG_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff1VG_Aux
    seff_UO = Seff1VG
    pressure_vars = pressure
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./Seff1BWsmall_AuxK]
    type = RichardsSeffAux
    variable = Seff1BWsmall_Aux
    seff_UO = Seff1BWsmall
    pressure_vars = pressure
  [../]
  [./dSeff1BWsmall_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff1BWsmall_Aux
    seff_UO = Seff1BWsmall
    pressure_vars = pressure
    wrtnum = 0
  [../]
  [./d2Seff1BWsmall_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff1BWsmall_Aux
    seff_UO = Seff1BWsmall
    pressure_vars = pressure
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./Seff1RSC_AuxK]
    type = RichardsSeffAux
    variable = Seff1RSC_Aux
    seff_UO = Seff1RSC
    pressure_vars = pressure
  [../]
  [./dSeff1RSC_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff1RSC_Aux
    seff_UO = Seff1RSC
    pressure_vars = pressure
    wrtnum = 0
  [../]
  [./d2Seff1RSC_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff1RSC_Aux
    seff_UO = Seff1RSC
    pressure_vars = pressure
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./Seff1VGcut_AuxK]
    type = RichardsSeffAux
    variable = Seff1VGcut_Aux
    seff_UO = Seff1VGcut
    pressure_vars = pressure
  [../]
  [./dSeff1VGcut_AuxK]
    type = RichardsSeffPrimeAux
    variable = dSeff1VGcut_Aux
    seff_UO = Seff1VGcut
    pressure_vars = pressure
    wrtnum = 0
  [../]
  [./d2Seff1VGcut_AuxK]
    type = RichardsSeffPrimePrimeAux
    variable = d2Seff1VGcut_Aux
    seff_UO = Seff1VGcut
    pressure_vars = pressure
    wrtnum1 = 0
    wrtnum2 = 0
  [../]

  [./Sat_AuxK]
    type = RichardsSatAux
    sat_UO = Saturation
    seff_var = Seff1VG_Aux
    variable = Sat_Aux
  [../]
  [./dSat_AuxK]
    type = RichardsSatPrimeAux
    sat_UO = Saturation
    seff_var = Seff1VG_Aux
    variable = dSat_Aux
  [../]

  [./check_AuxK]
    type = FunctionAux
    variable = check_Aux
    function = answer_Seff1VGcut
  [../]
[]

[Postprocessors]
  [./cf_Seff1VG]
    type = NodalL2Error
    function = answer_Seff1VG
    variable = Seff1VG_Aux
  [../]
  [./cf_dSeff1VG]
    type = NodalL2Error
    function = answer_dSeff1VG
    variable = dSeff1VG_Aux
  [../]
  [./cf_d2Seff1VG]
    type = NodalL2Error
    function = answer_d2Seff1VG
    variable = d2Seff1VG_Aux
  [../]

  [./cf_Seff1BW]
    type = NodalL2Error
    function = answer_Seff1BW
    variable = Seff1BWsmall_Aux
  [../]
  [./cf_Seff1BWprime]
    type = NodalL2Error
    function = answer_Seff1BWprime
    variable = dSeff1BWsmall_Aux
  [../]
  [./cf_Seff1BW2prime]
    type = NodalL2Error
    function = answer_Seff1BW2prime
    variable = d2Seff1BWsmall_Aux
  [../]

  [./cf_Seff1RSC]
    type = NodalL2Error
    function = answer_Seff1RSC
    variable = Seff1RSC_Aux
  [../]
  [./cf_dSeff1RSC]
    type = NodalL2Error
    function = answer_dSeff1RSC
    variable = dSeff1RSC_Aux
  [../]
  [./cf_d2Seff1RSC]
    type = NodalL2Error
    function = answer_d2Seff1RSC
    variable = d2Seff1RSC_Aux
  [../]

  [./cf_Seff1VGcut]
    type = NodalL2Error
    function = answer_Seff1VGcut
    variable = Seff1VGcut_Aux
  [../]
  [./cf_dSeff1VGcut]
    type = NodalL2Error
    function = answer_dSeff1VGcut
    variable = dSeff1VGcut_Aux
  [../]
  [./cf_d2Seff1VGcut]
    type = NodalL2Error
    function = answer_d2Seff1VGcut
    variable = d2Seff1VGcut_Aux
  [../]

  [./cf_Sat]
    type = NodalL2Error
    function = answer_Sat
    variable = Sat_Aux
  [../]
  [./cf_dSat]
    type = NodalL2Error
    function = answer_dSat
    variable = dSat_Aux
  [../]
[]



#############################################################################
#
# Following is largely unimportant as we are not running an actual similation
#
#############################################################################
[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 100
  xmin = -5E6
  xmax = 5E6
[]

[Variables]
  [./pressure]
    order = FIRST
    family = LAGRANGE
    [./InitialCondition]
      type = FunctionIC
      function = initial_pressure
    [../]
  [../]
[]

[Kernels]
  active = &#x27;richardsf richardst&#x27;
  [./richardst]
    type = RichardsMassChange
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
  [./richardsf]
    type = RichardsFlux
    richardsVarNames_UO = PPNames
    variable = pressure
  [../]
[]

[Materials]
  [./unimportant_material]
    type = RichardsMaterial
    block = 0
    mat_porosity = 0.1
    mat_permeability = &#x27;1E-20 0 0  0 1E-20 0  0 0 1E-20&#x27;
    richardsVarNames_UO = PPNames
    density_UO = DensityConstBulk
    relperm_UO = RelPermPower
    sat_UO = Saturation
    seff_UO = Seff1VG
    SUPG_UO = SUPGstandard
    viscosity = 1E-3
    gravity = &#x27;0 0 -10&#x27;
    linear_shape_fcns = true
  [../]
[]

[Preconditioning]
  [./does_nothing]
    type = SMP
    full = true
    petsc_options = &#x27;-snes_converged_reason&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E50 1E50 10000&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  num_steps = 1
  dt = 1E-100
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  active = &#x27;csv&#x27;
  file_base = uo3
  [./csv]
    type = CSV
  [../]
  [./exodus]
    type = Exodus
    hide = pressure
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#e8cbcd9b-9d29-44c1-b558-a7fb48e2dd13" class="tooltipped" data-position="left" data-tooltip="Overview">Overview</a></li><li><a href="#92412d19-c178-4505-8d4c-d6446a5dfe70" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#86f2c188-98c0-4002-aea5-0d0a5aae7056" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>