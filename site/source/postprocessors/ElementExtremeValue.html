<!DOCTYPE html><head><meta charset="UTF-8"><title>ElementExtremeValue.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="448cb64d-b1d5-4e54-a366-e9546cc8cf3b"><i class="material-icons">menu</i></a><ul class="sidenav" id="448cb64d-b1d5-4e54-a366-e9546cc8cf3b"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">postprocessors</span><a href="#" class="breadcrumb">ElementExtremeValue</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="6a4b2d8e-c3dd-48df-a5b8-ebd8f4ae1588" data-section-level="1" data-section-text="ElementExtremeValue"><h1 id="elementextremevalue">ElementExtremeValue</h1><p>Finds either the min or max elemental value of a a variable over the domain.</p><section class="scrollspy" id="f8db6657-2e18-483e-b35a-9d39e1b49686" data-section-level="2" data-section-text="Example Input File Syntax"><h2 id="example-input-file-syntax">Example Input File Syntax</h2><p></p></section><section class="scrollspy" id="0868ad05-50d1-4a4f-81a1-7e60651eea34" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="87b786d3-8425-42f7-95d2-431e7d8769f6" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">variable</span><span class="moose-parameter-header-description">The name of the variable that this postprocessor operates on</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<VariableName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the variable that this postprocessor operates on</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="dcddaa88-da5c-46b6-8a10-6e17f2b37ec4" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">block</span><span class="moose-parameter-header-description">The list of block ids (SubdomainID) that this object will be applied</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<SubdomainName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of block ids (SubdomainID) that this object will be applied</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">execute_on</span><span class="moose-parameter-header-default">TIMESTEP_END</span><span class="moose-parameter-header-description">The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>TIMESTEP_END</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>ExecFlagEnum</p><p class="moose-parameter-description-options"><span>Options:</span>NONE INITIAL LINEAR NONLINEAR TIMESTEP_END TIMESTEP_BEGIN FINAL CUSTOM TRANSFER</p><p class="moose-parameter-description"><span>Description:</span>The list of flag(s) indicating when this object should be executed, the available options include NONE, INITIAL, LINEAR, NONLINEAR, TIMESTEP_END, TIMESTEP_BEGIN, FINAL, CUSTOM.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">value_type</span><span class="moose-parameter-header-default">max</span><span class="moose-parameter-header-description">Type of extreme value to return. 'max' returns the maximum value. 'min' returns the minimum value.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>max</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>MooseEnum</p><p class="moose-parameter-description-options"><span>Options:</span>max min</p><p class="moose-parameter-description"><span>Description:</span>Type of extreme value to return. 'max' returns the maximum value. 'min' returns the minimum value.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="1bbb15ef-9518-41d0-beb5-9f9bd23c9414" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">allow_duplicate_execution_on_initial</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>In the case where this UserObject is depended upon by an initial condition, allow it to be executed twice during the initial setup (once before the IC and again after mesh adaptivity (if applicable).</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">implicit</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Determines whether this object is calculated using an implicit or explicit form</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Determines whether this object is calculated using an implicit or explicit form</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">outputs</span><span class="moose-parameter-header-description">Vector of output names were you would like to restrict the output of variables(s) associated with this object</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<OutputName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Vector of output names were you would like to restrict the output of variables(s) associated with this object</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">seed</span><span class="moose-parameter-header-default">0</span><span class="moose-parameter-header-description">The seed for the master random number generator</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>0</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>unsigned int</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The seed for the master random number generator</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">use_displaced_mesh</span><span class="moose-parameter-header-default">False</span><span class="moose-parameter-header-description">Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>False</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Whether or not this object should use the displaced mesh for computation.  Note that in the case this is true but no displacements are provided in the Mesh block the undisplaced mesh will still be used.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="85031c22-b326-49b3-a13b-589abf6b3f5f" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#9aca863b-75f0-43f4-b1b1-a92390d6eaa3" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto17.i</a></li><li><a href="#f7ac62d6-5091-4b47-bcb7-8f490cf3c186" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/rock1.i</a></li><li><a href="#8677cc9a-74ae-4b9e-a7ad-de522cab7e8e" class="modal-trigger">modules/functional_expansion_tools/test/tests/standard_use/multiapp_different_physical_boundaries.i</a></li><li><a href="#957efd8b-9633-48cb-a051-fc7cf26ba3bc" class="modal-trigger">modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_smooth.i</a></li><li><a href="#ebed8bc3-7cb1-4bdd-b36e-59527851a021" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random1.i</a></li><li><a href="#151beacb-8eee-4864-8294-6fa5345643f6" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random4.i</a></li><li><a href="#f9bb706d-a882-4474-a704-f7acdc25ac42" class="modal-trigger">modules/functional_expansion_tools/test/tests/errors/multiapp_bad_function_series.i</a></li><li><a href="#c7b6420a-027b-4153-8200-c55d423b084b" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random2.i</a></li><li><a href="#d39cc636-6c3f-4701-bc94-32a99d11bc53" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/small.i</a></li><li><a href="#5bb2c617-ac37-4738-8c01-42cc45ec2047" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite.i</a></li><li><a href="#fef44599-c9a6-47b4-a8cc-93559297cac1" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto15.i</a></li><li><a href="#9abcc902-e5a2-4bce-83d8-7c02376c6020" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper1.i</a></li><li><a href="#683e3a75-bf65-4be6-a7e2-7682c2e86805" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</a></li><li><a href="#2bf7f824-c341-4e61-9e5b-cb94e9b98c7d" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</a></li><li><a href="#8d346b87-0cd2-410b-aee1-4b0ac954ba33" class="modal-trigger">modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_abbo.i</a></li><li><a href="#cdef4d59-a831-42a4-ac58-73adae67ecb1" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_noaction.i</a></li><li><a href="#f1001114-0949-49f5-8348-3d6660ccb006" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_update.i</a></li><li><a href="#7ca3203d-7741-41e8-be85-d50a4c639fdd" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</a></li><li><a href="#c1320c15-cabd-401d-a872-bef8647f4d66" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite.i</a></li><li><a href="#2d5eb322-4afd-4469-bc8a-d1b88f4df45e" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto18.i</a></li><li><a href="#5c0ec6e5-b213-4c15-82b5-7c4d56613294" class="modal-trigger">modules/functional_expansion_tools/examples/3D_volumetric_Cartesian/main.i</a></li><li><a href="#e2cadb45-4b3b-4274-a706-f183d9eec0ff" class="modal-trigger">modules/contact/test/tests/dual_mortar/dm_mechanical_contact.i</a></li><li><a href="#b667600a-e6c8-4106-84f3-f6f66ff96161" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig7b.i</a></li><li><a href="#51afebe6-3dcc-4b2c-9614-b68050ec88ff" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite.i</a></li><li><a href="#16f3454f-b2fd-456a-b52c-df7d2c3df98b" class="modal-trigger">modules/functional_expansion_tools/examples/2D_volumetric_Cartesian/main.i</a></li><li><a href="#9100b513-249c-475d-8f87-cc226d70d384" class="modal-trigger">modules/tensor_mechanics/test/tests/tensile/random_planar.i</a></li><li><a href="#686fcf0f-d573-4cd1-ac80-62ef64771363" class="modal-trigger">modules/functional_expansion_tools/examples/1D_volumetric_Cartesian/main.i</a></li><li><a href="#b2d0abe7-dd25-44eb-8a25-f4960cd04c47" class="modal-trigger">modules/combined/examples/mortar/eigenstrain.i</a></li><li><a href="#afd1c24e-7769-4827-b3d9-c047a4f231be" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random3.i</a></li><li><a href="#85f33b1f-a97d-44b3-9f08-b576581cd31c" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto16.i</a></li><li><a href="#df5cbe80-6023-427f-9794-7070ed0cb5d5" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper3.i</a></li><li><a href="#7ed43278-a650-4d95-adb5-62f02a4864f7" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_gas.i</a></li><li><a href="#5d406f03-a31e-4b04-bc1a-7d7d45fd17b2" class="modal-trigger">modules/combined/test/tests/restart-transient-from-ss-with-stateful/sub_ss.i</a></li><li><a href="#3782903b-4adf-4566-ba2b-4e9600f581da" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_rr.i</a></li><li><a href="#295486c2-5e95-452e-a2f1-5f501516e294" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</a></li><li><a href="#44e4fff2-deed-4eac-a983-6716abbe8480" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_twophase.i</a></li><li><a href="#7fe8d998-c986-49b8-963e-3867a332b8de" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_twophase_nonisothermal.i</a></li><li><a href="#1dbe6263-362c-46ce-a14c-815279571ead" class="modal-trigger">modules/functional_expansion_tools/test/tests/standard_use/volume_coupling_custom_norm.i</a></li><li><a href="#567ece9c-c2ea-45bb-972b-5e363d69c106" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap/random.i</a></li><li><a href="#a4dddc29-88b0-4ac4-8115-dc02dd9036a5" class="modal-trigger">modules/combined/examples/publications/rapid_dev/fig7a.i</a></li><li><a href="#2900e47d-aeaa-4caa-8814-2a7274628f05" class="modal-trigger">modules/porous_flow/test/tests/jacobian/brineco2_liquid.i</a></li><li><a href="#ec26e650-c3ae-45d0-b0db-d190ac96f7dc" class="modal-trigger">modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</a></li><li><a href="#f89082a6-ab87-4322-bbc2-1ee460b31682" class="modal-trigger">modules/combined/examples/mortar/eigenstrain_action.i</a></li><li><a href="#db531841-680d-4027-819e-0f911c93bff6" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_liquid.i</a></li><li><a href="#dfba5cac-8797-4ba2-8632-972578796bfa" class="modal-trigger">test/tests/restart/restart_transient_from_steady/steady_with_sub.i</a></li><li><a href="#4bb80c35-4246-4f48-a968-8171c735061e" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_rr.i</a></li><li><a href="#3947d5ed-078d-4f4c-a1d5-6d6d1c1c7d58" class="modal-trigger">test/tests/restart/restart_transient_from_steady/steady_with_2subs.i</a></li><li><a href="#0ae036f0-9b1b-4a68-b4e9-893fb790f98f" class="modal-trigger">modules/heat_conduction/test/tests/radiative_bcs/radiative_bc_cyl.i</a></li><li><a href="#7c24d15b-5c22-4f7c-addd-b0257bdf6420" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/small.i</a></li><li><a href="#535357dd-52a0-4314-a60f-e4d5bad66dd5" class="modal-trigger">modules/functional_expansion_tools/test/tests/errors/multiapp_missing_sub_object.i</a></li><li><a href="#ec31b59a-7b49-49cd-b3e4-de21ae1e9c8d" class="modal-trigger">test/tests/postprocessors/element_extreme_value/element_extreme_value.i</a></li><li><a href="#b89d3cab-a199-49fc-b010-853dcdaa8803" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/small.i</a></li><li><a href="#382bd469-0567-4fbc-9391-b69e373bbed6" class="modal-trigger">modules/functional_expansion_tools/test/tests/errors/multiapp_bad_user_object.i</a></li><li><a href="#73888b06-ed34-4b21-a1b1-e930760efb79" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</a></li><li><a href="#a77f4212-828f-4781-8461-547104525954" class="modal-trigger">modules/tensor_mechanics/test/tests/notched_plastic_block/cmc_smooth.i</a></li><li><a href="#74fb560d-21f3-4538-8e55-17d175499f2c" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</a></li><li><a href="#d1fc6a6f-cd5a-43f5-bc48-7ffbec217c99" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</a></li><li><a href="#40cc314e-4ad9-4e2d-949f-06b9b68aef90" class="modal-trigger">modules/functional_expansion_tools/test/tests/standard_use/multiapp_print_coefficients.i</a></li><li><a href="#6f834691-8636-4e59-bafc-ccfdf849750c" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_noaction.i</a></li><li><a href="#c0969752-98fe-4eff-a06d-e370effcf7fd" class="modal-trigger">modules/combined/examples/periodic_strain/global_strain_pfm.i</a></li><li><a href="#b2d945b5-195e-4198-b251-56567fb614aa" class="modal-trigger">test/tests/restart/restart_transient_from_steady/restart_trans_with_sub.i</a></li><li><a href="#3c781f79-b3a5-4ded-bef8-e5945e942a8a" class="modal-trigger">modules/tensor_mechanics/test/tests/notched_plastic_block/cmc_planar.i</a></li><li><a href="#853d991b-8299-4956-94f6-5a1dae64d24e" class="modal-trigger">modules/porous_flow/examples/coal_mining/coarse_with_fluid.i</a></li><li><a href="#2b6add39-9db7-4afd-8530-42cd2d9608f1" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</a></li><li><a href="#bcc18a0c-931f-456d-a042-0209d70df6f4" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_noaction.i</a></li><li><a href="#933b79d0-037c-4485-9f84-8745c15fff75" class="modal-trigger">modules/tensor_mechanics/test/tests/creep_tangent_operator/creep.i</a></li><li><a href="#10b5fc94-1b52-4101-a56b-a3ab57e115c2" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</a></li><li><a href="#dff5e5c0-7c28-47dd-91bb-43d9b73531c9" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_noaction.i</a></li><li><a href="#f9ce5478-9349-4471-9f48-6e3d104076c9" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/paper5.i</a></li><li><a href="#d707108f-fd7b-42b0-a5d5-79e13e626d0d" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</a></li><li><a href="#e4a10b69-7ff6-4561-88d1-2d05a3697c4a" class="modal-trigger">modules/combined/test/tests/phase_field_fracture/crack2d_computeCrackedStress_finitestrain_plastic.i</a></li><li><a href="#2c125660-3c4f-44f8-bfc0-3685c8643a87" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</a></li><li><a href="#a74eb5be-83b0-4a9c-9b33-5db1bff6f81b" class="modal-trigger">modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</a></li><li><a href="#dcb243b6-6e6f-4297-8480-8c79704c45fc" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_rr.i</a></li><li><a href="#b8a8d3f7-a23d-4bf0-a7c5-1e73dd43c7c7" class="modal-trigger">modules/functional_expansion_tools/test/tests/errors/multiapp_missing_local_object.i</a></li><li><a href="#5957b859-0d79-4cc3-afe8-0c41d1788092" class="modal-trigger">modules/tensor_mechanics/test/tests/jacobian/cto14.i</a></li><li><a href="#5ec56698-783b-451e-971e-a3090b211276" class="modal-trigger">modules/functional_expansion_tools/examples/3D_volumetric_Cartesian_different_submesh/main.i</a></li><li><a href="#f2e57ae2-20ee-4208-8060-8808c8dbbb91" class="modal-trigger">modules/combined/test/tests/restart-transient-from-ss-with-stateful/sub_tr.i</a></li><li><a href="#b4fe51eb-3306-4550-8c40-62ebea5c919d" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/special_rock1.i</a></li><li><a href="#3a5c3eed-c0e5-4e88-8d2c-101c6f8076e9" class="modal-trigger">modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_planar.i</a></li><li><a href="#38a47232-9079-4a2d-8a76-a6e916ec2726" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_twophase.i</a></li><li><a href="#6a170dc0-c678-411a-a39f-5c82e11a6de4" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</a></li><li><a href="#55722f5b-ecb5-480d-9137-618c3af7f984" class="modal-trigger">modules/tensor_mechanics/test/tests/multi/special_joint1.i</a></li><li><a href="#86a76891-c8fd-4048-9d4b-ace338186258" class="modal-trigger">modules/functional_expansion_tools/examples/3D_volumetric_cylindrical_subapp_mesh_refine/main.i</a></li><li><a href="#1d38ab90-f9d4-4490-bae0-dbcdea0a9c3d" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_rr.i</a></li><li><a href="#f1320225-8f86-4b5e-a5a9-1b417c9a6b6d" class="modal-trigger">test/tests/restart/restart_transient_from_transient/pseudo_trans_with_2subs.i</a></li><li><a href="#07aefe61-97ab-4cd1-b297-ff701d2708e3" class="modal-trigger">modules/porous_flow/examples/coal_mining/fine_with_fluid.i</a></li><li><a href="#7bcdeb8f-0ac6-4cf1-a2bc-89dd5d9e2f5c" class="modal-trigger">modules/functional_expansion_tools/examples/3D_volumetric_Cartesian_direct/main.i</a></li><li><a href="#75489cbc-c71c-45bd-bb10-3a8834e9d5ec" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</a></li><li><a href="#c7babd93-06de-4ea3-b15f-9c3822404a2b" class="modal-trigger">modules/functional_expansion_tools/test/tests/errors/multiapp_incompatible_orders.i</a></li><li><a href="#655a73d7-a372-4eaa-997c-0aac77d36235" class="modal-trigger">test/tests/vectorpostprocessors/vector_of_postprocessors/vector_of_postprocessors.i</a></li><li><a href="#26d14ff8-03bb-4d12-9350-8dfdd2e657de" class="modal-trigger">modules/functional_expansion_tools/examples/3D_volumetric_cylindrical/main.i</a></li><li><a href="#00ff0e7c-fce7-4ae5-80a8-8a9ba19f6308" class="modal-trigger">test/tests/restart/restart_transient_from_transient/restart_trans_with_2subs.i</a></li><li><a href="#31c913b6-8a9c-4c93-a682-67d3d5201a7b" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</a></li><li><a href="#2c8c9e81-fddd-4707-b54f-1e1cd1a5da1d" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/small.i</a></li><li><a href="#58140a73-7e67-41da-9f9b-6820971c5825" class="modal-trigger">modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite.i</a></li><li><a href="#16e1a65f-3dba-4f96-9f2a-12b2cd3c3548" class="modal-trigger">modules/porous_flow/test/tests/jacobian/waterncg_gas.i</a></li><li><a href="#f1f14bd2-ffec-4a6b-a834-5ee5b102ad67" class="modal-trigger">modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</a></li><li><a href="#95cfb0e1-62bd-478f-8ec6-e6bda79ef9a4" class="modal-trigger">modules/functional_expansion_tools/test/tests/standard_use/volume_coupled.i</a></li><li><a href="#aec84558-d402-4426-a378-90835685536b" class="modal-trigger">modules/combined/examples/periodic_strain/global_strain_pfm_3D.i</a></li><li><a href="#8663fe75-945e-4fdf-8feb-d8fd362c31f8" class="modal-trigger">modules/stochastic_tools/examples/parameter_study/nonlin_diff_react/nonlin_diff_react_sub.i</a></li><li><a href="#490594ed-d24b-4896-abd0-784166378b83" class="modal-trigger">test/tests/outputs/postprocessor_final/execute_pps_on_final.i</a></li><li><a href="#1cffc409-aa61-48c8-83e5-624b5e414212" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</a></li><li><a href="#090b1095-5f8c-4732-a50b-253b6e7efc3c" class="modal-trigger">modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</a></li><li><a href="#7d94d264-b9e7-4220-a0be-0a9d4b3d0a72" class="modal-trigger">test/tests/restart/restart_transient_from_steady/restart_trans_with_2subs.i</a></li></ul><div class="modal moose-modal" id="9aca863b-75f0-43f4-b1b1-a92390d6eaa3"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto17.i</h4><pre class="moose-pre"><code class="language-text"># Jacobian check for nonlinear, multi-surface plasticity.
# Returns to the plane of the tensile yield surface
#
# Plasticity models:
# Tensile with strength = 1MPa softening to 0.5MPa in 2E-2 strain
#
# Lame lambda = 0.5GPa.  Lame mu = 1GPa
#
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]



[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int0
    index = 0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int1
    index = 1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int2
    index = 2
  [../]
[]

[Postprocessors]
  [./max_int0]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./max_int1]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./max_int2]
    type = ElementExtremeValue
    variable = int2
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.5
    internal_limit = 2E-2
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E-6  # Note larger value
    shift = 1.0E-6                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.5E3 1E3&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;-1 0.1 0.2  0.1 15 -0.3  0.2 -0.3 0&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    tangent_operator = nonlinear
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]


[Outputs]
  file_base = cto17
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f7ac62d6-5091-4b47-bcb7-8f490cf3c186"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/rock1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 10deg
# Tensile with strength = 1MPa
# WeakPlaneShear with cohesion = 1MPa, friction angle = 25deg, dilation angle = 25deg
# WeakPlaneTensile with strength = 0.01MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 1
    variable = int1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 2
    variable = int2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 3
    variable = int3
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tanphi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./tanpsi]
    type = TensorMechanicsHardeningConstant
    value = 0.46630766
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = coh
    tan_friction_angle = tanphi
    tan_dilation_angle = tanpsi
    smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./str]
    type = TensorMechanicsHardeningConstant
    value = 0.01E6
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = str
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;mc tensile wps wpt&#x27;
    deactivation_scheme = &#x27;optimized_to_safe_to_dumb&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = rock1
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8677cc9a-74ae-4b9e-a7ad-de522cab7e8e"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/standard_use/multiapp_different_physical_boundaries.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;1.0  9.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="957efd8b-9633-48cb-a051-fc7cf26ba3bc"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_smooth.i</h4><pre class="moose-pre"><code class="language-text"># Uses a multi-smooted version of Mohr-Coulomb (via CappedMohrCoulombStressUpdate and ComputeMultipleInelasticStress) to simulate the following problem.
# A cubical block is notched around its equator.
# All of its outer surfaces have roller BCs, but the notched region is free to move as needed
# The block is initialised with a high hydrostatic tensile stress
# Without the notch, the BCs do not allow contraction of the block, and this stress configuration is admissible
# With the notch, however, the interior parts of the block are free to move in order to relieve stress, and this causes plastic failure
# The top surface is then pulled upwards (the bottom is fixed because of the roller BCs)
# This causes more failure
[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 9
    ny = 9
    nz = 9
    xmin = 0
    xmax = 0.1
    ymin = 0
    ymax = 0.1
    zmin = 0
    zmax = 0.1
  []
  [block_to_remove_xmin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.01 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = generated_mesh
  []
  [block_to_remove_xmax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0.09 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmin
  []
  [block_to_remove_ymin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.01 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmax
  []
  [block_to_remove_ymax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 0.09 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_ymin
  []
  [remove_block]
    type = BlockDeletionGenerator
    block_id = 1
    input = block_to_remove_ymax
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_zz&#x27;
    eigenstrain_names = ini_stress
  [../]
[]

[Postprocessors]
  [./uz]
    type = PointValue
    point = &#x27;0 0 0.1&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./s_zz]
    type = ElementAverageValue
    use_displaced_mesh = false
    variable = stress_zz
  [../]
  [./num_res]
    type = NumResidualEvaluations
  [../]
  [./nr_its] # num_iters is the average number of NR iterations encountered per element in this timestep
    type = ElementAverageValue
    variable = num_iters
  [../]
  [./max_nr_its] # max_num_iters is the maximum number of NR iterations encountered in the element during the whole simulation
    type = ElementExtremeValue
    variable = max_num_iters
  [../]
  [./runtime]
    type = PerfGraphData
    data_type = TOTAL
    section_name = &#x27;Root&#x27;
  [../]
[]

[BCs]
  # back=zmin, front=zmax, bottom=ymin, top=ymax, left=xmin, right=xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./xmax_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.0
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./ymax_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = top
    value = 0.0
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;1E-6*max(t,0)&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./max_num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./num_iters_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = num_iters
  [../]
  [./max_num_iters_auxk]
    type = MaterialRealAux
    property = max_plastic_NR_iterations
    variable = max_num_iters
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 6
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E16
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 5E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 16E9
    poissons_ratio = 0.25
  [../]
  [./mc]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = ts
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    smoothing_tol = 0.2E6
    yield_function_tol = 1E-5
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./strain_from_initial_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;6E6 0 0  0 6E6 0  0 0 6E6&#x27;
    eigenstrain_name = ini_stress
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  start_time = -1
  end_time = 10
  dt = 1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-5
  nl_rel_tol = 1E-7
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = biaxial_smooth
  perf_graph = true
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ebed8bc3-7cb1-4bdd-b36e-59527851a021"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random1.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with tensile failure only
# Plasticity models:
# Tensile strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./ang]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random1
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="151beacb-8eee-4864-8294-6fa5345643f6"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random4.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb
# Plasticity models:
# Tensile strength = 0.1MPa
# Compressive strength = 1.0MPa
# Cohesion = 1MPa
# Friction angle = dilation angle = 0.5
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 100
  ny = 12
  nz = 1
  xmin = 0
  xmax = 100
  ymin = 0
  ymax = 12
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f7]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f8]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f9]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 3
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 4
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 5
    variable = f5
  [../]
  [./f6]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 6
    variable = f6
  [../]
  [./f7]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 7
    variable = f7
  [../]
  [./f8]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 8
    variable = f8
  [../]
  [./f9]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 9
    variable = f9
  [../]
  [./f10]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 10
    variable = f10
  [../]
  [./f11]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 11
    variable = f11
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = int0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = int1
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./intnl0_max]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./intnl1_max]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./raw_f4]
    type = ElementExtremeValue
    variable = f4
    outputs = console
  [../]
  [./raw_f5]
    type = ElementExtremeValue
    variable = f5
    outputs = console
  [../]
  [./raw_f6]
    type = ElementExtremeValue
    variable = f6
    outputs = console
  [../]
  [./raw_f7]
    type = ElementExtremeValue
    variable = f7
    outputs = console
  [../]
  [./raw_f8]
    type = ElementExtremeValue
    variable = f8
    outputs = console
  [../]
  [./raw_f9]
    type = ElementExtremeValue
    variable = f9
    outputs = console
  [../]
  [./raw_f10]
    type = ElementExtremeValue
    variable = f10
    outputs = console
  [../]
  [./raw_f11]
    type = ElementExtremeValue
    variable = f11
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
  [./f4]
    type = FunctionValuePostprocessor
    function = should_be_zero4_fcn
  [../]
  [./f5]
    type = FunctionValuePostprocessor
    function = should_be_zero5_fcn
  [../]
  [./f6]
    type = FunctionValuePostprocessor
    function = should_be_zero6_fcn
  [../]
  [./f7]
    type = FunctionValuePostprocessor
    function = should_be_zero7_fcn
  [../]
  [./f8]
    type = FunctionValuePostprocessor
    function = should_be_zero8_fcn
  [../]
  [./f9]
    type = FunctionValuePostprocessor
    function = should_be_zero9_fcn
  [../]
  [./f10]
    type = FunctionValuePostprocessor
    function = should_be_zero10_fcn
  [../]
  [./f11]
    type = FunctionValuePostprocessor
    function = should_be_zero11_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
  [./should_be_zero4_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f4&#x27;
  [../]
  [./should_be_zero5_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f5&#x27;
  [../]
  [./should_be_zero6_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f6&#x27;
  [../]
  [./should_be_zero7_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f7&#x27;
  [../]
  [./should_be_zero8_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f8&#x27;
  [../]
  [./should_be_zero9_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f9&#x27;
  [../]
  [./should_be_zero10_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f10&#x27;
  [../]
  [./should_be_zero11_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f11&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 2E6
    internal_limit = 1
  [../]
  [./cs]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E7
    value_residual = 0.5E7
    internal_limit = 1
  [../]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 2E6
    value_residual = 1E6
    internal_limit = 1
  [../]
  [./phi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.6
    value_residual = 0.2
    internal_limit = 1
  [../]
  [./psi]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.5
    value_residual = 0.1
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = phi
    dilation_angle = psi
    smoothing_tol = 1E5
    max_NR_iterations = 1000
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  dtmin = 1
  type = Transient
[]


[Outputs]
  file_base = random4
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f9bb706d-a882-4474-a704-f7acdc25ac42"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/errors/multiapp_bad_function_series.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
  [./AnotherFunction]
    type = ConstantFunction
    value = -1
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = AnotherFunction
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c7b6420a-027b-4153-8200-c55d423b084b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random2.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with compressive failure only
# Plasticity models:
# Compressive strength = 1 MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./cs]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./coh]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./ang]
    type = TensorMechanicsHardeningConstant
    value = 0.5
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random2
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d39cc636-6c3f-4701-bc94-32a99d11bc53"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5bb2c617-ac37-4738-8c01-42cc45ec2047"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  l_max_its = 30
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="fef44599-c9a6-47b4-a8cc-93559297cac1"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto15.i</h4><pre class="moose-pre"><code class="language-text"># Jacobian check for nonlinear, multi-surface plasticity
# This returns to the edge of Mohr Coulomb.
# This is a very nonlinear test and a delicate test because it perturbs around
# an edge of the yield function where some derivatives are not well defined
#
# Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# NOTE: The yield function tolerances here are set at 100-times what i would usually use
# This is because otherwise the test fails on the &#x27;pearcey&#x27; architecture.
# This is because identical stress tensors yield slightly different eigenvalues
# (and hence return-map residuals) on &#x27;pearcey&#x27; than elsewhere, which results in
# a different number of NR iterations are needed to return to the yield surface.
# This is presumably because of compiler internals, or the BLAS routines being
# optimised differently or something similar.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int7]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int8]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int0
    index = 0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int1
    index = 1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int2
    index = 2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int3
    index = 3
  [../]
  [./int4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int4
    index = 4
  [../]
  [./int5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int5
    index = 5
  [../]
  [./int6]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int6
    index = 6
  [../]
  [./int7]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int7
    index = 7
  [../]
  [./int8]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int8
    index = 8
  [../]
[]

[Postprocessors]
  [./max_int0]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./max_int1]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./max_int2]
    type = ElementExtremeValue
    variable = int2
    outputs = console
  [../]
  [./max_int3]
    type = ElementExtremeValue
    variable = int3
    outputs = console
  [../]
  [./max_int4]
    type = ElementExtremeValue
    variable = int4
    outputs = console
  [../]
  [./max_int5]
    type = ElementExtremeValue
    variable = int5
    outputs = console
  [../]
  [./max_int6]
    type = ElementExtremeValue
    variable = int6
    outputs = console
  [../]
  [./max_int7]
    type = ElementExtremeValue
    variable = int7
    outputs = console
  [../]
  [./max_int8]
    type = ElementExtremeValue
    variable = int8
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E1
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1.0E-4  # Note larger value
    shift = 1.0E-4                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E2
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E-4  # Note larger value
    shift = 1.0E-4                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E3 1.3E3&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;100.1 0.1 -0.2  0.1 0.9 0  -0.2 0 1.1&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile mc&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;rock&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    tangent_operator = nonlinear
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
  end_time = 1
[]



[Outputs]
  file_base = cto15
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9abcc902-e5a2-4bce-83d8-7c02376c6020"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper1.i</h4><pre class="moose-pre"><code class="language-text"># This runs the models mentioned in the first example of the Multi-Surface paper
#
# Plasticity models:
# SimpleTester with a = 1 and b = 0 and strength = 1E9  (only does elasticity)
# SimpleTester with a = 1 and b = 0 and strength = 0
# SimpleTester with a = 1 and b = 0 and strength = 1E-3
#
# Lame lambda = 0 (Poisson=0).  Lame mu = 0.5E6
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = console
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = console
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = console
  [../]
[]


[UserObjects]
  [./simple0]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1E9
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple1]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 0
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
  [./simple2]
    type = TensorMechanicsPlasticSimpleTester
    a = 1
    b = 0
    strength = 1E-3
    yield_function_tolerance = 1.0E-6
    internal_constraint_tolerance = 1.0E-6
  [../]
[]

[Materials]
  active = &#x27;elasticity_tensor strain single&#x27;
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0 0.5E6&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./elastic_model]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple0&#x27;
  [../]
  [./single]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple1&#x27;
  [../]
  [./double]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;simple1 simple2&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="683e3a75-bf65-4be6-a7e2-7682c2e86805"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2bf7f824-c341-4e61-9e5b-cb94e9b98c7d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_smoothed.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Smoothed tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 20
    min_stepsize = 1E-4
    max_stepsize_for_dumb = 1E-3
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_smoothed
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8d346b87-0cd2-410b-aee1-4b0ac954ba33"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_abbo.i</h4><pre class="moose-pre"><code class="language-text"># Uses an Abbo et al smoothed version of Mohr-Coulomb (via TensorMechanicsPlasticMohrCoulomb and ComputeMultiPlasticityStress) to simulate the following problem.
# A cubical block is notched around its equator.
# All of its outer surfaces have roller BCs, but the notched region is free to move as needed
# The block is initialised with a high hydrostatic tensile stress
# Without the notch, the BCs do not allow contraction of the block, and this stress configuration is admissible
# With the notch, however, the interior parts of the block are free to move in order to relieve stress, and this causes plastic failure
# The top surface is then pulled upwards (the bottom is fixed because of the roller BCs)
# This causes more failure
[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 9
    ny = 9
    nz = 9
    xmin = 0
    xmax = 0.1
    ymin = 0
    ymax = 0.1
    zmin = 0
    zmax = 0.1
  []
  [block_to_remove_xmin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.01 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = generated_mesh
  []
  [block_to_remove_xmax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0.09 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmin
  []
  [block_to_remove_ymin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.01 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmax
  []
  [block_to_remove_ymax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 0.09 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_ymin
  []
  [remove_block]
    type = BlockDeletionGenerator
    block_id = 1
    input = block_to_remove_ymax
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_zz&#x27;
    eigenstrain_names = ini_stress
  [../]
[]

[Postprocessors]
  [./uz]
    type = PointValue
    point = &#x27;0 0 0.1&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./s_zz]
    type = ElementAverageValue
    use_displaced_mesh = false
    variable = stress_zz
  [../]
  [./num_res]
    type = NumResidualEvaluations
  [../]
  [./nr_its] # num_iters is the average number of NR iterations encountered per element in this timestep
    type = ElementAverageValue
    variable = num_iters
  [../]
  [./max_nr_its] # num_iters is the average number of NR iterations encountered in the element in this timestep, so we must get max(max_nr_its) to obtain the max number of iterations
    type = ElementExtremeValue
    variable = num_iters
  [../]
  [./runtime]
    type = PerfGraphData
    data_type = TOTAL
    section_name = &#x27;Root&#x27;
  [../]
[]

[BCs]
  # back=zmin, front=zmax, bottom=ymin, top=ymax, left=xmin, right=xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./xmax_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.0
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./ymax_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = top
    value = 0.0
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;1E-6*max(t,0)&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./num_iters_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = num_iters
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 5E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 0.02E6
    mc_edge_smoother = 29
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 16E9
    poissons_ratio = 0.25
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-11
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
  [./strain_from_initial_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;6E6 0 0  0 6E6 0  0 0 6E6&#x27;
    eigenstrain_name = ini_stress
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  start_time = -1
  end_time = 10
  dt = 1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-5
  nl_rel_tol = 1E-7
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = biaxial_abbo
  perf_graph = true
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="cdef4d59-a831-42a4-ac58-73adae67ecb1"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_noaction&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f1001114-0949-49f5-8348-3d6660ccb006"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_update.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = TensileStressUpdate
    tensile_strength = ts
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_update
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7ca3203d-7741-41e8-be85-d50a4c639fdd"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c1320c15-cabd-401d-a872-bef8647f4d66"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2d5eb322-4afd-4469-bc8a-d1b88f4df45e"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto18.i</h4><pre class="moose-pre"><code class="language-text"># Jacobian check for nonlinear, multi-surface plasticity.
# Returns to the edge of the tensile yield surface
#
# Plasticity models:
# Tensile with strength = 1MPa softening to 0.5MPa in 2E-2 strain
#
# Lame lambda = 0.5GPa.  Lame mu = 1GPa
#
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]



[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int0
    index = 0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int1
    index = 1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int2
    index = 2
  [../]
[]

[Postprocessors]
  [./max_int0]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./max_int1]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./max_int2]
    type = ElementExtremeValue
    variable = int2
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.5
    internal_limit = 2E-2
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E-6  # Note larger value
    shift = 1.0E-6                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.5E3 1E3&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;-1 0.1 0.2  0.1 15 -0.3  0.2 -0.3 14&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    tangent_operator = nonlinear
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    #petsc_options = &#x27;-snes_test_display&#x27;
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]


[Outputs]
  file_base = cto18
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5c0ec6e5-b213-4c15-82b5-7c4d56613294"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/3D_volumetric_Cartesian/main.i</h4><pre class="moose-pre"><code class="language-text"># Basic example coupling a master and sub app in a 3D Cartesian volume.
#
# The master app provides field values to the sub app via Functional Expansions, which then performs
# its calculations. The sub app&#x27;s solution field values are then transferred back to the master app
# and coupled into the solution of the master app solution.
#
# This example couples Functional Expansions via AuxVariable.
#
# Note: this problem is not light, and may take a few minutes to solve.
[Mesh]
  type = GeneratedMesh
  dim = 3

  xmin = 0.0
  xmax = 10.0
  nx = 15

  ymin = 1.0
  ymax = 11.0
  ny = 25

  zmin = 2.0
  zmax = 12.0
  nz = 35
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom left right front back&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3   4   5&#x27;
    physical_bounds = &#x27;0.0  10.0    1.0 11.0    2.0 12.0&#x27;
    x = Legendre
    y = Legendre
    z = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e2cadb45-4b3b-4274-a706-f183d9eec0ff"><div class="modal-content"><h4>modules/contact/test/tests/dual_mortar/dm_mechanical_contact.i</h4><pre class="moose-pre"><code class="language-text">offset = 0.001
vy = 0.1

refine = 0

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = true
[]

[Mesh]
  [./original_file_mesh]
    type = FileMeshGenerator
    file = long_short_blocks.e
  [../]
  uniform_refine =  ${refine}
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    incremental = true
    add_variables = true
    block = &#x27;1 2&#x27;
  [../]
[]

[Functions]
  [./horizontal_movement]
    type = ParsedFunction
    value = &#x27;0.002-0.003*exp(-4.05*t)&#x27;
  [../]
  [./vertical_movement]
    type = ParsedFunction
    value = &#x27;${vy}*t+${offset}&#x27;
  [../]
[]

[BCs]
  [./push_left_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = 30
    function = horizontal_movement
  [../]
  [./fix_right_x]
    type = DirichletBC
    variable = disp_x
    boundary = 40
    value = 0.0
  [../]
  [./fix_right_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;40&#x27;
    value = 0.0
  [../]
  [./push_left_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;30&#x27;
    function = vertical_movement
  [../]
[]

[Materials]
  [./elasticity_tensor_left]
    type = ComputeIsotropicElasticityTensor
    block = 1
    youngs_modulus = 1.0e6
    poissons_ratio = 0.3
  [../]
  [./stress_left]
    type = ComputeFiniteStrainElasticStress
    block = 1
  [../]

  [./elasticity_tensor_right]
    type = ComputeIsotropicElasticityTensor
    block = 2
    youngs_modulus = 1.0e6
    poissons_ratio = 0.3
  [../]
  [./stress_right]
    type = ComputeFiniteStrainElasticStress
    block = 2
  [../]
[]

[Contact]
  [leftright]
    mesh = original_file_mesh
    secondary = 10
    primary = 20

    use_dual = true

    formulation = mortar
    model = frictionless
  [../]
[]

[ICs]
  [./disp_y]
    block = 1
    variable = disp_y
    value = ${offset}
    type = ConstantIC
  [../]
  [./disp_x]
    block = 1
    variable = disp_x
    value = ${offset}
    type = ConstantIC
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;

  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason -snes_ksp_ew -snes_fd&#x27;

  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu NONZERO   1e-15&#x27;

  dt = 0.2
  dtmin = 1e-4
  end_time = 0.2

  l_max_its = 100

  nl_max_its = 30
  nl_rel_tol = 1e-6
  snesmf_reuse_base = false
[]

[Outputs]
  file_base = ./dm_contact_out
  [./comp]
    type = CSV
    show = &#x27;contact normal_lm avg_disp_x avg_disp_y max_disp_x max_disp_y min_disp_x min_disp_y&#x27;
  [../]
[]


[Postprocessors]
  [./contact]
    type = ContactDOFSetSize
    variable = leftright_normal_lm
    subdomain = leftright_secondary_subdomain
  []
  [./normal_lm]
    type = ElementAverageValue
    variable = leftright_normal_lm
    block = &#x27;4&#x27;
  [../]
  [./avg_disp_x]
    type = ElementAverageValue
    variable = disp_x
    block = &#x27;1 2&#x27;
  [../]
  [./avg_disp_y]
    type = ElementAverageValue
    variable = disp_y
    block = &#x27;1 2&#x27;
  [../]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
    block = &#x27;1 2&#x27;
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
    block = &#x27;1 2&#x27;
  [../]
  [./min_disp_x]
    type = ElementExtremeValue
    variable = disp_x
    block = &#x27;1 2&#x27;
    value_type = min
  [../]
  [./min_disp_y]
    type = ElementExtremeValue
    variable = disp_y
    block = &#x27;1 2&#x27;
    value_type = min
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b667600a-e6c8-4106-84f3-f6f66ff96161"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig7b.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 7 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Dashed black curve (2)
# Eigenstrain is globally applied. Single global elastic free energies.
# Supply the RADIUS parameter (10-35) on the command line to generate data
# for all curves in the plot.
#

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 32
  xmin = 0
  xmax = 100
  second_order = true
[]

[Problem]
  coord_type = RSPHERICAL
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Functions]
  [./diff]
    type = ParsedFunction
    value = &#x27;${RADIUS}-pos_c&#x27;
    vars = pos_c
    vals = pos_c
  [../]
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]
  [./w]
  [../]

  # Phase order parameter
  [./eta]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]

  [./Fe_fit]
    order = SECOND
  [../]
[]

[Modules/TensorMechanics/Master/all]
  add_variables = true
  eigenstrain_names = eigenstrain
[]

[Kernels]
  # Split Cahn-Hilliard kernels
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    args = &#x27;eta&#x27;
    kappa_name = kappa_c
    w = w
  [../]
  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta
    args = &#x27;c&#x27;
    mob_name = L
    f_name = F
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    mob_name = L
    kappa_name = kappa_eta
  [../]

  [./Fe]
    type = MaterialPropertyValue
    prop_name = Fe
    variable = Fe_fit
  [../]

  [./autoadjust]
    type = MaskedBodyForce
    variable = w
    function = diff
    mask = mask
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa_c kappa_eta&#x27;
    prop_values = &#x27;1.0 1.0 0.5     1&#x27;
  [../]

  # forcing function mask
  [./mask]
    type = ParsedMaterial
    f_name = mask
    function = grad/dt
    material_property_names = &#x27;grad dt&#x27;
  [../]
  [./grad]
    type = VariableGradientMaterial
    variable = c
    prop = grad
  [../]
  [./time]
    type = TimeStepMaterial
  [../]

  # global mechanical properties
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # eigenstrain as a function of phase
  [./eigenstrain]
    type = ComputeVariableEigenstrain
    eigen_base = &#x27;0.05 0.05 0.05 0 0 0&#x27;
    prefactor = h
    args = eta
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching]
    type = SwitchingFunctionMaterial
    function_name = h
    eta = eta
    h_order = SIMPLE
  [../]
  [./barrier]
    type = BarrierFunctionMaterial
    eta = eta
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(1-c)^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global chemical free energy
  [./chemical_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = Fc
    fa_name = Fc1
    fb_name = Fc2
    eta = eta
    args = &#x27;c&#x27;
    W = 4
  [../]

  # global elastic free energy
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;eta&#x27;
    output_properties = Fe
    derivative_order = 2
  [../]

  # free energy
  [./free_energy]
    type = DerivativeSumMaterial
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c eta&#x27;
    derivative_order = 2
  [../]
[]

[BCs]
  [./left_r]
    type = DirichletBC
    variable = disp_r
    boundary = &#x27;left&#x27;
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_c]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = c
    target = 0.582
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_eta]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = eta
    target = 0.5
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./c_min]
    type = ElementExtremeValue
    value_type = min
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    variable = &#x27;Fe_fit c w&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point =   &#x27;100 0 0&#x27;
    num_points = 5000
    sort_by = x
    outputs = vpp
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu&#x27;

  l_max_its = 30
  nl_max_its = 15
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 2.0e-9
  start_time = 0.0
  end_time = 100000.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 8
    iteration_window = 1
    dt = 1
  [../]

  [./Adaptivity]
    initial_adaptivity = 5
    interval = 10
    max_h_level = 5
    refine_fraction = 0.9
    coarsen_fraction = 0.1
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = radius_${RADIUS}/eigenstrain_pp
  [../]
  [./vpp]
    type = CSV
    delimiter = &#x27; &#x27;
    sync_times = &#x27;10 50 100 500 1000 5000 10000 50000 100000&#x27;
    sync_only = true
    time_data = true
    file_base = radius_${RADIUS}/eigenstrain_vpp
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="51afebe6-3dcc-4b2c-9614-b68050ec88ff"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="16f3454f-b2fd-456a-b52c-df7d2c3df98b"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/2D_volumetric_Cartesian/main.i</h4><pre class="moose-pre"><code class="language-text"># Basic example coupling a master and sub app in a 2D Cartesian volume.
#
# The master app provides field values to the sub app via Functional Expansions, which then performs
# its calculations. The sub app&#x27;s solution field values are then transferred back to the master app
# and coupled into the solution of the master app solution.
#
# This example couples Functional Expansions via AuxVariable.
[Mesh]
  type = GeneratedMesh
  dim = 2

  xmin = 0.0
  xmax = 10.0
  nx = 15

  ymin = 1.0
  ymax = 11.0
  ny = 25
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3   4&#x27;
    physical_bounds = &#x27;0.0  10.0    1.0 11.0&#x27;
    x = Legendre
    y = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9100b513-249c-475d-8f87-cc226d70d384"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/tensile/random_planar.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Planar tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1250
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1250
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 2
    variable = f2
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    factor = 1E6
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
[]

[UserObjects]
  [./hard]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = hard
    yield_function_tolerance = 1.0E-1
    shift = 1.0E-1
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    deactivation_scheme = &#x27;safe_to_dumb&#x27;
    ep_plastic_tolerance = 1E-7
    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    min_stepsize = 1E-3
    max_stepsize_for_dumb = 1
    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random_planar
  exodus = false
  [./csv]
    type = CSV
    [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="686fcf0f-d573-4cd1-ac80-62ef64771363"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/1D_volumetric_Cartesian/main.i</h4><pre class="moose-pre"><code class="language-text"># Basic example coupling a master and sub app in a 1D Cartesian volume.
#
# The master app provides field values to the sub app via Functional Expansions, which then performs
# its calculations. The sub app&#x27;s solution field values are then transferred back to the master app
# and coupled into the solution of the master app solution.
#
# This example couples Functional Expansions via AuxVariable.
[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b2d0abe7-dd25-44eb-8a25-f4960cd04c47"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
  [secondary_x]
    input = anode
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;3&#x27;
    new_block_id = 10
    new_block_name = &quot;secondary_x&quot;
  []
  [primary_x]
    input = secondary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;1&#x27;
    new_block_id = 12
    new_block_name = &quot;primary_x&quot;
  []
  [secondary_y]
    input = primary_x
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;0&#x27;
    new_block_id = 11
    new_block_name = &quot;secondary_y&quot;
  []
  [primary_y]
    input = secondary_y
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;2&#x27;
    new_block_id = 13
    new_block_name = &quot;primary_y&quot;
  []
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]

  # Lagrange multipliers for gradient component periodicity
  [./lm_left_right_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]
  [./lm_left_right_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_x
  [../]

  [./lm_up_down_xx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_xy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yx]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
  [./lm_up_down_yy]
    order = FIRST
    family = LAGRANGE
    block = secondary_y
  [../]
[]

[Constraints]
  [./ud_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_up_down_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]
  [./ud_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_up_down_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = bottom
    primary_boundary = top
    secondary_subdomain = secondary_y
    primary_subdomain = primary_y
    periodic = true
  [../]

  [./lr_disp_x_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_xx
    component = 0
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_x_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_xy
    component = 1
    secondary_variable = disp_x
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_x]
    type = EqualGradientConstraint
    variable = lm_left_right_yx
    component = 0
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
  [./lr_disp_y_grad_y]
    type = EqualGradientConstraint
    variable = lm_left_right_yy
    component = 1
    secondary_variable = disp_y
    secondary_boundary = left
    primary_boundary = right
    secondary_subdomain = secondary_x
    primary_subdomain = primary_x
    periodic = true
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
    block = 0
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0 10 11&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="afd1c24e-7769-4827-b3d9-c047a4f231be"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_mohr_coulomb/random3.i</h4><pre class="moose-pre"><code class="language-text"># Using CappedMohrCoulomb with Mohr-Coulomb failure only
# Plasticity models:
# Cohesion = 1MPa
# Friction angle = dilation angle = 0.5
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 1234
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 1234
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;stress_xx stress_xy stress_xz stress_yy stress_yz stress_zz&#x27;
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 6
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 7
    variable = f1
  [../]
  [./f2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 8
    variable = f2
  [../]
  [./f3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 9
    variable = f3
  [../]
  [./f4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 10
    variable = f4
  [../]
  [./f5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 11
    variable = f5
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = int0
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./tot_iters]
    type = ElementIntegralMaterialProperty
    mat_prop = plastic_NR_iterations
    outputs = console
  [../]
  [./intnl_max]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./raw_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./raw_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./raw_f2]
    type = ElementExtremeValue
    variable = f2
    outputs = console
  [../]
  [./raw_f3]
    type = ElementExtremeValue
    variable = f3
    outputs = console
  [../]
  [./raw_f4]
    type = ElementExtremeValue
    variable = f4
    outputs = console
  [../]
  [./raw_f5]
    type = ElementExtremeValue
    variable = f5
    outputs = console
  [../]
  [./iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./f0]
    type = FunctionValuePostprocessor
    function = should_be_zero0_fcn
  [../]
  [./f1]
    type = FunctionValuePostprocessor
    function = should_be_zero1_fcn
  [../]
  [./f2]
    type = FunctionValuePostprocessor
    function = should_be_zero2_fcn
  [../]
  [./f3]
    type = FunctionValuePostprocessor
    function = should_be_zero3_fcn
  [../]
  [./f4]
    type = FunctionValuePostprocessor
    function = should_be_zero4_fcn
  [../]
  [./f5]
    type = FunctionValuePostprocessor
    function = should_be_zero5_fcn
  [../]
[]

[Functions]
  [./should_be_zero0_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f0&#x27;
  [../]
  [./should_be_zero1_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f1&#x27;
  [../]
  [./should_be_zero2_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f2&#x27;
  [../]
  [./should_be_zero3_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f3&#x27;
  [../]
  [./should_be_zero4_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f4&#x27;
  [../]
  [./should_be_zero5_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-1,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;raw_f5&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E12
  [../]
  [./coh]
    type = TensorMechanicsHardeningCubic
    value_0 = 1E6
    value_residual = 0
    internal_limit = 1
  [../]
  [./ang]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.9
    value_residual = 0.2
    internal_limit = 1
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1E9 1.3E9&#x27;
  [../]
  [./tensile]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = coh
    friction_angle = ang
    dilation_angle = ang
    smoothing_tol = 1E5
    max_NR_iterations = 100
    yield_function_tol = 1.0E-1
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = tensile
    perform_finite_strain_rotations = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random3
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="85f33b1f-a97d-44b3-9f08-b576581cd31c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto16.i</h4><pre class="moose-pre"><code class="language-text"># Jacobian check for nonlinear, multi-surface plasticity.
# Returns to the tip of the tensile yield surface
# This is a very nonlinear test and a delicate test because it perturbs around
# a tip of the yield function where some derivatives are not well defined
#
# Plasticity models:
# Tensile with strength = 1MPa softening to 0.5MPa in 2E-2 strain
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]



[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int0
    index = 0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int1
    index = 1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int2
    index = 2
  [../]
[]

[Postprocessors]
  [./max_int0]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./max_int1]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./max_int2]
    type = ElementExtremeValue
    variable = int2
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.5
    internal_limit = 2E-2
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E-6  # Note larger value
    shift = 1.0E-6                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E3 1.3E3&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;15 1 0.2  1 10 -0.3  -0.3 0.2 8&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile&#x27;
    max_NR_iterations = 5
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    tangent_operator = nonlinear
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]


[Outputs]
  file_base = cto16
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="df5cbe80-6023-427f-9794-7070ed0cb5d5"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper3.i</h4><pre class="moose-pre"><code class="language-text"># This runs the third example models described in the &#x27;MultiSurface&#x27; plasticity paper
# Just change the deactivation_scheme
#
# Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
# WeakPlaneTensile with strength = 1000Pa
# WeakPlaneShear with cohesion = 0.1MPa and friction angle = 25, dilation angle = 5deg
#
# Lame lambda = 1.2GPa.  Lame mu = 1.2GPa (Young = 3GPa, poisson = 0.5)
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1.0
    shift = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./mc_smooth]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0
    shift = 1.0
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
  [./tensile_smooth]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wpt_str]
    type = TensorMechanicsHardeningConstant
    value = 1.0E3
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = wpt_str
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wps_c]
    type = TensorMechanicsHardeningConstant
    value = 1.0E5
  [../]
  [./wps_tan_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.466
  [../]
  [./wps_tan_psi]
    type = TensorMechanicsHardeningConstant
    value = 0.087
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = wps_c
    tan_friction_angle = wps_tan_phi
    tan_dilation_angle = wps_tan_psi
    smoother = 1.0E4
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.2E9 1.2E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile_smooth mc_smooth wpt wps&#x27;
    max_NR_iterations = 30
    specialIC = &#x27;none&#x27;
    deactivation_scheme = &#x27;optimized&#x27;
    min_stepsize = 1E-6
    max_stepsize_for_dumb = 1E-2

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper3
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7ed43278-a650-4d95-adb5-62f02a4864f7"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_gas.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that give a single gas phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 5e4
    max = 1e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.9
    max = 0.99
    variable = zi
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5d406f03-a31e-4b04-bc1a-7d7d45fd17b2"><div class="modal-content"><h4>modules/combined/test/tests/restart-transient-from-ss-with-stateful/sub_ss.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    nx = 8
    ny = 8
    xmin = -82.627
    xmax = 82.627
    ymin = -82.627
    ymax = 82.627
    dim = 2
  []
  [./extra_nodes_x]
    type = ExtraNodesetGenerator
    input = &#x27;gen&#x27;
    new_boundary = &#x27;no_x&#x27;
    coord = &#x27;0 82.627 0&#x27;
  [../]
  [./extra_nodes_y]
    type = ExtraNodesetGenerator
    input = &#x27;extra_nodes_x&#x27;
    new_boundary = &#x27;no_y&#x27;
    coord = &#x27;-82.627 0 0&#x27;
  [../]
[]

[Problem]
  type = ReferenceResidualProblem
  reference_vector = &#x27;ref&#x27;
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./temp]
  [../]
[]

[Modules/TensorMechanics/Master]
  # FINITE strain when strain is large, i.e., visible movement.
  # SMALL strain when things are stressed, but may not move.
  [./fuel]
    add_variables = true
    strain = FINITE
    temperature = temp
    eigenstrain_names = &#x27;thermal_eigenstrain&#x27;
    generate_output = &#x27;vonmises_stress stress_xx stress_yy hydrostatic_stress max_principal_stress strain_xy elastic_strain_xx stress_xy&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_finite_deform_jacobian = true
    incremental = true
  [../]
[]

[BCs]
  [./no_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;no_x&#x27;
    value = 0.0
    preset = true
  [../]
  [./no_y]
    type = DirichletBC
    preset = true
    variable = disp_y
    boundary = &#x27;no_y&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 3e10   # Pa
    poissons_ratio = 0.33    # unitless
  [../]
  [./thermal_strains]
    type = ComputeThermalExpansionEigenstrain
    temperature = temp
    thermal_expansion_coeff = 2e-6 # 1/K
    stress_free_temperature = 500 # K
    eigenstrain_name = &#x27;thermal_eigenstrain&#x27;
  [../]
  [./stress_finite] # goes with FINITE strain formulation
    type = ComputeFiniteStrainElasticStress
  [../]
[]

[Postprocessors]
  [./avg_temp]
    type = ElementAverageValue
    variable = temp
  [../]
  [./disp_x_max_element]
    type = ElementExtremeValue
    value_type = max
    variable = disp_x
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_y_max_element]
    type = ElementExtremeValue
    value_type = max
    variable = disp_y
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_x_max_nodal]
    type = NodalExtremeValue
    value_type = max
    variable = disp_x
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_y_max_nodal]
    type = NodalExtremeValue
    value_type = max
    variable = disp_y
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Executioner]
  type = Steady
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;hypre boomeramg 300&#x27;
  line_search = &#x27;none&#x27;

  l_tol = 1e-02
  nl_rel_tol = 5e-04
  nl_abs_tol = 1e-2

  l_max_its = 50
  nl_max_its = 25
[]

[Outputs]
  exodus = true
  print_linear_residuals = false
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3782903b-4adf-4566-ba2b-4e9600f581da"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="295486c2-5e95-452e-a2f1-5f501516e294"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="44e4fff2-deed-4eac-a983-6716abbe8480"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_twophase.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that are appropriate for two phases

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e6
    max = 4e6
    variable = pgas
    seed = 1
  [../]
  [./z]
    type = RandomIC
    min = 0.2
    max = 0.8
    variable = zi
    seed = 2
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7fe8d998-c986-49b8-963e-3867a332b8de"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_twophase_nonisothermal.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for nonisothermal two phase conditions

[Mesh]
  [./mesh]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 2
    ny = 2
  [../]
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
  [./temperature]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e5
    max = 5e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.06
    variable = z
  [../]
  [./temperature]
    type = RandomIC
    min = 20
    max = 80
    variable = temperature
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
  [./energy]
    type = PorousFlowEnergyTimeDerivative
    variable = temperature
  [../]
  [./heat]
    type = PorousFlowHeatAdvection
    variable = temperature
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z temperature&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = temperature
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature = temperature
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
  [./rock_heat]
    type = PorousFlowMatrixInternalEnergy
    specific_heat_capacity = 1000
    density = 2500
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1dbe6263-362c-46ce-a14c-815279571ead"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/standard_use/volume_coupling_custom_norm.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
    generation_type = &#x27;sqrt_mu&#x27;
    expansion_type = &#x27;sqrt_mu&#x27;
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
  file_base = &#x27;volume_coupled_out&#x27;
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = volume_coupling_custom_norm_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="567ece9c-c2ea-45bb-972b-5e363d69c106"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap/random.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.  Two yield surfaces are used: one for compression and one for tension.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./cap1]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
  [./cap2]
    type = TensorMechanicsPlasticMeanCap
    a = 1
    strength = strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = &#x27;cap1 cap2&#x27;
    debug_fspb = crash
    deactivation_scheme = optimized
    min_stepsize = 1
    max_stepsize_for_dumb = 1
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a4dddc29-88b0-4ac4-8115-dc02dd9036a5"><div class="modal-content"><h4>modules/combined/examples/publications/rapid_dev/fig7a.i</h4><pre class="moose-pre"><code class="language-text">#
# Fig. 7 input for 10.1016/j.commatsci.2017.02.017
# D. Schwen et al./Computational Materials Science 132 (2017) 36-45
# Solid gray curve (1)
# Eigenstrain and elastic energies ar computed per phase and then interpolated.
# Supply the RADIUS parameter (10-35) on the command line to generate data
# for all curves in the plot.
#

[Mesh]
  type = GeneratedMesh
  dim = 1
  nx = 32
  xmin = 0
  xmax = 100
  second_order = true
[]

[Problem]
  coord_type = RSPHERICAL
[]

[GlobalParams]
  displacements = &#x27;disp_r&#x27;
[]

[Functions]
  [./diff]
    type = ParsedFunction
    value = &#x27;${RADIUS}-pos_c&#x27;
    vars = pos_c
    vals = pos_c
  [../]
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./cross_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]
  [./w]
  [../]

  # Phase order parameter
  [./eta]
    [./InitialCondition]
      type = SmoothCircleIC
      invalue = 1
      outvalue = 0
      x1 = 0
      y1 = 0
      radius = ${RADIUS}
      int_width = 3
    [../]
  [../]

  # Mesh displacement
  [./disp_r]
    order = SECOND
  [../]

  [./Fe_fit]
    order = SECOND
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Split Cahn-Hilliard kernels
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    args = &#x27;eta&#x27;
    kappa_name = kappa_c
    w = w
  [../]
  [./wres]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
  [./time]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]

  # Allen-Cahn and Lagrange-multiplier constraint kernels for order parameter 1
  [./detadt]
    type = TimeDerivative
    variable = eta
  [../]
  [./ACBulk1]
    type = AllenCahn
    variable = eta
    args = &#x27;c&#x27;
    mob_name = L
    f_name = F
  [../]
  [./ACInterface]
    type = ACInterface
    variable = eta
    mob_name = L
    kappa_name = kappa_eta
  [../]

  [./Fe]
    type = MaterialPropertyValue
    prop_name = Fe
    variable = Fe_fit
  [../]

  [./autoadjust]
    type = MaskedBodyForce
    variable = w
    function = diff
    mask = mask
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   L   kappa_c kappa_eta&#x27;
    prop_values = &#x27;1.0 1.0 0.5     1&#x27;
  [../]

  # forcing function mask
  [./mask]
    type = ParsedMaterial
    f_name = mask
    function = grad/dt
    material_property_names = &#x27;grad dt&#x27;
  [../]
  [./grad]
    type = VariableGradientMaterial
    variable = c
    prop = grad
  [../]
  [./time]
    type = TimeStepMaterial
  [../]

  # global mechanical properties
  [./elasticity_tensor_1]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    base_name = phase1
    fill_method = symmetric_isotropic
  [../]
  [./elasticity_tensor_2]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    base_name = phase2
    fill_method = symmetric_isotropic
  [../]
  [./strain_1]
    type = ComputeRSphericalSmallStrain
    base_name = phase1
  [../]
  [./strain_2]
    type = ComputeRSphericalSmallStrain
    base_name = phase2
    eigenstrain_names = eigenstrain
  [../]
  [./stress_1]
    type = ComputeLinearElasticStress
    base_name = phase1
  [../]
  [./stress_2]
    type = ComputeLinearElasticStress
    base_name = phase2
  [../]

  # eigenstrain per phase
  [./eigenstrain2]
    type = ComputeEigenstrain
    eigen_base = &#x27;0.05 0.05 0.05 0 0 0&#x27;
    base_name = phase2
    eigenstrain_name = eigenstrain
  [../]

  # switching functions
  [./switching]
    type = SwitchingFunctionMaterial
    function_name = h
    eta = eta
    h_order = SIMPLE
  [../]
  [./barrier]
    type = BarrierFunctionMaterial
    eta = eta
  [../]

  # chemical free energies
  [./chemical_free_energy_1]
    type = DerivativeParsedMaterial
    f_name = Fc1
    function = &#x27;c^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./chemical_free_energy_2]
    type = DerivativeParsedMaterial
    f_name = Fc2
    function = &#x27;(1-c)^2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # elastic free energies
  [./elastic_free_energy_1]
    type = ElasticEnergyMaterial
    f_name = Fe1
    args = &#x27;&#x27;
    base_name = phase1
    derivative_order = 2
  [../]
  [./elastic_free_energy_2]
    type = ElasticEnergyMaterial
    f_name = Fe2
    args = &#x27;&#x27;
    base_name = phase2
    derivative_order = 2
  [../]

  # per phase free energies
  [./free_energy_1]
    type = DerivativeSumMaterial
    f_name = F1
    sum_materials = &#x27;Fc1 Fe1&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]
  [./free_energy_2]
    type = DerivativeSumMaterial
    f_name = F2
    sum_materials = &#x27;Fc2 Fe2&#x27;
    args = &#x27;c&#x27;
    derivative_order = 2
  [../]

  # global chemical free energy
  [./global_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = F
    fa_name = F1
    fb_name = F2
    eta = eta
    args = &#x27;c&#x27;
    W = 4
  [../]

  # global stress
  [./global_stress]
    type = TwoPhaseStressMaterial
    base_A = phase1
    base_B = phase2
  [../]

  [./elastic_free_energy]
    type = DerivativeTwoPhaseMaterial
    f_name = Fe
    fa_name = Fe1
    fb_name = Fe2
    eta = eta
    args = &#x27;c&#x27;
    W = 0
  [../]
[]

[BCs]
  [./left_r]
    type = DirichletBC
    variable = disp_r
    boundary = &#x27;left&#x27;
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    variable = local_energy
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_c]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = c
    target = 0.582
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./pos_eta]
    type = FindValueOnLine
    start_point = &#x27;0 0 0&#x27;
    end_point = &#x27;100 0 0&#x27;
    v = eta
    target = 0.5
    tol = 1e-8
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
  [./c_min]
    type = ElementExtremeValue
    value_type = min
    variable = c
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
    outputs = &#x27;table console&#x27;
  [../]
[]

[VectorPostprocessors]
  [./line]
    type = LineValueSampler
    variable = &#x27;Fe_fit c w&#x27;
    start_point = &#x27;0 0 0&#x27;
    end_point =   &#x27;100 0 0&#x27;
    num_points = 5000
    sort_by = x
    outputs = vpp
    execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2

  solve_type = &#x27;PJFNK&#x27;
  petsc_options_iname = &#x27;-pc_type -sub_pc_type&#x27;
  petsc_options_value = &#x27;asm      lu&#x27;

  l_max_its = 30
  nl_max_its = 15
  l_tol = 1.0e-4
  nl_rel_tol = 1.0e-8
  nl_abs_tol = 2.0e-9
  start_time = 0.0
  end_time = 100000.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    optimal_iterations = 7
    iteration_window = 1
    dt = 1
  [../]

  [./Adaptivity]
    initial_adaptivity = 5
    interval = 10
    max_h_level = 5
    refine_fraction = 0.9
    coarsen_fraction = 0.1
  [../]
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  execute_on = &#x27;INITIAL TIMESTEP_END&#x27;
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
    file_base = radius_${RADIUS}/energy_pp
  [../]
  [./vpp]
    type = CSV
    delimiter = &#x27; &#x27;
    sync_times = &#x27;10 50 100 500 1000 5000 10000 50000 100000&#x27;
    sync_only = true
    time_data = true
    file_base = radius_${RADIUS}/energy_vpp
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2900e47d-aeaa-4caa-8814-2a7274628f05"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/brineco2_liquid.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowFluidState
# for conditions that give a single liquid phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[AuxVariables]
  [./xnacl]
    initial_condition = 0.05
  [../]
[]

[Variables]
  [./pgas]
  [../]
  [./zi]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 5e6
    max = 8e6
    variable = pgas
  [../]
  [./z_liquid]
    type = RandomIC
    min = 0.01
    max = 0.03
    variable = zi
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = zi
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = zi
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas zi&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowBrineCO2
    brine_fp = brine
    co2_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./brine]
      type = BrineFluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./brineco2]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = zi
    temperature_unit = Celsius
    xnacl = xnacl
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ec26e650-c3ae-45d0-b0db-d190ac96f7dc"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/ad_plastic/power_law_creep.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  second_order = true
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = false
[]

[AuxVariables]
  [./hydrostatic_stress]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./hydrostatic_stress]
    type = ADRankTwoScalarAux
    variable = hydrostatic_stress
    rank_two_tensor = stress
    scalar_type = Hydrostatic
  [../]
[]

[Variables]
  [./disp_x]
    order = SECOND
    scaling = 1e-10
  [../]
  [./disp_y]
    order = SECOND
    scaling = 1e-10
  [../]
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 10&#x27;
    y = &#x27;0 1e-3&#x27;
  [../]
[]

[Kernels]
  [./stress_x]
    type = ADStressDivergenceTensors
    component = 0
    variable = disp_x
  [../]
  [./stress_y]
    type = ADStressDivergenceTensors
    component = 1
    variable = disp_y
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ADComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]
  [./strain]
    type = ADComputeIncrementalSmallStrain
  [../]
  [./elastic_strain]
    type = ADComputeMultipleInelasticStress
  [../]

  [./creep_ten]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten
  [../]
  [./creep_ten2]
    type = ADPowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten2
  [../]
  [./creep_one]
    type = ADPowerLawCreepStressUpdate
    coefficient = 1e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_one
  [../]
  [./creep_nine]
    type = ADPowerLawCreepStressUpdate
    coefficient = 9e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_nine
  [../]
  [./creep_zero]
    type = ADPowerLawCreepStressUpdate
    coefficient = 0e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_zero
  [../]
[]

[BCs]
  [./no_disp_x]
    type = ADDirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]

  [./no_disp_y]
    type = ADDirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]

  [./pull_disp_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = -pc_hypre_type
  petsc_options_value = boomeramg

  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-5

  num_steps = 5
  dt = 1e-1
[]

[Postprocessors]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
  [../]
  [./max_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f89082a6-ab87-4322-bbc2-1ee460b31682"><div class="modal-content"><h4>modules/combined/examples/mortar/eigenstrain_action.i</h4><pre class="moose-pre"><code class="language-text">#
# Eigenstrain with Mortar gradient periodicity
#

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
  [./anode]
    input = cnode
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.5&#x27;
    new_boundary = 101
  [../]
[]

[Modules/PhaseField/MortarPeriodicity]
  [./strain]
    variable = &#x27;disp_x disp_y&#x27;
    periodicity = gradient
    periodic_directions = &#x27;x y&#x27;
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;disp_x disp_y&#x27;
[]

# AuxVars to compute the free energy density for outputting
[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./local_free_energy]
    type = TotalFreeEnergy
    block = 0
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
[]

[Variables]
  # Solute concentration variable
  [./c]
    [./InitialCondition]
      type = RandomIC
      min = 0.49
      max = 0.51
    [../]
    block = 0
  [../]
  [./w]
    block = 0
  [../]

  # Mesh displacement
  [./disp_x]
    block = 0
  [../]
  [./disp_y]
    block = 0
  [../]
[]

[Kernels]
  # Set up stress divergence kernels
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
  [../]
[]

[Materials]
  # declare a few constants, such as mobilities (L,M) and interface gradient prefactors (kappa*)
  [./consts]
    type = GenericConstantMaterial
    block = &#x27;0&#x27;
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    block = 0
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    block = 0
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  # matrix phase
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y&#x27;
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    block = 0
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./stress]
    type = ComputeLinearElasticStress
    block = 0
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    block = 0
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    block = 0
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[BCs]
  [./Periodic]
    [./up_down]
      primary = top
      secondary = bottom
      translation = &#x27;0 -1 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
    [./left_right]
      primary = left
      secondary = right
      translation = &#x27;1 0 0&#x27;
      variable = &#x27;c w&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = disp_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = disp_y
    value = 0
  [../]

  # fix side point x coordinate to inhibit rotation
  [./angularfix]
    type = DirichletBC
    boundary = 101
    variable = disp_x
    value = 0
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

# We monitor the total free energy and the total solute concentration (should be constant)
[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    block = 0
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  # mortar currently does not support MPI parallelization
  petsc_options_iname = &#x27;-pc_type -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27; lu       NONZERO               1e-10&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  num_steps = 200

  [./TimeStepper]
    type = SolutionTimeAdaptiveDT
    dt = 0.01
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="db531841-680d-4027-819e-0f911c93bff6"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_liquid.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions that give a single liquid phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 6e6
    max = 8e6
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.05
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dfba5cac-8797-4ba2-8632-972578796bfa"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_steady/steady_with_sub.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27;
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = power_density
  []

  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
[]

[Executioner]
  type = Steady
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-12

  picard_rel_tol = 1E-7
  picard_abs_tol = 1.0e-07
  picard_max_its = 12
[]

[MultiApps]
  [sub]
    type = FullSolveMultiApp
    app_type = MooseTestApp
    positions = &#x27;0 0 0&#x27;
    input_files  = steady_with_sub_sub.i
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Transfers]
  [p_to_sub]
    type = MultiAppMeshFunctionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppMeshFunctionTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
  checkpoint = true
  execute_on = &#x27;INITIAL TIMESTEP_END FINAL&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="4bb80c35-4246-4f48-a968-8171c735061e"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3947d5ed-078d-4f4c-a1d5-6d6d1c1c7d58"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_steady/steady_with_2subs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = &#x27;replicated&#x27;
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27;
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = power_density
  []

  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 50
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    execute_on = &#x27;initial final&#x27;
  []
[]

[Executioner]
  type = Steady
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-12

  picard_rel_tol = 1E-7
  picard_abs_tol = 1.0e-07
  picard_max_its = 12
[]

[MultiApps]
  [sub]
    type = FullSolveMultiApp
    app_type = MooseTestApp
    positions = &#x27;0   0 0
                 0.5 0 0&#x27;
    input_files  = steady_with_sub_sub.i
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Transfers]
  [p_to_sub]
    type = MultiAppProjectionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppInterpolationTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
  checkpoint = true
  execute_on = &#x27;INITIAL TIMESTEP_END FINAL&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0ae036f0-9b1b-4a68-b4e9-893fb790f98f"><div class="modal-content"><h4>modules/heat_conduction/test/tests/radiative_bcs/radiative_bc_cyl.i</h4><pre class="moose-pre"><code class="language-text">#
# Thin cylindrical shell with very high thermal conductivity
# so that temperature is almost uniform at 500 K. Radiative
# boundary conditions is applied. Heat flux out of boundary
# &#x27;right&#x27; should be 3723.36; this is approached as the mesh
# is refined
#

[Mesh]
  type = MeshGeneratorMesh
  [./cartesian]
    type = CartesianMeshGenerator
    dim = 2
    dx = &#x27;1 1&#x27;
    ix = &#x27;1 10&#x27;
    dy = &#x27;1 1&#x27;
    subdomain_id = &#x27;1 2 1 2&#x27;
  [../]

  [./remove_1]
    type = BlockDeletionGenerator
    block_id = 1
    input = cartesian
  [../]

  [./readd_left]
    type = ParsedGenerateSideset
    combinatorial_geometry = &#x27;abs(x - 1) &lt; 1e-4&#x27;
    new_sideset_name = left
    input = remove_1
  [../]
[]

[Problem]
  coord_type = RZ
[]

[Variables]
  [./temp]
    initial_condition = 800.0
  [../]
[]

[Kernels]
  [./heat]
    type = HeatConduction
    variable = temp
  [../]
[]

[BCs]
  [./lefttemp]
    type = DirichletBC
    boundary = left
    variable = temp
    value = 800
  [../]

  [./radiative_bc]
    type = InfiniteCylinderRadiativeBC
    boundary = right
    variable = temp
    boundary_radius = 2
    boundary_emissivity = 0.2
    cylinder_radius = 3
    cylinder_emissivity = 0.7
    Tinfinity = 500
  [../]
[]

[Materials]
  [./density]
    type = GenericConstantMaterial
    prop_names = &#x27;density  thermal_conductivity&#x27;
    prop_values = &#x27;1 1.0e5&#x27;
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Steady
  petsc_options = &#x27;-snes_converged_reason&#x27;
  line_search = none
  nl_rel_tol = 1e-6
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./right]
    type = SideFluxAverage
    variable = temp
    boundary = right
    diffusivity = thermal_conductivity
  [../]

  [./min_temp]
    type = ElementExtremeValue
    variable = temp
    value_type = min
  [../]

  [./max_temp]
    type = ElementExtremeValue
    variable = temp
    value_type = max
  [../]
[]

[Outputs]
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7c24d15b-5c22-4f7c-addd-b0257bdf6420"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="535357dd-52a0-4314-a60f-e4d5bad66dd5"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/errors/multiapp_missing_sub_object.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="ec31b59a-7b49-49cd-b3e4-de21ae1e9c8d"><div class="modal-content"><h4>test/tests/postprocessors/element_extreme_value/element_extreme_value.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [u]
  []
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[Postprocessors]
  [max]
    type = ElementExtremeValue
    variable = u
  []
  [min]
    type = ElementExtremeValue
    variable = u
    value_type = min
  []
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b89d3cab-a199-49fc-b010-853dcdaa8803"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="382bd469-0567-4fbc-9391-b69e373bbed6"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/errors/multiapp_bad_user_object.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
  [./AnotheruserObject]
    type = EmptyPostprocessor
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = AnotheruserObject
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="73888b06-ed34-4b21-a1b1-e930760efb79"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a77f4212-828f-4781-8461-547104525954"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/notched_plastic_block/cmc_smooth.i</h4><pre class="moose-pre"><code class="language-text"># Uses a multi-smoothed version of capped-Mohr-Coulomb (via CappedMohrCoulombStressUpdate and ComputeMultipleInelasticStress) to simulate the following problem.
# A cubical block is notched around its equator.
# All of its outer surfaces have roller BCs, but the notched region is free to move as needed
# The block is initialised with a high hydrostatic tensile stress
# Without the notch, the BCs do not allow contraction of the block, and this stress configuration is admissible
# With the notch, however, the interior parts of the block are free to move in order to relieve stress, and this causes plastic failure
# The top surface is then pulled upwards (the bottom is fixed because of the roller BCs)
# This causes more failure
[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 9
    ny = 9
    nz = 9
    xmin = 0
    xmax = 0.1
    ymin = 0
    ymax = 0.1
    zmin = 0
    zmax = 0.1
  []
  [block_to_remove_xmin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.01 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = generated_mesh
  []
  [block_to_remove_xmax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0.09 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmin
  []
  [block_to_remove_ymin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.01 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmax
  []
  [block_to_remove_ymax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 0.09 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_ymin
  []
  [remove_block]
    type = BlockDeletionGenerator
    block_id = 1
    input = block_to_remove_ymax
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_zz&#x27;
    eigenstrain_names = ini_stress
  [../]
[]

[Postprocessors]
  [./uz]
    type = PointValue
    point = &#x27;0 0 0.1&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./s_zz]
    type = ElementAverageValue
    use_displaced_mesh = false
    variable = stress_zz
  [../]
  [./num_res]
    type = NumResidualEvaluations
  [../]
  [./nr_its] # num_iters is the average number of NR iterations encountered per element in this timestep
    type = ElementAverageValue
    variable = num_iters
  [../]
  [./max_nr_its] # max_num_iters is the maximum number of NR iterations encountered in the element during the whole simulation
    type = ElementExtremeValue
    variable = max_num_iters
  [../]
  [./runtime]
    type = PerfGraphData
    data_type = TOTAL
    section_name = &#x27;Root&#x27;
  [../]
[]

[BCs]
  # back=zmin, front=zmax, bottom=ymin, top=ymax, left=xmin, right=xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./xmax_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.0
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./ymax_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = top
    value = 0.0
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;1E-6*max(t,0)&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./max_num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./num_iters_auxk]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = num_iters
  [../]
  [./max_num_iters_auxk]
    type = MaterialRealAux
    property = max_plastic_NR_iterations
    variable = max_num_iters
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 3E6
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1E16
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 5E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 16E9
    poissons_ratio = 0.25
  [../]
  [./mc]
    type = CappedMohrCoulombStressUpdate
    tensile_strength = ts
    compressive_strength = cs
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    smoothing_tol = 0.2E6
    yield_function_tol = 1E-5
    perfect_guess = false # this is so we can observe some Newton-Raphson iterations, for comparison with other models, and it is not optimal in any real-life simulations
  [../]
  [./stress]
    type = ComputeMultipleInelasticStress
    inelastic_models = mc
    perform_finite_strain_rotations = false
  [../]
  [./strain_from_initial_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;2.5E6 0 0  0 2.5E6 0  0 0 2.5E6&#x27;
    eigenstrain_name = ini_stress
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  start_time = -1
  end_time = 10
  dt = 1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-5
  nl_rel_tol = 1E-7
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = cmc_smooth
  perf_graph = true
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="74fb560d-21f3-4538-8e55-17d175499f2c"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random03.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-8
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random03
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d1fc6a6f-cd5a-43f5-bc48-7ffbec217c99"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="40cc314e-4ad9-4e2d-949f-06b9b68aef90"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/standard_use/multiapp_print_coefficients.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
    print_when_set = true # Print coefficients when a MultiAppFXTransfer is executed
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
    print_state = true # Print after the FX coefficients are computer
    print_when_set = true # Print coefficients when a MultiAppFXTransfer is executed
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6f834691-8636-4e59-bafc-ccfdf849750c"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_noaction&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c0969752-98fe-4eff-a06d-e370effcf7fd"><div class="modal-content"><h4>modules/combined/examples/periodic_strain/global_strain_pfm.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    ny = 50
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0&#x27;
    new_boundary = 100
  [../]
[]

[Variables]
  [./u_x]
  [../]
  [./u_y]
  [../]
  [./global_strain]
    order = THIRD
    family = SCALAR
  [../]
  [./c]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;sin(2*x*pi)*sin(2*y*pi)*0.05+0.6&#x27;
    [../]
  [../]
  [./w]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./s00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./disp_x]
    type = GlobalDisplacementAux
    variable = disp_x
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 0
  [../]
  [./disp_y]
    type = GlobalDisplacementAux
    variable = disp_y
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 1
  [../]
  [./local_free_energy]
    type = TotalFreeEnergy
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
  [./s00]
    type = RankTwoAux
    variable = s00
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
  [../]
  [./s01]
    type = RankTwoAux
    variable = s01
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
  [../]
  [./s10]
    type = RankTwoAux
    variable = s10
    rank_two_tensor = stress
    index_i = 1
    index_j = 0
  [../]
  [./s11]
    type = RankTwoAux
    variable = s11
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
  [../]
  [./e00]
    type = RankTwoAux
    variable = e00
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
  [../]
  [./e01]
    type = RankTwoAux
    variable = e01
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 1
  [../]
  [./e10]
    type = RankTwoAux
    variable = e10
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 0
  [../]
  [./e11]
    type = RankTwoAux
    variable = e11
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;u_x u_y&#x27;
  block = 0
[]

[Kernels]
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[ScalarKernels]
  [./global_strain]
    type = GlobalStrain
    variable = global_strain
    global_strain_uo = global_strain_uo
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y&#x27;
      variable = &#x27;c w u_x u_y&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = u_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = u_y
    value = 0
  [../]
[]

[Materials]
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0 0 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0 0 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;1 1 0 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    global_strain = global_strain
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./global_strain]
    type = ComputeGlobalStrain
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
  [../]

  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[UserObjects]
  [./global_strain_uo]
    type = GlobalStrainUserObject
    execute_on = &#x27;Initial Linear Nonlinear&#x27;
  [../]
[]

[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         31   preonly   lu      1&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  end_time = 2.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 0.01
    growth_factor = 1.5
    cutback_factor = 0.8
    optimal_iterations = 9
    iteration_window = 2
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b2d945b5-195e-4198-b251-56567fb614aa"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_steady/restart_trans_with_sub.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Problem]
  restart_file_base = steady_with_sub_out_cp/LATEST
  skip_additional_restart_data = true
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27; # increase this function to drive transient
  []
[]

[Kernels]
  [timedt]
    type = TimeDerivative
    variable = power_density
  []

  [diff]
    type = Diffusion
    variable = power_density
  []

  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    block = &#x27;0&#x27;
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
[]

[Executioner]
  type = Transient
  start_time = 0
  end_time = 3
  dt = 1.0

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7

  picard_rel_tol = 1e-7
  picard_abs_tol = 1e-07
  picard_max_its = 4

  line_search = none
[]

[MultiApps]
  [./sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = &#x27;0 0 0&#x27;
    input_files  = restart_trans_with_sub_sub.i
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Transfers]
  [p_to_sub]
    type = MultiAppMeshFunctionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppMeshFunctionTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3c781f79-b3a5-4ded-bef8-e5945e942a8a"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/notched_plastic_block/cmc_planar.i</h4><pre class="moose-pre"><code class="language-text"># Uses an unsmoothed version of capped-Mohr-Coulomb (via ComputeMultiPlasticityStress with TensorMechanicsPlasticTensileMulti and TensorMechanicsPlasticMohrCoulombMulti) to simulate the following problem.
# A cubical block is notched around its equator.
# All of its outer surfaces have roller BCs, but the notched region is free to move as needed
# The block is initialised with a high hydrostatic tensile stress
# Without the notch, the BCs do not allow contraction of the block, and this stress configuration is admissible
# With the notch, however, the interior parts of the block are free to move in order to relieve stress, and this causes plastic failure
# The top surface is then pulled upwards (the bottom is fixed because of the roller BCs)
# This causes more failure
[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 9
    ny = 9
    nz = 9
    xmin = 0
    xmax = 0.1
    ymin = 0
    ymax = 0.1
    zmin = 0
    zmax = 0.1
  []
  [block_to_remove_xmin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.01 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = generated_mesh
  []
  [block_to_remove_xmax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0.09 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmin
  []
  [block_to_remove_ymin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.01 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmax
  []
  [block_to_remove_ymax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 0.09 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_ymin
  []
  [remove_block]
    type = BlockDeletionGenerator
    block_id = 1
    input = block_to_remove_ymax
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_zz&#x27;
    eigenstrain_names = ini_stress
  [../]
[]

[Postprocessors]
  [./uz]
    type = PointValue
    point = &#x27;0 0 0.1&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./s_zz]
    type = ElementAverageValue
    use_displaced_mesh = false
    variable = stress_zz
  [../]
  [./num_res]
    type = NumResidualEvaluations
  [../]
  [./nr_its]
    type = ElementAverageValue
    variable = num_iters
  [../]
  [./max_nr_its]
    type = ElementExtremeValue
    variable = num_iters
  [../]
  [./runtime]
    type = PerfGraphData
    data_type = TOTAL
    section_name = &#x27;Root&#x27;
  [../]
[]

[BCs]
  # back=zmin, front=zmax, bottom=ymin, top=ymax, left=xmin, right=xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./xmax_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.0
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./ymax_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = top
    value = 0.0
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;1E-6*max(t,0)&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./plastic_strain]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./plastic_strain_aux]
    type = MaterialRankTwoTensorAux
    i = 2
    j = 2
    property = plastic_strain
    variable = plastic_strain
  [../]
  [./num_iters_auxk] # cannot use plastic_NR_iterations directly as this is zero, since no NR iterations are actually used, since we use a custom algorithm to do the return
    type = ParsedAux
    args = plastic_strain
    function = &#x27;if(plastic_strain&gt;0,1,0)&#x27;
    variable = num_iters
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 3E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1
    internal_constraint_tolerance = 1.0E-6
    #shift = 1
    use_custom_returnMap = false
    use_custom_cto = false
  [../]

  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 5E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
    use_custom_returnMap = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 16E9
    poissons_ratio = 0.25
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-6
    plastic_models = &#x27;tensile mc&#x27;
    max_NR_iterations = 50
    specialIC = rock
    deactivation_scheme = safe_to_dumb
    debug_fspb = crash
  [../]
  [./strain_from_initial_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;2.5E6 0 0  0 2.5E6 0  0 0 2.5E6&#x27;
    eigenstrain_name = ini_stress
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  start_time = -1
  end_time = 10
  dt = 1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-5
  nl_rel_tol = 1E-7
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = cmc_planar
  perf_graph = true
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="853d991b-8299-4956-94f6-5a1dae64d24e"><div class="modal-content"><h4>modules/porous_flow/examples/coal_mining/coarse_with_fluid.i</h4><pre class="moose-pre"><code class="language-text"># Strata deformation and fluid flow aaround a coal mine - 3D model
#
# A &quot;half model&quot; is used.  The mine is 400m deep and
# just the roof is studied (-400&lt;=z&lt;=0).  The mining panel
# sits between 0&lt;=x&lt;=150, and 0&lt;=y&lt;=1000, so this simulates
# a coal panel that is 300m wide and 1000m long.  The outer boundaries
# are 1km from the excavation boundaries.
#
# The excavation takes 0.5 years.
#
# The boundary conditions for this simulation are:
#  - disp_x = 0 at x=0 and x=1150
#  - disp_y = 0 at y=-1000 and y=1000
#  - disp_z = 0 at z=-400, but there is a time-dependent
#               Young modulus that simulates excavation
#  - wc_x = 0 at y=-1000 and y=1000
#  - wc_y = 0 at x=0 and x=1150
#  - no flow at x=0, z=-400 and z=0
#  - fixed porepressure at y=-1000, y=1000 and x=1150
# That is, rollers on the sides, free at top,
# and prescribed at bottom in the unexcavated portion.
#
# A single-phase unsaturated fluid is used.
#
# The small strain formulation is used.
#
# All stresses are measured in MPa, and time units are measured in years.
#
# The initial porepressure is hydrostatic with P=0 at z=0, so
# Porepressure ~ - 0.01*z MPa, where the fluid has density 1E3 kg/m^3 and
# gravity = = 10 m.s^-2 = 1E-5 MPa m^2/kg.
# To be more accurate, i use
# Porepressure = -bulk * log(1 + g*rho0*z/bulk)
# where bulk=2E3 MPa and rho0=1Ee kg/m^3.
# The initial stress is consistent with the weight force from undrained
# density 2500 kg/m^3, and fluid porepressure, and a Biot coefficient of 0.7, ie,
# stress_zz^effective = 0.025*z + 0.7 * initial_porepressure
# The maximum and minimum principal horizontal effective stresses are
# assumed to be equal to 0.8*stress_zz.
#
# Material properties:
# Young&#x27;s modulus = 8 GPa
# Poisson&#x27;s ratio = 0.25
# Cosserat layer thickness = 1 m
# Cosserat-joint normal stiffness = large
# Cosserat-joint shear stiffness = 1 GPa
# MC cohesion = 2 MPa
# MC friction angle = 35 deg
# MC dilation angle = 8 deg
# MC tensile strength = 1 MPa
# MC compressive strength = 100 MPa
# WeakPlane cohesion = 0.1 MPa
# WeakPlane friction angle = 30 deg
# WeakPlane dilation angle = 10 deg
# WeakPlane tensile strength = 0.1 MPa
# WeakPlane compressive strength = 100 MPa softening to 1 MPa at strain = 1
# Fluid density at zero porepressure = 1E3 kg/m^3
# Fluid bulk modulus = 2E3 MPa
# Fluid viscosity = 1.1E-3 Pa.s = 1.1E-9 MPa.s = 3.5E-17 MPa.year
#
[GlobalParams]
  perform_finite_strain_rotations = false
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  Cosserat_rotations = &#x27;wc_x wc_y wc_z&#x27;
  PorousFlowDictator = dictator
  biot_coefficient = 0.7
[]

[Mesh]
  [file]
    type = FileMeshGenerator
    file = mesh/coarse.e
  []
  [./xmin]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    new_boundary = xmin
    normal = &#x27;-1 0 0&#x27;
    input = file
  [../]
  [./xmax]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    new_boundary = xmax
    normal = &#x27;1 0 0&#x27;
    input = xmin
  [../]
  [./ymin]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    new_boundary = ymin
    normal = &#x27;0 -1 0&#x27;
    input = xmax
  [../]
  [./ymax]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    new_boundary = ymax
    normal = &#x27;0 1 0&#x27;
    input = ymin
  [../]
  [./zmax]
    type = SideSetsAroundSubdomainGenerator
    block = 16
    new_boundary = zmax
    normal = &#x27;0 0 1&#x27;
    input = ymax
  [../]
  [./zmin]
    type = SideSetsAroundSubdomainGenerator
    block = 2
    new_boundary = zmin
    normal = &#x27;0 0 -1&#x27;
    input = zmax
  [../]
  [./excav]
    type = SubdomainBoundingBoxGenerator
    input = zmin
    block_id = 1
    bottom_left = &#x27;0 0 -400&#x27;
    top_right = &#x27;150 1000 -397&#x27;
  [../]
  [./roof]
    type = SideSetsBetweenSubdomainsGenerator
    primary_block = 3
    paired_block = 1
    input = excav
    new_boundary = roof
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./wc_x]
  [../]
  [./wc_y]
  [../]
  [./porepressure]
    scaling = 1E-5
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = ini_pp
  [../]
[]

[Kernels]
  [./cx_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_x
    component = 0
  [../]
  [./cy_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_y
    component = 1
  [../]
  [./cz_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_z
    component = 2
  [../]
  [./x_couple]
    type = StressDivergenceTensors
    use_displaced_mesh = false
    variable = wc_x
    displacements = &#x27;wc_x wc_y wc_z&#x27;
    component = 0
    base_name = couple
  [../]
  [./y_couple]
    type = StressDivergenceTensors
    use_displaced_mesh = false
    variable = wc_y
    displacements = &#x27;wc_x wc_y wc_z&#x27;
    component = 1
    base_name = couple
  [../]
  [./x_moment]
    type = MomentBalancing
    use_displaced_mesh = false
    variable = wc_x
    component = 0
  [../]
  [./y_moment]
    type = MomentBalancing
    use_displaced_mesh = false
    variable = wc_y
    component = 1
  [../]
  [./gravity]
    type = Gravity
    use_displaced_mesh = false
    variable = disp_z
    value = -10E-6 # remember this is in MPa
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    component = 2
    variable = disp_z
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    use_displaced_mesh = false
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    use_displaced_mesh = false
    variable = porepressure
    gravity = &#x27;0 0 -10E-6&#x27;
    fluid_component = 0
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    use_displaced_mesh = false
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    variable = porepressure
    fluid_component = 0
  [../]
[]


[AuxVariables]
  [./saturation]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_x]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_y]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wc_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_shear_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_tensile_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_shear_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_tensile_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_water]
    type = PorousFlowPropertyAux
    variable = saturation
    property = saturation
    phase = 0
    execute_on = timestep_end
  [../]
  [./darcy_x]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_x
    gravity = &#x27;0 0 -10E-6&#x27;
    component = x
  [../]
  [./darcy_y]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_y
    gravity = &#x27;0 0 -10E-6&#x27;
    component = y
  [../]
  [./darcy_z]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_z
    gravity = &#x27;0 0 -10E-6&#x27;
    component = z
  [../]
  [./porosity]
    type = PorousFlowPropertyAux
    property = porosity
    variable = porosity
    execute_on = timestep_end
  [../]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
    execute_on = timestep_end
  [../]
  [./stress_yx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yx
    index_i = 1
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
    execute_on = timestep_end
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_zy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zy
    index_i = 2
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_xx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_xy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_xz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xz
    index_i = 0
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_yx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yx
    index_i = 1
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_yy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_yz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yz
    index_i = 1
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_zx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zx
    index_i = 2
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_zy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zy
    index_i = 2
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_zz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./perm_xx]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_xx
    row = 0
    column = 0
    execute_on = timestep_end
  [../]
  [./perm_yy]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_yy
    row = 1
    column = 1
    execute_on = timestep_end
  [../]
  [./perm_zz]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_zz
    row = 2
    column = 2
    execute_on = timestep_end
  [../]
  [./mc_shear]
    type = MaterialStdVectorAux
    index = 0
    property = mc_plastic_internal_parameter
    variable = mc_shear
    execute_on = timestep_end
  [../]
  [./mc_tensile]
    type = MaterialStdVectorAux
    index = 1
    property = mc_plastic_internal_parameter
    variable = mc_tensile
    execute_on = timestep_end
  [../]
  [./wp_shear]
    type = MaterialStdVectorAux
    index = 0
    property = wp_plastic_internal_parameter
    variable = wp_shear
    execute_on = timestep_end
  [../]
  [./wp_tensile]
    type = MaterialStdVectorAux
    index = 1
    property = wp_plastic_internal_parameter
    variable = wp_tensile
    execute_on = timestep_end
  [../]
  [./mc_shear_f]
    type = MaterialStdVectorAux
    index = 6
    property = mc_plastic_yield_function
    variable = mc_shear_f
    execute_on = timestep_end
  [../]
  [./mc_tensile_f]
    type = MaterialStdVectorAux
    index = 0
    property = mc_plastic_yield_function
    variable = mc_tensile_f
    execute_on = timestep_end
  [../]
  [./wp_shear_f]
    type = MaterialStdVectorAux
    index = 0
    property = wp_plastic_yield_function
    variable = wp_shear_f
    execute_on = timestep_end
  [../]
  [./wp_tensile_f]
    type = MaterialStdVectorAux
    index = 1
    property = wp_plastic_yield_function
    variable = wp_tensile_f
    execute_on = timestep_end
  [../]
[]



[BCs]
  [./no_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin xmax&#x27;
    value = 0.0
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin ymax&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = zmin
    value = 0.0
  [../]
  [./no_wc_x]
    type = DirichletBC
    variable = wc_x
    boundary = &#x27;ymin ymax&#x27;
    value = 0.0
  [../]
  [./no_wc_y]
    type = DirichletBC
    variable = wc_y
    boundary = &#x27;xmin xmax&#x27;
    value = 0.0
  [../]
  [./fix_porepressure]
    type = FunctionDirichletBC
    variable = porepressure
    boundary = &#x27;ymin ymax xmax&#x27;
    function = ini_pp
  [../]
  [./roof_porepressure]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    pt_vals = &#x27;-1E3 1E3&#x27;
    multipliers = &#x27;-1 1&#x27;
    fluid_phase = 0
    flux_function = roof_conductance
    boundary = roof
  [../]
  [./roof_bcs]
    type = StickyBC
    variable = disp_z
    min_value = -3.0
    boundary = roof
  [../]
[]

[Functions]
  [./ini_pp]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3&#x27;
    value = &#x27;-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk)&#x27;
  [../]
  [./ini_xx]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0 biot&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3  0.7&#x27;
    value = &#x27;0.8*(2500*10E-6*z+biot*(-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk)))&#x27;
  [../]
  [./ini_zz]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0 biot&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3  0.7&#x27;
    value = &#x27;2500*10E-6*z+biot*(-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk))&#x27;
  [../]
  [./excav_sideways]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax  minval maxval slope&#x27;
    vals = &#x27;0.5   0    1000.0 1E-9 1 60&#x27;
    # excavation face at ymin+(ymax-ymin)*min(t/end_t,1)
    # slope is the distance over which the modulus reduces from maxval to minval
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),minval,if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1)+slope,minval+(maxval-minval)*(y-(ymin+(ymax-ymin)*min(t/end_t,1)))/slope,maxval))&#x27;
  [../]
  [./density_sideways]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax  minval maxval&#x27;
    vals = &#x27;0.5   0    1000.0 0 2500&#x27;
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),minval,maxval)&#x27;
  [../]
  [./roof_conductance]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax   maxval minval&#x27;
    vals = &#x27;0.5   0    1000.0 1E7      0&#x27;
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),maxval,minval)&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1 # MPa^-1
  [../]

  [./mc_coh_strong_harden]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.99 # MPa
    value_residual = 2.01 # MPa
    rate = 1.0
  [../]
  [./mc_fric]
    type = TensorMechanicsHardeningConstant
    value = 0.61 # 35deg
  [../]
  [./mc_dil]
    type = TensorMechanicsHardeningConstant
    value = 0.15 # 8deg
  [../]

  [./mc_tensile_str_strong_harden]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0 # MPa
    value_residual = 1.0 # MPa
    rate = 1.0
  [../]
  [./mc_compressive_str]
    type = TensorMechanicsHardeningCubic
    value_0 = 100 # Large!
    value_residual = 100
    internal_limit = 0.1
  [../]

  [./wp_coh_harden]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.05
    value_residual = 0.05
    internal_limit = 10
  [../]
  [./wp_tan_fric]
    type = TensorMechanicsHardeningConstant
    value = 0.26 # 15deg
  [../]
  [./wp_tan_dil]
    type = TensorMechanicsHardeningConstant
    value = 0.18 # 10deg
  [../]

  [./wp_tensile_str_harden]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.05
    value_residual = 0.05
    internal_limit = 10
  [../]
  [./wp_compressive_str_soften]
    type = TensorMechanicsHardeningCubic
    value_0 = 100
    value_residual = 1
    internal_limit = 1.0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E3
      density0 = 1000
      thermal_expansion = 0
      viscosity = 3.5E-17
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity_bulk]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    ensure_positive = true
    porosity_zero = 0.02
    solid_bulk = 5.3333E3
  [../]
  [./porosity_excav]
    type = PorousFlowPorosityConst
    block = 1
    porosity = 1.0
  [../]
  [./permeability_bulk]
    type = PorousFlowPermeabilityKozenyCarman
    block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    poroperm_function = kozeny_carman_phi0
    k0 = 1E-15
    phi0 = 0.02
    n = 2
    m = 2
  [../]
  [./permeability_excav]
    type = PorousFlowPermeabilityConst
    block = 1
    permeability = &#x27;0 0 0   0 0 0   0 0 0&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 4
    s_res = 0.4
    sum_s_res = 0.4
    phase = 0
  [../]

  [./elasticity_tensor_0]
    type = ComputeLayeredCosseratElasticityTensor
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    young = 8E3 # MPa
    poisson = 0.25
    layer_thickness = 1.0
    joint_normal_stiffness = 1E9 # huge
    joint_shear_stiffness = 1E3 # MPa
  [../]
  [./elasticity_tensor_1]
    type = ComputeLayeredCosseratElasticityTensor
    block = 1
    young = 8E3 # MPa
    poisson = 0.25
    layer_thickness = 1.0
    joint_normal_stiffness = 1E9 # huge
    joint_shear_stiffness = 1E3 # MPa
    elasticity_tensor_prefactor = excav_sideways
  [../]
  [./strain]
    type = ComputeCosseratIncrementalSmallStrain
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    eigenstrain_name = ini_stress
    initial_stress = &#x27;ini_xx 0 0  0 ini_xx 0  0 0 ini_zz&#x27;
  [../]

  [./stress_0]
    type = ComputeMultipleInelasticCosseratStress
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    inelastic_models = &#x27;mc wp&#x27;
    cycle_models = true
    relative_tolerance = 2.0
    absolute_tolerance = 1E6
    max_iterations = 1
    tangent_operator = nonlinear
    perform_finite_strain_rotations = false
  [../]
  [./stress_1]
    type = ComputeMultipleInelasticCosseratStress
    block = 1
    inelastic_models = &#x27;&#x27;
    relative_tolerance = 2.0
    absolute_tolerance = 1E6
    max_iterations = 1
    tangent_operator = nonlinear
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedMohrCoulombCosseratStressUpdate
    warn_about_precision_loss = false
    host_youngs_modulus = 8E3
    host_poissons_ratio = 0.25
    base_name = mc
    tensile_strength = mc_tensile_str_strong_harden
    compressive_strength = mc_compressive_str
    cohesion = mc_coh_strong_harden
    friction_angle = mc_fric
    dilation_angle = mc_dil
    max_NR_iterations = 100000
    smoothing_tol = 0.1 # MPa  # Must be linked to cohesion
    yield_function_tol = 1E-9 # MPa.  this is essentially the lowest possible without lots of precision loss
    perfect_guess = true
    min_step_size = 1.0
  [../]
  [./wp]
    type = CappedWeakPlaneCosseratStressUpdate
    warn_about_precision_loss = false
    base_name = wp
    cohesion = wp_coh_harden
    tan_friction_angle = wp_tan_fric
    tan_dilation_angle = wp_tan_dil
    tensile_strength = wp_tensile_str_harden
    compressive_strength = wp_compressive_str_soften
    max_NR_iterations = 10000
    tip_smoother = 0.05
    smoothing_tol = 0.05 # MPa  # Note, this must be tied to cohesion, otherwise get no possible return at cone apex
    yield_function_tol = 1E-11 # MPa.  this is essentially the lowest possible without lots of precision loss
    perfect_guess = true
    min_step_size = 1.0E-3
  [../]


  [./undrained_density_0]
    type = GenericConstantMaterial
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    prop_names = density
    prop_values = 2500
  [../]
  [./undrained_density_1]
    type = GenericFunctionMaterial
    block = 1
    prop_names = density
    prop_values = density_sideways
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  []
[]

[Postprocessors]
  [./min_roof_disp]
    type = NodalExtremeValue
    boundary = roof
    value_type = min
    variable = disp_z
  [../]
  [./min_roof_pp]
    type = NodalExtremeValue
    boundary = roof
    value_type = min
    variable = porepressure
  [../]
  [./min_surface_disp]
    type = NodalExtremeValue
    boundary = zmax
    value_type = min
    variable = disp_z
  [../]
  [./min_surface_pp]
    type = NodalExtremeValue
    boundary = zmax
    value_type = min
    variable = porepressure
  [../]
  [./max_perm_zz]
    type = ElementExtremeValue
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16&#x27;
    variable = perm_zz
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options = &#x27;-snes_converged_reason&#x27;

  # best overall
  # petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  # petsc_options_value = &#x27; lu       mumps&#x27;

  # best if you do not have mumps:
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27; lu       superlu_dist&#x27;

  # best if you do not have mumps or superlu_dist:
  #petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  #petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;

  # very basic:
  #petsc_options_iname = &#x27;-pc_type -ksp_type -ksp_gmres_restart&#x27;
  #petsc_options_value = &#x27; bjacobi  gmres     200&#x27;

  line_search = bt

  nl_abs_tol = 1e-3
  nl_rel_tol = 1e-5

  l_max_its = 200
  nl_max_its = 30

  start_time = 0.0
  dt = 0.014706
  end_time = 0.014706 #0.5
[]

[Outputs]
  interval = 1
  print_linear_residuals = true
  exodus = true
  csv = true
  console = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2b6add39-9db7-4afd-8530-42cd2d9608f1"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="bcc18a0c-931f-456d-a042-0209d70df6f4"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_second/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_noaction&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="933b79d0-037c-4485-9f84-8745c15fff75"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/creep_tangent_operator/creep.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  second_order = true
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
  volumetric_locking_correction = false
[]

[Functions]
  [./pull]
    type = PiecewiseLinear
    x = &#x27;0 10&#x27;
    y = &#x27;0 1e-3&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./all]
    strain = FINITE
    add_variables = true
    use_finite_deform_jacobian = true
    generate_output = &#x27;hydrostatic_stress&#x27;
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 1e10
    poissons_ratio = 0.3
  [../]

  [./elastic_strain]
    type = ComputeMultipleInelasticStress
    # inelastic_models = &#x27;&#x27;
    tangent_operator = nonlinear
  [../]

  [./creep_ten]
    type = PowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten
  [../]
  [./creep_ten2]
    type = PowerLawCreepStressUpdate
    coefficient = 10e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_ten2
  [../]
  [./creep_one]
    type = PowerLawCreepStressUpdate
    coefficient = 1e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_one
  [../]
  [./creep_nine]
    type = PowerLawCreepStressUpdate
    coefficient = 9e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_nine
  [../]
  [./creep_zero]
    type = PowerLawCreepStressUpdate
    coefficient = 0e-24
    n_exponent = 4
    activation_energy = 0
    base_name = creep_zero
  [../]
[]

[BCs]
  [./no_disp_x]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]

  [./no_disp_y]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]

  [./pull_disp_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = top
    function = pull
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  petsc_options_iname = &#x27;-pc_type&#x27;
  petsc_options_value = &#x27;lu&#x27;
  line_search = &#x27;none&#x27;
  nl_rel_tol = 1e-5

  num_steps = 5
  dt = 1e-1
[]

[Postprocessors]
  [./max_disp_x]
    type = ElementExtremeValue
    variable = disp_x
  [../]
  [./max_disp_y]
    type = ElementExtremeValue
    variable = disp_y
  [../]
  [./max_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
  [../]
  [./dt]
    type = TimestepSize
  [../]
  [./num_lin]
    type = NumLinearIterations
    outputs = console
  [../]
  [./num_nonlin]
    type = NumNonlinearIterations
    outputs = console
  [../]
[]

[Outputs]
  csv = true
  perf_graph = true
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="10b5fc94-1b52-4101-a56b-a3ab57e115c2"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dff5e5c0-7c28-47dd-91bb-43d9b73531c9"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_first/finite_noaction.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_noaction&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]

  [./secondary]
    input = block_rename
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;block_left&#x27;
    new_block_id = &#x27;30&#x27;
    new_block_name = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
  [./primary]
    input = secondary
    type = LowerDBlockFromSidesetGenerator
    sidesets = &#x27;plank_right&#x27;
    new_block_id = &#x27;20&#x27;
    new_block_name = &#x27;frictionless_primary_subdomain&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./frictionless_normal_lm]
    order = ${order}
    block = &#x27;frictionless_secondary_subdomain&#x27;
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
  [../]
[]

[Constraints]
  [./lm]
    type = NormalNodalLMMechanicalContact
    secondary = block_left
    primary = plank_right
    variable = frictionless_normal_lm
    primary_variable = disp_x
    disp_y = disp_y
    ncp_function_type = min
    use_displaced_mesh = true
  [../]
  [./normal_x]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_x
    component = x
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
  [./normal_y]
    type = NormalMortarMechanicalContact
    primary_boundary = plank_right
    secondary_boundary = block_left
    primary_subdomain = frictionless_primary_subdomain
    secondary_subdomain = frictionless_secondary_subdomain
    variable = frictionless_normal_lm
    secondary_variable = disp_y
    component = y
    use_displaced_mesh = true
    compute_lm_residuals = false
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f9ce5478-9349-4471-9f48-6e3d104076c9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/paper5.i</h4><pre class="moose-pre"><code class="language-text"># This runs the J2+cap+hardening example model described in the &#x27;MultiSurface&#x27; plasticity paper
#
# Plasticity models:
# J2 with strength = 20MPa to 10MPa in 100% strain
# Compressive cap with strength = 15MPa to 5MPa in 100% strain
#
# Lame lambda = 1.2GPa.  Lame mu = 1.2GPa (Young = 3GPa, poisson = 0.25)
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./intnl1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f0]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./f1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./f0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 0
    variable = f0
  [../]
  [./f1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    index = 1
    variable = f1
  [../]
  [./intnl0]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 0
    variable = intnl0
  [../]
  [./intnl1]
    type = MaterialStdVectorAux
    property = plastic_internal_parameter
    index = 1
    variable = intnl1
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_f0]
    type = ElementExtremeValue
    variable = f0
    outputs = console
  [../]
  [./max_f1]
    type = ElementExtremeValue
    variable = f1
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./yield_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 20E6
    value_residual = 10E6
    internal_limit = 1
  [../]
  [./j2]
    type = TensorMechanicsPlasticJ2
    yield_strength = yield_strength
    yield_function_tolerance = 1.0E2
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
  [../]


  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 15E6
    value_residual = 5E6
    internal_limit = 1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCap
    a = -1
    strength = compressive_strength
    yield_function_tolerance = 1.0E2
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.2E9 1.2E9&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5

    plastic_models = &#x27;j2 cap&#x27;
    max_NR_iterations = 10
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1
    tangent_operator = elastic # tangent operator is unimportant in this test

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10E6 0 0 0 10E6 0 0 0 10E6&#x27;
    debug_jac_at_pm = &#x27;1E-2 1E-2&#x27;
    debug_jac_at_intnl = &#x27;0.05 0.05&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = paper5
  exodus = false
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="d707108f-fd7b-42b0-a5d5-79e13e626d0d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random01.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random01
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e4a10b69-7ff6-4561-88d1-2d05a3697c4a"><div class="modal-content"><h4>modules/combined/test/tests/phase_field_fracture/crack2d_computeCrackedStress_finitestrain_plastic.i</h4><pre class="moose-pre"><code class="language-text">#This input uses PhaseField-Nonconserved Action to add phase field fracture bulk rate kernels
[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 40
    ny = 20
    ymax = 0.5
  []
  [./noncrack]
    type = BoundingBoxNodeSetGenerator
    new_boundary = noncrack
    bottom_left = &#x27;0.5 0 0&#x27;
    top_right = &#x27;1 0 0&#x27;
    input = gen
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[AuxVariables]
  [./strain_yy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./elastic_strain_yy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./plastic_strain_yy]
    family = MONOMIAL
    order = CONSTANT
  [../]
  [./uncracked_stress_yy]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[Modules]
  [./TensorMechanics]
    [./Master]
      [./All]
        add_variables = true
        strain = FINITE
        planar_formulation = PLANE_STRAIN
        additional_generate_output = &#x27;stress_yy vonmises_stress&#x27;
        strain_base_name = uncracked
      [../]
    [../]
  [../]
  [./PhaseField]
    [./Nonconserved]
      [./c]
        free_energy = E_el
        kappa = kappa_op
        mobility = L
      [../]
    [../]
  [../]
[]

[Kernels]
  [./solid_x]
    type = PhaseFieldFractureMechanicsOffDiag
    variable = disp_x
    component = 0
    c = c
  [../]
  [./solid_y]
    type = PhaseFieldFractureMechanicsOffDiag
    variable = disp_y
    component = 1
    c = c
  [../]
  [./off_disp]
    type = AllenCahnElasticEnergyOffDiag
    variable = c
    displacements = &#x27;disp_x disp_y&#x27;
    mob_name = L
  [../]
[]

[AuxKernels]
  [./strain_yy]
    type = RankTwoAux
    variable = strain_yy
    rank_two_tensor = uncracked_mechanical_strain
    index_i = 1
    index_j = 1
    execute_on = TIMESTEP_END
  [../]
  [./elastic_strain_yy]
    type = RankTwoAux
    variable = elastic_strain_yy
    rank_two_tensor = uncracked_elastic_strain
    index_i = 1
    index_j = 1
    execute_on = TIMESTEP_END
  [../]
  [./plastic_strain_yy]
    type = RankTwoAux
    variable = plastic_strain_yy
    rank_two_tensor = uncracked_plastic_strain
    index_i = 1
    index_j = 1
    execute_on = TIMESTEP_END
  [../]
  [./uncracked_stress_yy]
    type = RankTwoAux
    variable = uncracked_stress_yy
    rank_two_tensor = uncracked_stress
    index_i = 1
    index_j = 1
    execute_on = TIMESTEP_END
  [../]
[]

[BCs]
  [./ydisp]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = top
    function = &#x27;t&#x27;
  [../]
  [./yfix]
    type = DirichletBC
    variable = disp_y
    boundary = noncrack
    value = 0
  [../]
  [./xfix]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0
  [../]
[]

[Functions]
  [./hf]
    type = PiecewiseLinear
    x = &#x27;0    0.001 0.003 0.023&#x27;
    y = &#x27;0.85 1.0   1.25  1.5&#x27;
  [../]
[]

[Materials]
  [./pfbulkmat]
    type = GenericConstantMaterial
    prop_names = &#x27;gc_prop l visco&#x27;
    prop_values = &#x27;1e-3 0.05 5e-3&#x27;
  [../]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;120.0 80.0&#x27;
    fill_method = symmetric_isotropic
    base_name = uncracked
  [../]
  [./isotropic_plasticity]
    type = IsotropicPlasticityStressUpdate
    yield_stress = 0.85
    hardening_function = hf
    base_name = uncracked
  [../]
  [./radial_return_stress]
    type = ComputeMultipleInelasticStress
    tangent_operator = elastic
    inelastic_models = &#x27;isotropic_plasticity&#x27;
    base_name = uncracked
  [../]
  [./cracked_stress]
    type = ComputeCrackedStress
    c = c
    F_name = E_el
    use_current_history_variable = true
    uncracked_base_name = uncracked
    finite_strain_model = true
  [../]
[]

[Postprocessors]
  [./av_stress_yy]
    type = ElementAverageValue
    variable = stress_yy
  [../]
  [./av_strain_yy]
    type = SideAverageValue
    variable = disp_y
    boundary = top
  [../]
  [./av_uncracked_stress_yy]
    type = ElementAverageValue
    variable = uncracked_stress_yy
  [../]
  [./max_c]
    type = ElementExtremeValue
    variable = c
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solving_package&#x27;
  petsc_options_value = &#x27;lu superlu_dist&#x27;

  nl_rel_tol = 1e-8
  l_tol = 1e-4
  l_max_its = 100
  nl_max_its = 10

  dt = 2.0e-5
  num_steps = 2
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2c125660-3c4f-44f8-bfc0-3685c8643a87"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/ad_frictionless_second/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = 0
    ymax = 10
    nx = 2
    ny = 33
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    use_automatic_differentiation = true
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ADComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = ADGenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="a74eb5be-83b0-4a9c-9b33-5db1bff6f81b"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/capped_drucker_prager/random.i</h4><pre class="moose-pre"><code class="language-text"># capped drucker-prager
# apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.


[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]
[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    strain = finite
  [../]
[]

[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./shear_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./tensile_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./compressive_yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./shear_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = shear_yield_fcn
  [../]
  [./tensile_fcn_auxk]
    type = MaterialStdVectorAux
    index = 1
    property = plastic_yield_function
    variable = tensile_yield_fcn
  [../]
  [./compressive_yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 2
    property = plastic_yield_function
    variable = compressive_yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./shear_max]
    type = ElementExtremeValue
    variable = shear_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./tensile_max]
    type = ElementExtremeValue
    variable = tensile_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./compressive_max]
    type = ElementExtremeValue
    variable = compressive_yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero_shear]
    type = FunctionValuePostprocessor
    function = shear_should_be_zero_fcn
  [../]
  [./should_be_zero_compressive]
    type = FunctionValuePostprocessor
    function = compressive_should_be_zero_fcn
  [../]
  [./should_be_zero_tensile]
    type = FunctionValuePostprocessor
    function = tensile_should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./shear_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;shear_max&#x27;
  [../]
  [./tensile_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;tensile_max&#x27;
  [../]
  [./compressive_should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;compressive_max&#x27;
  [../]
[]

[UserObjects]
  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./cs]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 1E3
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 30
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./dp]
    type = TensorMechanicsPlasticDruckerPrager
    mc_cohesion = mc_coh
    mc_friction_angle = mc_phi
    mc_dilation_angle = mc_psi
    yield_function_tolerance = 1      # irrelevant here
    internal_constraint_tolerance = 1 # irrelevant here
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./admissible]
    type = ComputeMultipleInelasticStress
    inelastic_models = dp
    perform_finite_strain_rotations = false
  [../]
  [./dp]
    type = CappedDruckerPragerStressUpdate
    DP_model = dp
    tensile_strength = ts
    compressive_strength = cs
    yield_function_tol = 1E-3
    tip_smoother = 0.1E3
    smoothing_tol = 0.1E3
    max_NR_iterations = 1000
    small_dilation = false
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="dcb243b6-6e6f-4297-8480-8c79704c45fc"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite_rr&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-12
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b8a8d3f7-a23d-4bf0-a7c5-1e73dd43c7c7"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/errors/multiapp_missing_local_object.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5957b859-0d79-4cc3-afe8-0c41d1788092"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/jacobian/cto14.i</h4><pre class="moose-pre"><code class="language-text"># Jacobian check for nonlinear, multi-surface plasticity.
# Returns to an edge of the tensile yield surface
# This is a very nonlinear test and a delicate test because it perturbs around
# an edge of the yield function where some derivatives are not well defined
#
# Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# NOTE: The yield function tolerances here are set at 100-times what i would usually use
# This is because otherwise the test fails on the &#x27;pearcey&#x27; architecture.
# This is because identical stress tensors yield slightly different eigenvalues
# (and hence return-map residuals) on &#x27;pearcey&#x27; than elsewhere, which results in
# a different number of NR iterations are needed to return to the yield surface.
# This is presumably because of compiler internals, or the BLAS routines being
# optimised differently or something similar.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1
  ny = 1
  nz = 1
  xmin = -0.5
  xmax = 0.5
  ymin = -0.5
  ymax = 0.5
  zmin = -0.5
  zmax = 0.5
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]



[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int1]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int2]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int3]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int4]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int5]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int6]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int7]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int8]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./int0]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
  [./int0]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int0
    index = 0
  [../]
  [./int1]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int1
    index = 1
  [../]
  [./int2]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int2
    index = 2
  [../]
  [./int3]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int3
    index = 3
  [../]
  [./int4]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int4
    index = 4
  [../]
  [./int5]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int5
    index = 5
  [../]
  [./int6]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int6
    index = 6
  [../]
  [./int7]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int7
    index = 7
  [../]
  [./int8]
    type = MaterialStdVectorAux
    property = plastic_yield_function
    variable = int8
    index = 8
  [../]
[]

[Postprocessors]
  [./max_int0]
    type = ElementExtremeValue
    variable = int0
    outputs = console
  [../]
  [./max_int1]
    type = ElementExtremeValue
    variable = int1
    outputs = console
  [../]
  [./max_int2]
    type = ElementExtremeValue
    variable = int2
    outputs = console
  [../]
  [./max_int3]
    type = ElementExtremeValue
    variable = int3
    outputs = console
  [../]
  [./max_int4]
    type = ElementExtremeValue
    variable = int4
    outputs = console
  [../]
  [./max_int5]
    type = ElementExtremeValue
    variable = int5
    outputs = console
  [../]
  [./max_int6]
    type = ElementExtremeValue
    variable = int6
    outputs = console
  [../]
  [./max_int7]
    type = ElementExtremeValue
    variable = int7
    outputs = console
  [../]
  [./max_int8]
    type = ElementExtremeValue
    variable = int8
    outputs = console
  [../]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E1
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1.0E-4  # Note larger value
    shift = 1.0E-4                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E0
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E-4  # Note larger value
    shift = 1.0E-4                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E3 1.3E3&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    displacements = &#x27;disp_x disp_y disp_z&#x27;
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;10 12 -14  12 5 20  -14 20 8&#x27;
    eigenstrain_name = ini_stress
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;tensile mc&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;rock&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    tangent_operator = nonlinear
  [../]
[]


[Preconditioning]
  [./andy]
    type = SMP
    full = true
    petsc_options_iname = &#x27;-ksp_type -pc_type -snes_atol -snes_rtol -snes_max_it -snes_type&#x27;
    petsc_options_value = &#x27;bcgs bjacobi 1E-15 1E-10 10000 test&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = Newton
[]


[Outputs]
  file_base = cto14
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5ec56698-783b-451e-971e-a3090b211276"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/3D_volumetric_Cartesian_different_submesh/main.i</h4><pre class="moose-pre"><code class="language-text"># Derived from the example &#x27;3D_volumetric_Cartesian&#x27; with the following differences:
#
#   1) The number of x and y divisions in the sub app is not the same as the master app
#   2) The subapp mesh is skewed in x and z
[Mesh]
  type = GeneratedMesh
  dim = 3

  xmin = 0.0
  xmax = 10.0
  nx = 15

  ymin = 1.0
  ymax = 11.0
  ny = 25

  zmin = 2.0
  zmax = 12.0
  nz = 35
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom left right front back&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3   4   5&#x27;
    physical_bounds = &#x27;0.0  10.0    1.0 11.0    2.0 12.0&#x27;
    x = Legendre
    y = Legendre
    z = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f2e57ae2-20ee-4208-8060-8808c8dbbb91"><div class="modal-content"><h4>modules/combined/test/tests/restart-transient-from-ss-with-stateful/sub_tr.i</h4><pre class="moose-pre"><code class="language-text">[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    nx = 8
    ny = 8
    xmin = -82.627
    xmax = 82.627
    ymin = -82.627
    ymax = 82.627
    dim = 2
  []
  [./extra_nodes_x]
    type = ExtraNodesetGenerator
    input = &#x27;gen&#x27;
    new_boundary = &#x27;no_x&#x27;
    coord = &#x27;0 82.627 0&#x27;
  [../]
  [./extra_nodes_y]
    type = ExtraNodesetGenerator
    input = &#x27;extra_nodes_x&#x27;
    new_boundary = &#x27;no_y&#x27;
    coord = &#x27;-82.627 0 0&#x27;
  [../]
[]

[Problem]
  type = ReferenceResidualProblem
  reference_vector = &#x27;ref&#x27;
  extra_tag_vectors = &#x27;ref&#x27;
[]

[AuxVariables]
  [./temp]
  [../]
[]

[Modules/TensorMechanics/Master]
  # FINITE strain when strain is large, i.e., visible movement.
  # SMALL strain when things are stressed, but may not move.
  [./fuel]
    add_variables = true
    strain = FINITE
    temperature = temp
    eigenstrain_names = &#x27;thermal_eigenstrain&#x27;
    generate_output = &#x27;vonmises_stress stress_xx stress_yy hydrostatic_stress max_principal_stress strain_xy elastic_strain_xx stress_xy&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_finite_deform_jacobian = true
    incremental = true
  [../]
[]

[BCs]
  [./no_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;no_x&#x27;
    value = 0.0
    preset = true
  [../]
  [./no_y]
    type = DirichletBC
    preset = true
    variable = disp_y
    boundary = &#x27;no_y&#x27;
    value = 0.0
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 3e10   # Pa
    poissons_ratio = 0.33    # unitless
  [../]
  [./thermal_strains]
    type = ComputeThermalExpansionEigenstrain
    temperature = temp
    thermal_expansion_coeff = 2e-6 # 1/K
    stress_free_temperature = 500 # K
    eigenstrain_name = &#x27;thermal_eigenstrain&#x27;
  [../]
  [./stress_finite] # goes with FINITE strain formulation
    type = ComputeFiniteStrainElasticStress
  [../]
[]

[Postprocessors]
  [./avg_temp]
    type = ElementAverageValue
    variable = temp
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_x_max_element]
    type = ElementExtremeValue
    value_type = max
    variable = disp_x
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_y_max_element]
    type = ElementExtremeValue
    value_type = max
    variable = disp_y
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_x_max_nodal]
    type = NodalExtremeValue
    value_type = max
    variable = disp_x
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
  [./disp_y_max_nodal]
    type = NodalExtremeValue
    value_type = max
    variable = disp_y
    execute_on = &#x27;initial timestep_end&#x27;
  [../]
[]

[Executioner]
  type = Transient
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27;hypre boomeramg 300&#x27;
  line_search = &#x27;none&#x27;

  l_tol = 1e-02
  nl_rel_tol = 5e-04
  nl_abs_tol = 1e-2

  l_max_its = 50
  nl_max_its = 25

  start_time = 0
  end_time = 40
  dt = 10
[]

[Outputs]
  print_linear_residuals = false
  perf_graph = true
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="b4fe51eb-3306-4550-8c40-62ebea5c919d"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/special_rock1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# Mohr-Coulomb with cohesion = 40MPa, friction angle = 35deg, dilation angle = 5deg
# Tensile with strength = 1MPa
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked
#
# NOTE: The yield function tolerances here are set at 100-times what i would usually use
# This is because otherwise the test fails on the &#x27;pearcey&#x27; architecture.
# This is because identical stress tensors yield slightly different eigenvalues
# (and hence return-map residuals) on &#x27;pearcey&#x27; than elsewhere, which results in
# a different number of NR iterations are needed to return to the yield surface.
# This is presumably because of compiler internals, or the BLAS routines being
# optimised differently or something similar.

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]


[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 4E7
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 5
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    use_custom_returnMap = false
    yield_function_tolerance = 1.0E+2  # Note larger value
    shift = 1.0E+2                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
  [../]
  [./mc_smooth]
    type = TensorMechanicsPlasticMohrCoulomb
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    mc_tip_smoother = 4E6
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./ts]
    type = TensorMechanicsHardeningConstant
    value = 1E6
  [../]
  [./tensile]
    type = TensorMechanicsPlasticTensileMulti
    tensile_strength = ts
    yield_function_tolerance = 1.0E+2  # Note larger value
    shift = 1.0E+2                     # Note larger value
    internal_constraint_tolerance = 1.0E-7
    use_custom_returnMap = false
    use_custom_cto = false
  [../]
  [./tensile_smooth]
    type = TensorMechanicsPlasticTensile
    tensile_strength = ts
    tensile_tip_smoother = 1E5
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-5  # Note larger value, to match the larger yield_function_tolerances

    plastic_models = &#x27;tensile mc&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;rock&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = special_rock1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="3a5c3eed-c0e5-4e88-8d2c-101c6f8076e9"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/notched_plastic_block/biaxial_planar.i</h4><pre class="moose-pre"><code class="language-text"># Uses non-smoothed Mohr-Coulomb (via ComputeMultiPlasticityStress and TensorMechanicsPlasticMohrCoulombMulti) to simulate the following problem.
# A cubical block is notched around its equator.
# All of its outer surfaces have roller BCs, but the notched region is free to move as needed
# The block is initialised with a high hydrostatic tensile stress
# Without the notch, the BCs do not allow contraction of the block, and this stress configuration is admissible
# With the notch, however, the interior parts of the block are free to move in order to relieve stress, and this causes plastic failure
# The top surface is then pulled upwards (the bottom is fixed because of the roller BCs)
# This causes more failure
[Mesh]
  [generated_mesh]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 9
    ny = 9
    nz = 9
    xmin = 0
    xmax = 0.1
    ymin = 0
    ymax = 0.1
    zmin = 0
    zmax = 0.1
  []
  [block_to_remove_xmin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.01 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = generated_mesh
  []
  [block_to_remove_xmax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;0.09 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmin
  []
  [block_to_remove_ymin]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 -0.01 0.045&#x27;
    top_right = &#x27;0.11 0.01 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_xmax
  []
  [block_to_remove_ymax]
    type = SubdomainBoundingBoxGenerator
    bottom_left = &#x27;-0.01 0.09 0.045&#x27;
    top_right = &#x27;0.11 0.11 0.055&#x27;
    location = INSIDE
    block_id = 1
    input = block_to_remove_ymin
  []
  [remove_block]
    type = BlockDeletionGenerator
    block_id = 1
    input = block_to_remove_ymax
  []
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y disp_z&#x27;
[]

[Modules/TensorMechanics/Master]
  [./all]
    add_variables = true
    incremental = true
    generate_output = &#x27;max_principal_stress mid_principal_stress min_principal_stress stress_zz&#x27;
    eigenstrain_names = ini_stress
  [../]
[]

[Postprocessors]
  [./uz]
    type = PointValue
    point = &#x27;0 0 0.1&#x27;
    use_displaced_mesh = false
    variable = disp_z
  [../]
  [./s_zz]
    type = ElementAverageValue
    use_displaced_mesh = false
    variable = stress_zz
  [../]
  [./num_res]
    type = NumResidualEvaluations
  [../]
  [./nr_its]
    type = ElementAverageValue
    variable = num_iters
  [../]
  [./max_nr_its]
    type = ElementExtremeValue
    variable = num_iters
  [../]
  [./runtime]
    type = PerfGraphData
    data_type = TOTAL
    section_name = &#x27;Root&#x27;
  [../]
[]

[BCs]
  # back=zmin, front=zmax, bottom=ymin, top=ymax, left=xmin, right=xmax
  [./xmin_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = left
    value = 0.0
  [../]
  [./xmax_xzero]
    type = DirichletBC
    variable = disp_x
    boundary = right
    value = 0.0
  [../]
  [./ymin_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = bottom
    value = 0.0
  [../]
  [./ymax_yzero]
    type = DirichletBC
    variable = disp_y
    boundary = top
    value = 0.0
  [../]
  [./zmin_zzero]
    type = DirichletBC
    variable = disp_z
    boundary = back
    value = &#x27;0&#x27;
  [../]
  [./zmax_disp]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = front
    function = &#x27;1E-6*max(t,0)&#x27;
  [../]
[]

[AuxVariables]
  [./mc_int]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./plastic_strain]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./num_iters]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./mc_int_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_internal_parameter
    variable = mc_int
  [../]
  [./plastic_strain_aux]
    type = MaterialRankTwoTensorAux
    i = 2
    j = 2
    property = plastic_strain
    variable = plastic_strain
  [../]
  [./num_iters_auxk] # cannot use plastic_NR_iterations directly as this is zero, since no NR iterations are actually used, since we use a custom algorithm to do the return
    type = ParsedAux
    args = plastic_strain
    function = &#x27;if(plastic_strain&gt;0,1,0)&#x27;
    variable = num_iters
  [../]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
[]

[UserObjects]
  [./mc_coh]
    type = TensorMechanicsHardeningConstant
    value = 5E6
  [../]
  [./mc_phi]
    type = TensorMechanicsHardeningConstant
    value = 35
    convert_to_radians = true
  [../]
  [./mc_psi]
    type = TensorMechanicsHardeningConstant
    value = 10
    convert_to_radians = true
  [../]
  [./mc]
    type = TensorMechanicsPlasticMohrCoulombMulti
    cohesion = mc_coh
    friction_angle = mc_phi
    dilation_angle = mc_psi
    yield_function_tolerance = 1E-5
    internal_constraint_tolerance = 1E-11
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeIsotropicElasticityTensor
    youngs_modulus = 16E9
    poissons_ratio = 0.25
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    ep_plastic_tolerance = 1E-11
    plastic_models = mc
    max_NR_iterations = 1000
    debug_fspb = crash
  [../]
  [./strain_from_initial_stress]
    type = ComputeEigenstrainFromInitialStress
    initial_stress = &#x27;6E6 0 0  0 6E6 0  0 0 6E6&#x27;
    eigenstrain_name = ini_stress
  [../]
[]

[Preconditioning]
  [./andy]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  start_time = -1
  end_time = 10
  dt = 1
  solve_type = NEWTON
  type = Transient

  l_tol = 1E-2
  nl_abs_tol = 1E-5
  nl_rel_tol = 1E-7
  l_max_its = 200
  nl_max_its = 400

  petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;
[]


[Outputs]
  file_base = biaxial_planar
  perf_graph = true
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="38a47232-9079-4a2d-8a76-a6e916ec2726"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_twophase.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions for two phases

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e5
    max = 5e5
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.01
    max = 0.06
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1e1
    pc_max = 1e4
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="6a170dc0-c678-411a-a39f-5c82e11a6de4"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="55722f5b-ecb5-480d-9137-618c3af7f984"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/multi/special_joint1.i</h4><pre class="moose-pre"><code class="language-text"># Plasticity models:
# WeakPlaneTensile with strength = 1000Pa
# WeakPlaneShear with cohesion = 0.1MPa and friction angle = 25
#
# Lame lambda = 1GPa.  Lame mu = 1.3GPa
#
# A line of elements is perturbed randomly, and return to the yield surface at each quadpoint is checked

[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]

[GlobalParams]
  volumetric_locking_correction=true
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./linesearch]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./ld]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./constr_added]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
  [../]
  [./linesearch]
    type = MaterialRealAux
    property = plastic_linesearch_needed
    variable = linesearch
  [../]
  [./ld]
    type = MaterialRealAux
    property = plastic_linear_dependence_encountered
    variable = ld
  [../]
  [./constr_added]
    type = MaterialRealAux
    property = plastic_constraints_added
    variable = constr_added
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_iter]
    type = ElementExtremeValue
    variable = iter
    outputs = console
  [../]
  [./av_linesearch]
    type = ElementAverageValue
    variable = linesearch
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_ld]
    type = ElementAverageValue
    variable = ld
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_constr_added]
    type = ElementAverageValue
    variable = constr_added
    outputs = &#x27;console csv&#x27;
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console csv&#x27;
  [../]
[]

[UserObjects]
  [./wpt_str]
    type = TensorMechanicsHardeningConstant
    value = 1000
  [../]
  [./wpt]
    type = TensorMechanicsPlasticWeakPlaneTensile
    tensile_strength = wpt_str
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]

  [./wps_c]
    type = TensorMechanicsHardeningConstant
    value = 1.0E5
  [../]
  [./wps_tan_phi]
    type = TensorMechanicsHardeningConstant
    value = 0.466
  [../]
  [./wps_tan_psi]
    type = TensorMechanicsHardeningConstant
    value = 0.087
  [../]
  [./wps]
    type = TensorMechanicsPlasticWeakPlaneShear
    cohesion = wps_c
    tan_friction_angle = wps_tan_phi
    tan_dilation_angle = wps_tan_psi
    smoother = 0
    yield_function_tolerance = 1.0
    internal_constraint_tolerance = 1.0E-7
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;1.0E9 1.3E9&#x27;
  [../]
  [./strain]
    type = ComputeFiniteStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./multi]
    type = ComputeMultiPlasticityStress
    block = 0
    ep_plastic_tolerance = 1E-7

    plastic_models = &#x27;wpt wps&#x27;
    max_NR_iterations = 5
    specialIC = &#x27;joint&#x27;
    deactivation_scheme = &#x27;safe&#x27;
    min_stepsize = 1
    max_stepsize_for_dumb = 1

    debug_fspb = crash
    debug_jac_at_stress = &#x27;10 0 0 0 10 0 0 0 10&#x27;
    debug_jac_at_pm = &#x27;1 1 1 1&#x27;
    debug_jac_at_intnl = &#x27;1 1 1 1&#x27;
    debug_stress_change = 1E1
    debug_pm_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
    debug_intnl_change = &#x27;1E-6 1E-6 1E-6 1E-6&#x27;
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = special_joint1
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="86a76891-c8fd-4048-9d4b-ace338186258"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/3D_volumetric_cylindrical_subapp_mesh_refine/main.i</h4><pre class="moose-pre"><code class="language-text"># Derived from the example &#x27;3D_volumetric_cylindrical&#x27; with the following differences:
#
#   1) The model mesh is refined in the MasterApp by 1
#   2) Mesh adaptivity is enabled for the SubApp
#   3) Output from the SubApp is enabled so that the mesh changes can be visualized
[Mesh]
  type = FileMesh
  file = cyl-tet.e
  uniform_refine = 1
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom outside&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = CylindricalDuo
    orders = &#x27;5   3&#x27; # Axial first, then (r, t) FX
    physical_bounds = &#x27;-2.5 2.5   0 0 1&#x27; # z_min z_max   x_center y_center radius
    z = Legendre # Axial in z
    disc = Zernike # (r, t) default to unit disc in x-y plane
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
    output_sub_cycles = true
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d38ab90-f9d4-4490-bae0-dbcdea0a9c3d"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/frictionless_second/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = FunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f1320225-8f86-4b5e-a5a9-1b417c9a6b6d"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_transient/pseudo_trans_with_2subs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = &#x27;replicated&#x27;
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27;
  []
[]

[Kernels]
  [timedt]
    type = TimeDerivative
    variable = power_density
  []
  [diff]
    type = Diffusion
    variable = power_density
  []
  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 50
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    execute_on = &#x27;initial timestep_end&#x27;
  []
[]

[Executioner]
  type = Transient
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-12

  end_time = 20
  dt = 2.0
[]

[MultiApps]
  [sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = &#x27;0   0 0
                 0.5 0 0&#x27;
    input_files  = pseudo_trans_with_2subs_sub.i
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Transfers]
  [p_to_sub]
    type = MultiAppProjectionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppInterpolationTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
  checkpoint = true
  execute_on = &#x27;INITIAL TIMESTEP_END FINAL&#x27;
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="07aefe61-97ab-4cd1-b297-ff701d2708e3"><div class="modal-content"><h4>modules/porous_flow/examples/coal_mining/fine_with_fluid.i</h4><pre class="moose-pre"><code class="language-text">#################################################################
#
#  NOTE:
#  The mesh for this model is too large for the MOOSE repository
#  so is kept in the the large_media submodule
#
#################################################################
#
# Strata deformation and fluid flow aaround a coal mine - 3D model
#
# A &quot;half model&quot; is used.  The mine is 400m deep and
# just the roof is studied (-400&lt;=z&lt;=0).  The mining panel
# sits between 0&lt;=x&lt;=150, and 0&lt;=y&lt;=1000, so this simulates
# a coal panel that is 300m wide and 1000m long.  The outer boundaries
# are 1km from the excavation boundaries.
#
# The excavation takes 0.5 years.
#
# The boundary conditions for this simulation are:
#  - disp_x = 0 at x=0 and x=1150
#  - disp_y = 0 at y=-1000 and y=1000
#  - disp_z = 0 at z=-400, but there is a time-dependent
#               Young modulus that simulates excavation
#  - wc_x = 0 at y=-1000 and y=1000
#  - wc_y = 0 at x=0 and x=1150
#  - no flow at x=0, z=-400 and z=0
#  - fixed porepressure at y=-1000, y=1000 and x=1150
# That is, rollers on the sides, free at top,
# and prescribed at bottom in the unexcavated portion.
#
# A single-phase unsaturated fluid is used.
#
# The small strain formulation is used.
#
# All stresses are measured in MPa, and time units are measured in years.
#
# The initial porepressure is hydrostatic with P=0 at z=0, so
# Porepressure ~ - 0.01*z MPa, where the fluid has density 1E3 kg/m^3 and
# gravity = = 10 m.s^-2 = 1E-5 MPa m^2/kg.
# To be more accurate, i use
# Porepressure = -bulk * log(1 + g*rho0*z/bulk)
# where bulk=2E3 MPa and rho0=1Ee kg/m^3.
# The initial stress is consistent with the weight force from undrained
# density 2500 kg/m^3, and fluid porepressure, and a Biot coefficient of 0.7, ie,
# stress_zz^effective = 0.025*z + 0.7 * initial_porepressure
# The maximum and minimum principal horizontal effective stresses are
# assumed to be equal to 0.8*stress_zz.
#
# Material properties:
# Young&#x27;s modulus = 8 GPa
# Poisson&#x27;s ratio = 0.25
# Cosserat layer thickness = 1 m
# Cosserat-joint normal stiffness = large
# Cosserat-joint shear stiffness = 1 GPa
# MC cohesion = 2 MPa
# MC friction angle = 35 deg
# MC dilation angle = 8 deg
# MC tensile strength = 1 MPa
# MC compressive strength = 100 MPa
# WeakPlane cohesion = 0.1 MPa
# WeakPlane friction angle = 30 deg
# WeakPlane dilation angle = 10 deg
# WeakPlane tensile strength = 0.1 MPa
# WeakPlane compressive strength = 100 MPa softening to 1 MPa at strain = 1
# Fluid density at zero porepressure = 1E3 kg/m^3
# Fluid bulk modulus = 2E3 MPa
# Fluid viscosity = 1.1E-3 Pa.s = 1.1E-9 MPa.s = 3.5E-17 MPa.year
#
[GlobalParams]
  perform_finite_strain_rotations = false
  displacements = &#x27;disp_x disp_y disp_z&#x27;
  Cosserat_rotations = &#x27;wc_x wc_y wc_z&#x27;
  PorousFlowDictator = dictator
  biot_coefficient = 0.7
[]

[Mesh]
  [file]
    type = FileMeshGenerator
    file = fine.e
  []
  [./xmin]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    new_boundary = xmin
    normal = &#x27;-1 0 0&#x27;
    input = file
  [../]
  [./xmax]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    new_boundary = xmax
    normal = &#x27;1 0 0&#x27;
    input = xmin
  [../]
  [./ymin]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    new_boundary = ymin
    normal = &#x27;0 -1 0&#x27;
    input = xmax
  [../]
  [./ymax]
    type = SideSetsAroundSubdomainGenerator
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    new_boundary = ymax
    normal = &#x27;0 1 0&#x27;
    input = ymin
  [../]
  [./zmax]
    type = SideSetsAroundSubdomainGenerator
    block = 30
    new_boundary = zmax
    normal = &#x27;0 0 1&#x27;
    input = ymax
  [../]
  [./zmin]
    type = SideSetsAroundSubdomainGenerator
    block = 2
    new_boundary = zmin
    normal = &#x27;0 0 -1&#x27;
    input = zmax
  [../]
  [./excav]
    type = SubdomainBoundingBoxGenerator
    input = zmin
    block_id = 1
    bottom_left = &#x27;0 0 -400&#x27;
    top_right = &#x27;150 1000 -397&#x27;
  [../]
  [./roof]
    type = SideSetsBetweenSubdomainsGenerator
    primary_block = 3
    paired_block = 1
    input = excav
    new_boundary = roof
  [../]
[]

[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./wc_x]
  [../]
  [./wc_y]
  [../]
  [./porepressure]
    scaling = 1E-5
  [../]
[]

[ICs]
  [./porepressure]
    type = FunctionIC
    variable = porepressure
    function = ini_pp
  [../]
[]

[Kernels]
  [./cx_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_x
    component = 0
  [../]
  [./cy_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_y
    component = 1
  [../]
  [./cz_elastic]
    type = CosseratStressDivergenceTensors
    use_displaced_mesh = false
    variable = disp_z
    component = 2
  [../]
  [./x_couple]
    type = StressDivergenceTensors
    use_displaced_mesh = false
    variable = wc_x
    displacements = &#x27;wc_x wc_y wc_z&#x27;
    component = 0
    base_name = couple
  [../]
  [./y_couple]
    type = StressDivergenceTensors
    use_displaced_mesh = false
    variable = wc_y
    displacements = &#x27;wc_x wc_y wc_z&#x27;
    component = 1
    base_name = couple
  [../]
  [./x_moment]
    type = MomentBalancing
    use_displaced_mesh = false
    variable = wc_x
    component = 0
  [../]
  [./y_moment]
    type = MomentBalancing
    use_displaced_mesh = false
    variable = wc_y
    component = 1
  [../]
  [./gravity]
    type = Gravity
    use_displaced_mesh = false
    variable = disp_z
    value = -10E-6 # remember this is in MPa
  [../]
  [./poro_x]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    variable = disp_x
    component = 0
  [../]
  [./poro_y]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    variable = disp_y
    component = 1
  [../]
  [./poro_z]
    type = PorousFlowEffectiveStressCoupling
    use_displaced_mesh = false
    component = 2
    variable = disp_z
  [../]
  [./poro_vol_exp]
    type = PorousFlowMassVolumetricExpansion
    use_displaced_mesh = false
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    variable = porepressure
    fluid_component = 0
  [../]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    use_displaced_mesh = false
    fluid_component = 0
    variable = porepressure
  [../]
  [./flux]
    type = PorousFlowAdvectiveFlux
    use_displaced_mesh = false
    variable = porepressure
    gravity = &#x27;0 0 -10E-6&#x27;
    fluid_component = 0
  [../]
[]


[AuxVariables]
  [./saturation]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_x]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_y]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./darcy_z]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./porosity]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wc_z]
  [../]
  [./stress_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./stress_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_xz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_yz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./total_strain_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_xx]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_yy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./perm_zz]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_shear]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_tensile]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_shear_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./wp_tensile_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_shear_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./mc_tensile_f]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./saturation_water]
    type = PorousFlowPropertyAux
    variable = saturation
    property = saturation
    phase = 0
    execute_on = timestep_end
  [../]
  [./darcy_x]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_x
    gravity = &#x27;0 0 -10E-6&#x27;
    component = x
  [../]
  [./darcy_y]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_y
    gravity = &#x27;0 0 -10E-6&#x27;
    component = y
  [../]
  [./darcy_z]
    type = PorousFlowDarcyVelocityComponent
    variable = darcy_z
    gravity = &#x27;0 0 -10E-6&#x27;
    component = z
  [../]
  [./porosity]
    type = PorousFlowPropertyAux
    property = porosity
    variable = porosity
    execute_on = timestep_end
  [../]
  [./stress_xx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_xy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_xz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_xz
    index_i = 0
    index_j = 2
    execute_on = timestep_end
  [../]
  [./stress_yx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yx
    index_i = 1
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_yy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_yz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_yz
    index_i = 1
    index_j = 2
    execute_on = timestep_end
  [../]
  [./stress_zx]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zx
    index_i = 2
    index_j = 0
    execute_on = timestep_end
  [../]
  [./stress_zy]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zy
    index_i = 2
    index_j = 1
    execute_on = timestep_end
  [../]
  [./stress_zz]
    type = RankTwoAux
    rank_two_tensor = stress
    variable = stress_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_xx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xx
    index_i = 0
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_xy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xy
    index_i = 0
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_xz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_xz
    index_i = 0
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_yx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yx
    index_i = 1
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_yy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yy
    index_i = 1
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_yz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_yz
    index_i = 1
    index_j = 2
    execute_on = timestep_end
  [../]
  [./total_strain_zx]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zx
    index_i = 2
    index_j = 0
    execute_on = timestep_end
  [../]
  [./total_strain_zy]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zy
    index_i = 2
    index_j = 1
    execute_on = timestep_end
  [../]
  [./total_strain_zz]
    type = RankTwoAux
    rank_two_tensor = total_strain
    variable = total_strain_zz
    index_i = 2
    index_j = 2
    execute_on = timestep_end
  [../]
  [./perm_xx]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_xx
    row = 0
    column = 0
    execute_on = timestep_end
  [../]
  [./perm_yy]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_yy
    row = 1
    column = 1
    execute_on = timestep_end
  [../]
  [./perm_zz]
    type = PorousFlowPropertyAux
    property = permeability
    variable = perm_zz
    row = 2
    column = 2
    execute_on = timestep_end
  [../]
  [./mc_shear]
    type = MaterialStdVectorAux
    index = 0
    property = mc_plastic_internal_parameter
    variable = mc_shear
    execute_on = timestep_end
  [../]
  [./mc_tensile]
    type = MaterialStdVectorAux
    index = 1
    property = mc_plastic_internal_parameter
    variable = mc_tensile
    execute_on = timestep_end
  [../]
  [./wp_shear]
    type = MaterialStdVectorAux
    index = 0
    property = wp_plastic_internal_parameter
    variable = wp_shear
    execute_on = timestep_end
  [../]
  [./wp_tensile]
    type = MaterialStdVectorAux
    index = 1
    property = wp_plastic_internal_parameter
    variable = wp_tensile
    execute_on = timestep_end
  [../]
  [./mc_shear_f]
    type = MaterialStdVectorAux
    index = 6
    property = mc_plastic_yield_function
    variable = mc_shear_f
    execute_on = timestep_end
  [../]
  [./mc_tensile_f]
    type = MaterialStdVectorAux
    index = 0
    property = mc_plastic_yield_function
    variable = mc_tensile_f
    execute_on = timestep_end
  [../]
  [./wp_shear_f]
    type = MaterialStdVectorAux
    index = 0
    property = wp_plastic_yield_function
    variable = wp_shear_f
    execute_on = timestep_end
  [../]
  [./wp_tensile_f]
    type = MaterialStdVectorAux
    index = 1
    property = wp_plastic_yield_function
    variable = wp_tensile_f
    execute_on = timestep_end
  [../]
[]



[BCs]
  [./no_x]
    type = DirichletBC
    variable = disp_x
    boundary = &#x27;xmin xmax&#x27;
    value = 0.0
  [../]
  [./no_y]
    type = DirichletBC
    variable = disp_y
    boundary = &#x27;ymin ymax&#x27;
    value = 0.0
  [../]
  [./no_z]
    type = DirichletBC
    variable = disp_z
    boundary = zmin
    value = 0.0
  [../]
  [./no_wc_x]
    type = DirichletBC
    variable = wc_x
    boundary = &#x27;ymin ymax&#x27;
    value = 0.0
  [../]
  [./no_wc_y]
    type = DirichletBC
    variable = wc_y
    boundary = &#x27;xmin xmax&#x27;
    value = 0.0
  [../]
  [./fix_porepressure]
    type = FunctionDirichletBC
    variable = porepressure
    boundary = &#x27;ymin ymax xmax&#x27;
    function = ini_pp
  [../]
  [./roof_porepressure]
    type = PorousFlowPiecewiseLinearSink
    variable = porepressure
    pt_vals = &#x27;-1E3 1E3&#x27;
    multipliers = &#x27;-1 1&#x27;
    fluid_phase = 0
    flux_function = roof_conductance
    boundary = roof
  [../]
  [./roof]
    type = StickyBC
    variable = disp_z
    min_value = -3.0
    boundary = roof
  [../]
[]

[Functions]
  [./ini_pp]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3&#x27;
    value = &#x27;-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk)&#x27;
  [../]
  [./ini_xx]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0 biot&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3  0.7&#x27;
    value = &#x27;0.8*(2500*10E-6*z+biot*(-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk)))&#x27;
  [../]
  [./ini_zz]
    type = ParsedFunction
    vars = &#x27;bulk p0 g    rho0 biot&#x27;
    vals = &#x27;2E3 0.0 1E-5 1E3  0.7&#x27;
    value = &#x27;2500*10E-6*z+biot*(-bulk*log(exp(-p0/bulk)+g*rho0*z/bulk))&#x27;
  [../]
  [./excav_sideways]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax  minval maxval slope&#x27;
    vals = &#x27;0.5   0    1000.0 1E-9 1 10&#x27;
    # excavation face at ymin+(ymax-ymin)*min(t/end_t,1)
    # slope is the distance over which the modulus reduces from maxval to minval
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),minval,if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1)+slope,minval+(maxval-minval)*(y-(ymin+(ymax-ymin)*min(t/end_t,1)))/slope,maxval))&#x27;
  [../]
  [./density_sideways]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax  minval maxval&#x27;
    vals = &#x27;0.5   0    1000.0 0 2500&#x27;
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),minval,maxval)&#x27;
  [../]
  [./roof_conductance]
    type = ParsedFunction
    vars = &#x27;end_t ymin ymax   maxval minval&#x27;
    vals = &#x27;0.5   0    1000.0 1E7      0&#x27;
    value = &#x27;if(y&lt;ymin+(ymax-ymin)*min(t/end_t,1),maxval,minval)&#x27;
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;porepressure disp_x disp_y disp_z&#x27;
    number_fluid_phases = 1
    number_fluid_components = 1
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1 # MPa^-1
  [../]

  [./mc_coh_strong_harden]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.99 # MPa
    value_residual = 2.01 # MPa
    rate = 1.0
  [../]
  [./mc_fric]
    type = TensorMechanicsHardeningConstant
    value = 0.61 # 35deg
  [../]
  [./mc_dil]
    type = TensorMechanicsHardeningConstant
    value = 0.15 # 8deg
  [../]

  [./mc_tensile_str_strong_harden]
    type = TensorMechanicsHardeningExponential
    value_0 = 1.0 # MPa
    value_residual = 1.0 # MPa
    rate = 1.0
  [../]
  [./mc_compressive_str]
    type = TensorMechanicsHardeningCubic
    value_0 = 100 # Large!
    value_residual = 100
    internal_limit = 0.1
  [../]

  [./wp_coh_harden]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.05
    value_residual = 0.05
    internal_limit = 10
  [../]
  [./wp_tan_fric]
    type = TensorMechanicsHardeningConstant
    value = 0.26 # 15deg
  [../]
  [./wp_tan_dil]
    type = TensorMechanicsHardeningConstant
    value = 0.18 # 10deg
  [../]

  [./wp_tensile_str_harden]
    type = TensorMechanicsHardeningCubic
    value_0 = 0.05
    value_residual = 0.05
    internal_limit = 10
  [../]
  [./wp_compressive_str_soften]
    type = TensorMechanicsHardeningCubic
    value_0 = 100
    value_residual = 1
    internal_limit = 1.0
  [../]
[]

[Modules]
  [./FluidProperties]
    [./simple_fluid]
      type = SimpleFluidProperties
      bulk_modulus = 2E3
      density0 = 1000
      thermal_expansion = 0
      viscosity = 3.5E-17
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
  [../]
  [./eff_fluid_pressure]
    type = PorousFlowEffectiveFluidPressure
  [../]
  [./vol_strain]
    type = PorousFlowVolumetricStrain
  [../]
  [./ppss]
    type = PorousFlow1PhaseP
    porepressure = porepressure
    capillary_pressure = pc
  [../]
  [./massfrac]
    type = PorousFlowMassFraction
  [../]
  [./simple_fluid]
    type = PorousFlowSingleComponentFluid
    fp = simple_fluid
    phase = 0
  [../]
  [./porosity_for_aux]
    type = PorousFlowPorosity
    at_nodes = false
    fluid = true
    mechanical = true
    ensure_positive = true
    porosity_zero = 0.02
    solid_bulk = 5.3333E3
  [../]
  [./porosity_bulk]
    type = PorousFlowPorosity
    fluid = true
    mechanical = true
    block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    ensure_positive = true
    porosity_zero = 0.02
    solid_bulk = 5.3333E3
  [../]
  [./porosity_excav]
    type = PorousFlowPorosityConst
    block = 1
    porosity = 1.0
  [../]
  [./permeability_bulk]
    type = PorousFlowPermeabilityKozenyCarman
    block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    poroperm_function = kozeny_carman_phi0
    k0 = 1E-15
    phi0 = 0.02
    n = 2
    m = 2
  [../]
  [./permeability_excav]
    type = PorousFlowPermeabilityConst
    block = 1
    permeability = &#x27;0 0 0   0 0 0   0 0 0&#x27;
  [../]
  [./relperm]
    type = PorousFlowRelativePermeabilityCorey
    n = 4
    s_res = 0.4
    sum_s_res = 0.4
    phase = 0
  [../]

  [./elasticity_tensor_0]
    type = ComputeLayeredCosseratElasticityTensor
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    young = 8E3 # MPa
    poisson = 0.25
    layer_thickness = 1.0
    joint_normal_stiffness = 1E9 # huge
    joint_shear_stiffness = 1E3 # MPa
  [../]
  [./elasticity_tensor_1]
    type = ComputeLayeredCosseratElasticityTensor
    block = 1
    young = 8E3 # MPa
    poisson = 0.25
    layer_thickness = 1.0
    joint_normal_stiffness = 1E9 # huge
    joint_shear_stiffness = 1E3 # MPa
    elasticity_tensor_prefactor = excav_sideways
  [../]
  [./strain]
    type = ComputeCosseratIncrementalSmallStrain
    eigenstrain_names = ini_stress
  [../]
  [./ini_stress]
    type = ComputeEigenstrainFromInitialStress
    eigenstrain_name = ini_stress
    initial_stress = &#x27;ini_xx 0 0  0 ini_xx 0  0 0 ini_zz&#x27;
  [../]

  [./stress_0]
    type = ComputeMultipleInelasticCosseratStress
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    inelastic_models = &#x27;mc wp&#x27;
    cycle_models = true
    relative_tolerance = 2.0
    absolute_tolerance = 1E6
    max_iterations = 1
    tangent_operator = nonlinear
    perform_finite_strain_rotations = false
  [../]
  [./stress_1]
    type = ComputeMultipleInelasticCosseratStress
    block = 1
    inelastic_models = &#x27;&#x27;
    relative_tolerance = 2.0
    absolute_tolerance = 1E6
    max_iterations = 1
    tangent_operator = nonlinear
    perform_finite_strain_rotations = false
  [../]
  [./mc]
    type = CappedMohrCoulombCosseratStressUpdate
    warn_about_precision_loss = false
    host_youngs_modulus = 8E3
    host_poissons_ratio = 0.25
    base_name = mc
    tensile_strength = mc_tensile_str_strong_harden
    compressive_strength = mc_compressive_str
    cohesion = mc_coh_strong_harden
    friction_angle = mc_fric
    dilation_angle = mc_dil
    max_NR_iterations = 100000
    smoothing_tol = 0.1 # MPa  # Must be linked to cohesion
    yield_function_tol = 1E-9 # MPa.  this is essentially the lowest possible without lots of precision loss
    perfect_guess = true
    min_step_size = 1.0
  [../]
  [./wp]
    type = CappedWeakPlaneCosseratStressUpdate
    warn_about_precision_loss = false
    base_name = wp
    cohesion = wp_coh_harden
    tan_friction_angle = wp_tan_fric
    tan_dilation_angle = wp_tan_dil
    tensile_strength = wp_tensile_str_harden
    compressive_strength = wp_compressive_str_soften
    max_NR_iterations = 10000
    tip_smoother = 0.05
    smoothing_tol = 0.05 # MPa  # Note, this must be tied to cohesion, otherwise get no possible return at cone apex
    yield_function_tol = 1E-11 # MPa.  this is essentially the lowest possible without lots of precision loss
    perfect_guess = true
    min_step_size = 1.0E-3
  [../]


  [./undrained_density_0]
    type = GenericConstantMaterial
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    prop_names = density
    prop_values = 2500
  [../]
  [./undrained_density_1]
    type = GenericFunctionMaterial
    block = 1
    prop_names = density
    prop_values = density_sideways
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  []
[]

[Postprocessors]
  [./min_roof_disp]
    type = NodalExtremeValue
    boundary = roof
    value_type = min
    variable = disp_z
  [../]
  [./min_roof_pp]
    type = NodalExtremeValue
    boundary = roof
    value_type = min
    variable = porepressure
  [../]
  [./min_surface_disp]
    type = NodalExtremeValue
    boundary = zmax
    value_type = min
    variable = disp_z
  [../]
  [./min_surface_pp]
    type = NodalExtremeValue
    boundary = zmax
    value_type = min
    variable = porepressure
  [../]
  [./max_perm_zz]
    type = ElementExtremeValue
     block = &#x27;2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30&#x27;
    variable = perm_zz
  [../]
[]

[Executioner]
  type = Transient

  solve_type = &#x27;NEWTON&#x27;

  petsc_options = &#x27;-snes_converged_reason&#x27;

  # best overall
  petsc_options_iname = &#x27;-pc_type -pc_factor_mat_solver_package&#x27;
  petsc_options_value = &#x27; lu       mumps&#x27;

  # best if you don&#x27;t have mumps:
  #petsc_options_iname = &#x27;-pc_type -pc_asm_overlap -sub_pc_type -ksp_type -ksp_gmres_restart&#x27;
  #petsc_options_value = &#x27; asm      2              lu            gmres     200&#x27;

  # very basic:
  #petsc_options_iname = &#x27;-pc_type -ksp_type -ksp_gmres_restart&#x27;
  #petsc_options_value = &#x27; bjacobi  gmres     200&#x27;

  line_search = bt

  nl_abs_tol = 1e-3
  nl_rel_tol = 1e-5

  l_max_its = 200
  nl_max_its = 30

  start_time = 0.0
  dt = 0.0025
  end_time = 0.5
[]

[Outputs]
  interval = 1
  print_linear_residuals = true
  exodus = true
  csv = true
  console = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7bcdeb8f-0ac6-4cf1-a2bc-89dd5d9e2f5c"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/3D_volumetric_Cartesian_direct/main.i</h4><pre class="moose-pre"><code class="language-text"># Derived from the example &#x27;3D_volumetric_Cartesian&#x27; with the following differences:
#
#   1) The coupling is performed via BodyForce instead of the
#      FunctionSeriesToAux+CoupledForce approach
[Mesh]
  type = GeneratedMesh
  dim = 3

  xmin = 0.0
  xmax = 10.0
  nx = 15

  ymin = 1.0
  ymax = 11.0
  ny = 25

  zmin = 2.0
  zmax = 12.0
  nz = 35
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = BodyForce
    variable = m
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom left right front back&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3   4   5&#x27;
    physical_bounds = &#x27;0.0  10.0    1.0 11.0    2.0 12.0&#x27;
    x = Legendre
    y = Legendre
    z = Legendre
    enable_cache = true
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="75489cbc-c71c-45bd-bb10-3a8834e9d5ec"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random02.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningConstant
    value = 1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningConstant
    value = -1.5
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random02
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="c7babd93-06de-4ea3-b15f-9c3822404a2b"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/errors/multiapp_incompatible_orders.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;36&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = multiapp_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="655a73d7-a372-4eaa-997c-0aac77d36235"><div class="modal-content"><h4>test/tests/vectorpostprocessors/vector_of_postprocessors/vector_of_postprocessors.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./max]
    type = ElementExtremeValue
    variable = u
  [../]
  [./min]
    type = ElementExtremeValue
    variable = u
    value_type = min
  [../]
[]

[VectorPostprocessors]
  [./min_max]
    type = VectorOfPostprocessors
    postprocessors = &#x27;min max&#x27;
  [../]
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="26d14ff8-03bb-4d12-9350-8dfdd2e657de"><div class="modal-content"><h4>modules/functional_expansion_tools/examples/3D_volumetric_cylindrical/main.i</h4><pre class="moose-pre"><code class="language-text"># Basic example coupling a master and sub app in a 3D cylindrical mesh from an input file
#
# The master app provides field values to the sub app via Functional Expansions, which then performs
# its calculations. The sub app&#x27;s solution field values are then transferred back to the master app
# and coupled into the solution of the master app solution.
#
# This example couples Functional Expansions via AuxVariable, the recommended approach.
#
# Note: this problem is not light, and may take a few minutes to solve.
[Mesh]
  type = FileMesh
  file = cyl-tet.e
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = HeatConduction
    variable = m
  [../]
  [./time_diff_m]
    type = HeatConductionTimeDerivative
    variable = m
  [../]
  [./s_in] # Add in the contribution from the SubApp
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[Materials]
  [./Unobtanium]
    type = GenericConstantMaterial
    prop_names =  &#x27;thermal_conductivity specific_heat density&#x27;
    prop_values = &#x27;1.0                  1.0           1.0&#x27; # W/(cm K), J/(g K), g/cm^3
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;top bottom outside&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = CylindricalDuo
    orders = &#x27;5   3&#x27; # Axial first, then (r, t) FX
    physical_bounds = &#x27;-2.5 2.5   0 0 1&#x27; # z_min z_max   x_center y_center radius
    z = Legendre # Axial in z
    disc = Zernike # (r, t) default to unit disc in x-y plane
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="00ff0e7c-fce7-4ae5-80a8-8a9ba19f6308"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_transient/restart_trans_with_2subs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = &#x27;replicated&#x27;
[]

[Problem]
  restart_file_base = pseudo_trans_with_2subs_out_cp/LATEST
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27; # increase this function to drive transient
  []
[]

[Kernels]
  [timedt]
    type = TimeDerivative
    variable = power_density
  []

  [diff]
    type = Diffusion
    variable = power_density
  []

  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 50
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    block = &#x27;0&#x27;
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
[]

[Executioner]
  type = Transient
  start_time = 0
  end_time = 3
  dt = 1.0

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-12

  line_search = none
[]

[MultiApps]
  [./sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = &#x27;0   0 0
                 0.5 0 0&#x27;
    input_files  = restart_trans_with_2subs_sub.i
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Transfers]
  [p_to_sub]
    type = MultiAppProjectionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppInterpolationTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="31c913b6-8a9c-4c93-a682-67d3d5201a7b"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;small&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="2c8c9e81-fddd-4707-b54f-1e1cd1a5da1d"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/small.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;small&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeLinearElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="58140a73-7e67-41da-9f9b-6820971c5825"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2drz/frictionless_first/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Problem]
  coord_type = RZ
[]

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0
    xmax = 0.6
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.61
    xmax = 1.21
    ymin = 9.2
    ymax = 10.0
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./block]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;block&#x27;
  [../]
  [./plank]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank&#x27;
    eigenstrain_names = &#x27;swell&#x27;
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = DirichletBC
    variable = disp_x
    boundary = block_right
    value = 0
  [../]
  [./right_y]
    type = FunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
  [./swell]
    type = ComputeEigenstrain
    block = &#x27;plank&#x27;
    eigenstrain_name = swell
    eigen_base = &#x27;1 0 0 0 0 0 0 0 0&#x27;
    prefactor = swell_mat
  [../]
  [./swell_mat]
    type = GenericFunctionMaterial
    prop_names = &#x27;swell_mat&#x27;
    prop_values = &#x27;7e-2*(1-cos(4*t))&#x27;
    block = &#x27;plank&#x27;
  [../]
[]

[Preconditioning]
  [smp]
    type = SMP
    full = true
  []
[]

[Executioner]
  type = Transient
  solve_type = &#x27;PJFNK&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 10
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="16e1a65f-3dba-4f96-9f2a-12b2cd3c3548"><div class="modal-content"><h4>modules/porous_flow/test/tests/jacobian/waterncg_gas.i</h4><pre class="moose-pre"><code class="language-text"># Tests correct calculation of properties derivatives in PorousFlowWaterNCG
# for conditions that give a single gas phase

[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
[]

[GlobalParams]
  PorousFlowDictator = dictator
  gravity = &#x27;0 0 0&#x27;
[]

[Variables]
  [./pgas]
  [../]
  [./z]
  [../]
[]

[ICs]
  [./pgas]
    type = RandomIC
    min = 1e4
    max = 4e4
    variable = pgas
  [../]
  [./z]
    type = RandomIC
    min = 0.88
    max = 0.98
    variable = z
  [../]
[]

[Kernels]
  [./mass0]
    type = PorousFlowMassTimeDerivative
    variable = pgas
    fluid_component = 0
  [../]
  [./mass1]
    type = PorousFlowMassTimeDerivative
    variable = z
    fluid_component = 1
  [../]
  [./adv0]
    type = PorousFlowAdvectiveFlux
    variable = pgas
    fluid_component = 0
  [../]
  [./adv1]
    type = PorousFlowAdvectiveFlux
    variable = z
    fluid_component = 1
  [../]
[]

[UserObjects]
  [./dictator]
    type = PorousFlowDictator
    porous_flow_vars = &#x27;pgas z&#x27;
    number_fluid_phases = 2
    number_fluid_components = 2
  [../]
  [./pc]
    type = PorousFlowCapillaryPressureVG
    m = 0.5
    alpha = 1
    pc_max = 1e3
  [../]
  [./fs]
    type = PorousFlowWaterNCG
    water_fp = water
    gas_fp = co2
    capillary_pressure = pc
  [../]
[]

[Modules]
  [./FluidProperties]
    [./co2]
      type = CO2FluidProperties
    [../]
    [./water]
      type = Water97FluidProperties
    [../]
  [../]
[]

[Materials]
  [./temperature]
    type = PorousFlowTemperature
    temperature = 50
  [../]
  [./waterncg]
    type = PorousFlowFluidState
    gas_porepressure = pgas
    z = z
    temperature_unit = Celsius
    capillary_pressure = pc
    fluid_state = fs
  [../]
  [./permeability]
    type = PorousFlowPermeabilityConst
    permeability = &#x27;1e-12 0 0 0 1e-12 0 0 0 1e-12&#x27;
  [../]
  [./relperm0]
    type = PorousFlowRelativePermeabilityCorey
    n = 2
    phase = 0
  [../]
  [./relperm1]
    type = PorousFlowRelativePermeabilityCorey
    n = 3
    phase = 1
  [../]
  [./porosity]
    type = PorousFlowPorosityConst
    porosity = 0.1
  [../]
[]

[Executioner]
  type = Transient
  solve_type = NEWTON
  dt = 1
  end_time = 1
  nl_abs_tol = 1e-12
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[AuxVariables]
  [./sgas]
    family = MONOMIAL
    order = CONSTANT
  [../]
[]

[AuxKernels]
  [./sgas]
    type = PorousFlowPropertyAux
    property = saturation
    phase = 1
    variable = sgas
  [../]
[]

[Postprocessors]
  [./sgas_min]
    type = ElementExtremeValue
    variable = sgas
    value_type = min
  [../]
  [./sgas_max]
    type = ElementExtremeValue
    variable = sgas
    value_type = max
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f1f14bd2-ffec-4a6b-a834-5ee5b102ad67"><div class="modal-content"><h4>modules/tensor_mechanics/test/tests/mean_cap_TC/random04.i</h4><pre class="moose-pre"><code class="language-text"># apply many random large deformations, checking that the algorithm returns correctly to
# the yield surface each time.
[Mesh]
  type = GeneratedMesh
  dim = 3
  nx = 1000
  ny = 125
  nz = 1
  xmin = 0
  xmax = 1000
  ymin = 0
  ymax = 125
  zmin = 0
  zmax = 1
[]


[Variables]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
[]

[Kernels]
  [./TensorMechanics]
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
[]


[ICs]
  [./x]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_x
  [../]
  [./y]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_y
  [../]
  [./z]
    type = RandomIC
    min = -0.1
    max = 0.1
    variable = disp_z
  [../]
[]

[BCs]
  [./x]
    type = FunctionDirichletBC
    variable = disp_x
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./y]
    type = FunctionDirichletBC
    variable = disp_y
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
  [./z]
    type = FunctionDirichletBC
    variable = disp_z
    boundary = &#x27;front back&#x27;
    function = &#x27;0&#x27;
  [../]
[]

[AuxVariables]
  [./yield_fcn]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./iter]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./yield_fcn_auxk]
    type = MaterialStdVectorAux
    index = 0
    property = plastic_yield_function
    variable = yield_fcn
  [../]
  [./iter]
    type = MaterialRealAux
    property = plastic_NR_iterations
    variable = iter
  [../]
[]

[Postprocessors]
  [./max_yield_fcn]
    type = ElementExtremeValue
    variable = yield_fcn
    outputs = &#x27;console&#x27;
  [../]
  [./should_be_zero]
    type = FunctionValuePostprocessor
    function = should_be_zero_fcn
  [../]
  [./av_iter]
    type = ElementAverageValue
    variable = iter
    outputs = &#x27;console&#x27;
  [../]
[]

[Functions]
  [./should_be_zero_fcn]
    type = ParsedFunction
    value = &#x27;if(a&lt;1E-3,0,a)&#x27;
    vars = &#x27;a&#x27;
    vals = &#x27;max_yield_fcn&#x27;
  [../]
[]

[UserObjects]
  [./tensile_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = 1
    value_residual = 0.1
    internal_limit = 0.1
  [../]
  [./compressive_strength]
    type = TensorMechanicsHardeningCubic
    value_0 = -1.5
    value_residual = 0
    internal_limit = 0.1
  [../]
  [./cap]
    type = TensorMechanicsPlasticMeanCapTC
    tensile_strength = tensile_strength
    compressive_strength = compressive_strength
    yield_function_tolerance = 1E-3
    internal_constraint_tolerance = 1E-9
    use_custom_returnMap = true
    use_custom_cto = true
  [../]
[]

[Materials]
  [./elasticity_tensor]
    type = ComputeElasticityTensor
    block = 0
    fill_method = symmetric_isotropic
    C_ijkl = &#x27;0.7E7 1E7&#x27;
  [../]
  [./strain]
    type = ComputeIncrementalSmallStrain
    block = 0
    displacements = &#x27;disp_x disp_y disp_z&#x27;
  [../]
  [./mc]
    type = ComputeMultiPlasticityStress
    block = 0
    max_NR_iterations = 2
    ep_plastic_tolerance = 1E-6
    plastic_models = cap
  [../]
[]


[Executioner]
  end_time = 1
  dt = 1
  type = Transient
[]


[Outputs]
  file_base = random04
  exodus = false
  [./csv]
    type = CSV
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="95cfb0e1-62bd-478f-8ec6-e6bda79ef9a4"><div class="modal-content"><h4>modules/functional_expansion_tools/test/tests/standard_use/volume_coupled.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 1

  xmin = 0.0
  xmax = 10.0
  nx = 15
[]

[Variables]
  [./m]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./s_in]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff_m]
    type = Diffusion
    variable = m
  [../]
  [./time_diff_m]
    type = TimeDerivative
    variable = m
  [../]
  [./s_in]
    type = CoupledForce
    variable = m
    v = s_in
  [../]
[]

[AuxKernels]
  [./reconstruct_s_in]
    type = FunctionSeriesToAux
    variable = s_in
    function = FX_Basis_Value_Main
  [../]
[]

[ICs]
  [./start_m]
    type = ConstantIC
    variable = m
    value = 1
  [../]
[]

[BCs]
  [./surround]
    type = DirichletBC
    variable = m
    value = 1
    boundary = &#x27;left right&#x27;
  [../]
[]

[Functions]
  [./FX_Basis_Value_Main]
    type = FunctionSeries
    series_type = Cartesian
    orders = &#x27;3&#x27;
    physical_bounds = &#x27;0.0  10.0&#x27;
    x = Legendre
  [../]
[]

[UserObjects]
  [./FX_Value_UserObject_Main]
    type = FXVolumeUserObject
    function = FX_Basis_Value_Main
    variable = m
  [../]
[]

[Postprocessors]
  [./average_value]
    type = ElementAverageValue
    variable = m
  [../]
  [./peak_value]
    type = ElementExtremeValue
    value_type = max
    variable = m
  [../]
  [./picard_iterations]
    type = NumPicardIterations
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 10
  dt = 0.5
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
  picard_max_its = 30
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-9
  picard_rel_tol = 1e-8
  picard_abs_tol = 1e-9
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./FXTransferApp]
    type = TransientMultiApp
    input_files = volume_sub.i
  [../]
[]

[Transfers]
  [./ValueToSub]
    type = MultiAppFXTransfer
    direction = to_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Value_UserObject_Main
    multi_app_object_name = FX_Basis_Value_Sub
  [../]
  [./ValueToMe]
    type = MultiAppFXTransfer
    direction = from_multiapp
    multi_app = FXTransferApp
    this_app_object_name = FX_Basis_Value_Main
    multi_app_object_name = FX_Value_UserObject_Sub
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="aec84558-d402-4426-a378-90835685536b"><div class="modal-content"><h4>modules/combined/examples/periodic_strain/global_strain_pfm_3D.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 20
    ny = 20
    nz = 20
    xmin = -0.5
    xmax = 0.5
    ymin = -0.5
    ymax = 0.5
    zmin = -0.5
    zmax = 0.5
  []
  [./cnode]
    input = gen
    type = ExtraNodesetGenerator
    coord = &#x27;0.0 0.0 0.0&#x27;
    new_boundary = 100
  [../]
[]

[Variables]
  [./u_x]
  [../]
  [./u_y]
  [../]
  [./u_z]
  [../]
  [./global_strain]
    order = SIXTH
    family = SCALAR
  [../]
  [./c]
    [./InitialCondition]
      type = FunctionIC
      function = &#x27;sin(2*x*pi)*sin(2*y*pi)*sin(2*z*pi)*0.05+0.6&#x27;
    [../]
  [../]
  [./w]
  [../]
[]

[AuxVariables]
  [./local_energy]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./disp_x]
  [../]
  [./disp_y]
  [../]
  [./disp_z]
  [../]
  [./s00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./s11]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e00]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e01]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e10]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e11]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./disp_x]
    type = GlobalDisplacementAux
    variable = disp_x
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 0
  [../]
  [./disp_y]
    type = GlobalDisplacementAux
    variable = disp_y
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 1
  [../]
  [./disp_z]
    type = GlobalDisplacementAux
    variable = disp_z
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
    component = 2
  [../]
  [./local_free_energy]
    type = TotalFreeEnergy
    execute_on = &#x27;initial LINEAR&#x27;
    variable = local_energy
    interfacial_vars = &#x27;c&#x27;
    kappa_names = &#x27;kappa_c&#x27;
  [../]
  [./s00]
    type = RankTwoAux
    variable = s00
    rank_two_tensor = stress
    index_i = 0
    index_j = 0
  [../]
  [./s01]
    type = RankTwoAux
    variable = s01
    rank_two_tensor = stress
    index_i = 0
    index_j = 1
  [../]
  [./s10]
    type = RankTwoAux
    variable = s10
    rank_two_tensor = stress
    index_i = 1
    index_j = 0
  [../]
  [./s11]
    type = RankTwoAux
    variable = s11
    rank_two_tensor = stress
    index_i = 1
    index_j = 1
  [../]
  [./e00]
    type = RankTwoAux
    variable = e00
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 0
  [../]
  [./e01]
    type = RankTwoAux
    variable = e01
    rank_two_tensor = total_strain
    index_i = 0
    index_j = 1
  [../]
  [./e10]
    type = RankTwoAux
    variable = e10
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 0
  [../]
  [./e11]
    type = RankTwoAux
    variable = e11
    rank_two_tensor = total_strain
    index_i = 1
    index_j = 1
  [../]
[]

[GlobalParams]
  derivative_order = 2
  enable_jit = true
  displacements = &#x27;u_x u_y u_z&#x27;
  block = 0
[]

[Kernels]
  [./TensorMechanics]
  [../]

  # Cahn-Hilliard kernels
  [./c_dot]
    type = CoupledTimeDerivative
    variable = w
    v = c
    block = 0
  [../]
  [./c_res]
    type = SplitCHParsed
    variable = c
    f_name = F
    kappa_name = kappa_c
    w = w
    block = 0
  [../]
  [./w_res]
    type = SplitCHWRes
    variable = w
    mob_name = M
    block = 0
  [../]
[]

[ScalarKernels]
  [./global_strain]
    type = GlobalStrain
    variable = global_strain
    global_strain_uo = global_strain_uo
  [../]
[]

[BCs]
  [./Periodic]
    [./all]
      auto_direction = &#x27;x y z&#x27;
      variable = &#x27;c w u_x u_y u_z&#x27;
    [../]
  [../]

  # fix center point location
  [./centerfix_x]
    type = DirichletBC
    boundary = 100
    variable = u_x
    value = 0
  [../]
  [./centerfix_y]
    type = DirichletBC
    boundary = 100
    variable = u_y
    value = 0
  [../]
  [./centerfix_z]
    type = DirichletBC
    boundary = 100
    variable = u_z
    value = 0
  [../]
[]

[Materials]
  [./consts]
    type = GenericConstantMaterial
    prop_names  = &#x27;M   kappa_c&#x27;
    prop_values = &#x27;0.2 0.01   &#x27;
  [../]

  [./shear1]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 0.5 0.5 0.5&#x27;
    tensor_name = shear1
  [../]
  [./shear2]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;0 0 0 -0.5 -0.5 -0.5&#x27;
    tensor_name = shear2
  [../]
  [./expand3]
    type = GenericConstantRankTwoTensor
    tensor_values = &#x27;1 1 1 0 0 0&#x27;
    tensor_name = expand3
  [../]

  [./weight1]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*c^2&#x27;
    f_name = weight1
    args = c
  [../]
  [./weight2]
    type = DerivativeParsedMaterial
    function = &#x27;0.3*(1-c)^2&#x27;
    f_name = weight2
    args = c
  [../]
  [./weight3]
    type = DerivativeParsedMaterial
    function = &#x27;4*(0.5-c)^2&#x27;
    f_name = weight3
    args = c
  [../]

  [./elasticity_tensor]
    type = ComputeElasticityTensor
    C_ijkl = &#x27;1 1&#x27;
    fill_method = symmetric_isotropic
  [../]
  [./strain]
    type = ComputeSmallStrain
    global_strain = global_strain
    eigenstrain_names = eigenstrain
  [../]

  [./eigenstrain]
    type = CompositeEigenstrain
    tensors = &#x27;shear1  shear2  expand3&#x27;
    weights = &#x27;weight1 weight2 weight3&#x27;
    args = c
    eigenstrain_name = eigenstrain
  [../]

  [./global_strain]
    type = ComputeGlobalStrain
    scalar_global_strain = global_strain
    global_strain_uo = global_strain_uo
  [../]

  [./stress]
    type = ComputeLinearElasticStress
  [../]

  # chemical free energies
  [./chemical_free_energy]
    type = DerivativeParsedMaterial
    f_name = Fc
    function = &#x27;4*c^2*(1-c)^2&#x27;
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fc
  [../]

  # elastic free energies
  [./elastic_free_energy]
    type = ElasticEnergyMaterial
    f_name = Fe
    args = &#x27;c&#x27;
    outputs = exodus
    output_properties = Fe
  [../]

  # free energy (chemical + elastic)
  [./free_energy]
    type = DerivativeSumMaterial
    block = 0
    f_name = F
    sum_materials = &#x27;Fc Fe&#x27;
    args = &#x27;c&#x27;
  [../]
[]

[UserObjects]
  [./global_strain_uo]
    type = GlobalStrainUserObject
    execute_on = &#x27;Initial Linear Nonlinear&#x27;
  [../]
[]

[Postprocessors]
  [./total_free_energy]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = local_energy
  [../]
  [./total_solute]
    type = ElementIntegralVariablePostprocessor
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    variable = c
  [../]
  [./min]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = min
    variable = c
  [../]
  [./max]
    type = ElementExtremeValue
    execute_on = &#x27;initial TIMESTEP_END&#x27;
    value_type = max
    variable = c
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient
  scheme = bdf2
  solve_type = &#x27;PJFNK&#x27;

  line_search = basic

  petsc_options_iname = &#x27;-pc_type -ksp_gmres_restart -sub_ksp_type -sub_pc_type -pc_asm_overlap&#x27;
  petsc_options_value = &#x27;asm         31   preonly   lu      1&#x27;

  l_max_its = 30
  nl_max_its = 12

  l_tol = 1.0e-4

  nl_rel_tol = 1.0e-8
  nl_abs_tol = 1.0e-10

  start_time = 0.0
  end_time = 2.0

  [./TimeStepper]
    type = IterationAdaptiveDT
    dt = 0.01
    growth_factor = 1.5
    cutback_factor = 0.8
    optimal_iterations = 9
    iteration_window = 2
  [../]
[]

[Outputs]
  execute_on = &#x27;timestep_end&#x27;
  print_linear_residuals = false
  exodus = true
  [./table]
    type = CSV
    delimiter = &#x27; &#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="8663fe75-945e-4fdf-8feb-d8fd362c31f8"><div class="modal-content"><h4>modules/stochastic_tools/examples/parameter_study/nonlin_diff_react/nonlin_diff_react_sub.i</h4><pre class="moose-pre"><code class="language-text">[Functions]
  [source]
    type = ParsedFunction
    value = &quot;100 * sin(2 * pi * x) * sin(2 * pi * y)&quot;
  []
[]

[Mesh]
  [gen]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 50
    xmin = 0
    xmax = 1
    ny = 50
    ymin = 0
    ymax = 1
  []
[]

[Variables]
  [U]
    family = lagrange
    order = first
  []
[]

[Kernels]
  [diffusion]
    type = Diffusion
    variable = U
  []
  [nonlin_function]
    type = ExponentialReaction
    variable = U
    mu1 = 0.3
    mu2 = 9
  []
  [source]
    type = BodyForce
    variable = U
    function = source
  []
[]

[BCs]
  [dirichlet_all]
    type = DirichletBC
    variable = U
    boundary = &#x27;left right top bottom&#x27;
    value = 0
  []
[]

[Executioner]
  type = Steady
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Postprocessors]
  [max]
    type = ElementExtremeValue
    variable = U
  []
  [min]
    type = ElementExtremeValue
    variable = U
    value_type = min
  []
  [average]
    type = ElementAverageValue
    variable = U
  []
[]

[Controls]
  [stochastic]
    type = SamplerReceiver
  []
[]

[Outputs]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="490594ed-d24b-4896-abd0-784166378b83"><div class="modal-content"><h4>test/tests/outputs/postprocessor_final/execute_pps_on_final.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.1
  [../]
  [./time]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./pp1]
    type = ElementAverageValue
    variable = u
  [../]

  [./pp2]
    type = ElementExtremeValue
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  num_steps = 20
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Outputs]
  [./out]
    type = CSV
    execute_postprocessors_on = final
    show = &#x27;pp1&#x27;
  [../]
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1cffc409-aa61-48c8-83e5-624b5e414212"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_fir/finite.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD4
order = FIRST
name = &#x27;finite&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="090b1095-5f8c-4732-a50b-253b6e7efc3c"><div class="modal-content"><h4>modules/contact/test/tests/mortar_tm/2d/ad_frictionless_sec/finite_rr.i</h4><pre class="moose-pre"><code class="language-text">E_block = 1e7
E_plank = 1e7
elem = QUAD9
order = SECOND
name = &#x27;finite_rr&#x27;

[Mesh]
  patch_size = 80
  patch_update_strategy = auto
  [./plank]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = -0.3
    xmax = 0.3
    ymin = -10
    ymax = 10
    nx = 2
    ny = 67
    elem_type = ${elem}
    boundary_name_prefix = plank
  [../]
  [./plank_id]
    type = SubdomainIDGenerator
    input = plank
    subdomain_id = 1
  [../]

  [./block]
    type = GeneratedMeshGenerator
    dim = 2
    xmin = 0.31
    xmax = 0.91
    ymin = 7.7
    ymax = 8.5
    nx = 3
    ny = 4
    elem_type = ${elem}
    boundary_name_prefix = block
    boundary_id_offset = 10
  [../]
  [./block_id]
    type = SubdomainIDGenerator
    input = block
    subdomain_id = 2
  [../]

  [./combined]
    type = MeshCollectionGenerator
    inputs = &#x27;plank_id block_id&#x27;
  [../]
  [./block_rename]
    type = RenameBlockGenerator
    input = combined
    old_block_id = &#x27;1 2&#x27;
    new_block_name = &#x27;plank block&#x27;
  [../]
[]

[GlobalParams]
  displacements = &#x27;disp_x disp_y&#x27;
[]

[Problem]
  type = ReferenceResidualProblem
  extra_tag_vectors = &#x27;ref&#x27;
  reference_vector = &#x27;ref&#x27;
[]

[Variables]
  [./disp_x]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
  [./disp_y]
    order = ${order}
    block = &#x27;plank block&#x27;
    scaling = ${fparse 2.0 / (E_plank + E_block)}
  [../]
[]

[Modules/TensorMechanics/Master]
  [./action]
    strain = FINITE
    generate_output = &#x27;stress_xx stress_yy stress_zz vonmises_stress hydrostatic_stress strain_xx strain_yy strain_zz&#x27;
    block = &#x27;plank block&#x27;
    extra_vector_tags = &#x27;ref&#x27;
    use_automatic_differentiation = true
  [../]
[]

[Contact]
  [./frictionless]
    mesh = block_rename
    primary = plank_right
    secondary = block_left
    formulation = mortar
  [../]
[]

[BCs]
  [./left_x]
    type = DirichletBC
    variable = disp_x
    preset = false
    boundary = plank_left
    value = 0.0
  [../]
  [./left_y]
    type = DirichletBC
    variable = disp_y
    preset = false
    boundary = plank_bottom
    value = 0.0
  [../]
  [./right_x]
    type = ADFunctionDirichletBC
    variable = disp_x
    preset = false
    boundary = block_right
    function = &#x27;-0.04*sin(4*(t+1.5))+0.02&#x27;
  [../]
  [./right_y]
    type = ADFunctionDirichletBC
    variable = disp_y
    preset = false
    boundary = block_right
    function = &#x27;-t&#x27;
  [../]
[]

[Materials]
  [./plank]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;plank&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_plank}
  [../]
  [./block]
    type = ADComputeIsotropicElasticityTensor
    block = &#x27;block&#x27;
    poissons_ratio = 0.3
    youngs_modulus = ${E_block}
  [../]
  [./stress]
    type = ADComputeFiniteStrainElasticStress
    block = &#x27;plank block&#x27;
  [../]
[]

[Executioner]
  type = Transient
  solve_type = &#x27;NEWTON&#x27;
  petsc_options = &#x27;-snes_converged_reason -ksp_converged_reason&#x27;
  petsc_options_iname = &#x27;-pc_type -mat_mffd_err -pc_factor_shift_type -pc_factor_shift_amount&#x27;
  petsc_options_value = &#x27;lu       1e-5          NONZERO               1e-15&#x27;
  end_time = 13.5
  dt = 0.1
  dtmin = 0.1
  timestep_tolerance = 1e-6
  line_search = &#x27;contact&#x27;
  nl_abs_tol = 1e-7
[]

[Postprocessors]
  [./nl_its]
    type = NumNonlinearIterations
  [../]
  [./total_nl_its]
    type = CumulativeValuePostprocessor
    postprocessor = nl_its
  [../]
  [./l_its]
    type = NumLinearIterations
  [../]
  [./total_l_its]
    type = CumulativeValuePostprocessor
    postprocessor = l_its
  [../]
  [./contact]
    type = ContactDOFSetSize
    variable = frictionless_normal_lm
    subdomain = frictionless_secondary_subdomain
  [../]
  [./avg_hydro]
    type = ElementAverageValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./max_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
  [../]
  [./min_hydro]
    type = ElementExtremeValue
    variable = hydrostatic_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
  [./avg_vonmises]
    type = ElementAverageValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./max_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
  [../]
  [./min_vonmises]
    type = ElementExtremeValue
    variable = vonmises_stress
    block = &#x27;block&#x27;
    value_type = min
  [../]
[]

[Outputs]
  exodus = true
  file_base = ${name}
  [./comp]
    type = CSV
    show = &#x27;contact&#x27;
  [../]
  [./out]
    type = CSV
    file_base = &#x27;${name}_out&#x27;
  [../]
[]

[Debug]
  show_var_residual_norms = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7d94d264-b9e7-4220-a0be-0a9d4b3d0a72"><div class="modal-content"><h4>test/tests/restart/restart_transient_from_steady/restart_trans_with_2subs.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
  parallel_type = &#x27;replicated&#x27;
[]

[Problem]
  restart_file_base = steady_with_2subs_out_cp/LATEST
  skip_additional_restart_data = true
[]

[AuxVariables]
  [Tf]
  []
[]

[Variables]
  [power_density]
  []
[]

[Functions]
  [pwr_func]
    type = ParsedFunction
    value = &#x27;1e3*x*(1-x)+5e2&#x27; # increase this function to drive transient
  []
[]

[Kernels]
  [timedt]
    type = TimeDerivative
    variable = power_density
  []

  [diff]
    type = Diffusion
    variable = power_density
  []

  [coupledforce]
    type = BodyForce
    variable = power_density
    function = pwr_func
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = power_density
    boundary = left
    value = 50
  []
  [right]
    type = DirichletBC
    variable = power_density
    boundary = right
    value = 1e3
  []
[]

[Postprocessors]
  [pwr_avg]
    type = ElementAverageValue
    block = &#x27;0&#x27;
    variable = power_density
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_avg]
    type = ElementAverageValue
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_max]
    type = ElementExtremeValue
    value_type = max
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
  [temp_min]
    type = ElementExtremeValue
    value_type = min
    variable = Tf
    block = &#x27;0&#x27;
    execute_on = &#x27;initial timestep_end&#x27;
  []
[]

[Executioner]
  type = Transient
  start_time = 0
  end_time = 3
  dt = 1.0

  petsc_options_iname = &#x27;-pc_type -pc_hypre_type -ksp_gmres_restart &#x27;
  petsc_options_value = &#x27;hypre boomeramg 100&#x27;

  nl_abs_tol = 1e-8
  nl_rel_tol = 1e-7

  picard_rel_tol = 1e-7
  picard_abs_tol = 1e-07
  picard_max_its = 4

  line_search = none
[]

[MultiApps]
  [./sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = &#x27;0   0 0
                 0.5 0 0&#x27;
    input_files  = restart_trans_with_sub_sub.i
    execute_on = &#x27;timestep_end&#x27;
  [../]
[]

[Transfers]
  [p_to_sub]
    type = MultiAppProjectionTransfer
    direction = to_multiapp
    source_variable = power_density
    variable = power_density
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
  [t_from_sub]
    type = MultiAppInterpolationTransfer
    direction = from_multiapp
    source_variable = temp
    variable = Tf
    multi_app = sub
    execute_on = &#x27;timestep_end&#x27;
  []
[]

[Outputs]
  exodus = true
  csv = true
  perf_graph = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#f8db6657-2e18-483e-b35a-9d39e1b49686" class="tooltipped" data-position="left" data-tooltip="Example Input File Syntax">Example Input File Syntax</a></li><li><a href="#0868ad05-50d1-4a4f-81a1-7e60651eea34" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#85031c22-b326-49b3-a13b-589abf6b3f5f" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>