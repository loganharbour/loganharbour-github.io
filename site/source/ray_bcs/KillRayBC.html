<!DOCTYPE html><head><meta charset="UTF-8"><title>KillRayBC.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="c0f8895b-5734-48e6-a859-e99af814a280"><i class="material-icons">menu</i></a><ul class="sidenav" id="c0f8895b-5734-48e6-a859-e99af814a280"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">ray_bcs</span><a href="#" class="breadcrumb">KillRayBC</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="ae7dc112-8b0c-497a-86e2-1dca16082cec" data-section-level="1" data-section-text="KillRayBC"><h1 id="killraybc">KillRayBC</h1><section class="scrollspy" id="0185e2db-8e2d-4936-824d-63c5e01b723b" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p><code>KillRayBC</code> is a <a href="../../syntax/RayBCs/index.html">RayBCs</a> that sets a <a href="../ray_tracing/Ray.html">Ray</a> that is being traced to be killed on a boundary.</p><p>This is accomplished by setting the Ray to not be continued:</p><pre class="moose-pre"><code class="language-cpp">void
KillRayBC::onBoundary(const unsigned int /* num_applying */)
{
  // After RayBCs are completed, ray-&gt;shouldContinue() is checked and this will kill the Ray
  currentRay()-&gt;setShouldContinue(false);
}
</code></pre><a href="#e85b249b-3339-4bef-811f-56fa50a4bf82" class="modal-trigger">(modules/ray_tracing/src/ray_bcs/KillRayBC.C)</a><div class="modal moose-modal" id="e85b249b-3339-4bef-811f-56fa50a4bf82"><div class="modal-content"><h4>/Users/harblh/projects/moc/private_moose/modules/ray_tracing/src/ray_bcs/KillRayBC.C</h4><pre class="moose-pre"><code class="language-cpp">// This file is part of the MOOSE framework
// https://www.mooseframework.org
//
// All rights reserved, see COPYRIGHT for full restrictions
// https://github.com/idaholab/moose/blob/master/COPYRIGHT
//
// Licensed under LGPL 2.1, please see LICENSE for details
// https://www.gnu.org/licenses/lgpl-2.1.html

#include &quot;KillRayBC.h&quot;

registerMooseObject(&quot;RayTracingApp&quot;, KillRayBC);

InputParameters
KillRayBC::validParams()
{
  auto params = GeneralRayBC::validParams();
  params.addClassDescription(&quot;A RayBC that kills a Ray on a boundary.&quot;);
  return params;
}

KillRayBC::KillRayBC(const InputParameters &amp; params) : GeneralRayBC(params) {}

void
KillRayBC::onBoundary(const unsigned int /* num_applying */)
{
  // After RayBCs are completed, ray-&gt;shouldContinue() is checked and this will kill the Ray
  currentRay()-&gt;setShouldContinue(false);
}
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section><section class="scrollspy" id="cb01d9f3-238b-468b-bfcd-0215ea4a8b1c" data-section-level="2" data-section-text="Input Parameters"><h2 id="input-parameters">Input Parameters</h2><section id="abfebbaa-a213-4004-a574-1493b67a6a61" data-section-level="3" data-section-text="Required Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">boundary</span><span class="moose-parameter-header-description">The list of boundary IDs from the mesh where this boundary condition applies</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<BoundaryName></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The list of boundary IDs from the mesh where this boundary condition applies</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Required Parameters</h3></summary></details></section><section id="4356f426-7d7d-468c-a4d5-24bb4d2509d5" data-section-level="3" data-section-text="Optional Parameters" data-details-open="open"><details class="moose-section-content" open="open"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">depends_on</span><span class="moose-parameter-header-description">Other RayBCs that this RayBC depends on</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Other RayBCs that this RayBC depends on</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">rays</span><span class="moose-parameter-header-description">The name of the Rays associated with this object (only used if Ray registration is enabled within the study)</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The name of the Rays associated with this object (only used if Ray registration is enabled within the study)</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">study</span><span class="moose-parameter-header-description">The RayTracingStudy associated with this object. If none provided, this will default to the one study that exists.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>UserObjectName</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>The RayTracingStudy associated with this object. If none provided, this will default to the one study that exists.</p></div></li></ul><summary><h3 data-details-open="open"><span class="moose-section-icon"></span>Optional Parameters</h3></summary></details></section><section id="8f503224-f9be-4e74-845e-4644ad3170de" data-section-level="3" data-section-text="Advanced Parameters" data-details-open="close"><details class="moose-section-content"><ul class="collapsible" data-collapsible="expandable"><li><div class="collapsible-header"><span class="moose-parameter-name">control_tags</span><span class="moose-parameter-header-description">Adds user-defined labels for accessing object parameters via control logic.</span></div><div class="collapsible-body"><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>std::vector<std::string></p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Adds user-defined labels for accessing object parameters via control logic.</p></div></li><li><div class="collapsible-header"><span class="moose-parameter-name">enable</span><span class="moose-parameter-header-default">True</span><span class="moose-parameter-header-description">Set the enabled status of the MooseObject.</span></div><div class="collapsible-body"><p class="moose-parameter-description-default"><span>Default:</span>True</p><p class="moose-parameter-description-cpptype"><span>C++ Type:</span>bool</p><p class="moose-parameter-description-options"><span>Options:</span></p><p class="moose-parameter-description"><span>Description:</span>Set the enabled status of the MooseObject.</p></div></li></ul><summary><h3 data-details-open="close"><span class="moose-section-icon"></span>Advanced Parameters</h3></summary></details></section></section><section class="scrollspy" id="78053d89-a607-42e6-ae5a-00430e958309" data-section-level="2" data-section-text="Input Files"><h2 id="input-files">Input Files</h2><ul class="moose-list-inputs browser-default"><li><a href="#ba3f12a0-7bec-4363-ab3e-46af4f7e50fd" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/ray_tracing_study/kernel_change_ray/kernel_change_ray.i</a></li><li><a href="#e21d9e57-756e-47a9-b714-86ead5119851" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/ray_tracing_study/lots.i</a></li><li><a href="#7d9c5c0a-7284-4982-bce0-c78d5192ef75" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_1d.i</a></li><li><a href="#f06e6d44-ebce-4697-b322-6ae52c1f0da9" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/repeatable_ray_study/max_distance.i</a></li><li><a href="#267011db-3b7c-4949-8193-74f67f99812d" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_3d.i</a></li><li><a href="#9de2b69b-080d-43f4-82ae-c85fe5a26660" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/ray_tracing_study/ray_data/ray_data.i</a></li><li><a href="#47a353c3-3210-4963-a661-dbb704506c6c" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/ray_tracing_study/bc_create_ray/bc_create_ray.i</a></li><li><a href="#0d679b77-6105-4ee9-9060-f9d09efdd09b" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_1d.i</a></li><li><a href="#befe7964-b6f5-42c5-b4b9-0a63469db6dc" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/lots.i</a></li><li><a href="#5496f9ca-9adb-4e79-aa92-1743bd0e9ba6" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_2d.i</a></li><li><a href="#5a83ceb7-c067-4cc6-b56d-1d9646a36299" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_3d.i</a></li><li><a href="#15105b1c-cdc3-49b5-bbaa-87ae7be1cba0" class="modal-trigger">modules/ray_tracing/test/tests/vector_postprocessors/per_processor_ray_tracing_results_vector_postprocessor/per_processor_ray_tracing_results_vector_postprocessor.i</a></li><li><a href="#7ebd6029-b641-42fc-a75d-8878123aefe9" class="modal-trigger">modules/ray_tracing/test/tests/userobjects/ray_tracing_study/kernel_create_ray/kernel_create_ray.i</a></li><li><a href="#1d6c79a4-94a2-41a0-b742-da34f197c251" class="modal-trigger">modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_2d.i</a></li></ul><div class="modal moose-modal" id="ba3f12a0-7bec-4363-ab3e-46af4f7e50fd"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/ray_tracing_study/kernel_change_ray/kernel_change_ray.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmax = 5
    ymax = 5
  []
[]

[Variables/phase]
  [InitialCondition]
    type = FunctionIC
    variable = field
    function = &#x27;(x &gt; 2.99) * 1.0&#x27;
  []
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;top right bottom left&#x27;
[]

[RayKernels/test]
  type = RefractionRayKernelTest
  field = phase
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = false
  execute_on = initial
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  study = lots
  result = total_distance
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="e21d9e57-756e-47a9-b714-86ead5119851"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/ray_tracing_study/lots.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 4
    ny = 4
  []
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false # no need for RayKernels
  execute_on = initial
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;top left right bottom&#x27;
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  study = lots
  result = total_distance
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  csv = true
  exodus = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7d9c5c0a-7284-4982-bce0-c78d5192ef75"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_1d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 1
    xmax = 6
    nx = 6
  []

  [central_block]
    type = SubdomainBoundingBoxGenerator
    input = gmg
    block_id = 1
    bottom_left = &#x27;2 0 0&#x27;
    top_right = &#x27;4 0 0&#x27;
  []

  [central_boundary]
    type = SideSetsBetweenSubdomainsGenerator
    input = central_block
    master_block = 1
    paired_block = 0
    new_boundary = 7
  []
[]

[RayBCs]
  active = &#x27;kill_internal&#x27;
  # active = &#x27;kill_external reflect_internal&#x27;

  # for testing internal kill
  [kill_internal]
    type = KillRayBC
    boundary = 7
    rays = &#x27;left_in at_left right_in at_right inside_left&#x27;
  []

  # for testing internal reflect
  [kill_external]
    type = KillRayBC
    boundary = &#x27;left right&#x27;
    rays = &#x27;left_in at_left right_in at_right inside_left&#x27;
  []
  [reflect_internal]
    type = ReflectRayBC
    boundary = 7
    rays = &#x27;left_in at_left right_in at_right inside_left&#x27;
  []
[]

[UserObjects/study]
  type = RepeatableRayStudy
  start_points = &#x27;0 0 0
                  2 0 0
                  6 0 0
                  4 0 0
                  3 0 0&#x27;
  directions = &#x27;1 0 0
                1 0 0
                -1 0 0
                -1 0 0
                -1 0 0&#x27;
  names = &#x27;left_in at_left right_in at_right inside_left&#x27;
  ray_distance = 10
  execute_on = initial
  ray_kernel_coverage_check = false
  use_internal_sidesets = true
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  study = study
  result = total_distance
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="f06e6d44-ebce-4697-b322-6ae52c1f0da9"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/repeatable_ray_study/max_distance.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmax = 5
    ymax = 5
  []
[]

# to_right_distance_kill - makes it to the right boundary at (5, 0)
#   and dies due to max distance (doesn&#x27;t call RayBCs)
# to_right_bc_kill - makes it to right boundary at (5, 0); is still
#   0.1 from its max distance so calls &#x27;kill_right&#x27; RayBC which
#   kills it
# to_top_corner - makes it to the top right corner at (5, 5);
#   reflects with direction (-1, -1) and stops once its distance
#   hits 7.0
# reflect_a_lot - reflects a bunch with the RayBC &#x27;reflect_all&#x27;
#   until it gets to a distance of 50 and dies
[UserObjects/study]
  type = RepeatableRayStudy
  start_points = &#x27;0 0 0
                  0 0 0
                  0 0 0
                  0.1 0.2 0&#x27;
  directions = &#x27;1 0 0
                1 0 0
                1 1 0
                1 0.5 0&#x27;
  max_distances = &#x27;5
                   5.1
                   7.0
                   50&#x27;
  names = &#x27;to_right_distance_kill
           to_right_bc_kill
           to_top_corner
           reflect_a_lot&#x27;
[]

[RayKernels/null]
  type = NullRayKernel
  rays = &#x27;to_right_distance_kill
          to_right_bc_kill
          to_top_corner
          reflect_a_lot&#x27;
[]

[RayBCs]
  [kill_right]
    type = KillRayBC
    boundary = right
    rays = &#x27;to_right_bc_kill&#x27;
  []
  [reflect_top_right]
    type = ReflectRayBC
    boundary = &#x27;top right&#x27;
    rays = &#x27;to_top_corner&#x27;
  []
  [reflect_all]
    type = ReflectRayBC
    boundary = &#x27;top right bottom left&#x27;
    rays = &#x27;reflect_a_lot&#x27;
  []
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  result = &#x27;total_distance&#x27;
  study = study
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Steady
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="267011db-3b7c-4949-8193-74f67f99812d"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [cmg]
    type = CartesianMeshGenerator
    dim = 3
    dx = &#x27;2 2 2&#x27;
    dy = &#x27;2 2 2&#x27;
    dz = &#x27;2 2 2&#x27;
    ix = &#x27;2 2 2&#x27;
    iy = &#x27;2 2 2&#x27;
    iz = &#x27;2 2 2&#x27;
    subdomain_id = &#x27;0 0 0
                    0 1 0
                    0 0 0

                    0 2 0
                    3 7 4
                    0 5 0

                    0 0 0
                    0 6 0
                    0 0 0&#x27;
  []

  [interior_back]
    type = SideSetsBetweenSubdomainsGenerator
    input = cmg
    master_block = 7
    paired_block = 1
    new_boundary = &#x27;interior_back&#x27;
  []
  [interior_bottom]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_back
    master_block = 7
    paired_block = 2
    new_boundary = &#x27;interior_bottom&#x27;
  []
  [interior_left]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_bottom
    master_block = 7
    paired_block = 3
    new_boundary = &#x27;interior_left&#x27;
  []
  [interior_right]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_left
    master_block = 7
    paired_block = 4
    new_boundary = &#x27;interior_right&#x27;
  []
  [interior_top]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_right
    master_block = 7
    paired_block = 5
    new_boundary = &#x27;interior_top&#x27;
  []
  [interior_front]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_top
    master_block = 7
    paired_block = 6
    new_boundary = &#x27;interior_front&#x27;
  []
[]

[RayBCs]
  active = &#x27;kill_internal&#x27;
  # active = &#x27;kill_external reflect_internal&#x27;

  # for testing internal kill
  [kill_internal]
    type = KillRayBC
    boundary = &#x27;interior_top interior_right interior_bottom interior_left interior_front interior_back&#x27;
    rays = &#x27;to_bottom_left_corner
            at_bottom_left_corner
            to_top_right_corner
            at_top_right_corner
            centroid_offset
            top_down
            left_to_edge
            inside_to_corner
            inside_offset&#x27;
  []

  # for testing internal reflect
  [kill_external]
    type = KillRayBC
    boundary = &#x27;top right bottom left front back&#x27;
    rays = &#x27;to_bottom_left_corner
            at_bottom_left_corner
            to_top_right_corner
            at_top_right_corner
            centroid_offset
            top_down
            left_to_edge
            inside_to_corner
            inside_offset&#x27;
  []
  [reflect_internal]
    type = ReflectRayBC
    boundary = &#x27;interior_top interior_right interior_bottom interior_left interior_front interior_back&#x27;
    rays = &#x27;to_bottom_left_corner
            at_bottom_left_corner
            to_top_right_corner
            at_top_right_corner
            centroid_offset
            top_down
            left_to_edge
            inside_to_corner
            inside_offset&#x27;
  []
[]

[UserObjects/study]
  type = RepeatableRayStudy
  start_points = &#x27;0 0 0
                  2 2 2
                  6 6 6
                  4 4 4
                  0 2.5 2.5
                  3 3 6
                  2.5 0 0
                  3 3 3
                  2.5 2.5 2.5&#x27;
  directions = &#x27;1 1 1
                1 1 1
                -1 -1 -1
                -1 -1 -1
                1 0.1 0
                0 0 -1
                0 1 1
                1 1 1
                0.5 1.5 1.5&#x27;
  names = &#x27;to_bottom_left_corner
           at_bottom_left_corner
           to_top_right_corner
           at_top_right_corner
           centroid_offset
           top_down
           left_to_edge
           inside_to_corner
           inside_offset&#x27;
  execute_on = initial
  ray_distance = 10
  ray_kernel_coverage_check = false
  use_internal_sidesets = true
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  study = study
  result = total_distance
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="9de2b69b-080d-43f4-82ae-c85fe5a26660"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/ray_tracing_study/ray_data/ray_data.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    xmax = 5
    ymax = 5
  []
[]

[RayBCs]
  [kill1]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
    study = test1
  []
  [kill2]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
    study = test2
  []
  [kill3]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
    study = test3
  []
  [kill4]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
    study = test4
  []
[]

[RayKernels]
  [data1]
    type = TestRayDataRayKernel
    study = test1
  []
  [data2]
    type = TestRayDataRayKernel
    study = test2
  []
  [data3]
    type = TestRayDataRayKernel
    study = test3
  []
  [data4]
    type = TestRayDataRayKernel
    study = test4
  []
[]

[UserObjects]
  [test1]
    type = TestRayDataStudy
    execute_on = initial

    vertex_to_vertex = true
    centroid_to_vertex = true
    centroid_to_centroid = true

    data_size = 1
    aux_data_size = 2
  []
  [test2]
    type = TestRayDataStudy
    execute_on = initial

    vertex_to_vertex = true
    centroid_to_vertex = true
    centroid_to_centroid = true

    data_size = 2
    aux_data_size = 3
  []
  [test3]
    type = TestRayDataStudy
    execute_on = initial

    vertex_to_vertex = true
    centroid_to_vertex = true
    centroid_to_centroid = true

    data_size = 3
    aux_data_size = 4
  []
  [test4]
    type = TestRayDataStudy
    execute_on = initial

    vertex_to_vertex = true
    centroid_to_vertex = true
    centroid_to_centroid = true

    data_size = 4
    aux_data_size = 6
  []
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="47a353c3-3210-4963-a661-dbb704506c6c"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/ray_tracing_study/bc_create_ray/bc_create_ray.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  active = gmg_2d
  [gmg_2d]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 3
    ny = 3
    xmax = 3
    ymax = 3
  []
  [gmg_3d]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 3
    ny = 3
    nz = 3
    xmax = 3
    ymax = 3
    zmax = 3
  []
[]

[RayBCs]
  active = &#x27;kill_2d create_2d&#x27;

  [kill_2d]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
  []
  [create_2d]
    type = CreateRayRayBCTest
    boundary = &#x27;top right bottom left&#x27;
  []

  [kill_3d]
    type = KillRayBC
    boundary = &#x27;top right bottom left front back&#x27;
  []
  [create_3d]
    type = CreateRayRayBCTest
    boundary = &#x27;top right bottom left front back&#x27;
  []
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  execute_on = initial

  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = true

  allow_addition_during_execution = true
  ray_kernel_coverage_check = false
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = lots
    result = total_distance
  []
  [total_rays_started]
    type = RayTracingStudyResult
    study = lots
    result = total_rays_started
  []
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="0d679b77-6105-4ee9-9060-f9d09efdd09b"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_1d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 1
    nx = 2
  []
[]

[Variables/u]
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[Executioner]
  type = Transient
  num_steps = 3
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Adaptivity]
  steps = 1
  marker = marker
  initial_marker = marker
  max_h_level = 2
  [Indicators/indicator]
    type = GradientJumpIndicator
    variable = u
  []
  [Markers/marker]
    type = ErrorFractionMarker
    indicator = indicator
    coarsen = 0.1
    refine = 0.1
  []
[]

[UserObjects/study]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false
  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = true
  execute_on = timestep_end
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;left right&#x27;
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = study
    result = total_distance
    execute_on = timestep_end
  []
  [total_rays]
    type = RayTracingStudyResult
    study = study
    result = total_rays_started
    execute_on = timestep_end
  []
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="befe7964-b6f5-42c5-b4b9-0a63469db6dc"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/lots.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 5
    nz = 5
    xmax = 5
    ymax = 5
    zmax = 5
  []
[]

[RayBCs]
  active = &#x27;kill_2d&#x27;
  [kill_1d]
    type = KillRayBC
    boundary = &#x27;left right&#x27;
  []
  [kill_2d]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
  []
  [kill_3d]
    type = KillRayBC
    boundary = &#x27;top right bottom left front back&#x27;
  []
[]

# Add a dummy RayKernel to enable additional error
# checking before onSegment() is called
[RayKernels/null]
  type = NullRayKernel
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false
  vertex_to_vertex = false
  centroid_to_vertex = false
  centroid_to_centroid = false
  compute_expected_distance = true
  execute_on = initial
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = lots
    result = total_distance
  []
  [expected_distance]
    type = LotsOfRaysExpectedDistance
    lots_of_rays_study = lots
  []
  [distance_difference]
    type = DifferencePostprocessor
    value1 = total_distance
    value2 = expected_distance
  []
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5496f9ca-9adb-4e79-aa92-1743bd0e9ba6"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/internal_sidesets/internal_sidesets_2d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [cmg]
    type = CartesianMeshGenerator
    dim = 2
    dx = &#x27;2 2 2&#x27;
    dy = &#x27;2 2 2&#x27;
    ix = &#x27;2 2 2&#x27;
    iy = &#x27;2 2 2&#x27;
    subdomain_id = &#x27;0 1 0
                    2 5 3
                    0 4 0&#x27;
  []

  [interior_bottom]
    type = SideSetsBetweenSubdomainsGenerator
    input = cmg
    master_block = 5
    paired_block = 1
    new_boundary = &#x27;interior_bottom&#x27;
  []
  [interior_left]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_bottom
    master_block = 5
    paired_block = 2
    new_boundary = &#x27;interior_left&#x27;
  []
  [interior_right]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_left
    master_block = 5
    paired_block = 3
    new_boundary = &#x27;interior_right&#x27;
  []
  [interior_top]
    type = SideSetsBetweenSubdomainsGenerator
    input = interior_right
    master_block = 5
    paired_block = 4
    new_boundary = &#x27;interior_top&#x27;
  []
[]

[RayBCs]
  active = &#x27;kill_internal&#x27;
  # active = &#x27;kill_external reflect_internal&#x27;

  # for testing internal kill
  [kill_internal]
    type = KillRayBC
    boundary = &#x27;interior_top interior_right interior_bottom interior_left&#x27;
    rays = &#x27;to_bottom_left_corner
            at_top_left_corner
            to_top_right_corner
            to_left_offset
            to_top_center_node
            inside_to_top&#x27;
  []

  # for testing internal reflect
  [kill_external]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
    rays = &#x27;to_bottom_left_corner
            at_top_left_corner
            to_top_right_corner
            to_left_offset
            to_top_center_node
            inside_to_top&#x27;
  []
  [reflect_internal]
    type = ReflectRayBC
    boundary = &#x27;interior_top interior_right interior_bottom interior_left&#x27;
    rays = &#x27;to_bottom_left_corner
            at_top_left_corner
            to_top_right_corner
            to_left_offset
            to_top_center_node
            inside_to_top&#x27;
  []
[]

[UserObjects/study]
  type = RepeatableRayStudy
  start_points = &#x27;0 0 0
                  2 4 0
                  6 6 0
                  0 2.5 0
                  3 6 0
                  2.5 2.5 0&#x27;
  directions = &#x27;1 1 0
                1 -1 0
                -1 -1 0
                1 0.1 0
                0 -1 0
                0.5 1.5 0&#x27;
  names = &#x27;to_bottom_left_corner
           at_top_left_corner
           to_top_right_corner
           to_left_offset
           to_top_center_node
           inside_to_top&#x27;
  ray_distance = 10
  execute_on = initial
  ray_kernel_coverage_check = false
  use_internal_sidesets = true
[]

[Postprocessors/total_distance]
  type = RayTracingStudyResult
  study = study
  result = total_distance
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="5a83ceb7-c067-4cc6-b56d-1d9646a36299"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_3d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 2
    ny = 2
    nz = 2
  []
[]

[Variables/u]
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[Executioner]
  type = Transient
  num_steps = 3
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Adaptivity]
  steps = 1
  marker = marker
  initial_marker = marker
  max_h_level = 2
  [Indicators/indicator]
    type = GradientJumpIndicator
    variable = u
  []
  [Markers/marker]
    type = ErrorFractionMarker
    indicator = indicator
    coarsen = 0.1
    refine = 0.1
  []
[]

[UserObjects/study]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false
  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = true
  execute_on = timestep_end
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;top right bottom left front back&#x27;
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = study
    result = total_distance
    execute_on = timestep_end
  []
  [total_rays]
    type = RayTracingStudyResult
    study = study
    result = total_rays_started
    execute_on = timestep_end
  []
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="15105b1c-cdc3-49b5-bbaa-87ae7be1cba0"><div class="modal-content"><h4>modules/ray_tracing/test/tests/vector_postprocessors/per_processor_ray_tracing_results_vector_postprocessor/per_processor_ray_tracing_results_vector_postprocessor.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 5
    ny = 2
    xmax = 5
    ymax = 2
  []
[]

[AuxVariables]
  [rays_started]
    family = MONOMIAL
    order = CONSTANT
  []
  [rays_traced]
    family = MONOMIAL
    order = CONSTANT
  []
  [rays_received]
    family = MONOMIAL
    order = CONSTANT
  []
  [rays_sent]
    family = MONOMIAL
    order = CONSTANT
  []
  [intersections]
    family = MONOMIAL
    order = CONSTANT
  []
  [face_hit]
    family = MONOMIAL
    order = CONSTANT
  []
  [vertex_hit]
    family = MONOMIAL
    order = CONSTANT
  []
  [edge_hit]
    family = MONOMIAL
    order = CONSTANT
  []
  [moved_through_neighbors]
    family = MONOMIAL
    order = CONSTANT
  []
  [intersection_calls]
    family = MONOMIAL
    order = CONSTANT
  []
  [vertex_neighbor_lookups]
    family = MONOMIAL
    order = CONSTANT
  []
  [edge_neighbor_lookups]
    family = MONOMIAL
    order = CONSTANT
  []
  [point_neighbor_builds]
    family = MONOMIAL
    order = CONSTANT
  []
[]

# these results are not output because they cannot be golded against
# but we still make sure they work:
#
# generation_time propagation_time chunks_traced
# buffers_received buffers_sent ray_pool_created
# receive_ray_pool_created receive_buffer_pool_created

[AuxKernels]
  [rays_started]
    type = VectorPostprocessorVisualizationAux
    variable = rays_started
    vpp = per_proc_ray_tracing
    vector_name = rays_started
    execute_on = timestep_end
  []
  [rays_traced]
    type = VectorPostprocessorVisualizationAux
    variable = rays_traced
    vpp = per_proc_ray_tracing
    vector_name = rays_traced
    execute_on = timestep_end
  []
  [rays_received]
    type = VectorPostprocessorVisualizationAux
    variable = rays_received
    vpp = per_proc_ray_tracing
    vector_name = rays_received
    execute_on = timestep_end
  []
  [rays_sent]
    type = VectorPostprocessorVisualizationAux
    variable = rays_sent
    vpp = per_proc_ray_tracing
    vector_name = rays_sent
    execute_on = timestep_end
  []
  [intersections]
    type = VectorPostprocessorVisualizationAux
    variable = intersections
    vpp = per_proc_ray_tracing
    vector_name = intersections
    execute_on = timestep_end
  []
  [face_hit]
    type = VectorPostprocessorVisualizationAux
    variable = face_hit
    vpp = per_proc_ray_tracing
    vector_name = face_hit
    execute_on = timestep_end
  []
  [vertex_hit]
    type = VectorPostprocessorVisualizationAux
    variable = vertex_hit
    vpp = per_proc_ray_tracing
    vector_name = vertex_hit
    execute_on = timestep_end
  []
  [edge_hit]
    type = VectorPostprocessorVisualizationAux
    variable = edge_hit
    vpp = per_proc_ray_tracing
    vector_name = edge_hit
    execute_on = timestep_end
  []
  [moved_through_neighbors]
    type = VectorPostprocessorVisualizationAux
    variable = moved_through_neighbors
    vpp = per_proc_ray_tracing
    vector_name = moved_through_neighbors
    execute_on = timestep_end
  []
  [intersection_calls]
    type = VectorPostprocessorVisualizationAux
    variable = intersection_calls
    vpp = per_proc_ray_tracing
    vector_name = intersection_calls
    execute_on = timestep_end
  []
  [vertex_neighbor_lookups]
    type = VectorPostprocessorVisualizationAux
    variable = vertex_neighbor_lookups
    vpp = per_proc_ray_tracing
    vector_name = vertex_neighbor_lookups
    execute_on = timestep_end
  []
  [edge_neighbor_lookups]
    type = VectorPostprocessorVisualizationAux
    variable = edge_neighbor_lookups
    vpp = per_proc_ray_tracing
    vector_name = edge_neighbor_lookups
    execute_on = timestep_end
  []
  [point_neighbor_builds]
    type = VectorPostprocessorVisualizationAux
    variable = point_neighbor_builds
    vpp = per_proc_ray_tracing
    vector_name = point_neighbor_builds
    execute_on = timestep_end
  []
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false # no need for RayKernels
  execute_on = initial
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;top left right bottom&#x27;
[]

[VectorPostprocessors/per_proc_ray_tracing]
  type = PerProcessorRayTracingResultsVectorPostprocessor
  results = &#x27;rays_started rays_traced chunks_traced rays_received
             buffers_received rays_sent buffers_sent intersections
            generation_time propagation_time ray_pool_created receive_ray_pool_created
            receive_buffer_pool_created send_buffer_pool_created face_hit
            vertex_hit edge_hit
            moved_through_neighbors backface_culling_successes
            backface_culling_failures intersection_calls vertex_neighbor_builds
            vertex_neighbor_lookups edge_neighbor_builds edge_neighbor_lookups
            point_neighbor_builds&#x27;
  execute_on = timestep_end
  study = lots
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="7ebd6029-b641-42fc-a75d-8878123aefe9"><div class="modal-content"><h4>modules/ray_tracing/test/tests/userobjects/ray_tracing_study/kernel_create_ray/kernel_create_ray.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  active = gmg_2d
  [gmg_2d]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 3
    ny = 3
    xmax = 3
    ymax = 3
  []
  [gmg_3d]
    type = GeneratedMeshGenerator
    dim = 3
    nx = 3
    ny = 3
    nz = 3
    xmax = 3
    ymax = 3
    zmax = 3
  []
[]

[RayBCs]
  active = kill_2d
  [kill_2d]
    type = KillRayBC
    boundary = &#x27;top right bottom left&#x27;
  []
  [kill_3d]
    type = KillRayBC
    boundary = &#x27;top right bottom left front back&#x27;
  []
[]

[RayKernels/create_ray]
  type = CreateRayRayKernelTest
[]

[UserObjects/lots]
  type = LotsOfRaysRayStudy
  execute_on = initial

  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = true

  allow_addition_during_execution = true
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = lots
    result = total_distance
  []
  [total_rays_started]
    type = RayTracingStudyResult
    study = lots
    result = total_rays_started
  []
[]

[Executioner]
  type = Steady
[]

[Problem]
  solve = false
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div><div class="modal moose-modal" id="1d6c79a4-94a2-41a0-b742-da34f197c251"><div class="modal-content"><h4>modules/ray_tracing/test/tests/trace_ray/adaptivity/adaptivity_2d.i</h4><pre class="moose-pre"><code class="language-text">[Mesh]
  [gmg]
    type = GeneratedMeshGenerator
    dim = 2
    nx = 2
    ny = 2
  []
[]

[Variables/u]
[]

[Kernels]
  [diff]
    type = Diffusion
    variable = u
  []
  [time]
    type = TimeDerivative
    variable = u
  []
[]

[BCs]
  [left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  []
  [right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  []
[]

[Executioner]
  type = Transient
  num_steps = 3
  dt = 0.1
  solve_type = PJFNK
  petsc_options_iname = &#x27;-pc_type -pc_hypre_type&#x27;
  petsc_options_value = &#x27;hypre boomeramg&#x27;
[]

[Adaptivity]
  steps = 1
  marker = marker
  initial_marker = marker
  max_h_level = 2
  [Indicators/indicator]
    type = GradientJumpIndicator
    variable = u
  []
  [Markers/marker]
    type = ErrorFractionMarker
    indicator = indicator
    coarsen = 0.1
    refine = 0.1
  []
[]

[UserObjects/study]
  type = LotsOfRaysRayStudy
  ray_kernel_coverage_check = false
  vertex_to_vertex = true
  centroid_to_vertex = true
  centroid_to_centroid = true
  execute_on = timestep_end
[]

[RayBCs/kill]
  type = KillRayBC
  boundary = &#x27;top right bottom left&#x27;
[]

[Postprocessors]
  [total_distance]
    type = RayTracingStudyResult
    study = study
    result = total_distance
    execute_on = timestep_end
  []
  [total_rays]
    type = RayTracingStudyResult
    study = study
    result = total_rays_started
    execute_on = timestep_end
  []
[]

[Outputs]
  exodus = false
  csv = true
[]
</code></pre></div><div class="modal-footer"><a class="modal-close btn-flat">Close</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#0185e2db-8e2d-4936-824d-63c5e01b723b" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li><li><a href="#cb01d9f3-238b-468b-bfcd-0215ea4a8b1c" class="tooltipped" data-position="left" data-tooltip="Input Parameters">Input Parameters</a></li><li><a href="#78053d89-a607-42e6-ae5a-00430e958309" class="tooltipped" data-position="left" data-tooltip="Input Files">Input Files</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>