<!DOCTYPE html><head><meta charset="UTF-8"><title>ADRayKernel.md|MOOSE Ray Tracing Module</title><link href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet" media="screen,projection"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/alert_moose.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/katex_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/content_moose.css" type="text/css" rel="stylesheet"></link><link href="../../css/sqa_moose.css" type="text/css" rel="stylesheet"></link><script type="text/javascript" src="../../contrib/jquery/jquery.min.js"></script><script type="text/javascript" src="../../contrib/katex/katex.min.js"></script><script type="text/javascript" src="../../contrib/plotly/plotly.min.js"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="/modules/ray_tracing" class="left moose-logo hide-on-med-and-down">MOOSE Ray Tracing Module</a><a href="https://github.com/idaholab/moose" class="right"><img src="../../media/framework/github-logo.png" class="github-mark"></img><img src="../../media/framework/github-mark.png" class="github-logo"></img></a><ul class="right hide-on-med-and-down"></ul><a href="#" class="sidenav-trigger" data-target="da0c488c-fd25-46a0-89a0-bc1e66cb451b"><i class="material-icons">menu</i></a><ul class="sidenav" id="da0c488c-fd25-46a0-89a0-bc1e66cb451b"></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input type_="text" onkeyup="mooseSearch()" placeholder="/modules/ray_tracing" id="moose-search-box"></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href=".." class="breadcrumb">source</a><span class="breadcrumb">ray_kernels</span><a href="#" class="breadcrumb">ADRayKernel</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section id="af79fe98-5667-42e4-9fb9-543e7b455d84" data-section-level="1" data-section-text="ADRayKernel"><h1 id="adraykernel">ADRayKernel</h1><section class="scrollspy" id="dd7a0546-5bdd-4500-84c8-6ecf2d039f92" data-section-level="2" data-section-text="Description"><h2 id="description">Description</h2><p><code>ADRayKernel</code> is the base class for the objects that calculate residual vector contributions of non-linear scalar field variables that use <a href="../../automatic_differentiation/index.html">Automatic Differentiation</a> along a <a href="../ray_tracing/Ray.html">Ray</a>.</p><p>The use of a <code>RayKernel</code> is the same of a standard <a href="../../syntax/Kernels/index.html">Kernel</a>. In an <code>ADRayKernel</code> subclass the <code>computeQpResidual()</code> function must be overridden. This is where you implement your PDE weak form terms. </p><p>Inside your <code>ADRayKernel</code> class, you have access to several member variables for computing the residual:</p><ul class="browser-default"><li><p><code>_i</code>, <code>_j</code>: indices for the current test and trial shape functions respectively. </p></li><li><p><code>_qp</code>: current quadrature point index. </p></li><li><p><code>_u</code>, <code>_grad_u</code>: value and gradient of the variable this Kernel operates on; indexed by <code>_qp</code> (i.e. <code>_u[_qp]</code>). </p></li><li><p><code>_test</code>, <code>_grad_test</code>: value (<span tex="\psi" bookmark="moose-equation-e089197d-ef7e-4c75-b220-2d3b27521b5b" recursive="True" class="moose-katex-inline-equation" id="moose-equation-e089197d-ef7e-4c75-b220-2d3b27521b5b"><script>var element = document.getElementById("moose-equation-e089197d-ef7e-4c75-b220-2d3b27521b5b");katex.render("\\psi", element, {displayMode:false,throwOnError:false});</script></span>) and gradient (<span tex="\nabla \psi" bookmark="moose-equation-43f8dd5a-be81-4981-a6d8-22ce7fc3a99b" recursive="True" class="moose-katex-inline-equation" id="moose-equation-43f8dd5a-be81-4981-a6d8-22ce7fc3a99b"><script>var element = document.getElementById("moose-equation-43f8dd5a-be81-4981-a6d8-22ce7fc3a99b");katex.render("\\nabla \\psi", element, {displayMode:false,throwOnError:false});</script></span>) of the test functions at the q-points; indexed by <code>_i</code> and then <code>_qp</code> (i.e., <code>_test[_i][_qp]</code>). </p></li><li><p><code>_phi</code>, <code>_grad_phi</code>: value (<span tex="\phi" bookmark="moose-equation-cb1e5d9f-e7a6-4425-a57e-0f0bebb65ab7" recursive="True" class="moose-katex-inline-equation" id="moose-equation-cb1e5d9f-e7a6-4425-a57e-0f0bebb65ab7"><script>var element = document.getElementById("moose-equation-cb1e5d9f-e7a6-4425-a57e-0f0bebb65ab7");katex.render("\\phi", element, {displayMode:false,throwOnError:false});</script></span>) and gradient (<span tex="\nabla \phi" bookmark="moose-equation-dbcb8cb9-29a7-4db6-a0c3-c50d4c6c6b53" recursive="True" class="moose-katex-inline-equation" id="moose-equation-dbcb8cb9-29a7-4db6-a0c3-c50d4c6c6b53"><script>var element = document.getElementById("moose-equation-dbcb8cb9-29a7-4db6-a0c3-c50d4c6c6b53");katex.render("\\nabla \\phi", element, {displayMode:false,throwOnError:false});</script></span>) of the   trial functions at the q-points; indexed by <code>_j</code> and then <code>_qp</code> (i.e., <code>_phi[_j][_qp]</code>). </p></li><li><p><code>_q_point</code>: XYZ coordinates of the current quadrature point. </p></li><li><p><code>_current_elem</code>: pointer to the current element being operated on.</p></li></ul><p>Also available for override is <code>precalculateResidual()</code>, which is an insertion point immedtiately before computing the residual. This can be useful when computing cached values that are valid for all quadrature points.</p><p>Many other useful member variables exist that describe the <a href="../ray_tracing/Ray.html">Ray</a> segment. For more information, see <a href="../../syntax/RayKernels/index.html#using-a-raykernel">Using a RayKernel</a>.</p><div class="card moose-alert moose-alert-note"><div class="card-title moose-alert-title"><span class="moose-alert-title-brand">note</span></div><div class="card-content"><div class="moose-alert-content"><p><p>RZ and RSPEHRICAL coordinate changes are not valid for a <code>RayKernel</code>. This is because said coordinate systems have no way to represent a line source - one would end up with a plane/surface source or a volumetric source, respectively. This is why <code>_coord[_qp]</code> is not utilized in <code>RayKernel</code>.</p></p></div></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a href="#dd7a0546-5bdd-4500-84c8-6ecf2d039f92" class="tooltipped" data-position="left" data-tooltip="Description">Description</a></li></ul></div></div></div></div></main></div></body><script type="text/javascript" src="../../contrib/materialize/materialize.min.js"></script><script type="text/javascript" src="../../contrib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="../../contrib/prism/prism.min.js"></script><script type="text/javascript" src="../../js/init.js"></script><script type="text/javascript" src="../../js/navigation.js"></script><script type="text/javascript" src="../../contrib/fuse/fuse.min.js"></script><script type="text/javascript" src="../../js/search_index.js"></script><script type="text/javascript" src="../../js/sqa_moose.js"></script>